{"mappings":"IIyJI,EA4IA,E,S,E,C,E,O,G,E,U,C,E,O,C,C,C,S,E,C,E,O,I,I,E,C,E,E,C,E,C,E,E,C,E,Y,G,E,Q,E,C,IGrSA8lC,E,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,K,E,C,E,E,C,E,E,E,iB,CFAJ,SAAS,EAAsB,CAAG,EAChC,GAAI,AAAe,UAAf,OAAO,GAAoB,CAAC,EAC9B,MAAM,AAAI,MAAM,qCAAuC,EAE3D,CAEA,SAAS,EAAc,CAAM,EAC3B,GAAI,AAAkB,UAAlB,OAAO,EACT,MAAM,AAAI,MAAM,2BAA6B,EAEjD,C,M,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,E,Q,C,O,M,C,E,C,G,C,EJV8B,CAAC,MAAQ,yCAAyC,MAAQ,+CAA+C,MAAQ,4CAA4C,QAAQ,+CAA+C,MAAQ,4CAA4C,QAAQ,wDAAwD,MAAQ,qDAAqD,QAAQ,qDAAqD,QAAQ,kDAAkD,MAAQ,iDAAiD,QAAQ,6CAA6C,GIcxoB,IAAM,EAAc,QACd,EAAiB,WACjB,EAAkB,YAElB,EAAe,SAEf,EAAc,QAGd,EAAwB,cACxB,EAAW,OAEX,EAAyB,WACzB,EAAgB,WAChB,EAAiB,YACjB,EAAqB,eAoB3B,SAAS,EAAW,CAAM,EACxB,OAAO,AAdT,SAAiB,CAAG,CAAE,CAAI,EACxB,IAAM,EAAM,IAAI,IACV,EAAM,EAAE,CACd,IAAK,IAAM,KAAQ,EAAK,CACtB,IAAM,EAAM,EAAK,GACZ,EAAI,GAAG,CAAC,KACX,EAAI,GAAG,CAAC,GACR,EAAI,IAAI,CAAC,GAEb,CACA,OAAO,CACT,EAGgB,EAAQ,AAAA,GAAK,EAAE,OAAO,CACtC,CA0BA,IAAM,EAAwB,CAAC,EACzB,EAAgB,CAAC,EACjB,EAAmB,CAAC,EAE1B,SAAS,EAAuB,CAAO,CAAE,CAAM,CAAE,CAAG,EAGlD,EAAI,OAAO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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/runtime-cf138ac2e6cac17c.js","src/js/index.js","node_modules/emoji-picker-element/index.js","node_modules/emoji-picker-element/picker.js","node_modules/emoji-picker-element/database.js","node_modules/insert-text-at-cursor/dist/index.esm.js","node_modules/insert-text-at-cursor/index.js","node_modules/@georapbox/capture-photo-element/dist/capture-photo-defined.js","node_modules/@georapbox/capture-photo-element/src/utils/clamp.js","node_modules/@georapbox/capture-photo-element/src/capture-photo.js","node_modules/@georapbox/capture-photo-element/src/capture-photo-defined.js","node_modules/@georapbox/web-share-element/dist/is-web-share-supported.js","node_modules/@georapbox/web-share-element/src/is-web-share-supported.js","node_modules/@georapbox/theme-toggle-element/dist/theme-toggle-defined.js","node_modules/@georapbox/theme-toggle-element/src/theme-toggle.js","node_modules/@georapbox/theme-toggle-element/src/theme-toggle-defined.js","node_modules/@georapbox/web-share-element/dist/web-share-defined.js","node_modules/@georapbox/web-share-element/src/web-share.js","node_modules/@georapbox/web-share-element/src/web-share-defined.js","node_modules/@georapbox/modal-element/dist/modal-element-defined.js","node_modules/@georapbox/modal-element/src/modal-element.js","node_modules/@georapbox/modal-element/src/modal-element-defined.js","node_modules/@georapbox/files-dropzone-element/dist/files-dropzone-defined.js","node_modules/@georapbox/files-dropzone-element/src/utils/is-valid-file.js","node_modules/@georapbox/files-dropzone-element/src/utils/files-selector.js","node_modules/@georapbox/files-dropzone-element/src/files-dropzone.js","node_modules/@georapbox/files-dropzone-element/src/files-dropzone-defined.js","src/js/constants.js","src/js/utils/uid.js","src/js/utils/file-from-url.js","src/js/utils/storage.js","src/js/utils/is-solid-color-selected.js","src/js/custom-fonts.js","node_modules/@parcel/runtime-js/lib/runtime-254730ffcba926f0.js","node_modules/@parcel/runtime-js/lib/runtime-99911a6c68809a02.js","node_modules/@parcel/runtime-js/lib/runtime-ddd2a2546039f23a.js","node_modules/@parcel/runtime-js/lib/runtime-acbc61ec1577310e.js","node_modules/@parcel/runtime-js/lib/runtime-c92adcc19ee717c1.js","node_modules/@parcel/runtime-js/lib/runtime-4acdf0d691cec557.js","node_modules/@parcel/runtime-js/lib/runtime-336c69cdadc2d242.js","node_modules/@parcel/runtime-js/lib/runtime-d1a7adc1bd03d23c.js","node_modules/@parcel/runtime-js/lib/runtime-be8a40f8fb4eaa6a.js","node_modules/@parcel/runtime-js/lib/runtime-53d48e1efc4dffdc.js","node_modules/@parcel/runtime-js/lib/runtime-52b07ab2827f87c7.js","src/js/toast-alert.js","src/js/textbox.js","src/js/canvas.js"],"sourcesContent":["\nfunction $parcel$extendImportMap(map) {\n  Object.assign(parcelRequire.i ??= {}, map);\n}\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$resolve(url) {\n  url = parcelRequire.i?.[url] || url;\n  return new URL($parcel$distDir + url, import.meta.url).toString();\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  var $parcel$distDir = \"./\";\n\nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire5078\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire5078\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nvar $b34efa7e825b941c$exports = {};\n$parcel$extendImportMap({\n    \"lRBOd\": \"Pressuru.684952ea.ttf\",\n    \"hOimC\": \"Oswald-Regular.89ec7d89.ttf\",\n    \"c5nso\": \"Oswald-Bold.0f6a7ca6.ttf\",\n    \"917SN\": \"Roboto-Regular.ca197847.ttf\",\n    \"kCRYk\": \"Roboto-Bold.fdb9b54a.ttf\",\n    \"7mTjM\": \"RobotoCondensed-Regular.d585f5c7.ttf\",\n    \"bNJU7\": \"RobotoCondensed-Bold.e1f96d4b.ttf\",\n    \"2zTNP\": \"CourierPrime-Regular.3a25a501.ttf\",\n    \"6U5us\": \"CourierPrime-Bold.3d6bf689.ttf\",\n    \"jadM2\": \"OpenSans-Regular.edf9e01b.ttf\",\n    \"4rZHV\": \"OpenSans-Bold.8fceb72b.ttf\"\n});\n\nfunction $736431a7b9521865$var$assertNonEmptyString(str) {\n    if (typeof str !== 'string' || !str) throw new Error('expected a non-empty string, got: ' + str);\n}\nfunction $736431a7b9521865$var$assertNumber(number) {\n    if (typeof number !== 'number') throw new Error('expected a number, got: ' + number);\n}\nconst $736431a7b9521865$var$DB_VERSION_CURRENT = 1;\nconst $736431a7b9521865$var$DB_VERSION_INITIAL = 1;\nconst $736431a7b9521865$var$STORE_EMOJI = 'emoji';\nconst $736431a7b9521865$var$STORE_KEYVALUE = 'keyvalue';\nconst $736431a7b9521865$var$STORE_FAVORITES = 'favorites';\nconst $736431a7b9521865$var$FIELD_TOKENS = 'tokens';\nconst $736431a7b9521865$var$INDEX_TOKENS = 'tokens';\nconst $736431a7b9521865$var$FIELD_UNICODE = 'unicode';\nconst $736431a7b9521865$var$INDEX_COUNT = 'count';\nconst $736431a7b9521865$var$FIELD_GROUP = 'group';\nconst $736431a7b9521865$var$FIELD_ORDER = 'order';\nconst $736431a7b9521865$var$INDEX_GROUP_AND_ORDER = 'group-order';\nconst $736431a7b9521865$var$KEY_ETAG = 'eTag';\nconst $736431a7b9521865$var$KEY_URL = 'url';\nconst $736431a7b9521865$var$KEY_PREFERRED_SKINTONE = 'skinTone';\nconst $736431a7b9521865$var$MODE_READONLY = 'readonly';\nconst $736431a7b9521865$var$MODE_READWRITE = 'readwrite';\nconst $736431a7b9521865$var$INDEX_SKIN_UNICODE = 'skinUnicodes';\nconst $736431a7b9521865$var$FIELD_SKIN_UNICODE = 'skinUnicodes';\nconst $736431a7b9521865$var$DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst $736431a7b9521865$var$DEFAULT_LOCALE = 'en';\n// like lodash's uniqBy but much smaller\nfunction $736431a7b9521865$var$uniqBy(arr, func) {\n    const set = new Set();\n    const res = [];\n    for (const item of arr){\n        const key = func(item);\n        if (!set.has(key)) {\n            set.add(key);\n            res.push(item);\n        }\n    }\n    return res;\n}\nfunction $736431a7b9521865$var$uniqEmoji(emojis) {\n    return $736431a7b9521865$var$uniqBy(emojis, (_)=>_.unicode);\n}\nfunction $736431a7b9521865$var$initialMigration(db) {\n    function createObjectStore(name, keyPath, indexes) {\n        const store = keyPath ? db.createObjectStore(name, {\n            keyPath: keyPath\n        }) : db.createObjectStore(name);\n        if (indexes) for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes))store.createIndex(indexName, keyPath, {\n            multiEntry: multiEntry\n        });\n        return store;\n    }\n    createObjectStore($736431a7b9521865$var$STORE_KEYVALUE);\n    createObjectStore($736431a7b9521865$var$STORE_EMOJI, /* keyPath */ $736431a7b9521865$var$FIELD_UNICODE, {\n        [$736431a7b9521865$var$INDEX_TOKENS]: [\n            $736431a7b9521865$var$FIELD_TOKENS,\n            /* multiEntry */ true\n        ],\n        [$736431a7b9521865$var$INDEX_GROUP_AND_ORDER]: [\n            [\n                $736431a7b9521865$var$FIELD_GROUP,\n                $736431a7b9521865$var$FIELD_ORDER\n            ]\n        ],\n        [$736431a7b9521865$var$INDEX_SKIN_UNICODE]: [\n            $736431a7b9521865$var$FIELD_SKIN_UNICODE,\n            /* multiEntry */ true\n        ]\n    });\n    createObjectStore($736431a7b9521865$var$STORE_FAVORITES, undefined, {\n        [$736431a7b9521865$var$INDEX_COUNT]: [\n            ''\n        ]\n    });\n}\nconst $736431a7b9521865$var$openIndexedDBRequests = {};\nconst $736431a7b9521865$var$databaseCache = {};\nconst $736431a7b9521865$var$onCloseListeners = {};\nfunction $736431a7b9521865$var$handleOpenOrDeleteReq(resolve, reject, req) {\n    // These things are almost impossible to test with fakeIndexedDB sadly\n    /* istanbul ignore next */ req.onerror = ()=>reject(req.error);\n    /* istanbul ignore next */ req.onblocked = ()=>reject(new Error('IDB blocked'));\n    req.onsuccess = ()=>resolve(req.result);\n}\nasync function $736431a7b9521865$var$createDatabase(dbName) {\n    const db = await new Promise((resolve, reject)=>{\n        const req = indexedDB.open(dbName, $736431a7b9521865$var$DB_VERSION_CURRENT);\n        $736431a7b9521865$var$openIndexedDBRequests[dbName] = req;\n        req.onupgradeneeded = (e)=>{\n            // Technically there is only one version, so we don't need this `if` check\n            // But if an old version of the JS is in another browser tab\n            // and it gets upgraded in the future and we have a new DB version, well...\n            // better safe than sorry.\n            /* istanbul ignore else */ if (e.oldVersion < $736431a7b9521865$var$DB_VERSION_INITIAL) $736431a7b9521865$var$initialMigration(req.result);\n        };\n        $736431a7b9521865$var$handleOpenOrDeleteReq(resolve, reject, req);\n    });\n    // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n    // No need for removeEventListener, because once the DB can no longer\n    // fire \"close\" events, it will auto-GC.\n    db.onclose = ()=>$736431a7b9521865$var$closeDatabase(dbName);\n    return db;\n}\nfunction $736431a7b9521865$var$openDatabase(dbName) {\n    if (!$736431a7b9521865$var$databaseCache[dbName]) $736431a7b9521865$var$databaseCache[dbName] = $736431a7b9521865$var$createDatabase(dbName);\n    return $736431a7b9521865$var$databaseCache[dbName];\n}\nfunction $736431a7b9521865$var$dbPromise(db, storeName, readOnlyOrReadWrite, cb) {\n    return new Promise((resolve, reject)=>{\n        // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n        // are really irreplaceable data. IndexedDB is just a cache in this case.\n        const txn = db.transaction(storeName, readOnlyOrReadWrite, {\n            durability: 'relaxed'\n        });\n        const store = typeof storeName === 'string' ? txn.objectStore(storeName) : storeName.map((name)=>txn.objectStore(name));\n        let res;\n        cb(store, txn, (result)=>{\n            res = result;\n        });\n        txn.oncomplete = ()=>resolve(res);\n        /* istanbul ignore next */ txn.onerror = ()=>reject(txn.error);\n    });\n}\nfunction $736431a7b9521865$var$closeDatabase(dbName) {\n    // close any open requests\n    const req = $736431a7b9521865$var$openIndexedDBRequests[dbName];\n    const db = req && req.result;\n    if (db) {\n        db.close();\n        const listeners = $736431a7b9521865$var$onCloseListeners[dbName];\n        /* istanbul ignore else */ if (listeners) for (const listener of listeners)listener();\n    }\n    delete $736431a7b9521865$var$openIndexedDBRequests[dbName];\n    delete $736431a7b9521865$var$databaseCache[dbName];\n    delete $736431a7b9521865$var$onCloseListeners[dbName];\n}\nfunction $736431a7b9521865$var$deleteDatabase(dbName) {\n    return new Promise((resolve, reject)=>{\n        // close any open requests\n        $736431a7b9521865$var$closeDatabase(dbName);\n        const req = indexedDB.deleteDatabase(dbName);\n        $736431a7b9521865$var$handleOpenOrDeleteReq(resolve, reject, req);\n    });\n}\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction $736431a7b9521865$var$addOnCloseListener(dbName, listener) {\n    let listeners = $736431a7b9521865$var$onCloseListeners[dbName];\n    if (!listeners) listeners = $736431a7b9521865$var$onCloseListeners[dbName] = [];\n    listeners.push(listener);\n}\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst $736431a7b9521865$var$irregularEmoticons = new Set([\n    ':D',\n    'XD',\n    \":'D\",\n    'O:)',\n    ':X',\n    ':P',\n    ';P',\n    'XP',\n    ':L',\n    ':Z',\n    ':j',\n    '8D',\n    'XO',\n    '8)',\n    ':B',\n    ':O',\n    ':S',\n    \":'o\",\n    'Dx',\n    'X(',\n    'D:',\n    ':C',\n    '>0)',\n    ':3',\n    '</3',\n    '<3',\n    '\\\\M/',\n    ':E',\n    '8#'\n]);\nfunction $736431a7b9521865$var$extractTokens(str) {\n    return str.split(/[\\s_]+/).map((word)=>{\n        if (!word.match(/\\w/) || $736431a7b9521865$var$irregularEmoticons.has(word)) // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase();\n        return word.replace(/[)(:,]/g, '').replace(//g, \"'\").toLowerCase();\n    }).filter(Boolean);\n}\nconst $736431a7b9521865$var$MIN_SEARCH_TEXT_LENGTH = 2;\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction $736431a7b9521865$var$normalizeTokens(str) {\n    return str.filter(Boolean).map((_)=>_.toLowerCase()).filter((_)=>_.length >= $736431a7b9521865$var$MIN_SEARCH_TEXT_LENGTH);\n}\n// Transform emoji data for storage in IDB\nfunction $736431a7b9521865$var$transformEmojiData(emojiData) {\n    const res = emojiData.map(({ annotation: annotation, emoticon: emoticon, group: group, order: order, shortcodes: shortcodes, skins: skins, tags: tags, emoji: emoji, version: version })=>{\n        const tokens = [\n            ...new Set($736431a7b9521865$var$normalizeTokens([\n                ...(shortcodes || []).map($736431a7b9521865$var$extractTokens).flat(),\n                ...(tags || []).map($736431a7b9521865$var$extractTokens).flat(),\n                ...$736431a7b9521865$var$extractTokens(annotation),\n                emoticon\n            ]))\n        ].sort();\n        const res = {\n            annotation: annotation,\n            group: group,\n            order: order,\n            tags: tags,\n            tokens: tokens,\n            unicode: emoji,\n            version: version\n        };\n        if (emoticon) res.emoticon = emoticon;\n        if (shortcodes) res.shortcodes = shortcodes;\n        if (skins) {\n            res.skinTones = [];\n            res.skinUnicodes = [];\n            res.skinVersions = [];\n            for (const { tone: tone, emoji: emoji, version: version } of skins){\n                res.skinTones.push(tone);\n                res.skinUnicodes.push(emoji);\n                res.skinVersions.push(version);\n            }\n        }\n        return res;\n    });\n    return res;\n}\n// helper functions that help compress the code better\nfunction $736431a7b9521865$var$callStore(store, method, key, cb) {\n    store[method](key).onsuccess = (e)=>cb && cb(e.target.result);\n}\nfunction $736431a7b9521865$var$getIDB(store, key, cb) {\n    $736431a7b9521865$var$callStore(store, 'get', key, cb);\n}\nfunction $736431a7b9521865$var$getAllIDB(store, key, cb) {\n    $736431a7b9521865$var$callStore(store, 'getAll', key, cb);\n}\nfunction $736431a7b9521865$var$commit(txn) {\n    /* istanbul ignore else */ if (txn.commit) txn.commit();\n}\n// like lodash's minBy\nfunction $736431a7b9521865$var$minBy(array, func) {\n    let minItem = array[0];\n    for(let i = 1; i < array.length; i++){\n        const item = array[i];\n        if (func(minItem) > func(item)) minItem = item;\n    }\n    return minItem;\n}\n// return an array of results representing all items that are found in each one of the arrays\n//\nfunction $736431a7b9521865$var$findCommonMembers(arrays, uniqByFunc) {\n    const shortestArray = $736431a7b9521865$var$minBy(arrays, (_)=>_.length);\n    const results = [];\n    for (const item of shortestArray)// if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some((array)=>array.findIndex((_)=>uniqByFunc(_) === uniqByFunc(item)) === -1)) results.push(item);\n    return results;\n}\nasync function $736431a7b9521865$var$isEmpty(db) {\n    return !await $736431a7b9521865$var$get(db, $736431a7b9521865$var$STORE_KEYVALUE, $736431a7b9521865$var$KEY_URL);\n}\nasync function $736431a7b9521865$var$hasData(db, url, eTag) {\n    const [oldETag, oldUrl] = await Promise.all([\n        $736431a7b9521865$var$KEY_ETAG,\n        $736431a7b9521865$var$KEY_URL\n    ].map((key)=>$736431a7b9521865$var$get(db, $736431a7b9521865$var$STORE_KEYVALUE, key)));\n    return oldETag === eTag && oldUrl === url;\n}\nasync function $736431a7b9521865$var$doFullDatabaseScanForSingleResult(db, predicate) {\n    // This batching algorithm is just a perf improvement over a basic\n    // cursor. The BATCH_SIZE is an estimate of what would give the best\n    // perf for doing a full DB scan (worst case).\n    //\n    // Mini-benchmark for determining the best batch size:\n    //\n    // PERF=1 pnpm build:rollup && pnpm test:adhoc\n    //\n    // (async () => {\n    //   performance.mark('start')\n    //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n    //   performance.measure('total', 'start')\n    //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n    // })()\n    const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n    return $736431a7b9521865$var$dbPromise(db, $736431a7b9521865$var$STORE_EMOJI, $736431a7b9521865$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        let lastKey;\n        const processNextBatch = ()=>{\n            emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = (e)=>{\n                const results = e.target.result;\n                for (const result of results){\n                    lastKey = result.unicode;\n                    if (predicate(result)) return cb(result);\n                }\n                if (results.length < BATCH_SIZE) return cb();\n                processNextBatch();\n            };\n        };\n        processNextBatch();\n    });\n}\nasync function $736431a7b9521865$var$loadData(db, emojiData, url, eTag) {\n    {\n        const transformedData = $736431a7b9521865$var$transformEmojiData(emojiData);\n        await $736431a7b9521865$var$dbPromise(db, [\n            $736431a7b9521865$var$STORE_EMOJI,\n            $736431a7b9521865$var$STORE_KEYVALUE\n        ], $736431a7b9521865$var$MODE_READWRITE, ([emojiStore, metaStore], txn)=>{\n            let oldETag;\n            let oldUrl;\n            let todo = 0;\n            function checkFetched() {\n                if (++todo === 2) onFetched();\n            }\n            function onFetched() {\n                if (oldETag === eTag && oldUrl === url) // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n                return;\n                // delete old data\n                emojiStore.clear();\n                // insert new data\n                for (const data of transformedData)emojiStore.put(data);\n                metaStore.put(eTag, $736431a7b9521865$var$KEY_ETAG);\n                metaStore.put(url, $736431a7b9521865$var$KEY_URL);\n                $736431a7b9521865$var$commit(txn);\n            }\n            $736431a7b9521865$var$getIDB(metaStore, $736431a7b9521865$var$KEY_ETAG, (result)=>{\n                oldETag = result;\n                checkFetched();\n            });\n            $736431a7b9521865$var$getIDB(metaStore, $736431a7b9521865$var$KEY_URL, (result)=>{\n                oldUrl = result;\n                checkFetched();\n            });\n        });\n    }\n}\nasync function $736431a7b9521865$var$getEmojiByGroup(db, group) {\n    return $736431a7b9521865$var$dbPromise(db, $736431a7b9521865$var$STORE_EMOJI, $736431a7b9521865$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        const range = IDBKeyRange.bound([\n            group,\n            0\n        ], [\n            group + 1,\n            0\n        ], false, true);\n        $736431a7b9521865$var$getAllIDB(emojiStore.index($736431a7b9521865$var$INDEX_GROUP_AND_ORDER), range, cb);\n    });\n}\nasync function $736431a7b9521865$var$getEmojiBySearchQuery(db, query) {\n    const tokens = $736431a7b9521865$var$normalizeTokens($736431a7b9521865$var$extractTokens(query));\n    if (!tokens.length) return [];\n    return $736431a7b9521865$var$dbPromise(db, $736431a7b9521865$var$STORE_EMOJI, $736431a7b9521865$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        // get all results that contain all tokens (i.e. an AND query)\n        const intermediateResults = [];\n        const checkDone = ()=>{\n            if (intermediateResults.length === tokens.length) onDone();\n        };\n        const onDone = ()=>{\n            const results = $736431a7b9521865$var$findCommonMembers(intermediateResults, (_)=>_.unicode);\n            cb(results.sort((a, b)=>a.order < b.order ? -1 : 1));\n        };\n        for(let i = 0; i < tokens.length; i++){\n            const token = tokens[i];\n            const range = i === tokens.length - 1 ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\n             : IDBKeyRange.only(token); // treat all other tokens as an exact match\n            $736431a7b9521865$var$getAllIDB(emojiStore.index($736431a7b9521865$var$INDEX_TOKENS), range, (result)=>{\n                intermediateResults.push(result);\n                checkDone();\n            });\n        }\n    });\n}\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function $736431a7b9521865$var$getEmojiByShortcode(db, shortcode) {\n    const emojis = await $736431a7b9521865$var$getEmojiBySearchQuery(db, shortcode);\n    // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n    // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n    // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n    // index on shortcodes.\n    if (!emojis.length) {\n        const predicate = (_)=>(_.shortcodes || []).includes(shortcode.toLowerCase());\n        return await $736431a7b9521865$var$doFullDatabaseScanForSingleResult(db, predicate) || null;\n    }\n    return emojis.filter((_)=>{\n        const lowerShortcodes = (_.shortcodes || []).map((_)=>_.toLowerCase());\n        return lowerShortcodes.includes(shortcode.toLowerCase());\n    })[0] || null;\n}\nasync function $736431a7b9521865$var$getEmojiByUnicode(db, unicode) {\n    return $736431a7b9521865$var$dbPromise(db, $736431a7b9521865$var$STORE_EMOJI, $736431a7b9521865$var$MODE_READONLY, (emojiStore, txn, cb)=>$736431a7b9521865$var$getIDB(emojiStore, unicode, (result)=>{\n            if (result) return cb(result);\n            $736431a7b9521865$var$getIDB(emojiStore.index($736431a7b9521865$var$INDEX_SKIN_UNICODE), unicode, (result)=>cb(result || null));\n        }));\n}\nfunction $736431a7b9521865$var$get(db, storeName, key) {\n    return $736431a7b9521865$var$dbPromise(db, storeName, $736431a7b9521865$var$MODE_READONLY, (store, txn, cb)=>$736431a7b9521865$var$getIDB(store, key, cb));\n}\nfunction $736431a7b9521865$var$set(db, storeName, key, value) {\n    return $736431a7b9521865$var$dbPromise(db, storeName, $736431a7b9521865$var$MODE_READWRITE, (store, txn)=>{\n        store.put(value, key);\n        $736431a7b9521865$var$commit(txn);\n    });\n}\nfunction $736431a7b9521865$var$incrementFavoriteEmojiCount(db, unicode) {\n    return $736431a7b9521865$var$dbPromise(db, $736431a7b9521865$var$STORE_FAVORITES, $736431a7b9521865$var$MODE_READWRITE, (store, txn)=>$736431a7b9521865$var$getIDB(store, unicode, (result)=>{\n            store.put((result || 0) + 1, unicode);\n            $736431a7b9521865$var$commit(txn);\n        }));\n}\nfunction $736431a7b9521865$var$getTopFavoriteEmoji(db, customEmojiIndex, limit) {\n    if (limit === 0) return [];\n    return $736431a7b9521865$var$dbPromise(db, [\n        $736431a7b9521865$var$STORE_FAVORITES,\n        $736431a7b9521865$var$STORE_EMOJI\n    ], $736431a7b9521865$var$MODE_READONLY, ([favoritesStore, emojiStore], txn, cb)=>{\n        const results = [];\n        favoritesStore.index($736431a7b9521865$var$INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = (e)=>{\n            const cursor = e.target.result;\n            if (!cursor) return cb(results);\n            function addResult(result) {\n                results.push(result);\n                if (results.length === limit) return cb(results) // done, reached the limit\n                ;\n                cursor.continue();\n            }\n            const unicodeOrName = cursor.primaryKey;\n            const custom = customEmojiIndex.byName(unicodeOrName);\n            if (custom) return addResult(custom);\n            // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n            // but my testing suggests it's not actually faster.\n            $736431a7b9521865$var$getIDB(emojiStore, unicodeOrName, (emoji)=>{\n                if (emoji) return addResult(emoji);\n                // emoji not found somehow, ignore (may happen if custom emoji change)\n                cursor.continue();\n            });\n        };\n    });\n}\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\nconst $736431a7b9521865$var$CODA_MARKER = ''; // marks the end of the string\nfunction $736431a7b9521865$var$trie(arr, itemToTokens) {\n    const map = new Map();\n    for (const item of arr){\n        const tokens = itemToTokens(item);\n        for (const token of tokens){\n            let currentMap = map;\n            for(let i = 0; i < token.length; i++){\n                const char = token.charAt(i);\n                let nextMap = currentMap.get(char);\n                if (!nextMap) {\n                    nextMap = new Map();\n                    currentMap.set(char, nextMap);\n                }\n                currentMap = nextMap;\n            }\n            let valuesAtCoda = currentMap.get($736431a7b9521865$var$CODA_MARKER);\n            if (!valuesAtCoda) {\n                valuesAtCoda = [];\n                currentMap.set($736431a7b9521865$var$CODA_MARKER, valuesAtCoda);\n            }\n            valuesAtCoda.push(item);\n        }\n    }\n    const search = (query, exact)=>{\n        let currentMap = map;\n        for(let i = 0; i < query.length; i++){\n            const char = query.charAt(i);\n            const nextMap = currentMap.get(char);\n            if (nextMap) currentMap = nextMap;\n            else return [];\n        }\n        if (exact) {\n            const results = currentMap.get($736431a7b9521865$var$CODA_MARKER);\n            return results || [];\n        }\n        const results = [];\n        // traverse\n        const queue = [\n            currentMap\n        ];\n        while(queue.length){\n            const currentMap = queue.shift();\n            const entriesSortedByKey = [\n                ...currentMap.entries()\n            ].sort((a, b)=>a[0] < b[0] ? -1 : 1);\n            for (const [key, value] of entriesSortedByKey)if (key === $736431a7b9521865$var$CODA_MARKER) results.push(...value);\n            else queue.push(value);\n        }\n        return results;\n    };\n    return search;\n}\nconst $736431a7b9521865$var$requiredKeys$1 = [\n    'name',\n    'url'\n];\nfunction $736431a7b9521865$var$assertCustomEmojis(customEmojis) {\n    const isArray = customEmojis && Array.isArray(customEmojis);\n    const firstItemIsFaulty = isArray && customEmojis.length && (!customEmojis[0] || $736431a7b9521865$var$requiredKeys$1.some((key)=>!(key in customEmojis[0])));\n    if (!isArray || firstItemIsFaulty) throw new Error('Custom emojis are in the wrong format');\n}\nfunction $736431a7b9521865$var$customEmojiIndex(customEmojis) {\n    $736431a7b9521865$var$assertCustomEmojis(customEmojis);\n    const sortByName = (a, b)=>a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n    //\n    // all()\n    //\n    const all = customEmojis.sort(sortByName);\n    //\n    // search()\n    //\n    const emojiToTokens = (emoji)=>{\n        const set = new Set();\n        if (emoji.shortcodes) {\n            for (const shortcode of emoji.shortcodes)for (const token of $736431a7b9521865$var$extractTokens(shortcode))set.add(token);\n        }\n        return set;\n    };\n    const searchTrie = $736431a7b9521865$var$trie(customEmojis, emojiToTokens);\n    const searchByExactMatch = (_)=>searchTrie(_, true);\n    const searchByPrefix = (_)=>searchTrie(_, false);\n    // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n    // is treated as a prefix search, but every other one is treated as an exact match.\n    // Then we AND the results together\n    const search = (query)=>{\n        const tokens = $736431a7b9521865$var$extractTokens(query);\n        const intermediateResults = tokens.map((token, i)=>(i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token));\n        return $736431a7b9521865$var$findCommonMembers(intermediateResults, (_)=>_.name).sort(sortByName);\n    };\n    //\n    // byShortcode, byName\n    //\n    const shortcodeToEmoji = new Map();\n    const nameToEmoji = new Map();\n    for (const customEmoji of customEmojis){\n        nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n        for (const shortcode of customEmoji.shortcodes || [])shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n    const byShortcode = (shortcode)=>shortcodeToEmoji.get(shortcode.toLowerCase());\n    const byName = (name)=>nameToEmoji.get(name.toLowerCase());\n    return {\n        all: all,\n        search: search,\n        byShortcode: byShortcode,\n        byName: byName\n    };\n}\nconst $736431a7b9521865$var$isFirefoxContentScript = typeof wrappedJSObject !== 'undefined';\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction $736431a7b9521865$var$cleanEmoji(emoji) {\n    if (!emoji) return emoji;\n    // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\n    // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\n    /* istanbul ignore if */ if ($736431a7b9521865$var$isFirefoxContentScript) emoji = structuredClone(emoji);\n    delete emoji.tokens;\n    if (emoji.skinTones) {\n        const len = emoji.skinTones.length;\n        emoji.skins = Array(len);\n        for(let i = 0; i < len; i++)emoji.skins[i] = {\n            tone: emoji.skinTones[i],\n            unicode: emoji.skinUnicodes[i],\n            version: emoji.skinVersions[i]\n        };\n        delete emoji.skinTones;\n        delete emoji.skinUnicodes;\n        delete emoji.skinVersions;\n    }\n    return emoji;\n}\nfunction $736431a7b9521865$var$warnETag(eTag) {\n    if (!eTag) console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\n}\nconst $736431a7b9521865$var$requiredKeys = [\n    'annotation',\n    'emoji',\n    'group',\n    'order',\n    'version'\n];\nfunction $736431a7b9521865$var$assertEmojiData(emojiData) {\n    if (!emojiData || !Array.isArray(emojiData) || !emojiData[0] || typeof emojiData[0] !== 'object' || $736431a7b9521865$var$requiredKeys.some((key)=>!(key in emojiData[0]))) throw new Error('Emoji data is in the wrong format');\n}\nfunction $736431a7b9521865$var$assertStatus(response, dataSource) {\n    if (Math.floor(response.status / 100) !== 2) throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status);\n}\nasync function $736431a7b9521865$var$getETag(dataSource) {\n    const response = await fetch(dataSource, {\n        method: 'HEAD'\n    });\n    $736431a7b9521865$var$assertStatus(response, dataSource);\n    const eTag = response.headers.get('etag');\n    $736431a7b9521865$var$warnETag(eTag);\n    return eTag;\n}\nasync function $736431a7b9521865$var$getETagAndData(dataSource) {\n    const response = await fetch(dataSource);\n    $736431a7b9521865$var$assertStatus(response, dataSource);\n    const eTag = response.headers.get('etag');\n    $736431a7b9521865$var$warnETag(eTag);\n    const emojiData = await response.json();\n    $736431a7b9521865$var$assertEmojiData(emojiData);\n    return [\n        eTag,\n        emojiData\n    ];\n}\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate \\_()_/\n/** @private */ /**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */ function $736431a7b9521865$var$arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while(++i < length)binary += String.fromCharCode(bytes[i]);\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */ function $736431a7b9521865$var$binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while(++i < length)arr[i] = binary.charCodeAt(i);\n    return buf;\n}\n// generate a checksum based on the stringified JSON\nasync function $736431a7b9521865$var$jsonChecksum(object) {\n    const inString = JSON.stringify(object);\n    let inBuffer = $736431a7b9521865$var$binaryStringToArrayBuffer(inString);\n    // this does not need to be cryptographically secure, SHA-1 is fine\n    const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\n    const outBinString = $736431a7b9521865$var$arrayBufferToBinaryString(outBuffer);\n    const res = btoa(outBinString);\n    return res;\n}\nasync function $736431a7b9521865$var$doCheckForUpdates(db, dataSource) {\n    // just do a simple HEAD request first to see if the eTags match\n    let emojiData;\n    let eTag = await $736431a7b9521865$var$getETag(dataSource);\n    if (!eTag) {\n        const eTagAndData = await $736431a7b9521865$var$getETagAndData(dataSource);\n        eTag = eTagAndData[0];\n        emojiData = eTagAndData[1];\n        if (!eTag) eTag = await $736431a7b9521865$var$jsonChecksum(emojiData);\n    }\n    if (await $736431a7b9521865$var$hasData(db, dataSource, eTag)) ;\n    else {\n        if (!emojiData) {\n            const eTagAndData = await $736431a7b9521865$var$getETagAndData(dataSource);\n            emojiData = eTagAndData[1];\n        }\n        await $736431a7b9521865$var$loadData(db, emojiData, dataSource, eTag);\n    }\n}\nasync function $736431a7b9521865$var$loadDataForFirstTime(db, dataSource) {\n    let [eTag, emojiData] = await $736431a7b9521865$var$getETagAndData(dataSource);\n    if (!eTag) // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await $736431a7b9521865$var$jsonChecksum(emojiData);\n    await $736431a7b9521865$var$loadData(db, emojiData, dataSource, eTag);\n}\nasync function $736431a7b9521865$var$checkForUpdates(db, dataSource) {\n    try {\n        await $736431a7b9521865$var$doCheckForUpdates(db, dataSource);\n    } catch (err) {\n        // Checking for updates is not a critical operation, and it can fail if e.g. the picker is quickly removed and\n        // re-added to the DOM. In those cases, we may get an IndexedDB InvalidStateError because we are attempting to close\n        // the database connection, possibly while another request is inflight. So there's effectively no way to prevent\n        // InvalidStateErrors unless we were to carefully sequence our IndexedDB operations. Much more simply, we can just\n        // ignore IndexedDB InvalidStateErrors here and give users one less useless error message in their console.\n        if (err.name !== 'InvalidStateError') throw err;\n    }\n}\nclass $736431a7b9521865$export$2e2bcd8739ae039 {\n    constructor({ dataSource: dataSource = $736431a7b9521865$var$DEFAULT_DATA_SOURCE, locale: locale = $736431a7b9521865$var$DEFAULT_LOCALE, customEmoji: customEmoji = [] } = {}){\n        this.dataSource = dataSource;\n        this.locale = locale;\n        this._dbName = `emoji-picker-element-${this.locale}`;\n        this._db = undefined;\n        this._lazyUpdate = undefined;\n        this._custom = $736431a7b9521865$var$customEmojiIndex(customEmoji);\n        this._clear = this._clear.bind(this);\n        this._ready = this._init();\n    }\n    async _init() {\n        const db = this._db = await $736431a7b9521865$var$openDatabase(this._dbName);\n        $736431a7b9521865$var$addOnCloseListener(this._dbName, this._clear);\n        const dataSource = this.dataSource;\n        const empty = await $736431a7b9521865$var$isEmpty(db);\n        if (empty) await $736431a7b9521865$var$loadDataForFirstTime(db, dataSource);\n        else this._lazyUpdate = $736431a7b9521865$var$checkForUpdates(db, dataSource);\n    }\n    async ready() {\n        const checkReady = async ()=>{\n            if (!this._ready) this._ready = this._init();\n            return this._ready;\n        };\n        await checkReady();\n        // There's a possibility of a race condition where the element gets added, removed, and then added again\n        // with a particular timing, which would set the _db to undefined.\n        // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n        if (!this._db) await checkReady();\n    }\n    async getEmojiByGroup(group) {\n        $736431a7b9521865$var$assertNumber(group);\n        await this.ready();\n        return $736431a7b9521865$var$uniqEmoji(await $736431a7b9521865$var$getEmojiByGroup(this._db, group)).map($736431a7b9521865$var$cleanEmoji);\n    }\n    async getEmojiBySearchQuery(query) {\n        $736431a7b9521865$var$assertNonEmptyString(query);\n        await this.ready();\n        const customs = this._custom.search(query);\n        const natives = $736431a7b9521865$var$uniqEmoji(await $736431a7b9521865$var$getEmojiBySearchQuery(this._db, query)).map($736431a7b9521865$var$cleanEmoji);\n        return [\n            ...customs,\n            ...natives\n        ];\n    }\n    async getEmojiByShortcode(shortcode) {\n        $736431a7b9521865$var$assertNonEmptyString(shortcode);\n        await this.ready();\n        const custom = this._custom.byShortcode(shortcode);\n        if (custom) return custom;\n        return $736431a7b9521865$var$cleanEmoji(await $736431a7b9521865$var$getEmojiByShortcode(this._db, shortcode));\n    }\n    async getEmojiByUnicodeOrName(unicodeOrName) {\n        $736431a7b9521865$var$assertNonEmptyString(unicodeOrName);\n        await this.ready();\n        const custom = this._custom.byName(unicodeOrName);\n        if (custom) return custom;\n        return $736431a7b9521865$var$cleanEmoji(await $736431a7b9521865$var$getEmojiByUnicode(this._db, unicodeOrName));\n    }\n    async getPreferredSkinTone() {\n        await this.ready();\n        return await $736431a7b9521865$var$get(this._db, $736431a7b9521865$var$STORE_KEYVALUE, $736431a7b9521865$var$KEY_PREFERRED_SKINTONE) || 0;\n    }\n    async setPreferredSkinTone(skinTone) {\n        $736431a7b9521865$var$assertNumber(skinTone);\n        await this.ready();\n        return $736431a7b9521865$var$set(this._db, $736431a7b9521865$var$STORE_KEYVALUE, $736431a7b9521865$var$KEY_PREFERRED_SKINTONE, skinTone);\n    }\n    async incrementFavoriteEmojiCount(unicodeOrName) {\n        $736431a7b9521865$var$assertNonEmptyString(unicodeOrName);\n        await this.ready();\n        return $736431a7b9521865$var$incrementFavoriteEmojiCount(this._db, unicodeOrName);\n    }\n    async getTopFavoriteEmoji(limit) {\n        $736431a7b9521865$var$assertNumber(limit);\n        await this.ready();\n        return (await $736431a7b9521865$var$getTopFavoriteEmoji(this._db, this._custom, limit)).map($736431a7b9521865$var$cleanEmoji);\n    }\n    set customEmoji(customEmojis) {\n        this._custom = $736431a7b9521865$var$customEmojiIndex(customEmojis);\n    }\n    get customEmoji() {\n        return this._custom.all;\n    }\n    async _shutdown() {\n        await this.ready(); // reopen if we've already been closed/deleted\n        try {\n            await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n        } catch (err) {}\n    }\n    // clear references to IDB, e.g. during a close event\n    _clear() {\n        // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n        // The memory leak tests prove this is unnecessary. It's because:\n        // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n        // 2) we clear the manual close listeners in databaseLifecycle.js.\n        this._db = this._ready = this._lazyUpdate = undefined;\n    }\n    async close() {\n        await this._shutdown();\n        await $736431a7b9521865$var$closeDatabase(this._dbName);\n    }\n    async delete() {\n        await this._shutdown();\n        await $736431a7b9521865$var$deleteDatabase(this._dbName);\n    }\n}\n\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst $9e9d3488b14d9168$var$allGroups = [\n    [\n        -1,\n        \"\\u2728\",\n        'custom'\n    ],\n    [\n        0,\n        \"\\uD83D\\uDE00\",\n        'smileys-emotion'\n    ],\n    [\n        1,\n        \"\\uD83D\\uDC4B\",\n        'people-body'\n    ],\n    [\n        3,\n        \"\\uD83D\\uDC31\",\n        'animals-nature'\n    ],\n    [\n        4,\n        \"\\uD83C\\uDF4E\",\n        'food-drink'\n    ],\n    [\n        5,\n        \"\\uD83C\\uDFE0\\uFE0F\",\n        'travel-places'\n    ],\n    [\n        6,\n        \"\\u26BD\",\n        'activities'\n    ],\n    [\n        7,\n        \"\\uD83D\\uDCDD\",\n        'objects'\n    ],\n    [\n        8,\n        \"\\u26D4\\uFE0F\",\n        'symbols'\n    ],\n    [\n        9,\n        \"\\uD83C\\uDFC1\",\n        'flags'\n    ]\n].map(([id, emoji, name])=>({\n        id: id,\n        emoji: emoji,\n        name: name\n    }));\nconst $9e9d3488b14d9168$var$groups = $9e9d3488b14d9168$var$allGroups.slice(1);\nconst $9e9d3488b14d9168$var$MIN_SEARCH_TEXT_LENGTH = 2;\nconst $9e9d3488b14d9168$var$NUM_SKIN_TONES = 6;\n/* istanbul ignore next */ const $9e9d3488b14d9168$var$rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n// check for ZWJ (zero width joiner) character\nfunction $9e9d3488b14d9168$var$hasZwj(emoji) {\n    return emoji.unicode.includes('\\u200d');\n}\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst $9e9d3488b14d9168$var$versionsAndTestEmoji = {\n    \"\\uD83E\\uDEEA\": 17,\n    \"\\uD83E\\uDEE9\": 16,\n    \"\\uD83E\\uDEE8\": 15.1,\n    \"\\uD83E\\uDEE0\": 14,\n    \"\\uD83E\\uDD72\": 13.1,\n    \"\\uD83E\\uDD7B\": 12.1,\n    \"\\uD83E\\uDD70\": 11,\n    \"\\uD83E\\uDD29\": 5,\n    \"\\uD83D\\uDC71\\u200D\\u2640\\uFE0F\": 4,\n    \"\\uD83E\\uDD23\": 3,\n    \"\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8\\uFE0F\": 2,\n    \"\\uD83D\\uDE00\": 1,\n    \"\\uD83D\\uDE10\\uFE0F\": 0.7,\n    \"\\uD83D\\uDE03\": 0.6\n};\nconst $9e9d3488b14d9168$var$TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst $9e9d3488b14d9168$var$DEFAULT_SKIN_TONE_EMOJI = \"\\uD83D\\uDD90\\uFE0F\";\nconst $9e9d3488b14d9168$var$DEFAULT_NUM_COLUMNS = 8;\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst $9e9d3488b14d9168$var$MOST_COMMONLY_USED_EMOJI = [\n    \"\\uD83D\\uDE0A\",\n    \"\\uD83D\\uDE12\",\n    \"\\u2764\\uFE0F\",\n    \"\\uD83D\\uDC4D\\uFE0F\",\n    \"\\uD83D\\uDE0D\",\n    \"\\uD83D\\uDE02\",\n    \"\\uD83D\\uDE2D\",\n    \"\\u263A\\uFE0F\",\n    \"\\uD83D\\uDE14\",\n    \"\\uD83D\\uDE29\",\n    \"\\uD83D\\uDE0F\",\n    \"\\uD83D\\uDC95\",\n    \"\\uD83D\\uDE4C\",\n    \"\\uD83D\\uDE18\"\n];\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst $9e9d3488b14d9168$var$FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n/* istanbul ignore next */ const $9e9d3488b14d9168$var$DEFAULT_CATEGORY_SORTING = (a, b)=>a < b ? -1 : a > b ? 1 : 0;\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n// and https://www.npmjs.com/package/if-emoji for inspiration\n// This implementation is largely borrowed from if-emoji, adding the font-family\nconst $9e9d3488b14d9168$var$getTextFeature = (text, color)=>{\n    const canvas = document.createElement('canvas');\n    canvas.width = canvas.height = 1;\n    const ctx = canvas.getContext('2d', {\n        // Improves the performance of `getImageData()`\n        // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getContextAttributes#willreadfrequently\n        willReadFrequently: true\n    });\n    ctx.textBaseline = 'top';\n    ctx.font = `100px ${$9e9d3488b14d9168$var$FONT_FAMILY}`;\n    ctx.fillStyle = color;\n    ctx.scale(0.01, 0.01);\n    ctx.fillText(text, 0, 0);\n    return ctx.getImageData(0, 0, 1, 1).data;\n};\nconst $9e9d3488b14d9168$var$compareFeatures = (feature1, feature2)=>{\n    const feature1Str = [\n        ...feature1\n    ].join(',');\n    const feature2Str = [\n        ...feature2\n    ].join(',');\n    // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n    // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n    // 0,0,0,61 - there is a transparency here.\n    return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,');\n};\nfunction $9e9d3488b14d9168$var$testColorEmojiSupported(text) {\n    // Render white and black and then compare them to each other and ensure they're the same\n    // color, and neither one is black. This shows that the emoji was rendered in color.\n    const feature1 = $9e9d3488b14d9168$var$getTextFeature(text, '#000');\n    const feature2 = $9e9d3488b14d9168$var$getTextFeature(text, '#fff');\n    return feature1 && feature2 && $9e9d3488b14d9168$var$compareFeatures(feature1, feature2);\n}\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n// different emoji releases to determine what the font supports\nfunction $9e9d3488b14d9168$var$determineEmojiSupportLevel() {\n    const entries = Object.entries($9e9d3488b14d9168$var$versionsAndTestEmoji);\n    try {\n        // start with latest emoji and work backwards\n        for (const [emoji, version] of entries){\n            if ($9e9d3488b14d9168$var$testColorEmojiSupported(emoji)) return version;\n        }\n    } catch (e) {} finally{}\n    // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n    // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n    return entries[0][1] // first one in the list is the most recent version\n    ;\n}\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nlet $9e9d3488b14d9168$var$promise;\nconst $9e9d3488b14d9168$var$detectEmojiSupportLevel = ()=>{\n    if (!$9e9d3488b14d9168$var$promise) // Delay so it can run while the IDB database is being created by the browser (on another thread).\n    // This helps especially with first load  we want to start pre-populating the database on the main thread,\n    // and then wait for IDB to commit everything, and while waiting we run this check.\n    $9e9d3488b14d9168$var$promise = new Promise((resolve)=>$9e9d3488b14d9168$var$rIC(()=>resolve($9e9d3488b14d9168$var$determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n        ));\n    return $9e9d3488b14d9168$var$promise;\n};\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst $9e9d3488b14d9168$var$supportedZwjEmojis = new Map();\nconst $9e9d3488b14d9168$var$VARIATION_SELECTOR = '\\ufe0f';\nconst $9e9d3488b14d9168$var$SKINTONE_MODIFIER = '\\ud83c';\nconst $9e9d3488b14d9168$var$ZWJ = '\\u200d';\nconst $9e9d3488b14d9168$var$LIGHT_SKIN_TONE = 0x1F3FB;\nconst $9e9d3488b14d9168$var$LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction $9e9d3488b14d9168$var$applySkinTone(str, skinTone) {\n    if (skinTone === 0) return str;\n    const zwjIndex = str.indexOf($9e9d3488b14d9168$var$ZWJ);\n    if (zwjIndex !== -1) return str.substring(0, zwjIndex) + String.fromCodePoint($9e9d3488b14d9168$var$LIGHT_SKIN_TONE + skinTone - 1) + str.substring(zwjIndex);\n    if (str.endsWith($9e9d3488b14d9168$var$VARIATION_SELECTOR)) str = str.substring(0, str.length - 1);\n    return str + $9e9d3488b14d9168$var$SKINTONE_MODIFIER + String.fromCodePoint($9e9d3488b14d9168$var$LIGHT_SKIN_TONE_MODIFIER + skinTone - 1);\n}\nfunction $9e9d3488b14d9168$var$halt(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction $9e9d3488b14d9168$var$incrementOrDecrement(decrement, val, arr) {\n    val += decrement ? -1 : 1;\n    if (val < 0) val = arr.length - 1;\n    else if (val >= arr.length) val = 0;\n    return val;\n}\n// like lodash's uniqBy but much smaller\nfunction $9e9d3488b14d9168$var$uniqBy(arr, func) {\n    const set = new Set();\n    const res = [];\n    for (const item of arr){\n        const key = func(item);\n        if (!set.has(key)) {\n            set.add(key);\n            res.push(item);\n        }\n    }\n    return res;\n}\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\nfunction $9e9d3488b14d9168$var$summarizeEmojisForUI(emojis, emojiSupportLevel) {\n    const toSimpleSkinsMap = (skins)=>{\n        const res = {};\n        for (const skin of skins)// ignore arrays like [1, 2] with multiple skin tones\n        // also ignore variants that are in an unsupported emoji version\n        // (these do exist - variants from a different version than their base emoji)\n        if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) res[skin.tone] = skin.unicode;\n        return res;\n    };\n    return emojis.map(({ unicode: unicode, skins: skins, shortcodes: shortcodes, url: url, name: name, category: category, annotation: annotation })=>({\n            unicode: unicode,\n            name: name,\n            shortcodes: shortcodes,\n            url: url,\n            category: category,\n            annotation: annotation,\n            id: unicode || name,\n            skins: skins && toSimpleSkinsMap(skins)\n        }));\n}\n// import rAF from one place so that the bundle size is a bit smaller\nconst $9e9d3488b14d9168$var$rAF = requestAnimationFrame;\n// \"Svelte action\"-like utility to detect layout changes via ResizeObserver.\n// If ResizeObserver is unsupported, we just use rAF once and don't bother to update.\nlet $9e9d3488b14d9168$var$resizeObserverSupported = typeof ResizeObserver === 'function';\nfunction $9e9d3488b14d9168$var$resizeObserverAction(node, abortSignal, onUpdate) {\n    let resizeObserver;\n    if ($9e9d3488b14d9168$var$resizeObserverSupported) {\n        resizeObserver = new ResizeObserver(onUpdate);\n        resizeObserver.observe(node);\n    } else $9e9d3488b14d9168$var$rAF(onUpdate);\n    // cleanup function (called on destroy)\n    abortSignal.addEventListener('abort', ()=>{\n        if (resizeObserver) resizeObserver.disconnect();\n    });\n}\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction $9e9d3488b14d9168$var$calculateTextWidth(node) {\n    // skip running this in jest/vitest because we don't need to check for emoji support in that environment\n    /* istanbul ignore else */ {\n        const range = document.createRange();\n        range.selectNode(node.firstChild);\n        return range.getBoundingClientRect().width;\n    }\n}\nlet $9e9d3488b14d9168$var$baselineEmojiWidth;\n/**\n * Check if the given emojis containing ZWJ characters are supported by the current browser (don't render\n * as double characters) and return true if all are supported.\n * @param zwjEmojisToCheck\n * @param baselineEmoji\n * @param emojiToDomNode\n */ function $9e9d3488b14d9168$var$checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n    let allSupported = true;\n    for (const emoji of zwjEmojisToCheck){\n        const domNode = emojiToDomNode(emoji);\n        // sanity check to make sure the node is defined properly\n        /* istanbul ignore if */ if (!domNode) continue;\n        const emojiWidth = $9e9d3488b14d9168$var$calculateTextWidth(domNode);\n        if (typeof $9e9d3488b14d9168$var$baselineEmojiWidth === 'undefined') $9e9d3488b14d9168$var$baselineEmojiWidth = $9e9d3488b14d9168$var$calculateTextWidth(baselineEmoji);\n        // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n        // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n        // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n        // So here we set the threshold at 1.8 times the size of the baseline emoji.\n        const supported = emojiWidth / 1.8 < $9e9d3488b14d9168$var$baselineEmojiWidth;\n        $9e9d3488b14d9168$var$supportedZwjEmojis.set(emoji.unicode, supported);\n        if (!supported) allSupported = false;\n    }\n    return allSupported;\n}\n// like lodash's uniq\nfunction $9e9d3488b14d9168$var$uniq(arr) {\n    return $9e9d3488b14d9168$var$uniqBy(arr, (_)=>_);\n}\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\n// At best the invalidation is useless, at worst it can cause infinite loops:\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\n// https://github.com/sveltejs/svelte/issues/6521\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\nfunction $9e9d3488b14d9168$var$resetScrollTopIfPossible(element) {\n    /* istanbul ignore else */ if (element) element.scrollTop = 0;\n}\nfunction $9e9d3488b14d9168$var$getFromMap(cache, key, func) {\n    let cached = cache.get(key);\n    if (!cached) {\n        cached = func();\n        cache.set(key, cached);\n    }\n    return cached;\n}\nfunction $9e9d3488b14d9168$var$toString(value) {\n    return '' + value;\n}\nfunction $9e9d3488b14d9168$var$parseTemplate(htmlString) {\n    const template = document.createElement('template');\n    template.innerHTML = htmlString;\n    return template;\n}\nconst $9e9d3488b14d9168$var$parseCache = new WeakMap();\nconst $9e9d3488b14d9168$var$domInstancesCache = new WeakMap();\n// This needs to be a symbol because it needs to be different from any possible output of a key function\nconst $9e9d3488b14d9168$var$unkeyedSymbol = Symbol('un-keyed');\n// Not supported in Safari <=13\nconst $9e9d3488b14d9168$var$hasReplaceChildren = 'replaceChildren' in Element.prototype;\nfunction $9e9d3488b14d9168$var$replaceChildren(parentNode, newChildren) {\n    /* istanbul ignore else */ if ($9e9d3488b14d9168$var$hasReplaceChildren) parentNode.replaceChildren(...newChildren);\n    else {\n        parentNode.innerHTML = '';\n        parentNode.append(...newChildren);\n    }\n}\nfunction $9e9d3488b14d9168$var$doChildrenNeedRerender(parentNode, newChildren) {\n    let oldChild = parentNode.firstChild;\n    let oldChildrenCount = 0;\n    // iterate using firstChild/nextSibling because browsers use a linked list under the hood\n    while(oldChild){\n        const newChild = newChildren[oldChildrenCount];\n        // check if the old child and new child are the same\n        if (newChild !== oldChild) return true;\n        oldChild = oldChild.nextSibling;\n        oldChildrenCount++;\n    }\n    // if new children length is different from old, we must re-render\n    return oldChildrenCount !== newChildren.length;\n}\nfunction $9e9d3488b14d9168$var$patchChildren(newChildren, instanceBinding) {\n    const { targetNode: targetNode } = instanceBinding;\n    let { targetParentNode: targetParentNode } = instanceBinding;\n    let needsRerender = false;\n    if (targetParentNode) needsRerender = $9e9d3488b14d9168$var$doChildrenNeedRerender(targetParentNode, newChildren);\n    else {\n        needsRerender = true;\n        instanceBinding.targetNode = undefined; // placeholder node not needed anymore, free memory\n        instanceBinding.targetParentNode = targetParentNode = targetNode.parentNode;\n    }\n    // avoid re-rendering list if the dom nodes are exactly the same before and after\n    if (needsRerender) $9e9d3488b14d9168$var$replaceChildren(targetParentNode, newChildren);\n}\nfunction $9e9d3488b14d9168$var$patch(expressions, instanceBindings) {\n    for (const instanceBinding of instanceBindings){\n        const { targetNode: targetNode, currentExpression: currentExpression, binding: { expressionIndex: expressionIndex, attributeName: attributeName, attributeValuePre: attributeValuePre, attributeValuePost: attributeValuePost } } = instanceBinding;\n        const expression = expressions[expressionIndex];\n        if (currentExpression === expression) continue;\n        instanceBinding.currentExpression = expression;\n        if (attributeName) {\n            if (expression === null) // null is treated as a special case by the framework - we don't render an attribute at all in this case\n            targetNode.removeAttribute(attributeName);\n            else {\n                // attribute value is not null; set a new attribute\n                const newValue = attributeValuePre + $9e9d3488b14d9168$var$toString(expression) + attributeValuePost;\n                targetNode.setAttribute(attributeName, newValue);\n            }\n        } else {\n            let newNode;\n            if (Array.isArray(expression)) $9e9d3488b14d9168$var$patchChildren(expression, instanceBinding);\n            else if (expression instanceof Element) {\n                newNode = expression;\n                targetNode.replaceWith(newNode);\n            } else // nodeValue is faster than textContent supposedly https://www.youtube.com/watch?v=LY6y3HbDVmg\n            // note we may be replacing the value in a placeholder text node\n            targetNode.nodeValue = $9e9d3488b14d9168$var$toString(expression);\n            if (newNode) instanceBinding.targetNode = newNode;\n        }\n    }\n}\nfunction $9e9d3488b14d9168$var$parse(tokens) {\n    let htmlString = '';\n    let withinTag = false;\n    let withinAttribute = false;\n    let elementIndexCounter = -1; // depth-first traversal order\n    const elementsToBindings = new Map();\n    const elementIndexes = [];\n    let skipTokenChars = 0;\n    for(let i = 0, len = tokens.length; i < len; i++){\n        const token = tokens[i];\n        htmlString += token.slice(skipTokenChars);\n        if (i === len - 1) break; // no need to process characters - no more expressions to be found\n        for(let j = 0; j < token.length; j++){\n            const char = token.charAt(j);\n            switch(char){\n                case '<':\n                    {\n                        const nextChar = token.charAt(j + 1);\n                        if (nextChar === '/') // leaving an element\n                        elementIndexes.pop();\n                        else {\n                            withinTag = true;\n                            elementIndexes.push(++elementIndexCounter);\n                        }\n                        break;\n                    }\n                case '>':\n                    withinTag = false;\n                    withinAttribute = false;\n                    break;\n                case '=':\n                    withinAttribute = true;\n                    break;\n            }\n        }\n        const elementIndex = elementIndexes[elementIndexes.length - 1];\n        const bindings = $9e9d3488b14d9168$var$getFromMap(elementsToBindings, elementIndex, ()=>[]);\n        let attributeName;\n        let attributeValuePre;\n        let attributeValuePost;\n        if (withinAttribute) {\n            // I never use single-quotes for attribute values in HTML, so just support double-quotes or no-quotes\n            const attributePreMatch = /(\\S+)=\"?([^\"=]*)$/.exec(token);\n            attributeName = attributePreMatch[1];\n            attributeValuePre = attributePreMatch[2];\n            const attributePostMatch = /^([^\">]*)(\"?)/.exec(tokens[i + 1]);\n            attributeValuePost = attributePostMatch[1];\n            // Optimization: remove the attribute itself, so we don't create a default attribute which is either empty or just\n            // the \"pre\" text, e.g. `<div foo>` or `<div foo=\"prefix\">`. It will be replaced by the expression anyway.\n            htmlString = htmlString.slice(0, -1 * attributePreMatch[0].length);\n            skipTokenChars = attributePostMatch[0].length;\n        } else skipTokenChars = 0;\n        const binding = {\n            attributeName: attributeName,\n            attributeValuePre: attributeValuePre,\n            attributeValuePost: attributeValuePost,\n            expressionIndex: i\n        };\n        bindings.push(binding);\n        if (!withinTag && !withinAttribute) // Add a placeholder text node, so we can find it later. Note we only support one dynamic child text node\n        htmlString += ' ';\n    }\n    const template = $9e9d3488b14d9168$var$parseTemplate(htmlString);\n    return {\n        template: template,\n        elementsToBindings: elementsToBindings\n    };\n}\nfunction $9e9d3488b14d9168$var$applyBindings(bindings, element, instanceBindings) {\n    for(let i = 0; i < bindings.length; i++){\n        const binding = bindings[i];\n        const targetNode = binding.attributeName ? element // attribute binding, just use the element itself\n         : element.firstChild; // not an attribute binding, so has a placeholder text node\n        const instanceBinding = {\n            binding: binding,\n            targetNode: targetNode,\n            targetParentNode: undefined,\n            currentExpression: undefined\n        };\n        instanceBindings.push(instanceBinding);\n    }\n}\nfunction $9e9d3488b14d9168$var$traverseAndSetupBindings(rootElement, elementsToBindings) {\n    const instanceBindings = [];\n    let topLevelBindings;\n    if (elementsToBindings.size === 1 && (topLevelBindings = elementsToBindings.get(0))) // Optimization for the common case where there's only one element and one binding\n    // Skip creating a TreeWalker entirely and just handle the root DOM element\n    $9e9d3488b14d9168$var$applyBindings(topLevelBindings, rootElement, instanceBindings);\n    else {\n        // traverse dom\n        const treeWalker = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT);\n        let element = rootElement;\n        let elementIndex = -1;\n        do {\n            const bindings = elementsToBindings.get(++elementIndex);\n            if (bindings) $9e9d3488b14d9168$var$applyBindings(bindings, element, instanceBindings);\n        }while (element = treeWalker.nextNode());\n    }\n    return instanceBindings;\n}\nfunction $9e9d3488b14d9168$var$parseHtml(tokens) {\n    // All templates and bound expressions are unique per tokens array\n    const { template: template, elementsToBindings: elementsToBindings } = $9e9d3488b14d9168$var$getFromMap($9e9d3488b14d9168$var$parseCache, tokens, ()=>$9e9d3488b14d9168$var$parse(tokens));\n    // When we parseHtml, we always return a fresh DOM instance ready to be updated\n    const dom = template.cloneNode(true).content.firstElementChild;\n    const instanceBindings = $9e9d3488b14d9168$var$traverseAndSetupBindings(dom, elementsToBindings);\n    return function updateDomInstance(expressions) {\n        $9e9d3488b14d9168$var$patch(expressions, instanceBindings);\n        return dom;\n    };\n}\nfunction $9e9d3488b14d9168$var$createFramework(state) {\n    const domInstances = $9e9d3488b14d9168$var$getFromMap($9e9d3488b14d9168$var$domInstancesCache, state, ()=>new Map());\n    let domInstanceCacheKey = $9e9d3488b14d9168$var$unkeyedSymbol;\n    function html(tokens, ...expressions) {\n        // Each unique lexical usage of map() is considered unique due to the html`` tagged template call it makes,\n        // which has lexically unique tokens. The unkeyed symbol is just used for html`` usage outside of a map().\n        const domInstancesForTokens = $9e9d3488b14d9168$var$getFromMap(domInstances, tokens, ()=>new Map());\n        const updateDomInstance = $9e9d3488b14d9168$var$getFromMap(domInstancesForTokens, domInstanceCacheKey, ()=>$9e9d3488b14d9168$var$parseHtml(tokens));\n        return updateDomInstance(expressions) // update with expressions\n        ;\n    }\n    function map(array, callback, keyFunction) {\n        return array.map((item, index)=>{\n            const originalCacheKey = domInstanceCacheKey;\n            domInstanceCacheKey = keyFunction(item);\n            try {\n                return callback(item, index);\n            } finally{\n                domInstanceCacheKey = originalCacheKey;\n            }\n        });\n    }\n    return {\n        map: map,\n        html: html\n    };\n}\nfunction $9e9d3488b14d9168$var$render(container, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender) {\n    const { labelWithSkin: labelWithSkin, titleForEmoji: titleForEmoji, unicodeWithSkin: unicodeWithSkin } = helpers;\n    const { html: html, map: map } = $9e9d3488b14d9168$var$createFramework(state);\n    function emojiList(emojis, searchMode, prefix) {\n        return map(emojis, (emoji, i)=>{\n            return html`<button role=\"${searchMode ? 'option' : 'menuitem'}\" aria-selected=\"${searchMode ? i === state.activeSearchItem : null}\" aria-label=\"${labelWithSkin(emoji, state.currentSkinTone)}\" title=\"${titleForEmoji(emoji)}\" class=\"${'emoji' + (searchMode && i === state.activeSearchItem ? ' active' : '') + (emoji.unicode ? '' : ' custom-emoji')}\" id=\"${`${prefix}-${emoji.id}`}\" style=\"${emoji.unicode ? null : `--custom-emoji-background: url(${JSON.stringify(emoji.url)})`}\">${emoji.unicode ? unicodeWithSkin(emoji, state.currentSkinTone) : ''}</button>`;\n        // It's important for the cache key to be unique based on the prefix, because the framework caches based on the\n        // unique tokens + cache key, and the same emoji may be used in the tab as well as in the fav bar\n        }, (emoji)=>`${prefix}-${emoji.id}`);\n    }\n    const section = ()=>{\n        return html`<section data-ref=\"rootElement\" class=\"picker\" aria-label=\"${state.i18n.regionLabel}\" style=\"${state.pickerStyle || ''}\"><div class=\"pad-top\"></div><div class=\"search-row\"><div class=\"search-wrapper\"><input id=\"search\" class=\"search\" type=\"search\" role=\"combobox\" enterkeyhint=\"search\" placeholder=\"${state.i18n.searchLabel}\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"true\" aria-expanded=\"${!!(state.searchMode && state.currentEmojis.length)}\" aria-controls=\"search-results\" aria-describedby=\"search-description\" aria-autocomplete=\"list\" aria-activedescendant=\"${state.activeSearchItemId ? `emo-${state.activeSearchItemId}` : null}\" data-ref=\"searchElement\" data-on-input=\"onSearchInput\" data-on-keydown=\"onSearchKeydown\"><label class=\"sr-only\" for=\"search\">${state.i18n.searchLabel}</label> <span id=\"search-description\" class=\"sr-only\">${state.i18n.searchDescription}</span></div><div class=\"skintone-button-wrapper ${state.skinTonePickerExpandedAfterAnimation ? 'expanded' : ''}\"><button id=\"skintone-button\" class=\"emoji ${state.skinTonePickerExpanded ? 'hide-focus' : ''}\" aria-label=\"${state.skinToneButtonLabel}\" title=\"${state.skinToneButtonLabel}\" aria-describedby=\"skintone-description\" aria-haspopup=\"listbox\" aria-expanded=\"${state.skinTonePickerExpanded}\" aria-controls=\"skintone-list\" data-on-click=\"onClickSkinToneButton\">${state.skinToneButtonText || ''}</button></div><span id=\"skintone-description\" class=\"sr-only\">${state.i18n.skinToneDescription}</span><div data-ref=\"skinToneDropdown\" id=\"skintone-list\" class=\"skintone-list hide-focus ${state.skinTonePickerExpanded ? '' : 'hidden no-animate'}\" style=\"transform:translateY(${state.skinTonePickerExpanded ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))'})\" role=\"listbox\" aria-label=\"${state.i18n.skinTonesLabel}\" aria-activedescendant=\"skintone-${state.activeSkinTone}\" aria-hidden=\"${!state.skinTonePickerExpanded}\" tabIndex=\"-1\" data-on-focusout=\"onSkinToneOptionsFocusOut\" data-on-click=\"onSkinToneOptionsClick\" data-on-keydown=\"onSkinToneOptionsKeydown\" data-on-keyup=\"onSkinToneOptionsKeyup\">${map(state.skinTones, (skinTone, i)=>{\n            return html`<div id=\"skintone-${i}\" class=\"emoji ${i === state.activeSkinTone ? 'active' : ''}\" aria-selected=\"${i === state.activeSkinTone}\" role=\"option\" title=\"${state.i18n.skinTones[i]}\" aria-label=\"${state.i18n.skinTones[i]}\">${skinTone}</div>`;\n        }, (skinTone)=>skinTone)}</div></div><div class=\"nav\" role=\"tablist\" style=\"grid-template-columns:repeat(${state.groups.length},1fr)\" aria-label=\"${state.i18n.categoriesLabel}\" data-on-keydown=\"onNavKeydown\" data-on-click=\"onNavClick\">${map(state.groups, (group)=>{\n            return html`<button role=\"tab\" class=\"nav-button\" aria-controls=\"tab-${group.id}\" aria-label=\"${state.i18n.categories[group.name]}\" aria-selected=\"${!state.searchMode && state.currentGroup.id === group.id}\" title=\"${state.i18n.categories[group.name]}\" data-group-id=\"${group.id}\"><div class=\"nav-emoji emoji\">${group.emoji}</div></button>`;\n        }, (group)=>group.id)}</div><div class=\"indicator-wrapper\"><div class=\"indicator\" style=\"transform:translateX(${/* istanbul ignore next */ (state.isRtl ? -1 : 1) * state.currentGroupIndex * 100}%)\"></div></div><div class=\"message ${state.message ? '' : 'gone'}\" role=\"alert\" aria-live=\"polite\">${state.message || ''}</div><div data-ref=\"tabpanelElement\" class=\"tabpanel ${!state.databaseLoaded || state.message ? 'gone' : ''}\" role=\"${state.searchMode ? 'region' : 'tabpanel'}\" aria-label=\"${state.searchMode ? state.i18n.searchResultsLabel : state.i18n.categories[state.currentGroup.name]}\" id=\"${state.searchMode ? null : `tab-${state.currentGroup.id}`}\" tabIndex=\"0\" data-on-click=\"onEmojiClick\"><div data-action=\"calculateEmojiGridStyle\">${map(state.currentEmojisWithCategories, (emojiWithCategory, i)=>{\n            return html`<div><div id=\"menu-label-${i}\" class=\"category ${state.currentEmojisWithCategories.length === 1 && state.currentEmojisWithCategories[0].category === '' ? 'gone' : ''}\" aria-hidden=\"true\">${state.searchMode ? state.i18n.searchResultsLabel : emojiWithCategory.category ? emojiWithCategory.category : state.currentEmojisWithCategories.length > 1 ? state.i18n.categories.custom : state.i18n.categories[state.currentGroup.name]}</div><div class=\"emoji-menu ${i !== 0 && !state.searchMode && state.currentGroup.id === -1 ? 'visibility-auto' : ''}\" style=\"${`--num-rows: ${Math.ceil(emojiWithCategory.emojis.length / state.numColumns)}`}\" data-action=\"updateOnIntersection\" role=\"${state.searchMode ? 'listbox' : 'menu'}\" aria-labelledby=\"menu-label-${i}\" id=\"${state.searchMode ? 'search-results' : null}\">${emojiList(emojiWithCategory.emojis, state.searchMode, /* prefix */ 'emo')}</div></div>`;\n        }, (emojiWithCategory)=>emojiWithCategory.category)}</div></div><div class=\"favorites onscreen emoji-menu ${state.message ? 'gone' : ''}\" role=\"menu\" aria-label=\"${state.i18n.favoritesLabel}\" data-on-click=\"onEmojiClick\">${emojiList(state.currentFavorites, /* searchMode */ false, /* prefix */ 'fav')}</div><button data-ref=\"baselineEmoji\" aria-hidden=\"true\" tabindex=\"-1\" class=\"abs-pos hidden emoji baseline-emoji\"></button></section>`;\n    };\n    const rootDom = section();\n    // helper for traversing the dom, finding elements by an attribute, and getting the attribute value\n    const forElementWithAttribute = (attributeName, callback)=>{\n        for (const element of container.querySelectorAll(`[${attributeName}]`))callback(element, element.getAttribute(attributeName));\n    };\n    if (firstRender) {\n        container.appendChild(rootDom);\n        // we only bind events/refs once - there is no need to find them again given this component structure\n        // bind events\n        for (const eventName of [\n            'click',\n            'focusout',\n            'input',\n            'keydown',\n            'keyup'\n        ])forElementWithAttribute(`data-on-${eventName}`, (element, listenerName)=>{\n            element.addEventListener(eventName, events[listenerName]);\n        });\n        // find refs\n        forElementWithAttribute('data-ref', (element, ref)=>{\n            refs[ref] = element;\n        });\n        // destroy/abort logic\n        abortSignal.addEventListener('abort', ()=>{\n            container.removeChild(rootDom);\n        });\n    }\n    // set up actions - these are re-bound on every render\n    forElementWithAttribute('data-action', (element, action)=>{\n        let boundActions = actionContext.get(action);\n        if (!boundActions) actionContext.set(action, boundActions = new WeakSet());\n        // avoid applying the same action to the same element multiple times\n        if (!boundActions.has(element)) {\n            boundActions.add(element);\n            actions[action](element);\n        }\n    });\n}\n/* istanbul ignore next */ const $9e9d3488b14d9168$var$qM = typeof queueMicrotask === 'function' ? queueMicrotask : (callback)=>Promise.resolve().then(callback);\nfunction $9e9d3488b14d9168$var$createState(abortSignal) {\n    let destroyed = false;\n    let currentObserver;\n    const propsToObservers = new Map();\n    const dirtyObservers = new Set();\n    let queued;\n    const flush = ()=>{\n        if (destroyed) return;\n        const observersToRun = [\n            ...dirtyObservers\n        ];\n        dirtyObservers.clear(); // clear before running to force any new updates to run in another tick of the loop\n        try {\n            for (const observer of observersToRun)observer();\n        } finally{\n            queued = false;\n            if (dirtyObservers.size) {\n                queued = true;\n                $9e9d3488b14d9168$var$qM(flush);\n            }\n        }\n    };\n    const state = new Proxy({}, {\n        get (target, prop) {\n            if (currentObserver) {\n                let observers = propsToObservers.get(prop);\n                if (!observers) {\n                    observers = new Set();\n                    propsToObservers.set(prop, observers);\n                }\n                observers.add(currentObserver);\n            }\n            return target[prop];\n        },\n        set (target, prop, newValue) {\n            if (target[prop] !== newValue) {\n                target[prop] = newValue;\n                const observers = propsToObservers.get(prop);\n                if (observers) {\n                    for (const observer of observers)dirtyObservers.add(observer);\n                    if (!queued) {\n                        queued = true;\n                        $9e9d3488b14d9168$var$qM(flush);\n                    }\n                }\n            }\n            return true;\n        }\n    });\n    const createEffect = (callback)=>{\n        const runnable = ()=>{\n            const oldObserver = currentObserver;\n            currentObserver = runnable;\n            try {\n                return callback();\n            } finally{\n                currentObserver = oldObserver;\n            }\n        };\n        return runnable();\n    };\n    // destroy logic\n    abortSignal.addEventListener('abort', ()=>{\n        destroyed = true;\n    });\n    return {\n        state: state,\n        createEffect: createEffect\n    };\n}\n// Compare two arrays, with a function called on each item in the two arrays that returns true if the items are equal\nfunction $9e9d3488b14d9168$var$arraysAreEqualByFunction(left, right, areEqualFunc) {\n    if (left.length !== right.length) return false;\n    for(let i = 0; i < left.length; i++){\n        if (!areEqualFunc(left[i], right[i])) return false;\n    }\n    return true;\n}\nconst $9e9d3488b14d9168$var$intersectionObserverCache = new WeakMap();\nfunction $9e9d3488b14d9168$var$intersectionObserverAction(node, abortSignal, listener) {\n    /* istanbul ignore else */ {\n        // The scroll root is always `.tabpanel`\n        const root = node.closest('.tabpanel');\n        let observer = $9e9d3488b14d9168$var$intersectionObserverCache.get(root);\n        if (!observer) {\n            // TODO: replace this with the contentvisibilityautostatechange event when all supported browsers support it.\n            // For now we use IntersectionObserver because it has better cross-browser support, and it would be bad for\n            // old Safari versions if they eagerly downloaded all custom emoji all at once.\n            observer = new IntersectionObserver(listener, {\n                root: root,\n                // trigger if we are 1/2 scroll container height away so that the images load a bit quicker while scrolling\n                rootMargin: '50% 0px 50% 0px',\n                // trigger if any part of the emoji grid is intersecting\n                threshold: 0\n            });\n            // avoid creating a new IntersectionObserver for every category; just use one for the whole root\n            $9e9d3488b14d9168$var$intersectionObserverCache.set(root, observer);\n            // assume that the abortSignal is always the same for this root node; just add one event listener\n            abortSignal.addEventListener('abort', ()=>{\n                observer.disconnect();\n            });\n        }\n        observer.observe(node);\n    }\n}\n/* eslint-disable prefer-const,no-labels,no-inner-declarations */ // constants\nconst $9e9d3488b14d9168$var$EMPTY_ARRAY = [];\nconst { assign: $9e9d3488b14d9168$var$assign } = Object;\nfunction $9e9d3488b14d9168$var$createRoot(shadowRoot, props) {\n    const refs = {};\n    const abortController = new AbortController();\n    const abortSignal = abortController.signal;\n    const { state: state, createEffect: createEffect } = $9e9d3488b14d9168$var$createState(abortSignal);\n    const actionContext = new Map();\n    // initial state\n    $9e9d3488b14d9168$var$assign(state, {\n        skinToneEmoji: undefined,\n        i18n: undefined,\n        database: undefined,\n        customEmoji: undefined,\n        customCategorySorting: undefined,\n        emojiVersion: undefined\n    });\n    // public props\n    $9e9d3488b14d9168$var$assign(state, props);\n    // private props\n    $9e9d3488b14d9168$var$assign(state, {\n        initialLoad: true,\n        currentEmojis: [],\n        currentEmojisWithCategories: [],\n        rawSearchText: '',\n        searchText: '',\n        searchMode: false,\n        activeSearchItem: -1,\n        message: undefined,\n        skinTonePickerExpanded: false,\n        skinTonePickerExpandedAfterAnimation: false,\n        currentSkinTone: 0,\n        activeSkinTone: 0,\n        skinToneButtonText: undefined,\n        pickerStyle: undefined,\n        skinToneButtonLabel: '',\n        skinTones: [],\n        currentFavorites: [],\n        defaultFavoriteEmojis: undefined,\n        numColumns: $9e9d3488b14d9168$var$DEFAULT_NUM_COLUMNS,\n        isRtl: false,\n        currentGroupIndex: 0,\n        groups: $9e9d3488b14d9168$var$groups,\n        databaseLoaded: false,\n        activeSearchItemId: undefined\n    });\n    //\n    // Update the current group based on the currentGroupIndex\n    //\n    createEffect(()=>{\n        if (state.currentGroup !== state.groups[state.currentGroupIndex]) state.currentGroup = state.groups[state.currentGroupIndex];\n    });\n    //\n    // Utils/helpers\n    //\n    const focus = (id)=>{\n        shadowRoot.getElementById(id).focus();\n    };\n    const emojiToDomNode = (emoji)=>shadowRoot.getElementById(`emo-${emoji.id}`);\n    // fire a custom event that crosses the shadow boundary\n    const fireEvent = (name, detail)=>{\n        refs.rootElement.dispatchEvent(new CustomEvent(name, {\n            detail: detail,\n            bubbles: true,\n            composed: true\n        }));\n    };\n    //\n    // Comparison utils\n    //\n    const compareEmojiArrays = (a, b)=>a.id === b.id;\n    const compareCurrentEmojisWithCategories = (a, b)=>{\n        const { category: aCategory, emojis: aEmojis } = a;\n        const { category: bCategory, emojis: bEmojis } = b;\n        if (aCategory !== bCategory) return false;\n        return $9e9d3488b14d9168$var$arraysAreEqualByFunction(aEmojis, bEmojis, compareEmojiArrays);\n    };\n    //\n    // Update utils to avoid excessive re-renders\n    //\n    // avoid excessive re-renders by checking the value before setting\n    const updateCurrentEmojis = (newEmojis)=>{\n        if (!$9e9d3488b14d9168$var$arraysAreEqualByFunction(state.currentEmojis, newEmojis, compareEmojiArrays)) state.currentEmojis = newEmojis;\n    };\n    // avoid excessive re-renders\n    const updateSearchMode = (newSearchMode)=>{\n        if (state.searchMode !== newSearchMode) state.searchMode = newSearchMode;\n    };\n    // avoid excessive re-renders\n    const updateCurrentEmojisWithCategories = (newEmojisWithCategories)=>{\n        if (!$9e9d3488b14d9168$var$arraysAreEqualByFunction(state.currentEmojisWithCategories, newEmojisWithCategories, compareCurrentEmojisWithCategories)) state.currentEmojisWithCategories = newEmojisWithCategories;\n    };\n    // Helpers used by PickerTemplate\n    const unicodeWithSkin = (emoji, currentSkinTone)=>currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n    const labelWithSkin = (emoji, currentSkinTone)=>$9e9d3488b14d9168$var$uniq([\n            emoji.name || unicodeWithSkin(emoji, currentSkinTone),\n            emoji.annotation,\n            ...emoji.shortcodes || $9e9d3488b14d9168$var$EMPTY_ARRAY\n        ].filter(Boolean)).join(', ');\n    const titleForEmoji = (emoji)=>emoji.annotation || (emoji.shortcodes || $9e9d3488b14d9168$var$EMPTY_ARRAY).join(', ');\n    const helpers = {\n        labelWithSkin: labelWithSkin,\n        titleForEmoji: titleForEmoji,\n        unicodeWithSkin: unicodeWithSkin\n    };\n    const events = {\n        onClickSkinToneButton: onClickSkinToneButton,\n        onEmojiClick: onEmojiClick,\n        onNavClick: onNavClick,\n        onNavKeydown: onNavKeydown,\n        onSearchKeydown: onSearchKeydown,\n        onSkinToneOptionsClick: onSkinToneOptionsClick,\n        onSkinToneOptionsFocusOut: onSkinToneOptionsFocusOut,\n        onSkinToneOptionsKeydown: onSkinToneOptionsKeydown,\n        onSkinToneOptionsKeyup: onSkinToneOptionsKeyup,\n        onSearchInput: onSearchInput\n    };\n    const actions = {\n        calculateEmojiGridStyle: calculateEmojiGridStyle,\n        updateOnIntersection: updateOnIntersection\n    };\n    let firstRender = true;\n    createEffect(()=>{\n        $9e9d3488b14d9168$var$render(shadowRoot, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender);\n        firstRender = false;\n    });\n    //\n    // Determine the emoji support level (in requestIdleCallback)\n    //\n    // mount logic\n    if (!state.emojiVersion) $9e9d3488b14d9168$var$detectEmojiSupportLevel().then((level)=>{\n        // Can't actually test emoji support in Jest/Vitest/JSDom, emoji never render in color in Cairo\n        /* istanbul ignore next */ if (!level) state.message = state.i18n.emojiUnsupportedMessage;\n    });\n    //\n    // Set or update the database object\n    //\n    createEffect(()=>{\n        // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n        async function handleDatabaseLoading() {\n            let showingLoadingMessage = false;\n            const timeoutHandle = setTimeout(()=>{\n                showingLoadingMessage = true;\n                state.message = state.i18n.loadingMessage;\n            }, $9e9d3488b14d9168$var$TIMEOUT_BEFORE_LOADING_MESSAGE);\n            try {\n                await state.database.ready();\n                state.databaseLoaded = true; // eslint-disable-line no-unused-vars\n            } catch (err) {\n                console.error(err);\n                state.message = state.i18n.networkErrorMessage;\n            } finally{\n                clearTimeout(timeoutHandle);\n                if (showingLoadingMessage) {\n                    showingLoadingMessage = false;\n                    state.message = ''; // eslint-disable-line no-unused-vars\n                }\n            }\n        }\n        if (state.database) /* no await */ handleDatabaseLoading();\n    });\n    //\n    // Global styles for the entire picker\n    //\n    createEffect(()=>{\n        state.pickerStyle = `\n      --num-groups: ${state.groups.length}; \n      --indicator-opacity: ${state.searchMode ? 0 : 1}; \n      --num-skintones: ${$9e9d3488b14d9168$var$NUM_SKIN_TONES};`;\n    });\n    //\n    // Set or update the customEmoji\n    //\n    createEffect(()=>{\n        if (state.customEmoji && state.database) updateCustomEmoji(); // re-run whenever customEmoji change\n    });\n    createEffect(()=>{\n        if (state.customEmoji && state.customEmoji.length) {\n            if (state.groups !== $9e9d3488b14d9168$var$allGroups) state.groups = $9e9d3488b14d9168$var$allGroups;\n        } else if (state.groups !== $9e9d3488b14d9168$var$groups) {\n            if (state.currentGroupIndex) // If the current group is anything other than \"custom\" (which is first), decrement.\n            // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n            state.currentGroupIndex--;\n            state.groups = $9e9d3488b14d9168$var$groups;\n        }\n    });\n    //\n    // Set or update the preferred skin tone\n    //\n    createEffect(()=>{\n        async function updatePreferredSkinTone() {\n            if (state.databaseLoaded) state.currentSkinTone = await state.database.getPreferredSkinTone();\n        }\n        /* no await */ updatePreferredSkinTone();\n    });\n    createEffect(()=>{\n        state.skinTones = Array($9e9d3488b14d9168$var$NUM_SKIN_TONES).fill().map((_, i)=>$9e9d3488b14d9168$var$applySkinTone(state.skinToneEmoji, i));\n    });\n    createEffect(()=>{\n        state.skinToneButtonText = state.skinTones[state.currentSkinTone];\n    });\n    createEffect(()=>{\n        state.skinToneButtonLabel = state.i18n.skinToneLabel.replace('{skinTone}', state.i18n.skinTones[state.currentSkinTone]);\n    });\n    //\n    // Set or update the favorites emojis\n    //\n    createEffect(()=>{\n        async function updateDefaultFavoriteEmojis() {\n            const { database: database } = state;\n            const favs = (await Promise.all($9e9d3488b14d9168$var$MOST_COMMONLY_USED_EMOJI.map((unicode)=>database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean); // filter because in Jest/Vitest tests we don't have all the emoji in the DB\n            state.defaultFavoriteEmojis = favs;\n        }\n        if (state.databaseLoaded) /* no await */ updateDefaultFavoriteEmojis();\n    });\n    function updateCustomEmoji() {\n        // Certain effects have an implicit dependency on customEmoji since it affects the database\n        // Getting it here on the state ensures this effect re-runs when customEmoji change.\n        const { customEmoji: customEmoji, database: database } = state;\n        const databaseCustomEmoji = customEmoji || $9e9d3488b14d9168$var$EMPTY_ARRAY;\n        if (database.customEmoji !== databaseCustomEmoji) // Avoid setting this if the customEmoji have _not_ changed, because the setter triggers a re-computation of the\n        // `customEmojiIndex`. Note we don't bother with deep object changes.\n        database.customEmoji = databaseCustomEmoji;\n    }\n    createEffect(()=>{\n        async function updateFavorites() {\n            updateCustomEmoji(); // re-run whenever customEmoji change\n            const { database: database, defaultFavoriteEmojis: defaultFavoriteEmojis, numColumns: numColumns } = state;\n            const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n            const favorites = await summarizeEmojis($9e9d3488b14d9168$var$uniqBy([\n                ...dbFavorites,\n                ...defaultFavoriteEmojis\n            ], (_)=>_.unicode || _.name).slice(0, numColumns));\n            state.currentFavorites = favorites;\n        }\n        if (state.databaseLoaded && state.defaultFavoriteEmojis) /* no await */ updateFavorites();\n    });\n    //\n    // Re-run whenever the emoji grid changes size, and re-calc style/layout-related state variables:\n    // 1) Re-calculate the --num-columns var because it may have changed\n    // 2) Re-calculate whether we're in RTL mode or not.\n    //\n    // The benefit of doing this in one place is to align with rAF/ResizeObserver\n    // and do all the calculations in one go. RTL vs LTR is not strictly layout-related,\n    // but since we're already reading the style here, and since it's already aligned with\n    // the rAF loop, this is the most appropriate place to do it perf-wise.\n    //\n    function calculateEmojiGridStyle(node) {\n        $9e9d3488b14d9168$var$resizeObserverAction(node, abortSignal, ()=>{\n            /* istanbul ignore next */ {\n                // read all the style/layout calculations we need to make\n                const style = getComputedStyle(refs.rootElement);\n                const newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n                const newIsRtl = style.getPropertyValue('direction') === 'rtl';\n                // write to state variables\n                state.numColumns = newNumColumns;\n                state.isRtl = newIsRtl;\n            }\n        });\n    }\n    // Re-run whenever the custom emoji in a category are shown/hidden. This is an optimization that simulates\n    // what we'd get from `<img loading=lazy>` but without rendering an `<img>`.\n    function updateOnIntersection(node) {\n        $9e9d3488b14d9168$var$intersectionObserverAction(node, abortSignal, (entries)=>{\n            for (const { target: target, isIntersecting: isIntersecting } of entries)target.classList.toggle('onscreen', isIntersecting);\n        });\n    }\n    //\n    // Set or update the currentEmojis. Check for invalid ZWJ renderings\n    // (i.e. double emoji).\n    //\n    createEffect(()=>{\n        async function updateEmojis() {\n            const { searchText: searchText, currentGroup: currentGroup, databaseLoaded: databaseLoaded, customEmoji: customEmoji } = state;\n            if (!databaseLoaded) {\n                state.currentEmojis = [];\n                state.searchMode = false;\n            } else if (searchText.length >= $9e9d3488b14d9168$var$MIN_SEARCH_TEXT_LENGTH) {\n                const newEmojis = await getEmojisBySearchQuery(searchText);\n                if (state.searchText === searchText) {\n                    updateCurrentEmojis(newEmojis);\n                    updateSearchMode(true);\n                }\n            } else {\n                const { id: currentGroupId } = currentGroup;\n                // avoid race condition where currentGroupId is -1 and customEmoji is undefined/empty\n                if (currentGroupId !== -1 || customEmoji && customEmoji.length) {\n                    const newEmojis = await getEmojisByGroup(currentGroupId);\n                    if (state.currentGroup.id === currentGroupId) {\n                        updateCurrentEmojis(newEmojis);\n                        updateSearchMode(false);\n                    }\n                }\n            }\n        }\n        /* no await */ updateEmojis();\n    });\n    const resetScrollTopInRaf = ()=>{\n        $9e9d3488b14d9168$var$rAF(()=>$9e9d3488b14d9168$var$resetScrollTopIfPossible(refs.tabpanelElement));\n    };\n    // Some emojis have their ligatures rendered as two or more consecutive emojis\n    // We want to treat these the same as unsupported emojis, so we compare their\n    // widths against the baseline widths and remove them as necessary\n    createEffect(()=>{\n        const { currentEmojis: currentEmojis, emojiVersion: emojiVersion } = state;\n        const zwjEmojisToCheck = currentEmojis.filter((emoji)=>emoji.unicode) // filter custom emoji\n        .filter((emoji)=>$9e9d3488b14d9168$var$hasZwj(emoji) && !$9e9d3488b14d9168$var$supportedZwjEmojis.has(emoji.unicode));\n        if (!emojiVersion && zwjEmojisToCheck.length) {\n            // render now, check their length later\n            updateCurrentEmojis(currentEmojis);\n            $9e9d3488b14d9168$var$rAF(()=>checkZwjSupportAndUpdate(zwjEmojisToCheck));\n        } else {\n            const newEmojis = emojiVersion ? currentEmojis : currentEmojis.filter(isZwjSupported);\n            updateCurrentEmojis(newEmojis);\n            // Reset scroll top to 0 when emojis change\n            resetScrollTopInRaf();\n        }\n    });\n    function checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n        const allSupported = $9e9d3488b14d9168$var$checkZwjSupport(zwjEmojisToCheck, refs.baselineEmoji, emojiToDomNode);\n        if (allSupported) // Even if all emoji are supported, we still need to reset the scroll top to 0 when emojis change\n        resetScrollTopInRaf();\n        else // Force update. We only do this if there are any unsupported ZWJ characters since otherwise,\n        // for browsers that support all emoji, it would be an unnecessary extra re-render.\n        state.currentEmojis = [\n            ...state.currentEmojis\n        ];\n    }\n    function isZwjSupported(emoji) {\n        return !emoji.unicode || !$9e9d3488b14d9168$var$hasZwj(emoji) || $9e9d3488b14d9168$var$supportedZwjEmojis.get(emoji.unicode);\n    }\n    async function filterEmojisByVersion(emojis) {\n        const emojiSupportLevel = state.emojiVersion || await $9e9d3488b14d9168$var$detectEmojiSupportLevel();\n        // !version corresponds to custom emoji\n        return emojis.filter(({ version: version })=>!version || version <= emojiSupportLevel);\n    }\n    async function summarizeEmojis(emojis) {\n        return $9e9d3488b14d9168$var$summarizeEmojisForUI(emojis, state.emojiVersion || await $9e9d3488b14d9168$var$detectEmojiSupportLevel());\n    }\n    async function getEmojisByGroup(group) {\n        // -1 is custom emoji\n        const emoji = group === -1 ? state.customEmoji : await state.database.getEmojiByGroup(group);\n        return summarizeEmojis(await filterEmojisByVersion(emoji));\n    }\n    async function getEmojisBySearchQuery(query) {\n        return summarizeEmojis(await filterEmojisByVersion(await state.database.getEmojiBySearchQuery(query)));\n    }\n    createEffect(()=>{});\n    //\n    // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n    // are no categories, because it's just easier to code the HTML this way.\n    //\n    createEffect(()=>{\n        function calculateCurrentEmojisWithCategories() {\n            const { searchMode: searchMode, currentEmojis: currentEmojis } = state;\n            if (searchMode) return [\n                {\n                    category: '',\n                    emojis: currentEmojis\n                }\n            ];\n            const categoriesToEmoji = new Map();\n            for (const emoji of currentEmojis){\n                const category = emoji.category || '';\n                let emojis = categoriesToEmoji.get(category);\n                if (!emojis) {\n                    emojis = [];\n                    categoriesToEmoji.set(category, emojis);\n                }\n                emojis.push(emoji);\n            }\n            return [\n                ...categoriesToEmoji.entries()\n            ].map(([category, emojis])=>({\n                    category: category,\n                    emojis: emojis\n                })).sort((a, b)=>state.customCategorySorting(a.category, b.category));\n        }\n        const newEmojisWithCategories = calculateCurrentEmojisWithCategories();\n        updateCurrentEmojisWithCategories(newEmojisWithCategories);\n    });\n    //\n    // Handle active search item (i.e. pressing up or down while searching)\n    //\n    createEffect(()=>{\n        state.activeSearchItemId = state.activeSearchItem !== -1 && state.currentEmojis[state.activeSearchItem].id;\n    });\n    //\n    // Handle user input on the search input\n    //\n    createEffect(()=>{\n        const { rawSearchText: rawSearchText } = state;\n        $9e9d3488b14d9168$var$rIC(()=>{\n            state.searchText = (rawSearchText || '').trim(); // defer to avoid input delays, plus we can trim here\n            state.activeSearchItem = -1;\n        });\n    });\n    function onSearchKeydown(event) {\n        if (!state.searchMode || !state.currentEmojis.length) return;\n        const goToNextOrPrevious = (previous)=>{\n            $9e9d3488b14d9168$var$halt(event);\n            state.activeSearchItem = $9e9d3488b14d9168$var$incrementOrDecrement(previous, state.activeSearchItem, state.currentEmojis);\n        };\n        switch(event.key){\n            case 'ArrowDown':\n                return goToNextOrPrevious(false);\n            case 'ArrowUp':\n                return goToNextOrPrevious(true);\n            case 'Enter':\n                if (state.activeSearchItem === -1) // focus the first option in the list since the list must be non-empty at this point (it's verified above)\n                state.activeSearchItem = 0;\n                else {\n                    $9e9d3488b14d9168$var$halt(event);\n                    return clickEmoji(state.currentEmojis[state.activeSearchItem].id);\n                }\n        }\n    }\n    //\n    // Handle user input on nav\n    //\n    function onNavClick(event) {\n        const { target: target } = event;\n        const closestTarget = target.closest('.nav-button');\n        /* istanbul ignore if */ if (!closestTarget) return; // This should never happen, but makes me nervous not to have it\n        const groupId = parseInt(closestTarget.dataset.groupId, 10);\n        refs.searchElement.value = ''; // clear search box input\n        state.rawSearchText = '';\n        state.searchText = '';\n        state.activeSearchItem = -1;\n        state.currentGroupIndex = state.groups.findIndex((_)=>_.id === groupId);\n    }\n    function onNavKeydown(event) {\n        const { target: target, key: key } = event;\n        const doFocus = (el)=>{\n            if (el) {\n                $9e9d3488b14d9168$var$halt(event);\n                el.focus();\n            }\n        };\n        switch(key){\n            case 'ArrowLeft':\n                return doFocus(target.previousElementSibling);\n            case 'ArrowRight':\n                return doFocus(target.nextElementSibling);\n            case 'Home':\n                return doFocus(target.parentElement.firstElementChild);\n            case 'End':\n                return doFocus(target.parentElement.lastElementChild);\n        }\n    }\n    async function getDetailForClickEvent(unicodeOrName) {\n        const emoji = await state.database.getEmojiByUnicodeOrName(unicodeOrName);\n        const emojiSummary = [\n            ...state.currentEmojis,\n            ...state.currentFavorites\n        ].find((_)=>_.id === unicodeOrName);\n        const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, state.currentSkinTone);\n        await state.database.incrementFavoriteEmojiCount(unicodeOrName);\n        return {\n            emoji: emoji,\n            skinTone: state.currentSkinTone,\n            ...skinTonedUnicode && {\n                unicode: skinTonedUnicode\n            },\n            ...emojiSummary.name && {\n                name: emojiSummary.name\n            }\n        };\n    }\n    //\n    // Handle user input on an emoji\n    //\n    async function clickEmoji(unicodeOrName) {\n        const promiseForDetail = getDetailForClickEvent(unicodeOrName);\n        // sync event to work around a safari bug: https://bugs.webkit.org/show_bug.cgi?id=222262\n        fireEvent('emoji-click-sync', promiseForDetail);\n        // async event for most normal use cases that don't need to work around the safari bug\n        fireEvent('emoji-click', await promiseForDetail);\n    }\n    function onEmojiClick(event) {\n        const { target: target } = event;\n        /* istanbul ignore if */ if (!target.classList.contains('emoji')) // This should never happen, but makes me nervous not to have it\n        return;\n        $9e9d3488b14d9168$var$halt(event);\n        const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n        /* no await */ clickEmoji(id);\n    }\n    //\n    // Handle user input on the skintone picker\n    //\n    function changeSkinTone(skinTone) {\n        state.currentSkinTone = skinTone;\n        state.skinTonePickerExpanded = false;\n        focus('skintone-button');\n        fireEvent('skin-tone-change', {\n            skinTone: skinTone\n        });\n        /* no await */ state.database.setPreferredSkinTone(skinTone);\n    }\n    function onSkinToneOptionsClick(event) {\n        const { target: { id: id } } = event;\n        const match = id && id.match(/^skintone-(\\d)/); // skintone option format\n        /* istanbul ignore if */ if (!match) return; // This should never happen, but makes me nervous not to have it\n        $9e9d3488b14d9168$var$halt(event);\n        const skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\n        changeSkinTone(skinTone);\n    }\n    function onClickSkinToneButton(event) {\n        state.skinTonePickerExpanded = !state.skinTonePickerExpanded;\n        state.activeSkinTone = state.currentSkinTone;\n        // this should always be true, since the button is obscured by the listbox, so this `if` is just to be sure\n        if (state.skinTonePickerExpanded) {\n            $9e9d3488b14d9168$var$halt(event);\n            $9e9d3488b14d9168$var$rAF(()=>focus('skintone-list'));\n        }\n    }\n    // To make the animation nicer, change the z-index of the skintone picker button\n    // *after* the animation has played. This makes it appear that the picker box\n    // is expanding \"below\" the button\n    createEffect(()=>{\n        if (state.skinTonePickerExpanded) refs.skinToneDropdown.addEventListener('transitionend', ()=>{\n            state.skinTonePickerExpandedAfterAnimation = true; // eslint-disable-line no-unused-vars\n        }, {\n            once: true\n        });\n        else state.skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n    });\n    function onSkinToneOptionsKeydown(event) {\n        // this should never happen, but makes me nervous not to have it\n        /* istanbul ignore if */ if (!state.skinTonePickerExpanded) return;\n        const changeActiveSkinTone = async (nextSkinTone)=>{\n            $9e9d3488b14d9168$var$halt(event);\n            state.activeSkinTone = nextSkinTone;\n        };\n        switch(event.key){\n            case 'ArrowUp':\n                return changeActiveSkinTone($9e9d3488b14d9168$var$incrementOrDecrement(true, state.activeSkinTone, state.skinTones));\n            case 'ArrowDown':\n                return changeActiveSkinTone($9e9d3488b14d9168$var$incrementOrDecrement(false, state.activeSkinTone, state.skinTones));\n            case 'Home':\n                return changeActiveSkinTone(0);\n            case 'End':\n                return changeActiveSkinTone(state.skinTones.length - 1);\n            case 'Enter':\n                // enter on keydown, space on keyup. this is just how browsers work for buttons\n                // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n                $9e9d3488b14d9168$var$halt(event);\n                return changeSkinTone(state.activeSkinTone);\n            case 'Escape':\n                $9e9d3488b14d9168$var$halt(event);\n                state.skinTonePickerExpanded = false;\n                return focus('skintone-button');\n        }\n    }\n    function onSkinToneOptionsKeyup(event) {\n        // this should never happen, but makes me nervous not to have it\n        /* istanbul ignore if */ if (!state.skinTonePickerExpanded) return;\n        switch(event.key){\n            case ' ':\n                // enter on keydown, space on keyup. this is just how browsers work for buttons\n                // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n                $9e9d3488b14d9168$var$halt(event);\n                return changeSkinTone(state.activeSkinTone);\n        }\n    }\n    async function onSkinToneOptionsFocusOut(event) {\n        // On blur outside of the skintone listbox, collapse the skintone picker.\n        const { relatedTarget: relatedTarget } = event;\n        // The `else` should never happen, but makes me nervous not to have it\n        /* istanbul ignore else */ if (!relatedTarget || relatedTarget.id !== 'skintone-list') state.skinTonePickerExpanded = false;\n    }\n    function onSearchInput(event) {\n        state.rawSearchText = event.target.value;\n    }\n    return {\n        $set (newState) {\n            $9e9d3488b14d9168$var$assign(state, newState);\n        },\n        $destroy () {\n            abortController.abort();\n        }\n    };\n}\nconst $9e9d3488b14d9168$var$DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst $9e9d3488b14d9168$var$DEFAULT_LOCALE = 'en';\nvar $9e9d3488b14d9168$var$enI18n = {\n    categoriesLabel: 'Categories',\n    emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n    favoritesLabel: 'Favorites',\n    loadingMessage: \"Loading\\u2026\",\n    networkErrorMessage: 'Could not load emoji.',\n    regionLabel: 'Emoji picker',\n    searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n    searchLabel: 'Search',\n    searchResultsLabel: 'Search results',\n    skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n    skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n    skinTonesLabel: 'Skin tones',\n    skinTones: [\n        'Default',\n        'Light',\n        'Medium-Light',\n        'Medium',\n        'Medium-Dark',\n        'Dark'\n    ],\n    categories: {\n        custom: 'Custom',\n        'smileys-emotion': 'Smileys and emoticons',\n        'people-body': 'People and body',\n        'animals-nature': 'Animals and nature',\n        'food-drink': 'Food and drink',\n        'travel-places': 'Travel and places',\n        activities: 'Activities',\n        objects: 'Objects',\n        symbols: 'Symbols',\n        flags: 'Flags'\n    }\n};\nvar $9e9d3488b14d9168$var$baseStyles = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:\\\"\\\";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\nconst $9e9d3488b14d9168$var$PROPS = [\n    'customEmoji',\n    'customCategorySorting',\n    'database',\n    'dataSource',\n    'i18n',\n    'locale',\n    'skinToneEmoji',\n    'emojiVersion'\n];\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\nconst $9e9d3488b14d9168$var$EXTRA_STYLES = `:host{--emoji-font-family:${$9e9d3488b14d9168$var$FONT_FAMILY}}`;\nclass $9e9d3488b14d9168$export$2e2bcd8739ae039 extends HTMLElement {\n    constructor(props){\n        super();\n        this.attachShadow({\n            mode: 'open'\n        });\n        const style = document.createElement('style');\n        style.textContent = $9e9d3488b14d9168$var$baseStyles + $9e9d3488b14d9168$var$EXTRA_STYLES;\n        this.shadowRoot.appendChild(style);\n        this._ctx = {\n            // Set defaults\n            locale: $9e9d3488b14d9168$var$DEFAULT_LOCALE,\n            dataSource: $9e9d3488b14d9168$var$DEFAULT_DATA_SOURCE,\n            skinToneEmoji: $9e9d3488b14d9168$var$DEFAULT_SKIN_TONE_EMOJI,\n            customCategorySorting: $9e9d3488b14d9168$var$DEFAULT_CATEGORY_SORTING,\n            customEmoji: null,\n            i18n: $9e9d3488b14d9168$var$enI18n,\n            emojiVersion: null,\n            ...props\n        };\n        // Handle properties set before the element was upgraded\n        for (const prop of $9e9d3488b14d9168$var$PROPS)if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n            this._ctx[prop] = this[prop];\n            delete this[prop];\n        }\n        this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n    }\n    connectedCallback() {\n        // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\n        // do nothing (preserve the state)\n        if (!this._cmp) this._cmp = $9e9d3488b14d9168$var$createRoot(this.shadowRoot, this._ctx);\n    }\n    disconnectedCallback() {\n        // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\n        // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\n        $9e9d3488b14d9168$var$qM(()=>{\n            // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\n            if (!this.isConnected && this._cmp) {\n                this._cmp.$destroy();\n                this._cmp = undefined;\n                const { database: database } = this._ctx;\n                database.close()// only happens if the database failed to load in the first place, so we don't care\n                .catch((err)=>console.error(err));\n            }\n        });\n    }\n    static get observedAttributes() {\n        return [\n            'locale',\n            'data-source',\n            'skin-tone-emoji',\n            'emoji-version'\n        ] // complex objects aren't supported, also use kebab-case\n        ;\n    }\n    attributeChangedCallback(attrName, oldValue, newValue) {\n        this._set(// convert from kebab-case to camelcase\n        // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n        attrName.replace(/-([a-z])/g, (_, up)=>up.toUpperCase()), // convert string attribute to float if necessary\n        attrName === 'emoji-version' ? parseFloat(newValue) : newValue);\n    }\n    _set(prop, newValue) {\n        this._ctx[prop] = newValue;\n        if (this._cmp) this._cmp.$set({\n            [prop]: newValue\n        });\n        if ([\n            'locale',\n            'dataSource'\n        ].includes(prop)) this._dbFlush();\n    }\n    _dbCreate() {\n        const { locale: locale, dataSource: dataSource, database: database } = this._ctx;\n        // only create a new database if we really need to\n        if (!database || database.locale !== locale || database.dataSource !== dataSource) this._set('database', new (0, $736431a7b9521865$export$2e2bcd8739ae039)({\n            locale: locale,\n            dataSource: dataSource\n        }));\n    }\n    // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n    // so we don't create two Databases if e.g. both the locale and the dataSource change\n    _dbFlush() {\n        $9e9d3488b14d9168$var$qM(()=>this._dbCreate());\n    }\n}\nconst $9e9d3488b14d9168$var$definitions = {};\nfor (const prop of $9e9d3488b14d9168$var$PROPS)$9e9d3488b14d9168$var$definitions[prop] = {\n    get () {\n        if (prop === 'database') // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n        return this._ctx[prop];\n    },\n    set (val) {\n        if (prop === 'database') throw new Error('database is read-only');\n        this._set(prop, val);\n    }\n};\nObject.defineProperties($9e9d3488b14d9168$export$2e2bcd8739ae039.prototype, $9e9d3488b14d9168$var$definitions);\n/* istanbul ignore else */ if (!customElements.get('emoji-picker')) customElements.define('emoji-picker', $9e9d3488b14d9168$export$2e2bcd8739ae039);\n\n\n\n\n\nvar $bf4f0cf05f6fd378$var$browserSupportsTextareaTextNodes;\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */ function $bf4f0cf05f6fd378$var$canManipulateViaTextNodes(input) {\n    if (input.nodeName !== \"TEXTAREA\") return false;\n    if (typeof $bf4f0cf05f6fd378$var$browserSupportsTextareaTextNodes === \"undefined\") {\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = 1;\n        $bf4f0cf05f6fd378$var$browserSupportsTextareaTextNodes = !!textarea.firstChild;\n    }\n    return $bf4f0cf05f6fd378$var$browserSupportsTextareaTextNodes;\n}\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */ function $bf4f0cf05f6fd378$var$index(input, text) {\n    // Most of the used APIs only work with the field selected\n    input.focus(); // IE 8-10\n    if (document.selection) {\n        var ieRange = document.selection.createRange();\n        ieRange.text = text; // Move cursor after the inserted text\n        ieRange.collapse(false);\n        ieRange.select();\n        return;\n    } // Webkit + Edge\n    var isSuccess = document.execCommand(\"insertText\", false, text);\n    if (!isSuccess) {\n        var start = input.selectionStart;\n        var end = input.selectionEnd; // Firefox (non-standard method)\n        if (typeof input.setRangeText === \"function\") input.setRangeText(text);\n        else {\n            // To make a change we just need a Range, not a Selection\n            var range = document.createRange();\n            var textNode = document.createTextNode(text);\n            if ($bf4f0cf05f6fd378$var$canManipulateViaTextNodes(input)) {\n                var node = input.firstChild; // If textarea is empty, just insert the text\n                if (!node) input.appendChild(textNode);\n                else {\n                    // Otherwise we need to find a nodes for start and end\n                    var offset = 0;\n                    var startNode = null;\n                    var endNode = null;\n                    while(node && (startNode === null || endNode === null)){\n                        var nodeLength = node.nodeValue.length; // if start of the selection falls into current node\n                        if (start >= offset && start <= offset + nodeLength) range.setStart(startNode = node, start - offset);\n                         // if end of the selection falls into current node\n                        if (end >= offset && end <= offset + nodeLength) range.setEnd(endNode = node, end - offset);\n                        offset += nodeLength;\n                        node = node.nextSibling;\n                    } // If there is some text selected, remove it as we should replace it\n                    if (start !== end) range.deleteContents();\n                }\n            } // If the node is a textarea and the range doesn't span outside the element\n            //\n            // Get the commonAncestorContainer of the selected range and test its type\n            // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n            // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n            if ($bf4f0cf05f6fd378$var$canManipulateViaTextNodes(input) && range.commonAncestorContainer.nodeName === \"#text\") // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n            range.insertNode(textNode);\n            else {\n                // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n                var value = input.value;\n                input.value = value.slice(0, start) + text + value.slice(end);\n            }\n        } // Correct the cursor position to be at the end of the insertion\n        input.setSelectionRange(start + text.length, start + text.length); // Notify any possible listeners of the change\n        var e = document.createEvent(\"UIEvent\");\n        e.initEvent(\"input\", true, false);\n        input.dispatchEvent(e);\n    }\n}\nvar $bf4f0cf05f6fd378$export$2e2bcd8739ae039 = $bf4f0cf05f6fd378$var$index;\n\n\n/*!\n * @georapbox/capture-photo-element\n * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n *\n * @version 5.0.0\n * @homepage https://github.com/georapbox/capture-photo-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ var $dced0d224c6d876e$var$c = (r, t, e)=>(Number.isNaN(t) && (t = 0), Number.isNaN(e) && (e = 0), Math.min(Math.max(r, Math.min(t, e)), Math.max(t, e)));\nvar $dced0d224c6d876e$var$a = \"capture-photo\", $dced0d224c6d876e$var$d = `\n  :host { display: block; box-sizing: border-box; }\n  :host *, :host *::before, :host *::after { box-sizing: inherit;}\n  :host([hidden]), [hidden], ::slotted([hidden]) { display: none; }\n  video { display: block; }\n  #output:empty { display: none; }\n`, $dced0d224c6d876e$var$u = document.createElement(\"template\");\n$dced0d224c6d876e$var$u.innerHTML = `\n  <style>${$dced0d224c6d876e$var$d}</style>\n  <video part=\"video\" playsinline></video>\n  <canvas hidden></canvas>\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n    <slot name=\"actions\"></slot>\n  </div>\n  <slot></slot>\n  <div part=\"output-container\" id=\"output\"></div>\n`;\nvar $dced0d224c6d876e$export$cc30a98fe3890794 = class r extends HTMLElement {\n    #a = {};\n    #t = null;\n    #n = null;\n    #h = null;\n    #e = null;\n    #r = null;\n    #i = null;\n    constructor(){\n        super(), this.#a = this.getSupportedConstraints(), this.shadowRoot || this.attachShadow({\n            mode: \"open\"\n        }).appendChild($dced0d224c6d876e$var$u.content.cloneNode(!0));\n    }\n    static get observedAttributes() {\n        return [\n            \"no-image\",\n            \"pan\",\n            \"tilt\",\n            \"zoom\",\n            \"torch\"\n        ];\n    }\n    attributeChangedCallback(t, e, s) {\n        if (!this.isConnected) return;\n        let i = this.getTrackCapabilities();\n        if (t === \"no-image\" && e !== s && this.#u(), t === \"pan\" && e !== s && \"pan\" in this.#a) {\n            let o = \"pan\" in i && i.pan?.min && i.pan?.max ? this.pan >= i.pan.min && this.pan <= i.pan.max : !1;\n            typeof this.pan == \"number\" && o && this.#o(\"pan\", this.pan);\n        }\n        if (t === \"tilt\" && e !== s && \"tilt\" in this.#a) {\n            let o = \"tilt\" in i && i.tilt?.min && i.tilt?.max ? this.tilt >= i.tilt.min && this.tilt <= i.tilt.max : !1;\n            typeof this.tilt == \"number\" && o && this.#o(\"tilt\", this.tilt);\n        }\n        if (t === \"zoom\" && e !== s && \"zoom\" in this.#a) {\n            let o = \"zoom\" in i && i.zoom?.min && i.zoom?.max ? this.zoom >= i.zoom.min && this.zoom <= i.zoom.max : !1;\n            typeof this.zoom == \"number\" && o && this.#o(\"zoom\", this.zoom);\n        }\n        t === \"torch\" && e !== s && \"torch\" in this.#a && this.#o(\"torch\", this.torch);\n    }\n    async connectedCallback() {\n        if (this.#s(\"autoPlay\"), this.#s(\"noImage\"), this.#s(\"facingMode\"), this.#s(\"cameraResolution\"), this.#s(\"pan\"), this.#s(\"tilt\"), this.#s(\"zoom\"), this.#s(\"torch\"), this.#s(\"calculateFileSize\"), this.#n = this.shadowRoot?.querySelector(\"canvas\") || null, this.#h = this.shadowRoot?.getElementById(\"output\") || null, this.#e = this.shadowRoot?.querySelector(\"video\") || null, this.#r = this.shadowRoot?.querySelector('slot[name=\"capture-button\"]') || null, this.#i = this.#m(), this.#e?.addEventListener(\"loadedmetadata\", this.#c), this.#r?.addEventListener(\"slotchange\", this.#d), this.#i?.addEventListener(\"click\", this.#l), !r.isSupported()) return this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:error`, {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                error: {\n                    name: \"NotSupportedError\",\n                    message: \"Not supported\"\n                }\n            }\n        }));\n        this.autoPlay && this.startVideoStream();\n    }\n    disconnectedCallback() {\n        this.stopVideoStream(), this.#i?.removeEventListener(\"click\", this.#l), this.#e?.removeEventListener(\"loadedmetadata\", this.#c), this.#r?.removeEventListener(\"slotchange\", this.#d);\n    }\n    get autoPlay() {\n        return this.hasAttribute(\"auto-play\");\n    }\n    set autoPlay(t) {\n        this.toggleAttribute(\"auto-play\", !!t);\n    }\n    get noImage() {\n        return this.hasAttribute(\"no-image\");\n    }\n    set noImage(t) {\n        this.toggleAttribute(\"no-image\", !!t);\n    }\n    get facingMode() {\n        let t = this.getAttribute(\"facing-mode\");\n        return t !== \"user\" ? \"environment\" : t;\n    }\n    set facingMode(t) {\n        this.setAttribute(\"facing-mode\", t);\n    }\n    get cameraResolution() {\n        return this.getAttribute(\"camera-resolution\") || \"\";\n    }\n    set cameraResolution(t) {\n        this.setAttribute(\"camera-resolution\", t);\n    }\n    get pan() {\n        return Number(this.getAttribute(\"pan\")) || 0;\n    }\n    set pan(t) {\n        this.setAttribute(\"pan\", t != null ? t.toString() : t);\n    }\n    get tilt() {\n        return Number(this.getAttribute(\"tilt\")) || 0;\n    }\n    set tilt(t) {\n        this.setAttribute(\"tilt\", t != null ? t.toString() : t);\n    }\n    get zoom() {\n        return Number(this.getAttribute(\"zoom\")) || 1;\n    }\n    set zoom(t) {\n        this.setAttribute(\"zoom\", t != null ? t.toString() : t);\n    }\n    get torch() {\n        return this.hasAttribute(\"torch\");\n    }\n    set torch(t) {\n        this.toggleAttribute(\"torch\", !!t);\n    }\n    get calculateFileSize() {\n        return this.hasAttribute(\"calculate-file-size\");\n    }\n    set calculateFileSize(t) {\n        this.toggleAttribute(\"calculate-file-size\", !!t);\n    }\n    get loading() {\n        return this.hasAttribute(\"loading\");\n    }\n    #l = (t)=>{\n        t.preventDefault(), this.capture();\n    };\n    #c = (t)=>{\n        let e = t.target;\n        e.play().then(()=>{\n            this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:video-play`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    video: e\n                }\n            }));\n        }).catch((s)=>{\n            this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: s\n                }\n            }));\n        }).finally(()=>{\n            this.removeAttribute(\"loading\");\n        });\n    };\n    #u() {\n        this.#h && this.#h.replaceChildren();\n    }\n    #o(t, e) {\n        if (!this.#t) return;\n        let [s] = this.#t.getVideoTracks(), i = this.getTrackCapabilities(), o = this.getTrackSettings(), n = t === \"pan\" || t === \"tilt\" || t === \"zoom\" ? $dced0d224c6d876e$var$c(Number(e), i[t]?.min || 1, i[t]?.max || 1) : e;\n        t in o && s.applyConstraints({\n            advanced: [\n                {\n                    [t]: n\n                }\n            ]\n        }).catch(()=>{});\n    }\n    #d = (t)=>{\n        t.target?.name === \"capture-button\" && (this.#i?.removeEventListener(\"click\", this.#l), this.#i = this.#m(), this.#i && (this.#i.addEventListener(\"click\", this.#l), this.#i.nodeName !== \"BUTTON\" && !this.#i.hasAttribute(\"role\") && this.#i.setAttribute(\"role\", \"button\")));\n    };\n    #m() {\n        return this.#r && this.#r.assignedElements({\n            flatten: !0\n        }).find((t)=>t.nodeName === \"BUTTON\" || t.getAttribute(\"slot\") === \"capture-button\") || null;\n    }\n    #s(t) {\n        let e = this;\n        if (Object.prototype.hasOwnProperty.call(e, t)) {\n            let s = e[t];\n            delete e[t], e[t] = s;\n        }\n    }\n    async startVideoStream(t) {\n        if (!r.isSupported() || this.#t) return;\n        this.setAttribute(\"loading\", \"\");\n        let e = {\n            video: {\n                facingMode: {\n                    ideal: this.facingMode\n                },\n                pan: !0,\n                tilt: !0,\n                zoom: !0,\n                torch: this.torch\n            },\n            audio: !1\n        };\n        if (typeof t == \"string\" && t.trim().length > 0 && (e.video.deviceId = {\n            exact: t\n        }), typeof this.cameraResolution == \"string\" && this.cameraResolution.trim().length > 0) {\n            let [s = 0, i = 0] = this.cameraResolution.split(\"x\").map((o)=>Number(o));\n            s > 0 && i > 0 && (e.video.width = s, e.video.height = i);\n        }\n        try {\n            this.#t = await navigator.mediaDevices.getUserMedia(e), this.#e && (this.#e.srcObject = this.#t), this.#o(\"pan\", this.pan), this.#o(\"tilt\", this.tilt), this.#o(\"zoom\", this.zoom);\n        } catch (s) {\n            this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: s\n                }\n            }));\n        } finally{\n            this.removeAttribute(\"loading\");\n        }\n    }\n    restartVideoStream(t) {\n        this.#t && this.#e && this.stopVideoStream(), this.startVideoStream(t);\n    }\n    stopVideoStream() {\n        if (!this.#e || !this.#t) return;\n        let [t] = this.#t.getVideoTracks();\n        t?.stop(), this.#e.srcObject = null, this.#t = null;\n    }\n    async capture() {\n        if (!(this.loading || !this.#n || !this.#e)) try {\n            let t = this.#n.getContext(\"2d\"), e = this.#e.videoWidth, s = this.#e.videoHeight;\n            this.#n.width = e, this.#n.height = s, t?.drawImage(this.#e, 0, 0, e, s);\n            let i = this.#n.toDataURL(\"image/png\");\n            if (typeof i == \"string\" && i.includes(\"data:image\")) {\n                if (!this.noImage) {\n                    let n = new Image;\n                    n.src = i, n.width = e, n.height = s, n.alt = \"Captured photo\", n.setAttribute(\"part\", \"output-image\"), this.#u(), this.#h?.appendChild(n);\n                }\n                let o = {\n                    dataURI: i,\n                    width: e,\n                    height: s\n                };\n                if (this.calculateFileSize) try {\n                    let l = (await (await fetch(i)).blob()).size;\n                    l && (o.size = l);\n                } catch  {}\n                this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:success`, {\n                    bubbles: !0,\n                    composed: !0,\n                    detail: o\n                }));\n            }\n        } catch (t) {\n            this.dispatchEvent(new CustomEvent(`${$dced0d224c6d876e$var$a}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        }\n    }\n    getSupportedConstraints() {\n        return r.isSupported() ? navigator.mediaDevices.getSupportedConstraints() || {} : {};\n    }\n    getTrackCapabilities() {\n        if (!this.#t) return {};\n        let [t] = this.#t.getVideoTracks();\n        return t && typeof t.getCapabilities == \"function\" ? t.getCapabilities() || {} : {};\n    }\n    getTrackSettings() {\n        if (!this.#t) return {};\n        let [t] = this.#t.getVideoTracks();\n        return t && typeof t.getSettings == \"function\" ? t.getSettings() || {} : {};\n    }\n    static async getVideoInputDevices() {\n        return !navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices ? [] : (await navigator.mediaDevices.enumerateDevices() || []).filter((e)=>e.kind === \"videoinput\" && !!e.deviceId);\n    }\n    static isSupported() {\n        return !!navigator.mediaDevices?.getUserMedia;\n    }\n    static defineCustomElement(t = $dced0d224c6d876e$var$a) {\n        typeof window < \"u\" && !window.customElements.get(t) && window.customElements.define(t, r);\n    }\n};\n$dced0d224c6d876e$export$cc30a98fe3890794.defineCustomElement();\n\n\n/*!\n * @georapbox/web-share-element\n * A custom element that implements the Web Share API to share user-defined data.\n *\n * @version 3.1.1\n * @homepage https://github.com/georapbox/web-share-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ function $7a2aca835bb05064$export$c37129e465f64ef0(a) {\n    return a !== null && typeof a == \"object\" ? \"share\" in navigator && \"canShare\" in navigator && navigator.canShare(a) : \"share\" in navigator;\n}\n\n\n/*!\n * @georapbox/theme-toggle-element\n * A custom element that allows you to toggle between dark and light theme.\n *\n * @version 4.0.2\n * @homepage https://github.com/georapbox/theme-toggle-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ var $647a8d39392e9d40$var$n = \"theme-toggle/theme-preference\", $647a8d39392e9d40$var$r = \"data-theme\", $647a8d39392e9d40$var$a = document.createElement(\"template\"), $647a8d39392e9d40$var$h = `\n  :host {\n    display: inline-block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  .hidden {\n    display: none !important;\n  }\n\n  .button {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.375rem;\n    border: none;\n    background-color: transparent;\n    color: inherit;\n    cursor: pointer;\n    font-family: inherit;\n    font-size: inherit;\n  }\n\n  .icon--hidden {\n    display: none !important;\n  }\n\n  .label--hidden {\n    display: inline !important;\n    position: absolute !important;\n    width: 1px !important;\n    height: 1px !important;\n    padding: 0 !important;\n    margin: -1px !important;\n    overflow: hidden !important;\n    clip: rect(0, 0, 0, 0) !important;\n    white-space: nowrap !important;\n    border: 0 !important;\n  }\n\n  .icon__svg {\n    min-width: 1.5em;\n    width: 1.5em;\n    height: 1.5em;\n  }\n\n  .system-path {\n    transform: scale(0.4) translateY(-4px);\n    transform-origin: center;\n  }\n`;\n$647a8d39392e9d40$var$a.innerHTML = `\n  <style>${$647a8d39392e9d40$var$h}</style>\n\n  <button type=\"button\" part=\"base\" id=\"theme-toggle\" class=\"button\">\n    <slot name=\"light\">\n      <slot name=\"icon-light\" part=\"icon icon-light\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-light\" part=\"label label-light\" class=\"label\">Light theme</slot>\n    </slot>\n\n    <slot name=\"dark\">\n      <slot name=\"icon-dark\" part=\"icon icon-dark\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-dark\" part=\"label label-dark\" class=\"label\">Dark theme</slot>\n    </slot>\n\n    <slot name=\"system\">\n      <slot name=\"icon-system\" part=\"icon icon-system\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z\"></path>\n          <path class=\"system-path system-path--light\" d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n          <path class=\"system-path system-path--dark\" d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-system\" part=\"label label-system\" class=\"label\">System theme</slot>\n    </slot>\n  </button>\n`;\nvar $647a8d39392e9d40$export$173e0a822059eddc = class l extends HTMLElement {\n    #i = [\n        \"light\",\n        \"dark\",\n        \"system\"\n    ];\n    #t = \"system\";\n    #s = 0;\n    #e = null;\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\",\n            delegatesFocus: !0\n        }).appendChild($647a8d39392e9d40$var$a.content.cloneNode(!0)), this.#e = this.shadowRoot?.getElementById(\"theme-toggle\") || null;\n    }\n    static get observedAttributes() {\n        return [\n            \"storage-key\",\n            \"no-icon\",\n            \"no-label\"\n        ];\n    }\n    attributeChangedCallback(t, e, s) {\n        t === \"storage-key\" && e !== s && (this.#t = this.#a(), this.#s = this.#i.indexOf(this.#t) || 0, this.#o()), t === \"no-icon\" && e !== s && this.#e && this.#e.querySelectorAll('slot[name^=\"icon\"]').forEach((o)=>{\n            o.classList.toggle(\"icon--hidden\", this.noIcon);\n        }), t === \"no-label\" && e !== s && this.#e && this.#e.querySelectorAll('slot[name^=\"label\"]').forEach((o)=>{\n            o.classList.toggle(\"label--hidden\", this.noLabel);\n        });\n    }\n    get noStorage() {\n        return this.hasAttribute(\"no-storage\");\n    }\n    set noStorage(t) {\n        t ? this.setAttribute(\"no-storage\", \"\") : this.removeAttribute(\"no-storage\");\n    }\n    get storageKey() {\n        return this.getAttribute(\"storage-key\");\n    }\n    set storageKey(t) {\n        t != null && this.setAttribute(\"storage-key\", t);\n    }\n    get noIcon() {\n        return this.hasAttribute(\"no-icon\");\n    }\n    set noIcon(t) {\n        t ? this.setAttribute(\"no-icon\", \"\") : this.removeAttribute(\"no-icon\");\n    }\n    get noLabel() {\n        return this.hasAttribute(\"no-label\");\n    }\n    set noLabel(t) {\n        t ? this.setAttribute(\"no-label\", \"\") : this.removeAttribute(\"no-label\");\n    }\n    connectedCallback() {\n        this.#n(\"noStorage\"), this.#n(\"storageKey\"), this.#n(\"noIcon\"), this.#n(\"noLabel\"), this.#t = this.#a(), this.#s = this.#i.indexOf(this.#t) || 0, this.#o(), this.#e?.addEventListener(\"click\", this.#l), window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\", this.#r);\n    }\n    disconnectedCallback() {\n        this.#e?.removeEventListener(\"click\", this.#l), window.matchMedia(\"(prefers-color-scheme: dark)\").removeEventListener(\"change\", this.#r);\n    }\n    #a() {\n        if (this.noStorage) return \"system\";\n        let t = \"\";\n        try {\n            t = window.localStorage.getItem(this.storageKey || $647a8d39392e9d40$var$n) || \"\";\n        } catch  {}\n        return t === \"light\" || t === \"dark\" || t === \"system\" ? t : \"system\";\n    }\n    #h() {\n        if (!this.noStorage) try {\n            window.localStorage.setItem(this.storageKey || $647a8d39392e9d40$var$n, this.#t);\n        } catch  {}\n    }\n    #o() {\n        if (this.#e?.querySelectorAll('slot[name=\"light\"], slot[name=\"dark\"], slot[name=\"system\"]').forEach((t)=>{\n            t.classList.toggle(\"hidden\", !t.getAttribute(\"name\")?.startsWith(this.#t));\n        }), document.documentElement.setAttribute($647a8d39392e9d40$var$r, this.#t), this.#t === \"system\") {\n            let t = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n            this.#e?.querySelectorAll(\".system-path\").forEach((e)=>{\n                e.classList.toggle(\"hidden\", t ? e.classList.contains(\"system-path--light\") : e.classList.contains(\"system-path--dark\"));\n            });\n        }\n    }\n    #c() {\n        return this.#s = (this.#s + 1) % this.#i.length, this.#i[this.#s];\n    }\n    #l = ()=>{\n        this.#t = this.#c(), this.#h(), this.#o(), this.dispatchEvent(new CustomEvent(\"tt-theme-change\", {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                theme: this.#t\n            }\n        }));\n    };\n    #r = ()=>{\n        this.#o();\n    };\n    #n(t) {\n        let e = this;\n        if (Object.prototype.hasOwnProperty.call(e, t)) {\n            let s = e[t];\n            delete e[t], e[t] = s;\n        }\n    }\n    static defineCustomElement(t = \"theme-toggle\") {\n        typeof window < \"u\" && !window.customElements.get(t) && window.customElements.define(t, l);\n    }\n};\n$647a8d39392e9d40$export$173e0a822059eddc.defineCustomElement();\n\n\n/*!\n * @georapbox/web-share-element\n * A custom element that implements the Web Share API to share user-defined data.\n *\n * @version 3.1.1\n * @homepage https://github.com/georapbox/web-share-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ var $cd62c5572235e737$var$h = `\n  :host {\n    display: inline-block;\n  }\n`, $cd62c5572235e737$var$r = document.createElement(\"template\");\n$cd62c5572235e737$var$r.innerHTML = `\n  <style>${$cd62c5572235e737$var$h}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;\nvar $cd62c5572235e737$export$30b344bef3e55b67 = class a extends HTMLElement {\n    #e;\n    #t;\n    #r = [];\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\",\n            delegatesFocus: !0\n        }).appendChild($cd62c5572235e737$var$r.content.cloneNode(!0)), this.#e = this.shadowRoot?.querySelector('slot[name=\"button\"]') || null, this.#t = this.#h();\n    }\n    static get observedAttributes() {\n        return [\n            \"disabled\"\n        ];\n    }\n    attributeChangedCallback(t, e, i) {\n        t === \"disabled\" && e !== i && this.#t && (this.#t.toggleAttribute(\"disabled\", this.disabled), this.#t.setAttribute(\"aria-disabled\", this.disabled.toString()), this.#t.part && this.#t.part.contains(\"button\") && this.#t.part.toggle(\"button--disabled\", this.disabled));\n    }\n    connectedCallback() {\n        this.#s(\"shareUrl\"), this.#s(\"shareTitle\"), this.#s(\"shareText\"), this.#s(\"shareFiles\"), this.#s(\"disabled\"), this.#e?.addEventListener(\"slotchange\", this.#a), this.#t?.addEventListener(\"click\", this.#i);\n    }\n    disconnectedCallback() {\n        this.#e?.removeEventListener(\"slotchange\", this.#a), this.#t?.removeEventListener(\"click\", this.#i);\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(t) {\n        this.toggleAttribute(\"disabled\", !!t);\n    }\n    get shareUrl() {\n        return this.getAttribute(\"share-url\") || \"\";\n    }\n    set shareUrl(t) {\n        this.setAttribute(\"share-url\", t);\n    }\n    get shareTitle() {\n        return this.getAttribute(\"share-title\") || \"\";\n    }\n    set shareTitle(t) {\n        this.setAttribute(\"share-title\", t);\n    }\n    get shareText() {\n        return this.getAttribute(\"share-text\") || \"\";\n    }\n    set shareText(t) {\n        this.setAttribute(\"share-text\", t);\n    }\n    get shareFiles() {\n        return this.#r;\n    }\n    set shareFiles(t) {\n        Array.isArray(t) && t.length > 0 && (this.#r = t);\n    }\n    async share() {\n        if (!this.disabled) try {\n            let t = {};\n            this.shareUrl && (t.url = this.shareUrl), this.shareTitle && (t.title = this.shareTitle), this.shareText && (t.text = this.shareText), Array.isArray(this.shareFiles) && this.shareFiles.length > 0 && navigator.canShare && navigator.canShare({\n                files: this.shareFiles\n            }) && (t.files = this.shareFiles), await navigator.share(t), this.dispatchEvent(new CustomEvent(\"web-share:success\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    shareData: t\n                }\n            }));\n        } catch (t) {\n            if (t instanceof Error && t.name === \"AbortError\") {\n                this.dispatchEvent(new CustomEvent(\"web-share:abort\", {\n                    bubbles: !0,\n                    composed: !0,\n                    detail: {\n                        error: t\n                    }\n                }));\n                return;\n            }\n            this.dispatchEvent(new CustomEvent(\"web-share:error\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        }\n    }\n    #i = (t)=>{\n        t.preventDefault(), !this.disabled && this.share();\n    };\n    #a = (t)=>{\n        t.target && t.target.name === \"button\" && (this.#t?.removeEventListener(\"click\", this.#i), this.#t = this.#h(), this.#t && (this.#t.addEventListener(\"click\", this.#i), this.#t.nodeName !== \"BUTTON\" && !this.#t.hasAttribute(\"role\") && this.#t.setAttribute(\"role\", \"button\")));\n    };\n    #h() {\n        return this.#e && this.#e.assignedElements({\n            flatten: !0\n        }).find((t)=>t.nodeName === \"BUTTON\" || t.getAttribute(\"slot\") === \"button\") || null;\n    }\n    #s(t) {\n        let e = this;\n        if (Object.prototype.hasOwnProperty.call(e, t)) {\n            let i = e[t];\n            delete e[t], e[t] = i;\n        }\n    }\n    static defineCustomElement(t = \"web-share\") {\n        typeof window < \"u\" && !window.customElements.get(t) && window.customElements.define(t, a);\n    }\n};\n$cd62c5572235e737$export$30b344bef3e55b67.defineCustomElement();\n\n\n/*!\n * @georapbox/modal-element\n * A custom element to create a modal, using the native dialog element under the hood.\n *\n * @version 1.10.0\n * @homepage https://github.com/georapbox/modal-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ var $d9c5053bade2d3f8$var$r = document.createElement(\"template\"), $d9c5053bade2d3f8$var$l = `\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-color: canvastext;\n\n    --me-header-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-header-color: initial;\n\n    --me-body-spacing: 1rem;\n    --me-body-background-color: transparent;\n    --me-body-color: initial;\n    --me-footer-background-color: transparent;\n    --me-footer-color: initial;\n\n    --me-close-padding: 0.4375rem;\n    --me-close-border: none;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-close-color: inherit;\n    --me-close-font-size: 1rem;\n\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n    color: var(--me-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open]:not(.dialog--no-animations) {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog:not(.dialog--no-animations) {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open]:not(.dialog--no-animations) {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]:not(.dialog--no-animations)::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: 300ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n    color: var(--me-header-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    color: var(--me-body-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n    color: var(--me-footer-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: var(--me-close-padding);\n    border: var(--me-close-border);\n    border-radius: var(--me-close-border-radius);\n    background-color: var(--me-close-background-color);\n    color: var(--me-close-color);\n    font-size: var(--me-close-font-size);\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;\n$d9c5053bade2d3f8$var$r.innerHTML = `\n  <style>${$d9c5053bade2d3f8$var$l}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg part=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;\nvar $d9c5053bade2d3f8$export$32589115725b904b = class n extends HTMLElement {\n    static CLOSE_REQUEST_REASONS = {\n        CLOSE_BUTTON: \"close-button\",\n        ESCAPE_KEY: \"escape-key\",\n        BACKDROP_CLICK: \"backdrop-click\",\n        EXTERNAL_INVOKER: \"external-invoker\"\n    };\n    #e = null;\n    #i = null;\n    #n = null;\n    #o = void 0;\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\"\n        }).appendChild($d9c5053bade2d3f8$var$r.content.cloneNode(!0)), this.shadowRoot && (this.#e = this.shadowRoot.querySelector(\"dialog\"), this.#i = this.shadowRoot.querySelector('slot[name=\"footer\"]'), this.#n = this.shadowRoot.querySelector('slot[name=\"close\"]'));\n    }\n    static get observedAttributes() {\n        return [\n            \"open\",\n            \"no-header\",\n            \"no-animations\",\n            \"no-close-button\",\n            \"close-label\"\n        ];\n    }\n    attributeChangedCallback(e, t, o) {\n        if (this.#e !== null) {\n            if (e === \"open\" && t !== o && (this.open ? (this.#e.showModal(), this.dispatchEvent(new CustomEvent(\"me-open\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    element: this\n                }\n            })), document.body && !this.preserveOverflow && (document.body.style.overflow = \"hidden\")) : this.#e.close()), e === \"no-header\" && t !== o) {\n                let i = this.#e.querySelector(\".dialog__header\");\n                i !== null && (i.hidden = this.noHeader);\n            }\n            if (e === \"no-animations\" && t !== o && this.#e.classList.toggle(\"dialog--no-animations\", this.noAnimations), e === \"no-close-button\" && t !== o) {\n                let i = this.#e.querySelector(\".dialog__close\");\n                i !== null && (i.hidden = this.noCloseButton);\n            }\n            e === \"close-label\" && t !== o && this.#r();\n        }\n    }\n    connectedCallback() {\n        this.#t(\"open\"), this.#t(\"staticBackdrop\"), this.#t(\"noHeader\"), this.#t(\"noAnimations\"), this.#t(\"noCloseButton\"), this.#t(\"fullscreen\"), this.#t(\"preserveOverflow\"), this.#t(\"placement\"), this.#t(\"closeLabel\"), this.#e?.addEventListener(\"click\", this.#h), this.#e?.addEventListener(\"close\", this.#l), this.#e?.addEventListener(\"cancel\", this.#d), this.#e?.querySelector('form[method=\"dialog\"]')?.addEventListener(\"submit\", this.#c), this.#i?.addEventListener(\"slotchange\", this.#g), this.#n?.addEventListener(\"slotchange\", this.#u), this.addEventListener(\"command\", this.#m);\n    }\n    disconnectedCallback() {\n        this.#o && clearTimeout(this.#o), this.#e?.removeEventListener(\"click\", this.#h), this.#e?.removeEventListener(\"close\", this.#l), this.#e?.removeEventListener(\"cancel\", this.#d), this.#e?.querySelector('form[method=\"dialog\"]')?.removeEventListener(\"submit\", this.#c), this.#i?.removeEventListener(\"slotchange\", this.#g), this.#n?.removeEventListener(\"slotchange\", this.#u), this.removeEventListener(\"command\", this.#m);\n    }\n    get open() {\n        return this.hasAttribute(\"open\");\n    }\n    set open(e) {\n        this.toggleAttribute(\"open\", !!e);\n    }\n    get staticBackdrop() {\n        return this.hasAttribute(\"static-backdrop\");\n    }\n    set staticBackdrop(e) {\n        this.toggleAttribute(\"static-backdrop\", !!e);\n    }\n    get noHeader() {\n        return this.hasAttribute(\"no-header\");\n    }\n    set noHeader(e) {\n        this.toggleAttribute(\"no-header\", !!e);\n    }\n    get noAnimations() {\n        return this.hasAttribute(\"no-animations\");\n    }\n    set noAnimations(e) {\n        this.toggleAttribute(\"no-animations\", !!e);\n    }\n    get noCloseButton() {\n        return this.hasAttribute(\"no-close-button\");\n    }\n    set noCloseButton(e) {\n        this.toggleAttribute(\"no-close-button\", !!e);\n    }\n    get fullscreen() {\n        return this.hasAttribute(\"fullscreen\");\n    }\n    set fullscreen(e) {\n        this.toggleAttribute(\"fullscreen\", !!e);\n    }\n    get preserveOverflow() {\n        return this.hasAttribute(\"preserve-overflow\");\n    }\n    set preserveOverflow(e) {\n        this.toggleAttribute(\"preserve-overflow\", !!e);\n    }\n    get placement() {\n        return this.getAttribute(\"placement\") || \"center\";\n    }\n    set placement(e) {\n        this.setAttribute(\"placement\", e != null ? e.toString() : e);\n    }\n    get closeLabel() {\n        return this.getAttribute(\"close-label\") || \"Close\";\n    }\n    set closeLabel(e) {\n        this.setAttribute(\"close-label\", e != null ? e.toString() : e);\n    }\n    #r() {\n        if (this.#e === null) return;\n        let e = this.#e.querySelector(\".dialog__close\");\n        if (e === null) return;\n        (this.#n?.assignedElements() || [])?.some((i)=>i.textContent?.replace(/\\s/g, \"\") !== \"\") ? e.removeAttribute(\"aria-label\") : e.setAttribute(\"aria-label\", this.closeLabel);\n    }\n    #a() {\n        this.#o || (this.#e?.classList.add(\"dialog--pulse\"), this.#o = setTimeout(()=>{\n            this.#e?.classList.remove(\"dialog--pulse\"), clearTimeout(this.#o), this.#o = void 0;\n        }, 300));\n    }\n    #l = ()=>{\n        this.open = !1, this.dispatchEvent(new CustomEvent(\"me-close\", {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                element: this\n            }\n        })), document.body && !this.preserveOverflow && (document.body.style.overflow = \"\");\n    };\n    #d = (e)=>{\n        let t = this.#s(n.CLOSE_REQUEST_REASONS.ESCAPE_KEY);\n        this.dispatchEvent(t), t.defaultPrevented && (e.preventDefault(), !this.noAnimations && this.#a());\n    };\n    #c = (e)=>{\n        let t = this.#s(n.CLOSE_REQUEST_REASONS.CLOSE_BUTTON);\n        this.dispatchEvent(t), t.defaultPrevented && (e.preventDefault(), !this.noAnimations && this.#a());\n    };\n    #h = (e)=>{\n        let t = e.target, o = e.currentTarget, i = null;\n        if (t === o ? i = n.CLOSE_REQUEST_REASONS.BACKDROP_CLICK : t instanceof HTMLElement && t.closest(\"[data-me-close]\") !== null && (i = n.CLOSE_REQUEST_REASONS.EXTERNAL_INVOKER), i !== null) {\n            let s = this.#s(i);\n            this.dispatchEvent(s), s.defaultPrevented || this.staticBackdrop ? !this.noAnimations && this.#a() : this.hide();\n        }\n    };\n    #m = (e)=>{\n        if (e.command === \"--me-open\" && !this.open && this.show(), e.command === \"--me-close\" && this.open) {\n            let t = this.#s(\"external-invoker\");\n            this.dispatchEvent(t), t.defaultPrevented ? !this.noAnimations && this.#a() : this.hide();\n        }\n    };\n    #g = ()=>{\n        if (this.#e === null) return;\n        let e = this.#e.querySelector(\".dialog__footer\");\n        if (e === null) return;\n        let t = this.#i?.assignedNodes(), o = t ? t.length > 0 : !1;\n        e.hidden = !o;\n    };\n    #u = ()=>{\n        this.#r();\n    };\n    #s(e) {\n        return new CustomEvent(\"me-request-close\", {\n            bubbles: !0,\n            composed: !0,\n            cancelable: !0,\n            detail: {\n                reason: e,\n                element: this\n            }\n        });\n    }\n    #t(e) {\n        let t = this;\n        if (Object.prototype.hasOwnProperty.call(t, e)) {\n            let o = t[e];\n            delete t[e], t[e] = o;\n        }\n    }\n    show() {\n        this.open || (this.open = !0);\n    }\n    hide() {\n        this.open && (this.open = !1);\n    }\n    static defineCustomElement(e = \"modal-element\") {\n        typeof window < \"u\" && !window.customElements.get(e) && window.customElements.define(e, n);\n    }\n};\n$d9c5053bade2d3f8$export$32589115725b904b.defineCustomElement();\n\n\n/*!\n * @georapbox/files-dropzone-element\n * A custom element that creates a drag and drop zone for files\n *\n * @version 2.1.1\n * @homepage https://github.com/georapbox/files-dropzone-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */ function $9351176e8d763a78$var$h(o, e = \"\") {\n    if (!e) return !0;\n    let t = [\n        ...new Set(e.split(\",\").map((r)=>r.trim()).filter(Boolean))\n    ], i = o.type, s = i.replace(/\\/.*$/, \"\");\n    for (let r of t)if (r.charAt(0) === \".\") {\n        if (o.name.toLowerCase().indexOf(r.toLowerCase(), o.name.length - r.length) !== -1) return !0;\n    } else if (/\\/\\*$/.test(r)) {\n        if (s === r.replace(/\\/.*$/, \"\")) return !0;\n    } else if (i === r) return !0;\n    return !1;\n}\nvar $9351176e8d763a78$var$E = new Map([\n    [\n        \"aac\",\n        \"audio/aac\"\n    ],\n    [\n        \"abw\",\n        \"application/x-abiword\"\n    ],\n    [\n        \"arc\",\n        \"application/x-freearc\"\n    ],\n    [\n        \"avif\",\n        \"image/avif\"\n    ],\n    [\n        \"avi\",\n        \"video/x-msvideo\"\n    ],\n    [\n        \"azw\",\n        \"application/vnd.amazon.ebook\"\n    ],\n    [\n        \"bin\",\n        \"application/octet-stream\"\n    ],\n    [\n        \"bmp\",\n        \"image/bmp\"\n    ],\n    [\n        \"bz\",\n        \"application/x-bzip\"\n    ],\n    [\n        \"bz2\",\n        \"application/x-bzip2\"\n    ],\n    [\n        \"cda\",\n        \"application/x-cdf\"\n    ],\n    [\n        \"csh\",\n        \"application/x-csh\"\n    ],\n    [\n        \"css\",\n        \"text/css\"\n    ],\n    [\n        \"csv\",\n        \"text/csv\"\n    ],\n    [\n        \"doc\",\n        \"application/msword\"\n    ],\n    [\n        \"docx\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n    ],\n    [\n        \"eot\",\n        \"application/vnd.ms-fontobject\"\n    ],\n    [\n        \"epub\",\n        \"application/epub+zip\"\n    ],\n    [\n        \"gz\",\n        \"application/gzip\"\n    ],\n    [\n        \"gif\",\n        \"image/gif\"\n    ],\n    [\n        \"heic\",\n        \"image/heic\"\n    ],\n    [\n        \"heif\",\n        \"image/heif\"\n    ],\n    [\n        \"htm\",\n        \"text/html\"\n    ],\n    [\n        \"html\",\n        \"text/html\"\n    ],\n    [\n        \"ico\",\n        \"image/vnd.microsoft.icon\"\n    ],\n    [\n        \"ics\",\n        \"text/calendar\"\n    ],\n    [\n        \"jar\",\n        \"application/java-archive\"\n    ],\n    [\n        \"jpeg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jpg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jxl\",\n        \"image/jxl\"\n    ],\n    [\n        \"js\",\n        \"text/javascript\"\n    ],\n    [\n        \"json\",\n        \"application/json\"\n    ],\n    [\n        \"jsonld\",\n        \"application/ld+json\"\n    ],\n    [\n        \"markdown\",\n        \"text/markdown\"\n    ],\n    [\n        \"md\",\n        \"text/markdown\"\n    ],\n    [\n        \"mid\",\n        \"audio/midi\"\n    ],\n    [\n        \"midi\",\n        \"audio/midi\"\n    ],\n    [\n        \"mjs\",\n        \"text/javascript\"\n    ],\n    [\n        \"mp3\",\n        \"audio/mpeg\"\n    ],\n    [\n        \"mp4\",\n        \"video/mp4\"\n    ],\n    [\n        \"mpeg\",\n        \"video/mpeg\"\n    ],\n    [\n        \"mpkg\",\n        \"application/vnd.apple.installer+xml\"\n    ],\n    [\n        \"odp\",\n        \"application/vnd.oasis.opendocument.presentation\"\n    ],\n    [\n        \"ods\",\n        \"application/vnd.oasis.opendocument.spreadsheet\"\n    ],\n    [\n        \"odt\",\n        \"application/vnd.oasis.opendocument.text\"\n    ],\n    [\n        \"oga\",\n        \"audio/ogg\"\n    ],\n    [\n        \"ogv\",\n        \"video/ogg\"\n    ],\n    [\n        \"ogx\",\n        \"application/ogg\"\n    ],\n    [\n        \"opus\",\n        \"audio/opus\"\n    ],\n    [\n        \"otf\",\n        \"font/otf\"\n    ],\n    [\n        \"png\",\n        \"image/png\"\n    ],\n    [\n        \"pdf\",\n        \"application/pdf\"\n    ],\n    [\n        \"php\",\n        \"application/x-httpd-php\"\n    ],\n    [\n        \"ppt\",\n        \"application/vnd.ms-powerpoint\"\n    ],\n    [\n        \"pptx\",\n        \"application/vnd.openxmlformats-officedocument.presentationml.presentation\"\n    ],\n    [\n        \"rar\",\n        \"application/vnd.rar\"\n    ],\n    [\n        \"rtf\",\n        \"application/rtf\"\n    ],\n    [\n        \"sh\",\n        \"application/x-sh\"\n    ],\n    [\n        \"svg\",\n        \"image/svg+xml\"\n    ],\n    [\n        \"swf\",\n        \"application/x-shockwave-flash\"\n    ],\n    [\n        \"tar\",\n        \"application/x-tar\"\n    ],\n    [\n        \"tif\",\n        \"image/tiff\"\n    ],\n    [\n        \"tiff\",\n        \"image/tiff\"\n    ],\n    [\n        \"ts\",\n        \"video/mp2t\"\n    ],\n    [\n        \"ttf\",\n        \"font/ttf\"\n    ],\n    [\n        \"txt\",\n        \"text/plain\"\n    ],\n    [\n        \"vsd\",\n        \"application/vnd.visio\"\n    ],\n    [\n        \"wav\",\n        \"audio/wav\"\n    ],\n    [\n        \"weba\",\n        \"audio/webm\"\n    ],\n    [\n        \"webm\",\n        \"video/webm\"\n    ],\n    [\n        \"webp\",\n        \"image/webp\"\n    ],\n    [\n        \"woff\",\n        \"font/woff\"\n    ],\n    [\n        \"woff2\",\n        \"font/woff2\"\n    ],\n    [\n        \"xhtml\",\n        \"application/xhtml+xml\"\n    ],\n    [\n        \"xls\",\n        \"application/vnd.ms-excel\"\n    ],\n    [\n        \"xlsx\",\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n    ],\n    [\n        \"xml\",\n        \"application/xml\"\n    ],\n    [\n        \"xul\",\n        \"application/vnd.mozilla.xul+xml\"\n    ],\n    [\n        \"zip\",\n        \"application/zip\"\n    ],\n    [\n        \"7z\",\n        \"application/x-7z-compressed\"\n    ],\n    [\n        \"mkv\",\n        \"video/x-matroska\"\n    ],\n    [\n        \"mov\",\n        \"video/quicktime\"\n    ],\n    [\n        \"msg\",\n        \"application/vnd.ms-outlook\"\n    ]\n]), $9351176e8d763a78$var$f = [\n    \".DS_Store\",\n    \"Thumbs.db\"\n], $9351176e8d763a78$var$z = (o)=>{\n    let { name: e } = o;\n    if (e && e.lastIndexOf(\".\") !== -1 && !o.type) {\n        let i = (e.split(\".\").pop() || \"\").toLowerCase(), s = $9351176e8d763a78$var$E.get(i);\n        s && Object.defineProperty(o, \"type\", {\n            value: s,\n            writable: !1,\n            configurable: !1,\n            enumerable: !0\n        });\n    }\n    return o;\n}, $9351176e8d763a78$var$g = (o, e)=>{\n    let t = $9351176e8d763a78$var$z(o);\n    if (typeof t.path != \"string\") {\n        let { webkitRelativePath: i } = o;\n        Object.defineProperty(t, \"path\", {\n            value: typeof e == \"string\" ? e : i || o.name,\n            writable: !1,\n            configurable: !1,\n            enumerable: !0\n        });\n    }\n    return t;\n}, $9351176e8d763a78$var$u = async (o)=>await new Promise((e, t)=>{\n        o.readEntries(e, t);\n    }), $9351176e8d763a78$var$x = async (o)=>{\n    let e = [], t = await $9351176e8d763a78$var$u(o);\n    for(; t.length > 0;)e.push(...t), t = await $9351176e8d763a78$var$u(o);\n    return e;\n}, $9351176e8d763a78$var$y = (o)=>new Promise((e, t)=>{\n        o.file((i)=>e($9351176e8d763a78$var$g(i, o.fullPath)), t);\n    }), $9351176e8d763a78$var$w = async (o)=>{\n    let e = [], t = [];\n    for (let i of o){\n        if (i.kind !== \"file\") continue;\n        let s = i.getAsEntry ? i.getAsEntry() : i.webkitGetAsEntry();\n        t.push(s);\n    }\n    for(; t.length > 0;){\n        let i = t.shift();\n        if (i) {\n            if (i.isFile) {\n                let s = await $9351176e8d763a78$var$y(i);\n                $9351176e8d763a78$var$f.indexOf(s.name) === -1 && e.push(s);\n            } else i.isDirectory && t.push(...await $9351176e8d763a78$var$x(i.createReader()));\n        } else continue;\n    }\n    return e;\n}, $9351176e8d763a78$var$m = async (o)=>{\n    let e = [];\n    for (let t of o)$9351176e8d763a78$var$f.indexOf(t.name) === -1 && e.push($9351176e8d763a78$var$g(t));\n    return e;\n}, $9351176e8d763a78$var$d = async (o)=>o.dataTransfer ? o.dataTransfer.items ? await $9351176e8d763a78$var$w(o.dataTransfer.items) : await $9351176e8d763a78$var$m(o.dataTransfer.files) : await $9351176e8d763a78$var$m(o.target.files);\nvar $9351176e8d763a78$var$O = String.raw, $9351176e8d763a78$var$L = String.raw, $9351176e8d763a78$var$b = \"files-dropzone\", $9351176e8d763a78$var$v = document.createElement(\"template\"), $9351176e8d763a78$var$F = $9351176e8d763a78$var$O`\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49, 132, 253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition:\n      border var(--dropzone-transition-duration) ease-in-out,\n      background-color var(--dropzone-transition-duration) ease-in-out,\n      color var(--dropzone-transition-duration) ease-in-out,\n      box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;\n$9351176e8d763a78$var$v.innerHTML = $9351176e8d763a78$var$L`\n  <style>\n    ${$9351176e8d763a78$var$F}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden />\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot><span>Drag 'n' drop files here, or click to select files</span></slot>\n  </div>\n`;\nvar $9351176e8d763a78$export$6ccd1735166caad9 = class o extends HTMLElement {\n    static ERROR_CODES = {\n        FILE_DIALOG_OPEN_FAILED: \"FILE_DIALOG_OPEN_FAILED\",\n        FILE_INPUT_CHANGE_FAILED: \"FILE_INPUT_CHANGE_FAILED\",\n        DROP_EVENT_PROCESSING_FAILED: \"DROP_EVENT_PROCESSING_FAILED\",\n        UNKNOWN_ERROR: \"UNKNOWN_ERROR\"\n    };\n    static REJECTION_CODES = {\n        TOO_MANY_FILES: \"TOO_MANY_FILES\",\n        FILE_TOO_LARGE: \"FILE_TOO_LARGE\",\n        FILE_TOO_SMALL: \"FILE_TOO_SMALL\",\n        INVALID_MIME_TYPE: \"INVALID_MIME_TYPE\"\n    };\n    #t = null;\n    #e = null;\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\",\n            delegatesFocus: !0\n        }).appendChild($9351176e8d763a78$var$v.content.cloneNode(!0)), this.shadowRoot && (this.#t = this.shadowRoot.getElementById(\"file-input\"), this.#e = this.shadowRoot.getElementById(\"dropzone\"));\n    }\n    static get observedAttributes() {\n        return [\n            \"accept\",\n            \"disabled\",\n            \"multiple\"\n        ];\n    }\n    attributeChangedCallback(e, t, i) {\n        e === \"accept\" && t !== i && this.#t && (this.#t.accept = this.accept), e === \"disabled\" && t !== i && this.#t && (this.#t.disabled = this.disabled, this.disabled ? (this.#e?.removeAttribute(\"tabindex\"), this.#e?.setAttribute(\"aria-disabled\", \"true\")) : (this.#e?.setAttribute(\"tabindex\", \"0\"), this.#e?.setAttribute(\"aria-disabled\", \"false\"))), e === \"multiple\" && t !== i && this.#t && (this.#t.multiple = this.multiple);\n    }\n    connectedCallback() {\n        this.#o(\"accept\"), this.#o(\"disabled\"), this.#o(\"maxFiles\"), this.#o(\"maxSize\"), this.#o(\"minSize\"), this.#o(\"multiple\"), this.#o(\"autoFocus\"), this.#o(\"noStyle\"), this.#t?.addEventListener(\"change\", this.#s), this.#e?.addEventListener(\"dragenter\", this.#n), this.#e?.addEventListener(\"dragover\", this.#a), this.#e?.addEventListener(\"dragleave\", this.#d), this.#e?.addEventListener(\"drop\", this.#l), this.#e?.addEventListener(\"click\", this.#c), this.#e?.addEventListener(\"keyup\", this.#p), this.autoFocus && this.#e?.focus();\n    }\n    disconnectedCallback() {\n        this.#t?.removeEventListener(\"change\", this.#s), this.#e?.removeEventListener(\"dragenter\", this.#n), this.#e?.removeEventListener(\"dragover\", this.#a), this.#e?.removeEventListener(\"dragleave\", this.#d), this.#e?.removeEventListener(\"drop\", this.#l), this.#e?.removeEventListener(\"click\", this.#c), this.#e?.removeEventListener(\"keyup\", this.#p);\n    }\n    get accept() {\n        return this.getAttribute(\"accept\") || \"\";\n    }\n    set accept(e) {\n        this.setAttribute(\"accept\", e != null ? e.toString() : e);\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(e) {\n        this.toggleAttribute(\"disabled\", !!e);\n    }\n    get maxFiles() {\n        let e = Number(this.getAttribute(\"max-files\")) || 0;\n        return e <= 0 ? 1 / 0 : Math.floor(Math.abs(e));\n    }\n    set maxFiles(e) {\n        this.setAttribute(\"max-files\", e != null ? e.toString() : e);\n    }\n    get maxSize() {\n        let e = this.getAttribute(\"max-size\");\n        if (e === null) return 1 / 0;\n        let t = Number(e);\n        return Number.isNaN(t) ? 1 / 0 : t;\n    }\n    set maxSize(e) {\n        this.setAttribute(\"max-size\", e != null ? e.toString() : e);\n    }\n    get minSize() {\n        let e = this.getAttribute(\"min-size\");\n        if (e === null) return 0;\n        let t = Number(e);\n        return Number.isNaN(t) ? 0 : t;\n    }\n    set minSize(e) {\n        this.setAttribute(\"min-size\", e != null ? e.toString() : e);\n    }\n    get multiple() {\n        return this.hasAttribute(\"multiple\");\n    }\n    set multiple(e) {\n        this.toggleAttribute(\"multiple\", !!e);\n    }\n    get autoFocus() {\n        return this.hasAttribute(\"auto-focus\");\n    }\n    set autoFocus(e) {\n        this.toggleAttribute(\"auto-focus\", !!e);\n    }\n    get noStyle() {\n        return this.hasAttribute(\"no-style\");\n    }\n    set noStyle(e) {\n        this.toggleAttribute(\"no-style\", !!e);\n    }\n    #i(e, t, i) {\n        let s = {\n            bubbles: !0,\n            composed: !0,\n            cancelable: !1,\n            ...i,\n            detail: t\n        }, r = new CustomEvent(`${$9351176e8d763a78$var$b}-${e}`, s);\n        return this.dispatchEvent(r);\n    }\n    #r(e, t) {\n        let i = {\n            code: e,\n            error: t\n        };\n        this.#i(\"error\", i);\n    }\n    #s = async (e)=>{\n        try {\n            this.#h(await $9351176e8d763a78$var$d(e));\n        } catch (t) {\n            this.#r(o.ERROR_CODES.FILE_INPUT_CHANGE_FAILED, t);\n        }\n    };\n    #n = ()=>{\n        this.disabled || this.#i(\"dragenter\");\n    };\n    #a = (e)=>{\n        if (e.preventDefault(), this.disabled) {\n            e.dataTransfer.dropEffect = \"none\";\n            return;\n        }\n        e.dataTransfer.dropEffect = \"copy\", this.#e && (this.#e.classList.add(\"dropzone--dragover\"), this.#e.part.add(\"dropzone--dragover\")), this.#i(\"dragover\");\n    };\n    #d = ()=>{\n        this.disabled || (this.#e && (this.#e.classList.remove(\"dropzone--dragover\"), this.#e.part.remove(\"dropzone--dragover\")), this.#i(\"dragleave\"));\n    };\n    #l = async (e)=>{\n        if (!this.disabled) {\n            e.preventDefault(), this.#e && (this.#e.classList.remove(\"dropzone--dragover\"), this.#e.part.remove(\"dropzone--dragover\"));\n            try {\n                this.#h(await $9351176e8d763a78$var$d(e));\n            } catch (t) {\n                this.#r(o.ERROR_CODES.DROP_EVENT_PROCESSING_FAILED, t);\n            }\n        }\n    };\n    #c = ()=>{\n        this.disabled || this.openFileDialog();\n    };\n    #p = (e)=>{\n        this.disabled || (e.key === \" \" || e.key === \"Enter\") && this.openFileDialog();\n    };\n    #h(e) {\n        if (!Array.isArray(e) || !e.length) return;\n        let t = [], i = [], s = e.length;\n        if (!this.multiple && s > 1) for (let r of e)i.push({\n            file: r,\n            errors: [\n                {\n                    code: o.REJECTION_CODES.TOO_MANY_FILES,\n                    message: \"Too many files selected. Only 1 file is allowed.\"\n                }\n            ]\n        });\n        else if (this.multiple && s > this.maxFiles) for (let r of e)i.push({\n            file: r,\n            errors: [\n                {\n                    code: o.REJECTION_CODES.TOO_MANY_FILES,\n                    message: `Too many files selected. Only ${this.maxFiles} ${this.maxFiles > 1 ? \"files are\" : \"file is\"} allowed.`\n                }\n            ]\n        });\n        else for (let r of e){\n            let l = $9351176e8d763a78$var$h(r, this.accept), c = r.size > this.maxSize, p = r.size < this.minSize;\n            if (l && !c && !p) t.push(r);\n            else {\n                let n = [];\n                l || n.push({\n                    code: o.REJECTION_CODES.INVALID_MIME_TYPE,\n                    message: `File type \"${r.type}\" is not accepted.`\n                }), c && n.push({\n                    code: o.REJECTION_CODES.FILE_TOO_LARGE,\n                    message: `File size ${r.size} exceeds the maximum size of ${this.maxSize}.`\n                }), p && n.push({\n                    code: o.REJECTION_CODES.FILE_TOO_SMALL,\n                    message: `File size ${r.size} is smaller than the minimum size of ${this.minSize}.`\n                }), i.push({\n                    file: r,\n                    errors: n\n                });\n            }\n        }\n        this.#i(\"drop\", {\n            acceptedFiles: t,\n            rejectedFiles: i\n        }), t.length > 0 && this.#i(\"drop-accepted\", {\n            acceptedFiles: t\n        }), i.length > 0 && this.#i(\"drop-rejected\", {\n            rejectedFiles: i\n        }), this.#t && (this.#t.value = this.#t.defaultValue);\n    }\n    openFileDialog() {\n        if (!(this.disabled || !this.#t)) {\n            if (\"showPicker\" in HTMLInputElement.prototype && typeof this.#t.showPicker == \"function\") {\n                try {\n                    this.#t.showPicker();\n                } catch (e) {\n                    this.#r(o.ERROR_CODES.FILE_DIALOG_OPEN_FAILED, e);\n                }\n                return;\n            }\n            this.#t.click();\n        }\n    }\n    #o(e) {\n        let t = this;\n        if (Object.prototype.hasOwnProperty.call(t, e)) {\n            let i = t[e];\n            delete t[e], t[e] = i;\n        }\n    }\n    static defineCustomElement(e = $9351176e8d763a78$var$b) {\n        typeof window < \"u\" && !window.customElements.get(e) && window.customElements.define(e, o);\n    }\n};\n$9351176e8d763a78$export$6ccd1735166caad9.defineCustomElement();\n\n\n\n\nconst $65136e012e05e2d7$export$63e7bed68b07a85c = [\n    'image/jpg',\n    'image/jpeg',\n    'image/png',\n    'image/apng',\n    'image/gif',\n    'image/webp',\n    'image/avif'\n];\nconst $65136e012e05e2d7$export$62045be72fe457b4 = 20;\nconst $65136e012e05e2d7$export$8f089f0a062560ff = 20;\nconst $65136e012e05e2d7$export$d3f4819a57998cf7 = 360;\n\n\n/**\n * Generates a unique id of the form `${prefix}-${randomString}-${suffix}`.\n *\n * @param {string} [prefix=''] - The prefix to use for the id.\n * @param {string} [suffix=''] - The suffix to use for the id.\n * @returns {string} - The unique id.\n */ const $17004b28c97c1306$export$e2a22331486dcca0 = (prefix = '', suffix = '')=>{\n    const prefixString = typeof prefix === 'string' && prefix !== '' ? prefix + '-' : '';\n    const suffixString = typeof suffix === 'string' && suffix !== '' ? '-' + suffix : '';\n    const randomString = Math.random().toString(36).substring(2, 8); // Pseudo-random string of six alphanumeric characters.\n    return `${prefixString}${randomString}${suffixString}`;\n};\n\n\n\nconst $2669cb7c28251d2a$export$6539e087749cf9d3 = async (options = {})=>{\n    const res = await fetch(options.url);\n    const blob = await res.blob();\n    const mimeType = options.mimeType || blob.type || '';\n    if (!(0, $65136e012e05e2d7$export$63e7bed68b07a85c).includes(mimeType)) throw new Error(`This is not an accepted image format. Accepted MIME types are: ${(0, $65136e012e05e2d7$export$63e7bed68b07a85c).join(', ')}`);\n    return new File([\n        blob\n    ], options.filename || '', blob);\n};\n\n\n/**\n * A class representing a storage utility for managing data in `localStorage` or `sessionStorage`.\n */ class $9e093dbdf49c6d51$export$bf2a15d34f3c441c {\n    /**\n   * The prefix to be added to all keys.\n   *\n   * @type {string}\n   * @private\n   */ #keyPrefix = null;\n    /**\n   * The storage provider (`localStorage` or `sessionStorage`).\n   *\n   * @type {Storage}\n   * @private\n   */ #provider = null;\n    /**\n   * Creates an instance of Storage.\n   *\n   * @param {string} prefix - The prefix to be added to all keys when storing/retrieving data.\n   * @param {Storage} [provider=localStorage] - The storage provider (`localStorage` or `sessionStorage`).\n   * @throws {Error} If prefix is not provided or if the provider is not supported.\n   */ constructor(prefix, provider = localStorage){\n        if (!prefix) throw new Error('Storage prefix is required');\n        if (provider !== localStorage && provider !== sessionStorage) throw new Error('Storage provider is not supported');\n        this.#keyPrefix = prefix;\n        this.#provider = provider;\n    }\n    /**\n   * Sets a key-value pair in the storage.\n   *\n   * @param {string} key - The key for the data.\n   * @param {*} value - The value to be stored (will be converted to JSON string).\n   */ set(key, value) {\n        try {\n            this.#provider.setItem(`${this.#keyPrefix}${key}`, JSON.stringify(value));\n        } catch (err) {\n            console.error('Error saving to storage', err);\n        }\n    }\n    /**\n   * Retrieves the value associated with the given key from the storage.\n   *\n   * @param {string} key - The key to retrieve the value for.\n   * @returns {*} The value associated with the key, or `null` if key is not found or an error occurs.\n   */ get(key) {\n        try {\n            const value = this.#provider.getItem(`${this.#keyPrefix}${key}`);\n            return value ? JSON.parse(value) : null;\n        } catch (err) {\n            console.error('Error getting from storage', err);\n            return null;\n        }\n    }\n}\nconst $9e093dbdf49c6d51$var$DEFAULT_STORAGE_PREFIX = 'meme-generator/';\nconst $9e093dbdf49c6d51$var$DEFAULT_STORAGE_PROVIDER = localStorage;\nconst $9e093dbdf49c6d51$export$ddcffe0146c8f882 = new $9e093dbdf49c6d51$export$bf2a15d34f3c441c($9e093dbdf49c6d51$var$DEFAULT_STORAGE_PREFIX, $9e093dbdf49c6d51$var$DEFAULT_STORAGE_PROVIDER);\n\n\nconst $c38b15b964e67d8b$export$de75f46579dcf24 = (selectedImage)=>{\n    return typeof selectedImage === 'string';\n};\n\n\nvar $4ce134d17b44ae18$exports = {};\n$4ce134d17b44ae18$exports = $parcel$resolve(\"lRBOd\");\n\n\nvar $4aac2f31d7cdbf2a$exports = {};\n$4aac2f31d7cdbf2a$exports = $parcel$resolve(\"hOimC\");\n\n\nvar $7047d5eb69770188$exports = {};\n$7047d5eb69770188$exports = $parcel$resolve(\"c5nso\");\n\n\nvar $50860fc9edc85a1e$exports = {};\n$50860fc9edc85a1e$exports = $parcel$resolve(\"917SN\");\n\n\nvar $ab9b02fed1d18789$exports = {};\n$ab9b02fed1d18789$exports = $parcel$resolve(\"kCRYk\");\n\n\nvar $9453a539ecff3153$exports = {};\n$9453a539ecff3153$exports = $parcel$resolve(\"7mTjM\");\n\n\nvar $2740691160ef63b7$exports = {};\n$2740691160ef63b7$exports = $parcel$resolve(\"bNJU7\");\n\n\nvar $d2dea0daed093658$exports = {};\n$d2dea0daed093658$exports = $parcel$resolve(\"2zTNP\");\n\n\nvar $abfbe5e1894df7bd$exports = {};\n$abfbe5e1894df7bd$exports = $parcel$resolve(\"6U5us\");\n\n\nvar $42aed72aaf921606$exports = {};\n$42aed72aaf921606$exports = $parcel$resolve(\"jadM2\");\n\n\nvar $1b830496d4af00a3$exports = {};\n$1b830496d4af00a3$exports = $parcel$resolve(\"4rZHV\");\n\n\nconst $56b863c8b6be7003$export$6874249d87f2602a = [\n    {\n        name: 'Pressuru',\n        label: 'Pressuru',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($4ce134d17b44ae18$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'Oswald-Regular',\n        label: 'Oswald',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($4aac2f31d7cdbf2a$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'Oswald-Bold',\n        label: 'Oswald Bold',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($7047d5eb69770188$exports))),\n        style: 'normal',\n        weight: '700'\n    },\n    {\n        name: 'Roboto-Regular',\n        label: 'Roboto',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($50860fc9edc85a1e$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'Roboto-Bold',\n        label: 'Roboto Bold',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($ab9b02fed1d18789$exports))),\n        style: 'normal',\n        weight: '700'\n    },\n    {\n        name: 'RobotoCondensed-Regular',\n        label: 'Roboto Condensed',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($9453a539ecff3153$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'RobotoCondensed-Bold',\n        label: 'Roboto Condensed Bold',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($2740691160ef63b7$exports))),\n        style: 'normal',\n        weight: '700'\n    },\n    {\n        name: 'CourierPrime-Regular',\n        label: 'Courier Prime',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($d2dea0daed093658$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'CourierPrime-Bold',\n        label: 'Courier Prime Bold',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($abfbe5e1894df7bd$exports))),\n        style: 'normal',\n        weight: '700'\n    },\n    {\n        name: 'OpenSans-Regular',\n        label: 'Open Sans',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($42aed72aaf921606$exports))),\n        style: 'normal',\n        weight: '400'\n    },\n    {\n        name: 'OpenSans-Bold',\n        label: 'Open Sans Bold',\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($1b830496d4af00a3$exports))),\n        style: 'normal',\n        weight: '400'\n    }\n];\nconst $56b863c8b6be7003$export$59eceaef0c7797b2 = async (name, path, options = {})=>{\n    try {\n        const font = new FontFace(name, `url(${path})`, {\n            ...options\n        });\n        await font.load();\n        document.fonts.add(font);\n    } catch (err) {\n        console.error(err);\n    }\n};\n\n\nconst $3969451ff60cb8d5$var$errorsContainer = document.getElementById('errorsContainer');\nconst $3969451ff60cb8d5$var$hideError = (evt)=>{\n    const target = evt.currentTarget;\n    target.removeEventListener('click', $3969451ff60cb8d5$var$hideError);\n    $3969451ff60cb8d5$var$errorsContainer.removeChild(target.parentNode);\n};\nconst $3969451ff60cb8d5$export$af04143326425dbd = (message = '', type = 'info')=>{\n    const types = [\n        'info',\n        'warning',\n        'danger'\n    ];\n    if (!types.includes(type)) type = 'info';\n    const template = /* html */ `\n    ${message}\n    <button type=\"button\" class=\"btn-close\" data-dismiss=\"alert\" aria-label=\"Close\"></button>\n  `;\n    const div = document.createElement('div');\n    div.className = `alert alert-${type} alert-dismissible text-break mb-2 fade`;\n    div.innerHTML = template;\n    div.querySelector('button').addEventListener('click', $3969451ff60cb8d5$var$hideError);\n    $3969451ff60cb8d5$var$errorsContainer.appendChild(div);\n    setTimeout(()=>div.classList.add('show'), 100);\n};\n\n\n\n\n\nconst $a5e4a78f80aa8693$var$defaultTextboxData = {\n    id: '',\n    text: '',\n    fillColor: '#ffffff',\n    strokeColor: '#000000',\n    font: 'Pressuru',\n    fontSize: 40,\n    fontWeight: 'normal',\n    textAlign: 'center',\n    shadowBlur: 0,\n    strokeWidth: 1.5,\n    offsetY: 0,\n    offsetX: 0,\n    rotate: 0,\n    allCaps: true,\n    textBackgroundEnabled: false,\n    textBackgroundColor: '#000000'\n};\nconst $a5e4a78f80aa8693$var$textboxes = new Map();\nclass $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b {\n    constructor(data){\n        const id = (0, $17004b28c97c1306$export$e2a22331486dcca0)('textbox', Date.now().toString(36));\n        this.data = data ? {\n            ...data,\n            id: id\n        } : {\n            ...$a5e4a78f80aa8693$var$defaultTextboxData,\n            id: id\n        };\n        $a5e4a78f80aa8693$var$textboxes.set(id, this);\n        document.dispatchEvent(new CustomEvent(`textbox-create`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                textbox: this\n            }\n        }));\n    }\n    getData() {\n        return this.data;\n    }\n    static hasDefaultValues(textboxData) {\n        for (const key of Object.keys($a5e4a78f80aa8693$var$defaultTextboxData)){\n            if (key !== 'id' && textboxData[key] !== $a5e4a78f80aa8693$var$defaultTextboxData[key]) return false;\n        }\n        return true;\n    }\n    static create(data) {\n        return new $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b(data);\n    }\n    static getAll() {\n        return $a5e4a78f80aa8693$var$textboxes;\n    }\n    static getById(id) {\n        return $a5e4a78f80aa8693$var$textboxes.get(id);\n    }\n    static remove(id) {\n        $a5e4a78f80aa8693$var$textboxes.delete(id);\n        document.dispatchEvent(new CustomEvent(`textbox-remove`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                id: id\n            }\n        }));\n    }\n    static createElement(textbox, autoFocus = true) {\n        if (!(textbox instanceof $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b)) return;\n        const data = textbox.getData();\n        const { id: id, text: text, fillColor: fillColor, strokeColor: strokeColor, fontSize: fontSize, shadowBlur: shadowBlur, strokeWidth: strokeWidth, offsetX: offsetX, offsetY: offsetY, rotate: rotate, textBackgroundColor: textBackgroundColor } = data;\n        const template = /* html */ `\n    <div class=\"d-flex align-items-center\" data-section=\"basic-settings\">\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"duplicate-text-box\" title=\"Duplicate text box\"></button>\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"delete-text-box\" title=\"Remove text box\"></button>\n\n      <textarea class=\"form-control meme-text\" type=\"text\" data-input=\"text\" autocomplete=\"off\" rows=\"1\" placeholder=\"${`Text #${$a5e4a78f80aa8693$var$textboxes.size}`}\">${text}</textarea>\n\n      <div class=\"d-flex align-items-center pe-2\">\n        <label for=\"fillColorInput\" class=\"visually-hidden\">Fill color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${fillColor}\" id=\"fillColorInput_${id}\" data-input=\"fillColor\" title=\"Fill color\">\n\n        <label for=\"strokeColorInput\" class=\"visually-hidden\">Outline color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${strokeColor}\" id=\"strokeColorInput_${id}\" data-input=\"strokeColor\" title=\"Outline color\">\n\n        <button type=\"button\" class=\"btn btn-secondary settings-button\" data-button=\"settings\" title=\"Settings\"></button>\n      </div>\n    </div>\n\n    <div class=\"p-2\" data-section=\"advanced-settings\" hidden>\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <details class=\"emoji-picker-details\">\n            <summary>Emoji picker</summary>\n            <emoji-picker class=\"light\"></emoji-picker>\n          </details>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontInput_${id}\" class=\"mb-1 d-block text-truncate\">Font: </label>\n\n          <select class=\"form-select\" data-input=\"font\" id=\"fontInput_${id}\">\n            <optgroup label=\"Web fonts\">\n              <option value=\"Impact\">Impact</option>\n              <option value=\"Arial\">Arial</option>\n              <option value=\"Arial Black\">Arial Black</option>\n              <option value=\"Helvetica\">Helvetica</option>\n              <option value=\"Comic Sans MS\">Comic Sans MS</option>\n              <option value=\"Times\">Times</option>\n              <option value=\"Times New Roman\">Times New Roman</option>\n              <option value=\"Courier New\">Courier New</option>\n              <option value=\"Verdana\">Verdana</option>\n              <option value=\"Georgia\">Georgia</option>\n              <option value=\"Palatino\">Palatino</option>\n              <option value=\"Garamond\">Garamond</option>\n              <option value=\"Bookman\">Bookman</option>\n              <option value=\"Trebuchet MS\">Trebuchet MS</option>\n            </optgroup>\n            <optgroup label=\"Google fonts\">\n              ${(0, $56b863c8b6be7003$export$6874249d87f2602a).map(({ name: name, label: label })=>`<option value=\"${name}\">${label}</option>`)}\n            </optgroup>\n          </select>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontSizeInput_${id}\" class=\"mb-1 d-block text-truncate\">Size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"1\" value=\"${fontSize}\" data-input=\"fontSize\" id=\"fontSizeInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontWeightInput_${id}\" class=\"mb-1 d-block text-truncate\">Weight:</label>\n          <select class=\"form-select\" data-input=\"fontWeight\" id=\"fontWeightInput_${id}\">\n            <option value=\"normal\">Normal</option>\n            <option value=\"bold\">Bold</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"shadowWidthInput_${id}\" class=\"mb-1 d-block text-truncate\">Shadow size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${(0, $65136e012e05e2d7$export$62045be72fe457b4)}\" value=\"${shadowBlur}\" data-input=\"shadowBlur\" id=\"shadowWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"strokeWidthInput_${id}\">Outline size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${(0, $65136e012e05e2d7$export$8f089f0a062560ff)}\" step=\"0.5\" value=\"${strokeWidth}\" data-input=\"strokeWidth\" id=\"strokeWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"textAlignInput_${id}\" class=\"mb-1 d-block text-truncate\">Text align:</label>\n          <select class=\"form-select\" data-input=\"textAlign\" id=\"textAlignInput_${id}\">\n            <option value=\"left\">Left</option>\n            <option value=\"center\">Center</option>\n            <option value=\"right\">Right</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetYInput_${id}\">Vertical offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetY}\" data-input=\"offsetY\" id=\"offsetYInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetXInput_${id}\">Horizontal offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetX}\" data-input=\"offsetX\" id=\"offsetXInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"textRotateInput_${id}\">Rotate:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${rotate}\" data-input=\"rotate\" id=\"textRotateInput_${id}\" min=\"-360\" max=\"${(0, $65136e012e05e2d7$export$d3f4819a57998cf7)}\">\n        </div>\n\n        <div class=\"col-12\">\n          <div class=\"move-text-actions mb-3\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Up\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Right\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Down\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Left\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <div class=\"form-check\">\n            <input type=\"checkbox\" class=\"form-check-input\" id=\"allCapsCheckbox_${id}\" data-input=\"allCaps\">\n            <label class=\"form-check-label\" for=\"allCapsCheckbox_${id}\">ALL CAPS</label>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <div class=\"d-flex align-items-center gap-3\">\n            <div class=\"form-check\">\n              <label class=\"form-check-label\" for=\"textBackgroundEnabledInput_${id}\">Enable text background</label>\n              <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" data-input=\"textBackgroundEnabled\" id=\"textBackgroundEnabledInput_${id}\">\n            </div>\n\n            <div>\n              <label class=\"visually-hidden\" for=\"textBackgroundColorInput_${id}\">Background color:</label>\n              <input class=\"border rounded p-0\" type=\"color\" value=\"${textBackgroundColor}\" data-input=\"textBackgroundColor\" id=\"textBackgroundColorInput_${id}\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n        const fragment = document.createDocumentFragment();\n        const div = document.createElement('div');\n        div.setAttribute('id', id);\n        div.setAttribute('data-section', 'textbox');\n        div.className = 'bg-body-tertiary border shadow-sm mb-3 rounded';\n        div.innerHTML = template;\n        div.querySelectorAll('select').forEach((el)=>el.value = data[el.dataset.input]);\n        div.querySelectorAll('input[type=\"checkbox\"]').forEach((el)=>el.checked = data[el.dataset.input]);\n        const textboxEl = fragment.appendChild(div);\n        if (autoFocus) setTimeout(()=>textboxEl.querySelector('[data-input=\"text\"]').focus(), 0);\n        return textboxEl;\n    }\n}\n\n\n\n\nclass $9b58d7721ff4a93e$export$8d01c972ee8b14a9 {\n    #canvas = null;\n    #ctx = null;\n    constructor(canvasEl){\n        this.#canvas = canvasEl;\n        this.#ctx = this.#canvas.getContext('2d');\n    }\n    get width() {\n        return this.#canvas.width;\n    }\n    set width(value) {\n        this.#canvas.width = value;\n    }\n    get height() {\n        return this.#canvas.height;\n    }\n    set height(value) {\n        this.#canvas.height = value;\n    }\n    getDimensions() {\n        return {\n            width: this.width,\n            height: this.height\n        };\n    }\n    setDimensions({ width: width, height: height }) {\n        this.width = width;\n        this.height = height;\n        return this;\n    }\n    toDataURL() {\n        return this.#canvas.toDataURL();\n    }\n    draw(image, textboxes = new Map()) {\n        if (image == null) return;\n        const canvas = this.#canvas;\n        const ctx = this.#ctx;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if ((0, $c38b15b964e67d8b$export$de75f46579dcf24)(image)) {\n            ctx.fillStyle = image;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        } else ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        let multiplier = 0;\n        textboxes.forEach((textbox)=>{\n            const { data: data } = textbox;\n            multiplier += 1;\n            ctx.save();\n            ctx.font = `${data.fontWeight} ${data.fontSize * canvas.width / 1000}px ${data.font}`;\n            ctx.textAlign = data.textAlign;\n            ctx.strokeStyle = data.strokeColor;\n            const xPos = canvas.width / 2;\n            const shadowBlur = data.shadowBlur;\n            const text = data.allCaps === true ? data.text.toUpperCase() : data.text;\n            const textLines = text.split('\\n').filter((line)=>line.trim() !== '');\n            const textMetrics = ctx.measureText(textLines[0]);\n            const textHeight = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent;\n            const bgOffset = data.textBackgroundEnabled ? textHeight / 4 : 0;\n            const lineHeight = textHeight + data.fontSize / 4 + bgOffset;\n            ctx.translate(xPos + data.offsetX, lineHeight * multiplier + data.offsetY);\n            ctx.rotate(Math.min(data.rotate, (0, $65136e012e05e2d7$export$d3f4819a57998cf7)) * Math.PI / 180);\n            if (data.textBackgroundEnabled) {\n                ctx.fillStyle = data.textBackgroundColor;\n                textLines.forEach((line, index)=>{\n                    if (line) {\n                        const textMetrics = ctx.measureText(line);\n                        const textWidth = textMetrics.width;\n                        const textHeight = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent;\n                        const xOffset = data.textAlign === 'left' ? 0 : data.textAlign === 'right' ? -textWidth : -textWidth / 2;\n                        ctx.fillRect(xOffset - bgOffset, index * lineHeight - textHeight - bgOffset, textWidth + bgOffset * 2, textHeight + bgOffset * 2);\n                    }\n                });\n            }\n            ctx.save();\n            if (shadowBlur !== 0) {\n                ctx.shadowOffsetX = 0;\n                ctx.shadowOffsetY = 0;\n                ctx.shadowBlur = Math.min(shadowBlur, (0, $65136e012e05e2d7$export$62045be72fe457b4));\n                ctx.shadowColor = data.strokeColor;\n            }\n            ctx.fillStyle = data.fillColor;\n            textLines.forEach((text, index)=>ctx.fillText(text, 0, index * lineHeight));\n            ctx.restore();\n            if (data.strokeWidth > 0) {\n                ctx.lineWidth = Math.min(data.strokeWidth, (0, $65136e012e05e2d7$export$8f089f0a062560ff));\n                textLines.forEach((text, index)=>ctx.strokeText(text, 0, index * lineHeight));\n            }\n            ctx.restore();\n        });\n        return this;\n    }\n    clear() {\n        this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n        return this;\n    }\n    show() {\n        this.#canvas.hidden = false;\n        return this;\n    }\n    hide() {\n        this.#canvas.hidden = true;\n        return this;\n    }\n    static createInstance(canvasEl) {\n        return new $9b58d7721ff4a93e$export$8d01c972ee8b14a9(canvasEl);\n    }\n}\n\n\nconst $85a5f86b715fe7db$var$canvas = (0, $9b58d7721ff4a93e$export$8d01c972ee8b14a9).createInstance(document.getElementById('canvas'));\nconst $85a5f86b715fe7db$var$videoModal = document.getElementById('videoModal');\nconst $85a5f86b715fe7db$var$downloadModal = document.getElementById('downloadModal');\nconst $85a5f86b715fe7db$var$capturePhotoEl = document.querySelector('capture-photo');\nconst $85a5f86b715fe7db$var$cameraSelect = document.getElementById('cameraSelect');\nconst $85a5f86b715fe7db$var$capturePhotoButton = document.getElementById('capturePhotoButton');\nconst $85a5f86b715fe7db$var$torchButton = document.getElementById('torchButton');\nconst $85a5f86b715fe7db$var$dropzoneEl = document.querySelector('files-dropzone');\nconst $85a5f86b715fe7db$var$instructionsEl = document.getElementById('instructions');\nconst $85a5f86b715fe7db$var$imageUploadMethodSelect = document.getElementById('imageUploadMethodSelect');\nconst $85a5f86b715fe7db$var$fileSelectBtn = document.getElementById('fileSelectBtn');\nconst $85a5f86b715fe7db$var$imageUrlForm = document.getElementById('imageUrlForm');\nconst $85a5f86b715fe7db$var$addTextboxBtn = document.getElementById('addTextboxBtn');\nconst $85a5f86b715fe7db$var$textboxesContainer = document.getElementById('textboxesContainer');\nconst $85a5f86b715fe7db$var$generateMemeBtn = document.getElementById('generateMemeBtn');\nconst $85a5f86b715fe7db$var$openVideoModalBtn = document.getElementById('openVideoModalBtn');\nconst $85a5f86b715fe7db$var$downloadMemeBtn = document.getElementById('downloadMemeBtn');\nconst $85a5f86b715fe7db$var$downloadMemePreview = document.getElementById('downloadMemePreview');\nconst $85a5f86b715fe7db$var$webShareComponent = document.querySelector('web-share');\nconst $85a5f86b715fe7db$var$galleryEl = document.getElementById('gallery');\nconst $85a5f86b715fe7db$var$gallerySearchEl = document.getElementById('gallerySearch');\nconst $85a5f86b715fe7db$var$galleryNoResultsEl = $85a5f86b715fe7db$var$galleryEl.querySelector('.gallery__no-results');\nconst $85a5f86b715fe7db$var$solidColorForm = document.getElementById('solidColorForm');\nconst $85a5f86b715fe7db$var$uploadMethodEls = document.querySelectorAll('.upload-method');\nconst $85a5f86b715fe7db$var$removeConfirmationModal = document.getElementById('removeConfirmationModal');\nconst $85a5f86b715fe7db$var$removeTextForm = document.getElementById('removeTextForm');\nconst $85a5f86b715fe7db$var$maxImageDimensionsForm = document.getElementById('maxImageDimensionsForm');\nconst $85a5f86b715fe7db$var$maxImageDimensionsSelect = $85a5f86b715fe7db$var$maxImageDimensionsForm['maxImageDimensions'];\nconst $85a5f86b715fe7db$var$clearCanvasBtn = document.getElementById('clearCanvasBtn');\nconst $85a5f86b715fe7db$var$maxImageDimensionsFromStorage = (0, $9e093dbdf49c6d51$export$ddcffe0146c8f882).get('maxImageDimensions');\nlet $85a5f86b715fe7db$var$shouldFocusOnTextboxCreate = false;\nlet $85a5f86b715fe7db$var$selectedImage = null;\nlet $85a5f86b715fe7db$var$reqAnimFrame = null;\ndocument.addEventListener('tt-theme-change', $85a5f86b715fe7db$var$handlethemeChange);\ndocument.addEventListener('web-share:error', $85a5f86b715fe7db$var$handleWebShareError);\ndocument.addEventListener('capture-photo:video-play', $85a5f86b715fe7db$var$handleCapturePhotoVideoPlay, {\n    once: true\n});\ndocument.addEventListener('capture-photo:error', $85a5f86b715fe7db$var$handleCapturePhotoError);\ndocument.addEventListener('capture-photo:success', $85a5f86b715fe7db$var$handleCapturePhotoSuccess);\ndocument.addEventListener('me-open', $85a5f86b715fe7db$var$handleModalOpen);\ndocument.addEventListener('me-close', $85a5f86b715fe7db$var$handleModalClose);\ndocument.addEventListener('emoji-click', $85a5f86b715fe7db$var$handleEmojiPickerSelection);\ndocument.addEventListener('textbox-create', $85a5f86b715fe7db$var$handleTextboxCreate);\ndocument.addEventListener('textbox-remove', $85a5f86b715fe7db$var$handleTextboxDelete);\n$85a5f86b715fe7db$var$fileSelectBtn.addEventListener('click', $85a5f86b715fe7db$var$handleFileSelectClick);\n$85a5f86b715fe7db$var$openVideoModalBtn.addEventListener('click', $85a5f86b715fe7db$var$handleOpenVideoModalButtonClick);\n$85a5f86b715fe7db$var$addTextboxBtn.addEventListener('click', $85a5f86b715fe7db$var$handleAddTextboxBtnClick);\n$85a5f86b715fe7db$var$generateMemeBtn.addEventListener('click', $85a5f86b715fe7db$var$generateMeme);\n$85a5f86b715fe7db$var$downloadMemeBtn.addEventListener('click', ()=>$85a5f86b715fe7db$var$downloadModal.open = false);\n$85a5f86b715fe7db$var$imageUrlForm.addEventListener('submit', $85a5f86b715fe7db$var$handleImageUploadFromURL);\n$85a5f86b715fe7db$var$dropzoneEl.addEventListener('files-dropzone-drop-accepted', $85a5f86b715fe7db$var$handleDropFilesAccepted);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('input', $85a5f86b715fe7db$var$handleTextboxesContainerInput);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('change', $85a5f86b715fe7db$var$handleTextboxesContainerChange);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('click', $85a5f86b715fe7db$var$handleTextboxesContainerClick);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('pointerdown', $85a5f86b715fe7db$var$handleTextboxesContainerPointerdown);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('pointerup', $85a5f86b715fe7db$var$handleTextboxesContainerPointerup);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('pointerout', $85a5f86b715fe7db$var$handleTextboxesContainerPointerout);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('keydown', $85a5f86b715fe7db$var$handleTextboxesContainerKeyDown);\n$85a5f86b715fe7db$var$textboxesContainer.addEventListener('keyup', $85a5f86b715fe7db$var$handleTextboxesContainerKeyUp);\n$85a5f86b715fe7db$var$imageUploadMethodSelect.addEventListener('change', $85a5f86b715fe7db$var$handleUploadMethodChange);\n$85a5f86b715fe7db$var$galleryEl.addEventListener('click', $85a5f86b715fe7db$var$handleGalleryClick);\n$85a5f86b715fe7db$var$gallerySearchEl.addEventListener('input', $85a5f86b715fe7db$var$handleGallerySearchInput);\n$85a5f86b715fe7db$var$solidColorForm.addEventListener('input', $85a5f86b715fe7db$var$handleSolidColorFormInput);\n$85a5f86b715fe7db$var$removeTextForm.addEventListener('submit', $85a5f86b715fe7db$var$handleTextRemoveFormSubmit);\n$85a5f86b715fe7db$var$maxImageDimensionsForm.addEventListener('change', $85a5f86b715fe7db$var$handleMaxImageDimensionsFormChange);\n$85a5f86b715fe7db$var$clearCanvasBtn.addEventListener('click', $85a5f86b715fe7db$var$handleClearCanvas);\n$85a5f86b715fe7db$var$cameraSelect.addEventListener('change', $85a5f86b715fe7db$var$handleCameraSelectChange);\n$85a5f86b715fe7db$var$capturePhotoButton.addEventListener('click', $85a5f86b715fe7db$var$handleCapturePhotoButtonClick);\n$85a5f86b715fe7db$var$torchButton.addEventListener('click', $85a5f86b715fe7db$var$handleTorchButtonClick);\nwindow.addEventListener('beforeunload', $85a5f86b715fe7db$var$handleBeforeunload);\n$85a5f86b715fe7db$var$galleryEl.querySelectorAll('button > img')?.forEach((image)=>{\n    image.setAttribute('title', image.getAttribute('alt'));\n});\n(0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).create();\n$85a5f86b715fe7db$var$dropzoneEl.accept = (0, $65136e012e05e2d7$export$63e7bed68b07a85c);\n$85a5f86b715fe7db$var$renderAcceptedImageFormats((0, $65136e012e05e2d7$export$63e7bed68b07a85c), $85a5f86b715fe7db$var$instructionsEl);\n(0, $56b863c8b6be7003$export$6874249d87f2602a).forEach(({ name: name, path: path, style: style, weight: weight })=>{\n    (0, $56b863c8b6be7003$export$59eceaef0c7797b2)(name, path, {\n        style: style,\n        weight: weight\n    });\n});\nif ($85a5f86b715fe7db$var$maxImageDimensionsFromStorage) $85a5f86b715fe7db$var$maxImageDimensionsSelect.value = $85a5f86b715fe7db$var$maxImageDimensionsFromStorage;\n$85a5f86b715fe7db$var$maxImageDimensionsSelect.disabled = false;\nfunction $85a5f86b715fe7db$var$renderAcceptedImageFormats(acceptedMimeTypes, rootEl) {\n    if (!rootEl) return;\n    const extensions = acceptedMimeTypes.map((mimeType)=>mimeType.split('/')[1]);\n    const str = `Supported image formats: ${extensions.join(', ')}`;\n    const div = document.createElement('div');\n    const small = document.createElement('small');\n    small.textContent = str;\n    div.appendChild(small);\n    rootEl.appendChild(small);\n}\nasync function $85a5f86b715fe7db$var$generateMeme() {\n    const dataUrl = $85a5f86b715fe7db$var$canvas.toDataURL('image/png');\n    const filename = `${(0, $17004b28c97c1306$export$e2a22331486dcca0)('meme')}.png`;\n    // Prepare download link\n    const downloadLink = dataUrl.replace('image/png', 'image/octet-stream');\n    $85a5f86b715fe7db$var$downloadMemeBtn.download = filename;\n    $85a5f86b715fe7db$var$downloadMemeBtn.href = downloadLink;\n    $85a5f86b715fe7db$var$downloadMemePreview.width = $85a5f86b715fe7db$var$canvas.getDimensions().width;\n    $85a5f86b715fe7db$var$downloadMemePreview.height = $85a5f86b715fe7db$var$canvas.getDimensions().height;\n    $85a5f86b715fe7db$var$downloadMemePreview.src = downloadLink;\n    // Prepare for sharing file\n    if ((0, $7a2aca835bb05064$export$c37129e465f64ef0)()) try {\n        const file = await (0, $2669cb7c28251d2a$export$6539e087749cf9d3)({\n            url: dataUrl,\n            filename: filename,\n            mimeType: 'image/png'\n        }).catch((err)=>(0, $3969451ff60cb8d5$export$af04143326425dbd)(err.message, 'danger'));\n        if (file && (0, $7a2aca835bb05064$export$c37129e465f64ef0)({\n            files: [\n                file\n            ]\n        })) {\n            $85a5f86b715fe7db$var$webShareComponent.shareFiles = [\n                file\n            ];\n            $85a5f86b715fe7db$var$webShareComponent.hidden = false;\n        }\n    } catch (error) {\n        console.error(error);\n    }\n    window.requestAnimationFrame(()=>{\n        $85a5f86b715fe7db$var$downloadModal.open = true;\n    });\n}\nfunction $85a5f86b715fe7db$var$setImageMaxDimensions(image) {\n    const maxImageDimensionsSelect = $85a5f86b715fe7db$var$maxImageDimensionsForm['maxImageDimensions'];\n    const [maxWidthValue, maxHeightValue] = maxImageDimensionsSelect.value.split('x');\n    const MAX_WIDTH = Number(maxWidthValue) || 800;\n    const MAX_HEIGHT = Number(maxHeightValue) || 600;\n    let width = image.width;\n    let height = image.height;\n    if (width > height) {\n        if (width > MAX_WIDTH) {\n            height *= MAX_WIDTH / width;\n            width = MAX_WIDTH;\n        }\n    } else if (height > MAX_HEIGHT) {\n        width *= MAX_HEIGHT / height;\n        height = MAX_HEIGHT;\n    }\n    $85a5f86b715fe7db$var$canvas.setDimensions({\n        width: width,\n        height: height\n    });\n}\nfunction $85a5f86b715fe7db$var$afterImageSelect() {\n    $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll()).show();\n    $85a5f86b715fe7db$var$dropzoneEl.classList.add('dropzone--accepted');\n    $85a5f86b715fe7db$var$dropzoneEl.disabled = true;\n    $85a5f86b715fe7db$var$generateMemeBtn.disabled = false;\n    $85a5f86b715fe7db$var$instructionsEl.hidden = true;\n    $85a5f86b715fe7db$var$clearCanvasBtn.hidden = false;\n}\nfunction $85a5f86b715fe7db$var$handleImageLoad(evt) {\n    $85a5f86b715fe7db$var$selectedImage = evt.target;\n    $85a5f86b715fe7db$var$setImageMaxDimensions($85a5f86b715fe7db$var$selectedImage);\n    $85a5f86b715fe7db$var$afterImageSelect();\n}\nfunction $85a5f86b715fe7db$var$handleSolidColorFormInput(evt) {\n    const DEFAULT_WIDTH = 800;\n    const DEFAULT_HEIGHT = 600;\n    if (evt.target === $85a5f86b715fe7db$var$solidColorForm['canvasColor']) $85a5f86b715fe7db$var$selectedImage = evt.target.value;\n    if ((0, $c38b15b964e67d8b$export$de75f46579dcf24)($85a5f86b715fe7db$var$selectedImage)) {\n        $85a5f86b715fe7db$var$canvas.setDimensions({\n            width: Number($85a5f86b715fe7db$var$solidColorForm['canvasWidth'].value) || DEFAULT_WIDTH,\n            height: Number($85a5f86b715fe7db$var$solidColorForm['canvasHeight'].value) || DEFAULT_HEIGHT\n        });\n        $85a5f86b715fe7db$var$afterImageSelect();\n    }\n}\nfunction $85a5f86b715fe7db$var$handleFileSelect(file) {\n    if (!file) return;\n    const image = new Image();\n    const reader = new FileReader();\n    reader.addEventListener('load', function(evt) {\n        const data = evt.target.result;\n        image.addEventListener('load', $85a5f86b715fe7db$var$handleImageLoad);\n        image.src = data;\n    });\n    reader.readAsDataURL(file);\n}\nfunction $85a5f86b715fe7db$var$handleOpenVideoModalButtonClick() {\n    $85a5f86b715fe7db$var$videoModal.open = true;\n}\nfunction $85a5f86b715fe7db$var$handleTextPropChange(element, textboxId, prop) {\n    const textboxData = (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getById(textboxId).getData();\n    switch(element.type){\n        case 'checkbox':\n            textboxData[prop] = element.checked;\n            break;\n        case 'number':\n            textboxData[prop] = Number(element.value);\n            break;\n        default:\n            textboxData[prop] = element.value;\n    }\n    $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll());\n}\nfunction $85a5f86b715fe7db$var$handleAddTextboxBtnClick() {\n    return (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).create();\n}\nasync function $85a5f86b715fe7db$var$handleImageUploadFromURL(evt) {\n    evt.preventDefault();\n    const form = evt.target;\n    const submitButton = form.querySelector('button[type=\"submit\"]');\n    const imageUrl = form['imageUrl'].value;\n    if (!imageUrl.trim()) return;\n    submitButton.disabled = true;\n    submitButton.querySelector('.spinner').hidden = false;\n    submitButton.querySelector('.label').hidden = true;\n    try {\n        const file = await (0, $2669cb7c28251d2a$export$6539e087749cf9d3)({\n            url: imageUrl\n        }).catch((err)=>(0, $3969451ff60cb8d5$export$af04143326425dbd)(err.message, 'danger'));\n        if (file) $85a5f86b715fe7db$var$handleFileSelect(file);\n    } catch  {\n        (0, $3969451ff60cb8d5$export$af04143326425dbd)(`Failed to load image from \"${imageUrl}\".`, 'danger');\n    } finally{\n        submitButton.disabled = false;\n        submitButton.querySelector('.spinner').hidden = true;\n        submitButton.querySelector('.label').hidden = false;\n    }\n}\nfunction $85a5f86b715fe7db$var$moveTextUsingArrowbuttons(textboxId, direction) {\n    return function() {\n        const textboxEl = document.getElementById(textboxId);\n        const offsetYInput = textboxEl.querySelector('[data-input=\"offsetY\"]');\n        const offsetXInput = textboxEl.querySelector('[data-input=\"offsetX\"]');\n        const textbox = (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getById(textboxId);\n        if (!textbox) return;\n        const textboxData = textbox.getData();\n        direction = direction.toLowerCase();\n        switch(direction){\n            case 'up':\n                textboxData.offsetY -= 1;\n                offsetYInput.value = textboxData.offsetY;\n                break;\n            case 'down':\n                textboxData.offsetY += 1;\n                offsetYInput.value = textboxData.offsetY;\n                break;\n            case 'left':\n                textboxData.offsetX -= 1;\n                offsetXInput.value = textboxData.offsetX;\n                break;\n            case 'right':\n                textboxData.offsetX += 1;\n                offsetXInput.value = textboxData.offsetX;\n                break;\n        }\n        $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll());\n        $85a5f86b715fe7db$var$reqAnimFrame = requestAnimationFrame($85a5f86b715fe7db$var$moveTextUsingArrowbuttons(textboxId, direction));\n    };\n}\nfunction $85a5f86b715fe7db$var$handleUploadMethodChange(evt) {\n    $85a5f86b715fe7db$var$uploadMethodEls.forEach((el)=>el.hidden = el.id !== evt.target.value);\n    $85a5f86b715fe7db$var$maxImageDimensionsForm.hidden = evt.target.value === 'solidColorForm';\n}\nfunction $85a5f86b715fe7db$var$handleFileSelectClick() {\n    if (typeof $85a5f86b715fe7db$var$dropzoneEl.openFileDialog === 'function') {\n        // NOTE: Always enable dropzone before opening dialog\n        // in case it was previously disabled after image selection.\n        $85a5f86b715fe7db$var$dropzoneEl.disabled = false;\n        $85a5f86b715fe7db$var$dropzoneEl.openFileDialog();\n    }\n}\nfunction $85a5f86b715fe7db$var$handleDropFilesAccepted(evt) {\n    const [file] = evt.detail.acceptedFiles;\n    if (file) $85a5f86b715fe7db$var$handleFileSelect(file);\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerInput(evt) {\n    const inputMap = {\n        text: 'text',\n        fillColor: 'fillColor',\n        strokeColor: 'strokeColor',\n        font: 'font',\n        fontSize: 'fontSize',\n        fontWeight: 'fontWeight',\n        textAlign: 'textAlign',\n        shadowBlur: 'shadowBlur',\n        offsetY: 'offsetY',\n        offsetX: 'offsetX',\n        rotate: 'rotate',\n        strokeWidth: 'strokeWidth',\n        textBackgroundEnabled: 'textBackgroundEnabled',\n        textBackgroundColor: 'textBackgroundColor'\n    };\n    const element = evt.target;\n    const prop = inputMap[element.dataset.input];\n    if (!prop) return;\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    $85a5f86b715fe7db$var$handleTextPropChange(element, textboxId, prop);\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerChange(evt) {\n    const element = evt.target;\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    let prop;\n    if (element.matches('[data-input=\"allCaps\"]')) prop = 'allCaps';\n    if (prop) $85a5f86b715fe7db$var$handleTextPropChange(element, textboxId, prop);\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerClick(evt) {\n    const element = evt.target;\n    if (element.matches('[data-button=\"settings\"]')) {\n        const textboxEl = element.closest('[data-section=\"textbox\"]');\n        const textboxSettingsEl = textboxEl?.querySelector('[data-section=\"advanced-settings\"]');\n        if (textboxSettingsEl) textboxSettingsEl.hidden = !textboxSettingsEl.hidden;\n    }\n    if (element.matches('[data-button=\"duplicate-text-box\"')) {\n        const currentTextboxEl = element.closest('[data-section=\"textbox\"]');\n        const currentTextboxData = (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getById(currentTextboxEl.id);\n        (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).create({\n            ...currentTextboxData.data\n        });\n    }\n    if (element.matches('[data-button=\"delete-text-box\"]')) {\n        const textboxId = element.closest('[data-section=\"textbox\"]').id;\n        const textboxToDelete = (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getById(textboxId);\n        if (textboxToDelete && textboxToDelete.data.text.trim()) {\n            const textboxIdInput = $85a5f86b715fe7db$var$removeTextForm['textbox-id'];\n            if (textboxIdInput) {\n                textboxIdInput.value = textboxId;\n                $85a5f86b715fe7db$var$removeConfirmationModal.open = true;\n            }\n        } else (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).remove(textboxId);\n    }\n}\nfunction $85a5f86b715fe7db$var$handleTextRemoveFormSubmit(evt) {\n    evt.preventDefault();\n    const textboxId = evt.target['textbox-id'].value;\n    if (textboxId) {\n        (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).remove(textboxId);\n        $85a5f86b715fe7db$var$removeConfirmationModal.open = false;\n    }\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerPointerdown(evt) {\n    const element = evt.target;\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    if (!textboxEl) return;\n    if (element.matches('[data-action=\"move-text\"]')) $85a5f86b715fe7db$var$reqAnimFrame = requestAnimationFrame($85a5f86b715fe7db$var$moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label')));\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerPointerup(evt) {\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        cancelAnimationFrame && cancelAnimationFrame($85a5f86b715fe7db$var$reqAnimFrame);\n        $85a5f86b715fe7db$var$reqAnimFrame = null;\n    }\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerPointerout(evt) {\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        cancelAnimationFrame && cancelAnimationFrame($85a5f86b715fe7db$var$reqAnimFrame);\n        $85a5f86b715fe7db$var$reqAnimFrame = null;\n    }\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerKeyDown(evt) {\n    const element = evt.target;\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    if (element.matches('[data-action=\"move-text\"]')) {\n        if (evt.key === ' ' || evt.key === 'Enter') {\n            $85a5f86b715fe7db$var$reqAnimFrame && cancelAnimationFrame($85a5f86b715fe7db$var$reqAnimFrame);\n            $85a5f86b715fe7db$var$reqAnimFrame = requestAnimationFrame($85a5f86b715fe7db$var$moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label')));\n        }\n    }\n}\nfunction $85a5f86b715fe7db$var$handleTextboxesContainerKeyUp(evt) {\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        if (evt.key === ' ' || evt.key === 'Enter') {\n            $85a5f86b715fe7db$var$reqAnimFrame && cancelAnimationFrame($85a5f86b715fe7db$var$reqAnimFrame);\n            $85a5f86b715fe7db$var$reqAnimFrame = null;\n        }\n    }\n}\nasync function $85a5f86b715fe7db$var$handleGalleryClick(evt) {\n    const button = evt.target.closest('button');\n    if (!button) return;\n    const img = button.querySelector('img');\n    try {\n        const file = await (0, $2669cb7c28251d2a$export$6539e087749cf9d3)({\n            url: img.src\n        }).catch((err)=>(0, $3969451ff60cb8d5$export$af04143326425dbd)(err.message, 'danger'));\n        if (file) $85a5f86b715fe7db$var$handleFileSelect(file);\n    } catch  {\n        (0, $3969451ff60cb8d5$export$af04143326425dbd)(`Failed to load image: \"${img.alt}\".`, 'danger');\n    }\n}\nfunction $85a5f86b715fe7db$var$handleGallerySearchInput(evt) {\n    const query = evt.target.value.toLowerCase().trim();\n    const galleryItems = $85a5f86b715fe7db$var$galleryEl.querySelectorAll('button');\n    galleryItems.forEach((item)=>{\n        const alt = (item.querySelector('img').getAttribute('alt') || '').toLowerCase();\n        item.hidden = !alt.includes(query);\n    });\n    $85a5f86b715fe7db$var$galleryNoResultsEl.hidden = !!$85a5f86b715fe7db$var$galleryEl.querySelector('button:not([hidden])');\n}\nfunction $85a5f86b715fe7db$var$handleWebShareError() {\n    $85a5f86b715fe7db$var$downloadModal.open = false;\n    (0, $3969451ff60cb8d5$export$af04143326425dbd)('There was an error while trying to share your meme.', 'danger');\n}\nfunction $85a5f86b715fe7db$var$handleCapturePhotoError(evt) {\n    const error = evt.detail.error;\n    let errorMessage = 'An error occurred while trying to capture photo.';\n    if (error instanceof Error && (error.name === 'NotAllowedError' || error.name === 'NotFoundError')) errorMessage += ' Make sure you have a camera connected and you have granted the appropriate permissions.';\n    (0, $3969451ff60cb8d5$export$af04143326425dbd)(errorMessage, 'danger');\n    $85a5f86b715fe7db$var$videoModal.open = false;\n    console.error(error);\n}\nfunction $85a5f86b715fe7db$var$handleCapturePhotoSuccess(evt) {\n    $85a5f86b715fe7db$var$videoModal.open = false;\n    const image = new Image();\n    image.addEventListener('load', $85a5f86b715fe7db$var$handleImageLoad);\n    image.src = evt.detail.dataURI;\n}\nfunction $85a5f86b715fe7db$var$handleModalOpen(evt) {\n    if (evt.target.id === 'videoModal') {\n        if ($85a5f86b715fe7db$var$capturePhotoEl && typeof $85a5f86b715fe7db$var$capturePhotoEl.startVideoStream === 'function') $85a5f86b715fe7db$var$capturePhotoEl.startVideoStream();\n    }\n}\nfunction $85a5f86b715fe7db$var$handleModalClose(evt) {\n    if (evt.target.id === 'videoModal') {\n        if ($85a5f86b715fe7db$var$capturePhotoEl && typeof $85a5f86b715fe7db$var$capturePhotoEl.stopVideoStream === 'function') $85a5f86b715fe7db$var$capturePhotoEl.stopVideoStream();\n    }\n    if (evt.target.id === 'removeConfirmationModal') $85a5f86b715fe7db$var$removeTextForm.reset();\n}\nfunction $85a5f86b715fe7db$var$handleEmojiPickerSelection(evt) {\n    const textboxEl = evt.target.closest('[data-section=\"textbox\"]');\n    if (textboxEl) {\n        const input = textboxEl.querySelector('[data-input=\"text\"]');\n        const emoji = evt.detail.unicode;\n        if (input) (0, $bf4f0cf05f6fd378$export$2e2bcd8739ae039)(input, emoji);\n    }\n}\nfunction $85a5f86b715fe7db$var$handleMaxImageDimensionsFormChange(evt) {\n    if (evt.target.matches('[name=\"maxImageDimensions\"]')) (0, $9e093dbdf49c6d51$export$ddcffe0146c8f882).set('maxImageDimensions', evt.target.value);\n    if (!$85a5f86b715fe7db$var$selectedImage || (0, $c38b15b964e67d8b$export$de75f46579dcf24)($85a5f86b715fe7db$var$selectedImage)) return;\n    $85a5f86b715fe7db$var$setImageMaxDimensions($85a5f86b715fe7db$var$selectedImage);\n    $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll());\n}\nfunction $85a5f86b715fe7db$var$handleTextboxCreate(evt) {\n    const textbox = evt.detail.textbox;\n    const textboxEl = (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).createElement(textbox, $85a5f86b715fe7db$var$shouldFocusOnTextboxCreate);\n    $85a5f86b715fe7db$var$shouldFocusOnTextboxCreate = true;\n    $85a5f86b715fe7db$var$textboxesContainer.appendChild(textboxEl);\n    if (textbox.getData().text) $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll());\n}\nfunction $85a5f86b715fe7db$var$handleTextboxDelete(evt) {\n    const textboxEl = document.getElementById(evt.detail.id);\n    textboxEl && textboxEl.remove();\n    $85a5f86b715fe7db$var$textboxesContainer.querySelectorAll('[data-section=\"textbox\"]').forEach((el, idx)=>{\n        el.querySelector('[data-input=\"text\"]').setAttribute('placeholder', `Text #${idx + 1}`);\n    });\n    $85a5f86b715fe7db$var$canvas.draw($85a5f86b715fe7db$var$selectedImage, (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll());\n}\nfunction $85a5f86b715fe7db$var$handleClearCanvas(evt) {\n    if (!$85a5f86b715fe7db$var$selectedImage) return;\n    evt.stopPropagation();\n    $85a5f86b715fe7db$var$selectedImage = null;\n    $85a5f86b715fe7db$var$dropzoneEl.classList.remove('dropzone--accepted');\n    $85a5f86b715fe7db$var$generateMemeBtn.disabled = true;\n    $85a5f86b715fe7db$var$instructionsEl.hidden = false;\n    $85a5f86b715fe7db$var$clearCanvasBtn.hidden = true;\n    $85a5f86b715fe7db$var$dropzoneEl.disabled = false;\n    $85a5f86b715fe7db$var$canvas.clear().hide();\n}\nfunction $85a5f86b715fe7db$var$toggleTorchButtonStatus(options = {}) {\n    const defaults = {\n        el: document.getElementById('torchButton'),\n        isTorchOn: false\n    };\n    const { el: el, isTorchOn: isTorchOn } = {\n        ...defaults,\n        ...options\n    };\n    const iconPaths = el.querySelectorAll('svg path');\n    if (iconPaths.length !== 2) return;\n    iconPaths[0].style.display = isTorchOn ? 'none' : 'block';\n    iconPaths[1].style.display = isTorchOn ? 'block' : 'none';\n    el.setAttribute('aria-label', `Turn ${isTorchOn ? 'off' : 'on'} flash`);\n}\nfunction $85a5f86b715fe7db$var$handleTorchButtonClick(evt) {\n    if ($85a5f86b715fe7db$var$capturePhotoEl === null) return;\n    $85a5f86b715fe7db$var$capturePhotoEl.torch = !$85a5f86b715fe7db$var$capturePhotoEl.torch;\n    $85a5f86b715fe7db$var$toggleTorchButtonStatus({\n        el: evt.currentTarget,\n        isTorchOn: $85a5f86b715fe7db$var$capturePhotoEl.hasAttribute('torch')\n    });\n}\nasync function $85a5f86b715fe7db$var$handleCapturePhotoVideoPlay(evt) {\n    const trackCapabilities = evt.target.getTrackCapabilities();\n    if (trackCapabilities?.torch) {\n        $85a5f86b715fe7db$var$torchButton?.removeAttribute('hidden');\n        if ($85a5f86b715fe7db$var$capturePhotoEl?.hasAttribute('torch')) $85a5f86b715fe7db$var$toggleTorchButtonStatus({\n            el: $85a5f86b715fe7db$var$torchButton,\n            isTorchOn: true\n        });\n    }\n    const videoInputDevices = await (0, $dced0d224c6d876e$export$cc30a98fe3890794).getVideoInputDevices();\n    videoInputDevices.forEach((device, index)=>{\n        const option = document.createElement('option');\n        option.value = device.deviceId;\n        option.textContent = device.label || `Camera ${index + 1}`;\n        $85a5f86b715fe7db$var$cameraSelect.appendChild(option);\n    });\n    if (videoInputDevices.length > 1) $85a5f86b715fe7db$var$cameraSelect?.removeAttribute('hidden');\n}\nfunction $85a5f86b715fe7db$var$handleCameraSelectChange(evt) {\n    if ($85a5f86b715fe7db$var$capturePhotoEl === null || typeof $85a5f86b715fe7db$var$capturePhotoEl.restartVideoStream !== 'function' || $85a5f86b715fe7db$var$capturePhotoEl.hasAttribute('loading')) return;\n    const videoDeviceId = evt.target.value || undefined;\n    $85a5f86b715fe7db$var$capturePhotoEl.restartVideoStream(videoDeviceId);\n}\nfunction $85a5f86b715fe7db$var$handleCapturePhotoButtonClick() {\n    if ($85a5f86b715fe7db$var$capturePhotoEl === null || typeof $85a5f86b715fe7db$var$capturePhotoEl.capture !== 'function' || $85a5f86b715fe7db$var$capturePhotoEl.hasAttribute('loading')) return;\n    $85a5f86b715fe7db$var$capturePhotoEl.capture();\n}\nfunction $85a5f86b715fe7db$var$handlethemeChange(evt) {\n    const theme = evt.detail.theme;\n    const deviceTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n    document.documentElement.setAttribute('data-bs-theme', theme === 'system' ? deviceTheme : theme);\n}\nfunction $85a5f86b715fe7db$var$handleBeforeunload(evt) {\n    if ($85a5f86b715fe7db$var$changesHaveOccurred()) {\n        evt.preventDefault();\n        evt.returnValue = true; // Included for legacy support, e.g. Chrome/Edge < 119\n    }\n}\nfunction $85a5f86b715fe7db$var$changesHaveOccurred() {\n    let hasChanges = $85a5f86b715fe7db$var$selectedImage !== null;\n    for (const v of (0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).getAll().values())if (!(0, $a5e4a78f80aa8693$export$8e3dca5fa4d5f04b).hasDefaultValues(v.data)) {\n        hasChanges = true;\n        break;\n    }\n    return hasChanges;\n}\n\n\n//# sourceMappingURL=meme-generator.c15e28dd.js.map\n","parcelRequire.extendImportMap({\"lRBOd\":\"Pressuru.684952ea.ttf\",\"hOimC\":\"Oswald-Regular.89ec7d89.ttf\",\"c5nso\":\"Oswald-Bold.0f6a7ca6.ttf\",\"917SN\":\"Roboto-Regular.ca197847.ttf\",\"kCRYk\":\"Roboto-Bold.fdb9b54a.ttf\",\"7mTjM\":\"RobotoCondensed-Regular.d585f5c7.ttf\",\"bNJU7\":\"RobotoCondensed-Bold.e1f96d4b.ttf\",\"2zTNP\":\"CourierPrime-Regular.3a25a501.ttf\",\"6U5us\":\"CourierPrime-Bold.3d6bf689.ttf\",\"jadM2\":\"OpenSans-Regular.edf9e01b.ttf\",\"4rZHV\":\"OpenSans-Bold.8fceb72b.ttf\"});","import 'emoji-picker-element';\nimport insertTextAtCursor from 'insert-text-at-cursor';\nimport { CapturePhoto } from '@georapbox/capture-photo-element/dist/capture-photo-defined.js';\nimport { isWebShareSupported } from '@georapbox/web-share-element/dist/is-web-share-supported.js';\nimport '@georapbox/theme-toggle-element/dist/theme-toggle-defined.js';\nimport '@georapbox/web-share-element/dist/web-share-defined.js';\nimport '@georapbox/modal-element/dist/modal-element-defined.js';\nimport '@georapbox/files-dropzone-element/dist/files-dropzone-defined.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../css/main.css';\nimport { ACCEPTED_MIME_TYPES } from './constants.js';\nimport { uid } from './utils/uid.js';\nimport { fileFromUrl } from './utils/file-from-url.js';\nimport { storage } from './utils/storage.js';\nimport { isSolidColorSelected } from './utils/is-solid-color-selected.js';\nimport { customFonts, loadCustomFont } from './custom-fonts.js';\nimport { toastAlert } from './toast-alert.js';\nimport { Textbox } from './textbox.js';\nimport { Canvas } from './canvas.js';\n\nconst canvas = Canvas.createInstance(document.getElementById('canvas'));\nconst videoModal = document.getElementById('videoModal');\nconst downloadModal = document.getElementById('downloadModal');\nconst capturePhotoEl = document.querySelector('capture-photo');\nconst cameraSelect = document.getElementById('cameraSelect');\nconst capturePhotoButton = document.getElementById('capturePhotoButton');\nconst torchButton = document.getElementById('torchButton');\nconst dropzoneEl = document.querySelector('files-dropzone');\nconst instructionsEl = document.getElementById('instructions');\nconst imageUploadMethodSelect = document.getElementById('imageUploadMethodSelect');\nconst fileSelectBtn = document.getElementById('fileSelectBtn');\nconst imageUrlForm = document.getElementById('imageUrlForm');\nconst addTextboxBtn = document.getElementById('addTextboxBtn');\nconst textboxesContainer = document.getElementById('textboxesContainer');\nconst generateMemeBtn = document.getElementById('generateMemeBtn');\nconst openVideoModalBtn = document.getElementById('openVideoModalBtn');\nconst downloadMemeBtn = document.getElementById('downloadMemeBtn');\nconst downloadMemePreview = document.getElementById('downloadMemePreview');\nconst webShareComponent = document.querySelector('web-share');\nconst galleryEl = document.getElementById('gallery');\nconst gallerySearchEl = document.getElementById('gallerySearch');\nconst galleryNoResultsEl = galleryEl.querySelector('.gallery__no-results');\nconst solidColorForm = document.getElementById('solidColorForm');\nconst uploadMethodEls = document.querySelectorAll('.upload-method');\nconst removeConfirmationModal = document.getElementById('removeConfirmationModal');\nconst removeTextForm = document.getElementById('removeTextForm');\nconst maxImageDimensionsForm = document.getElementById('maxImageDimensionsForm');\nconst maxImageDimensionsSelect = maxImageDimensionsForm['maxImageDimensions'];\nconst clearCanvasBtn = document.getElementById('clearCanvasBtn');\nconst maxImageDimensionsFromStorage = storage.get('maxImageDimensions');\nlet shouldFocusOnTextboxCreate = false;\nlet selectedImage = null;\nlet reqAnimFrame = null;\n\ndocument.addEventListener('tt-theme-change', handlethemeChange);\ndocument.addEventListener('web-share:error', handleWebShareError);\ndocument.addEventListener('capture-photo:video-play', handleCapturePhotoVideoPlay, { once: true });\ndocument.addEventListener('capture-photo:error', handleCapturePhotoError);\ndocument.addEventListener('capture-photo:success', handleCapturePhotoSuccess);\ndocument.addEventListener('me-open', handleModalOpen);\ndocument.addEventListener('me-close', handleModalClose);\ndocument.addEventListener('emoji-click', handleEmojiPickerSelection);\ndocument.addEventListener('textbox-create', handleTextboxCreate);\ndocument.addEventListener('textbox-remove', handleTextboxDelete);\nfileSelectBtn.addEventListener('click', handleFileSelectClick);\nopenVideoModalBtn.addEventListener('click', handleOpenVideoModalButtonClick);\naddTextboxBtn.addEventListener('click', handleAddTextboxBtnClick);\ngenerateMemeBtn.addEventListener('click', generateMeme);\ndownloadMemeBtn.addEventListener('click', () => (downloadModal.open = false));\nimageUrlForm.addEventListener('submit', handleImageUploadFromURL);\ndropzoneEl.addEventListener('files-dropzone-drop-accepted', handleDropFilesAccepted);\ntextboxesContainer.addEventListener('input', handleTextboxesContainerInput);\ntextboxesContainer.addEventListener('change', handleTextboxesContainerChange);\ntextboxesContainer.addEventListener('click', handleTextboxesContainerClick);\ntextboxesContainer.addEventListener('pointerdown', handleTextboxesContainerPointerdown);\ntextboxesContainer.addEventListener('pointerup', handleTextboxesContainerPointerup);\ntextboxesContainer.addEventListener('pointerout', handleTextboxesContainerPointerout);\ntextboxesContainer.addEventListener('keydown', handleTextboxesContainerKeyDown);\ntextboxesContainer.addEventListener('keyup', handleTextboxesContainerKeyUp);\nimageUploadMethodSelect.addEventListener('change', handleUploadMethodChange);\ngalleryEl.addEventListener('click', handleGalleryClick);\ngallerySearchEl.addEventListener('input', handleGallerySearchInput);\nsolidColorForm.addEventListener('input', handleSolidColorFormInput);\nremoveTextForm.addEventListener('submit', handleTextRemoveFormSubmit);\nmaxImageDimensionsForm.addEventListener('change', handleMaxImageDimensionsFormChange);\nclearCanvasBtn.addEventListener('click', handleClearCanvas);\ncameraSelect.addEventListener('change', handleCameraSelectChange);\ncapturePhotoButton.addEventListener('click', handleCapturePhotoButtonClick);\ntorchButton.addEventListener('click', handleTorchButtonClick);\nwindow.addEventListener('beforeunload', handleBeforeunload);\n\ngalleryEl.querySelectorAll('button > img')?.forEach(image => {\n  image.setAttribute('title', image.getAttribute('alt'));\n});\n\nTextbox.create();\n\ndropzoneEl.accept = ACCEPTED_MIME_TYPES;\n\nrenderAcceptedImageFormats(ACCEPTED_MIME_TYPES, instructionsEl);\n\ncustomFonts.forEach(({ name, path, style, weight }) => {\n  loadCustomFont(name, path, { style, weight });\n});\n\nif (maxImageDimensionsFromStorage) {\n  maxImageDimensionsSelect.value = maxImageDimensionsFromStorage;\n}\n\nmaxImageDimensionsSelect.disabled = false;\n\nfunction renderAcceptedImageFormats(acceptedMimeTypes, rootEl) {\n  if (!rootEl) {\n    return;\n  }\n\n  const extensions = acceptedMimeTypes.map(mimeType => mimeType.split('/')[1]);\n  const str = `Supported image formats: ${extensions.join(', ')}`;\n  const div = document.createElement('div');\n  const small = document.createElement('small');\n\n  small.textContent = str;\n  div.appendChild(small);\n  rootEl.appendChild(small);\n}\n\nasync function generateMeme() {\n  const dataUrl = canvas.toDataURL('image/png');\n  const filename = `${uid('meme')}.png`;\n\n  // Prepare download link\n  const downloadLink = dataUrl.replace('image/png', 'image/octet-stream');\n  downloadMemeBtn.download = filename;\n  downloadMemeBtn.href = downloadLink;\n  downloadMemePreview.width = canvas.getDimensions().width;\n  downloadMemePreview.height = canvas.getDimensions().height;\n  downloadMemePreview.src = downloadLink;\n\n  // Prepare for sharing file\n  if (isWebShareSupported()) {\n    try {\n      const file = await fileFromUrl({\n        url: dataUrl,\n        filename,\n        mimeType: 'image/png'\n      }).catch(err => toastAlert(err.message, 'danger'));\n\n      if (file && isWebShareSupported({ files: [file] })) {\n        webShareComponent.shareFiles = [file];\n        webShareComponent.hidden = false;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  window.requestAnimationFrame(() => {\n    downloadModal.open = true;\n  });\n}\n\nfunction setImageMaxDimensions(image) {\n  const maxImageDimensionsSelect = maxImageDimensionsForm['maxImageDimensions'];\n  const [maxWidthValue, maxHeightValue] = maxImageDimensionsSelect.value.split('x');\n  const MAX_WIDTH = Number(maxWidthValue) || 800;\n  const MAX_HEIGHT = Number(maxHeightValue) || 600;\n  let width = image.width;\n  let height = image.height;\n\n  if (width > height) {\n    if (width > MAX_WIDTH) {\n      height *= MAX_WIDTH / width;\n      width = MAX_WIDTH;\n    }\n  } else {\n    if (height > MAX_HEIGHT) {\n      width *= MAX_HEIGHT / height;\n      height = MAX_HEIGHT;\n    }\n  }\n\n  canvas.setDimensions({ width, height });\n}\n\nfunction afterImageSelect() {\n  canvas.draw(selectedImage, Textbox.getAll()).show();\n  dropzoneEl.classList.add('dropzone--accepted');\n  dropzoneEl.disabled = true;\n  generateMemeBtn.disabled = false;\n  instructionsEl.hidden = true;\n  clearCanvasBtn.hidden = false;\n}\n\nfunction handleImageLoad(evt) {\n  selectedImage = evt.target;\n  setImageMaxDimensions(selectedImage);\n  afterImageSelect();\n}\n\nfunction handleSolidColorFormInput(evt) {\n  const DEFAULT_WIDTH = 800;\n  const DEFAULT_HEIGHT = 600;\n\n  if (evt.target === solidColorForm['canvasColor']) {\n    selectedImage = evt.target.value;\n  }\n\n  if (isSolidColorSelected(selectedImage)) {\n    canvas.setDimensions({\n      width: Number(solidColorForm['canvasWidth'].value) || DEFAULT_WIDTH,\n      height: Number(solidColorForm['canvasHeight'].value) || DEFAULT_HEIGHT\n    });\n\n    afterImageSelect();\n  }\n}\n\nfunction handleFileSelect(file) {\n  if (!file) {\n    return;\n  }\n\n  const image = new Image();\n  const reader = new FileReader();\n\n  reader.addEventListener('load', function (evt) {\n    const data = evt.target.result;\n    image.addEventListener('load', handleImageLoad);\n    image.src = data;\n  });\n\n  reader.readAsDataURL(file);\n}\n\nfunction handleOpenVideoModalButtonClick() {\n  videoModal.open = true;\n}\n\nfunction handleTextPropChange(element, textboxId, prop) {\n  const textboxData = Textbox.getById(textboxId).getData();\n\n  switch (element.type) {\n    case 'checkbox':\n      textboxData[prop] = element.checked;\n      break;\n    case 'number':\n      textboxData[prop] = Number(element.value);\n      break;\n    default:\n      textboxData[prop] = element.value;\n  }\n\n  canvas.draw(selectedImage, Textbox.getAll());\n}\n\nfunction handleAddTextboxBtnClick() {\n  return Textbox.create();\n}\n\nasync function handleImageUploadFromURL(evt) {\n  evt.preventDefault();\n\n  const form = evt.target;\n  const submitButton = form.querySelector('button[type=\"submit\"]');\n  const imageUrl = form['imageUrl'].value;\n\n  if (!imageUrl.trim()) {\n    return;\n  }\n\n  submitButton.disabled = true;\n  submitButton.querySelector('.spinner').hidden = false;\n  submitButton.querySelector('.label').hidden = true;\n\n  try {\n    const file = await fileFromUrl({\n      url: imageUrl\n    }).catch(err => toastAlert(err.message, 'danger'));\n\n    if (file) {\n      handleFileSelect(file);\n    }\n  } catch {\n    toastAlert(`Failed to load image from \"${imageUrl}\".`, 'danger');\n  } finally {\n    submitButton.disabled = false;\n    submitButton.querySelector('.spinner').hidden = true;\n    submitButton.querySelector('.label').hidden = false;\n  }\n}\n\nfunction moveTextUsingArrowbuttons(textboxId, direction) {\n  return function () {\n    const textboxEl = document.getElementById(textboxId);\n    const offsetYInput = textboxEl.querySelector('[data-input=\"offsetY\"]');\n    const offsetXInput = textboxEl.querySelector('[data-input=\"offsetX\"]');\n    const textbox = Textbox.getById(textboxId);\n\n    if (!textbox) {\n      return;\n    }\n\n    const textboxData = textbox.getData();\n\n    direction = direction.toLowerCase();\n\n    switch (direction) {\n      case 'up':\n        textboxData.offsetY -= 1;\n        offsetYInput.value = textboxData.offsetY;\n        break;\n      case 'down':\n        textboxData.offsetY += 1;\n        offsetYInput.value = textboxData.offsetY;\n        break;\n      case 'left':\n        textboxData.offsetX -= 1;\n        offsetXInput.value = textboxData.offsetX;\n        break;\n      case 'right':\n        textboxData.offsetX += 1;\n        offsetXInput.value = textboxData.offsetX;\n        break;\n    }\n\n    canvas.draw(selectedImage, Textbox.getAll());\n\n    reqAnimFrame = requestAnimationFrame(moveTextUsingArrowbuttons(textboxId, direction));\n  };\n}\n\nfunction handleUploadMethodChange(evt) {\n  uploadMethodEls.forEach(el => (el.hidden = el.id !== evt.target.value));\n  maxImageDimensionsForm.hidden = evt.target.value === 'solidColorForm';\n}\n\nfunction handleFileSelectClick() {\n  if (typeof dropzoneEl.openFileDialog === 'function') {\n    // NOTE: Always enable dropzone before opening dialog\n    // in case it was previously disabled after image selection.\n    dropzoneEl.disabled = false;\n    dropzoneEl.openFileDialog();\n  }\n}\n\nfunction handleDropFilesAccepted(evt) {\n  const [file] = evt.detail.acceptedFiles;\n\n  if (file) {\n    handleFileSelect(file);\n  }\n}\n\nfunction handleTextboxesContainerInput(evt) {\n  const inputMap = {\n    text: 'text',\n    fillColor: 'fillColor',\n    strokeColor: 'strokeColor',\n    font: 'font',\n    fontSize: 'fontSize',\n    fontWeight: 'fontWeight',\n    textAlign: 'textAlign',\n    shadowBlur: 'shadowBlur',\n    offsetY: 'offsetY',\n    offsetX: 'offsetX',\n    rotate: 'rotate',\n    strokeWidth: 'strokeWidth',\n    textBackgroundEnabled: 'textBackgroundEnabled',\n    textBackgroundColor: 'textBackgroundColor'\n  };\n  const element = evt.target;\n  const prop = inputMap[element.dataset.input];\n\n  if (!prop) {\n    return;\n  }\n\n  const textboxId = element.closest('[data-section=\"textbox\"]').id;\n  handleTextPropChange(element, textboxId, prop);\n}\n\nfunction handleTextboxesContainerChange(evt) {\n  const element = evt.target;\n  const textboxId = element.closest('[data-section=\"textbox\"]').id;\n  let prop;\n\n  if (element.matches('[data-input=\"allCaps\"]')) {\n    prop = 'allCaps';\n  }\n\n  if (prop) {\n    handleTextPropChange(element, textboxId, prop);\n  }\n}\n\nfunction handleTextboxesContainerClick(evt) {\n  const element = evt.target;\n\n  if (element.matches('[data-button=\"settings\"]')) {\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    const textboxSettingsEl = textboxEl?.querySelector('[data-section=\"advanced-settings\"]');\n\n    if (textboxSettingsEl) {\n      textboxSettingsEl.hidden = !textboxSettingsEl.hidden;\n    }\n  }\n\n  if (element.matches('[data-button=\"duplicate-text-box\"')) {\n    const currentTextboxEl = element.closest('[data-section=\"textbox\"]');\n    const currentTextboxData = Textbox.getById(currentTextboxEl.id);\n    Textbox.create({ ...currentTextboxData.data });\n  }\n\n  if (element.matches('[data-button=\"delete-text-box\"]')) {\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    const textboxToDelete = Textbox.getById(textboxId);\n\n    if (textboxToDelete && textboxToDelete.data.text.trim()) {\n      const textboxIdInput = removeTextForm['textbox-id'];\n\n      if (textboxIdInput) {\n        textboxIdInput.value = textboxId;\n        removeConfirmationModal.open = true;\n      }\n    } else {\n      Textbox.remove(textboxId);\n    }\n  }\n}\n\nfunction handleTextRemoveFormSubmit(evt) {\n  evt.preventDefault();\n  const textboxId = evt.target['textbox-id'].value;\n\n  if (textboxId) {\n    Textbox.remove(textboxId);\n    removeConfirmationModal.open = false;\n  }\n}\n\nfunction handleTextboxesContainerPointerdown(evt) {\n  const element = evt.target;\n  const textboxEl = element.closest('[data-section=\"textbox\"]');\n\n  if (!textboxEl) {\n    return;\n  }\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    reqAnimFrame = requestAnimationFrame(moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label')));\n  }\n}\n\nfunction handleTextboxesContainerPointerup(evt) {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    cancelAnimationFrame && cancelAnimationFrame(reqAnimFrame);\n    reqAnimFrame = null;\n  }\n}\n\nfunction handleTextboxesContainerPointerout(evt) {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    cancelAnimationFrame && cancelAnimationFrame(reqAnimFrame);\n    reqAnimFrame = null;\n  }\n}\n\nfunction handleTextboxesContainerKeyDown(evt) {\n  const element = evt.target;\n  const textboxEl = element.closest('[data-section=\"textbox\"]');\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      reqAnimFrame && cancelAnimationFrame(reqAnimFrame);\n      reqAnimFrame = requestAnimationFrame(moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label')));\n    }\n  }\n}\n\nfunction handleTextboxesContainerKeyUp(evt) {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      reqAnimFrame && cancelAnimationFrame(reqAnimFrame);\n      reqAnimFrame = null;\n    }\n  }\n}\n\nasync function handleGalleryClick(evt) {\n  const button = evt.target.closest('button');\n\n  if (!button) {\n    return;\n  }\n\n  const img = button.querySelector('img');\n\n  try {\n    const file = await fileFromUrl({\n      url: img.src\n    }).catch(err => toastAlert(err.message, 'danger'));\n\n    if (file) {\n      handleFileSelect(file);\n    }\n  } catch {\n    toastAlert(`Failed to load image: \"${img.alt}\".`, 'danger');\n  }\n}\n\nfunction handleGallerySearchInput(evt) {\n  const query = evt.target.value.toLowerCase().trim();\n  const galleryItems = galleryEl.querySelectorAll('button');\n\n  galleryItems.forEach(item => {\n    const alt = (item.querySelector('img').getAttribute('alt') || '').toLowerCase();\n    item.hidden = !alt.includes(query);\n  });\n\n  galleryNoResultsEl.hidden = !!galleryEl.querySelector('button:not([hidden])');\n}\n\nfunction handleWebShareError() {\n  downloadModal.open = false;\n  toastAlert('There was an error while trying to share your meme.', 'danger');\n}\n\nfunction handleCapturePhotoError(evt) {\n  const error = evt.detail.error;\n  let errorMessage = 'An error occurred while trying to capture photo.';\n\n  if (error instanceof Error && (error.name === 'NotAllowedError' || error.name === 'NotFoundError')) {\n    errorMessage += ' Make sure you have a camera connected and you have granted the appropriate permissions.';\n  }\n\n  toastAlert(errorMessage, 'danger');\n  videoModal.open = false;\n  console.error(error);\n}\n\nfunction handleCapturePhotoSuccess(evt) {\n  videoModal.open = false;\n  const image = new Image();\n  image.addEventListener('load', handleImageLoad);\n  image.src = evt.detail.dataURI;\n}\n\nfunction handleModalOpen(evt) {\n  if (evt.target.id === 'videoModal') {\n    if (capturePhotoEl && typeof capturePhotoEl.startVideoStream === 'function') {\n      capturePhotoEl.startVideoStream();\n    }\n  }\n}\n\nfunction handleModalClose(evt) {\n  if (evt.target.id === 'videoModal') {\n    if (capturePhotoEl && typeof capturePhotoEl.stopVideoStream === 'function') {\n      capturePhotoEl.stopVideoStream();\n    }\n  }\n\n  if (evt.target.id === 'removeConfirmationModal') {\n    removeTextForm.reset();\n  }\n}\n\nfunction handleEmojiPickerSelection(evt) {\n  const textboxEl = evt.target.closest('[data-section=\"textbox\"]');\n\n  if (textboxEl) {\n    const input = textboxEl.querySelector('[data-input=\"text\"]');\n    const emoji = evt.detail.unicode;\n\n    if (input) {\n      insertTextAtCursor(input, emoji);\n    }\n  }\n}\n\nfunction handleMaxImageDimensionsFormChange(evt) {\n  if (evt.target.matches('[name=\"maxImageDimensions\"]')) {\n    storage.set('maxImageDimensions', evt.target.value);\n  }\n\n  if (!selectedImage || isSolidColorSelected(selectedImage)) {\n    return;\n  }\n\n  setImageMaxDimensions(selectedImage);\n  canvas.draw(selectedImage, Textbox.getAll());\n}\n\nfunction handleTextboxCreate(evt) {\n  const textbox = evt.detail.textbox;\n  const textboxEl = Textbox.createElement(textbox, shouldFocusOnTextboxCreate);\n\n  shouldFocusOnTextboxCreate = true;\n  textboxesContainer.appendChild(textboxEl);\n\n  if (textbox.getData().text) {\n    canvas.draw(selectedImage, Textbox.getAll());\n  }\n}\n\nfunction handleTextboxDelete(evt) {\n  const textboxEl = document.getElementById(evt.detail.id);\n  textboxEl && textboxEl.remove();\n\n  textboxesContainer.querySelectorAll('[data-section=\"textbox\"]').forEach((el, idx) => {\n    el.querySelector('[data-input=\"text\"]').setAttribute('placeholder', `Text #${idx + 1}`);\n  });\n\n  canvas.draw(selectedImage, Textbox.getAll());\n}\n\nfunction handleClearCanvas(evt) {\n  if (!selectedImage) {\n    return;\n  }\n\n  evt.stopPropagation();\n  selectedImage = null;\n  dropzoneEl.classList.remove('dropzone--accepted');\n  generateMemeBtn.disabled = true;\n  instructionsEl.hidden = false;\n  clearCanvasBtn.hidden = true;\n  dropzoneEl.disabled = false;\n  canvas.clear().hide();\n}\n\nfunction toggleTorchButtonStatus(options = {}) {\n  const defaults = {\n    el: document.getElementById('torchButton'),\n    isTorchOn: false\n  };\n  const { el, isTorchOn } = { ...defaults, ...options };\n  const iconPaths = el.querySelectorAll('svg path');\n\n  if (iconPaths.length !== 2) {\n    return;\n  }\n\n  iconPaths[0].style.display = isTorchOn ? 'none' : 'block';\n  iconPaths[1].style.display = isTorchOn ? 'block' : 'none';\n  el.setAttribute('aria-label', `Turn ${isTorchOn ? 'off' : 'on'} flash`);\n}\n\nfunction handleTorchButtonClick(evt) {\n  if (capturePhotoEl === null) {\n    return;\n  }\n\n  capturePhotoEl.torch = !capturePhotoEl.torch;\n\n  toggleTorchButtonStatus({\n    el: evt.currentTarget,\n    isTorchOn: capturePhotoEl.hasAttribute('torch')\n  });\n}\n\nasync function handleCapturePhotoVideoPlay(evt) {\n  const trackCapabilities = evt.target.getTrackCapabilities();\n\n  if (trackCapabilities?.torch) {\n    torchButton?.removeAttribute('hidden');\n\n    if (capturePhotoEl?.hasAttribute('torch')) {\n      toggleTorchButtonStatus({ el: torchButton, isTorchOn: true });\n    }\n  }\n\n  const videoInputDevices = await CapturePhoto.getVideoInputDevices();\n\n  videoInputDevices.forEach((device, index) => {\n    const option = document.createElement('option');\n    option.value = device.deviceId;\n    option.textContent = device.label || `Camera ${index + 1}`;\n    cameraSelect.appendChild(option);\n  });\n\n  if (videoInputDevices.length > 1) {\n    cameraSelect?.removeAttribute('hidden');\n  }\n}\n\nfunction handleCameraSelectChange(evt) {\n  if (\n    capturePhotoEl === null ||\n    typeof capturePhotoEl.restartVideoStream !== 'function' ||\n    capturePhotoEl.hasAttribute('loading')\n  ) {\n    return;\n  }\n\n  const videoDeviceId = evt.target.value || undefined;\n  capturePhotoEl.restartVideoStream(videoDeviceId);\n}\n\nfunction handleCapturePhotoButtonClick() {\n  if (\n    capturePhotoEl === null ||\n    typeof capturePhotoEl.capture !== 'function' ||\n    capturePhotoEl.hasAttribute('loading')\n  ) {\n    return;\n  }\n\n  capturePhotoEl.capture();\n}\n\nfunction handlethemeChange(evt) {\n  const theme = evt.detail.theme;\n  const deviceTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  document.documentElement.setAttribute('data-bs-theme', theme === 'system' ? deviceTheme : theme);\n}\n\nfunction handleBeforeunload(evt) {\n  if (changesHaveOccurred()) {\n    evt.preventDefault();\n    evt.returnValue = true; // Included for legacy support, e.g. Chrome/Edge < 119\n  }\n}\n\nfunction changesHaveOccurred() {\n  let hasChanges = selectedImage !== null;\n\n  for (const v of Textbox.getAll().values()) {\n    if (!Textbox.hasDefaultValues(v.data)) {\n      hasChanges = true;\n      break;\n    }\n  }\n\n  return hasChanges;\n}\n","import Picker from './picker.js'\nimport Database from './database.js'\nexport { Picker, Database }\n","import Database from './database.js';\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [\n  [-1, '', 'custom'],\n  [0, '', 'smileys-emotion'],\n  [1, '', 'people-body'],\n  [3, '', 'animals-nature'],\n  [4, '', 'food-drink'],\n  [5, '', 'travel-places'],\n  [6, '', 'activities'],\n  [7, '', 'objects'],\n  [8, '', 'symbols'],\n  [9, '', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '': 17, // distorted face\n  '': 16, // face with bags under eyes\n  '': 15.1, // shaking head, technically from v15 but see note above\n  '': 14,\n  '': 13.1, // smiling face with tear, technically from v13 but see note above\n  '': 12.1, // sari, technically from v12 but see note above\n  '': 11,\n  '': 5,\n  '': 4,\n  '': 3,\n  '': 2,\n  '': 1,\n  '': 0.7,\n  '': 0.6\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  ''\n];\n\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n// and https://www.npmjs.com/package/if-emoji for inspiration\n// This implementation is largely borrowed from if-emoji, adding the font-family\n\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n\n  const ctx = canvas.getContext('2d', {\n    // Improves the performance of `getImageData()`\n    // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getContextAttributes#willreadfrequently\n    willReadFrequently: true\n  });\n  ctx.textBaseline = 'top';\n  ctx.font = `100px ${FONT_FAMILY}`;\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n\n  return ctx.getImageData(0, 0, 1, 1).data\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n// different emoji releases to determine what the font supports\n\nfunction determineEmojiSupportLevel () {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version\n      }\n    }\n  } catch (e) { // canvas error\n  } finally {\n  }\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1] // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nlet promise;\nconst detectEmojiSupportLevel = () => {\n  if (!promise) {\n    // Delay so it can run while the IDB database is being created by the browser (on another thread).\n    // This helps especially with first load  we want to start pre-populating the database on the main thread,\n    // and then wait for IDB to commit everything, and while waiting we run this check.\n    promise = new Promise(resolve => (\n      rIC(() => (\n        resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n      ))\n    ));\n  }\n  return promise\n};\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category, annotation }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    annotation,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins)\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// \"Svelte action\"-like utility to detect layout changes via ResizeObserver.\n// If ResizeObserver is unsupported, we just use rAF once and don't bother to update.\n\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction resizeObserverAction (node, abortSignal, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(onUpdate);\n    resizeObserver.observe(node);\n  } else { // just run once, don't bother trying to track it\n    rAF(onUpdate);\n  }\n\n  // cleanup function (called on destroy)\n  abortSignal.addEventListener('abort', () => {\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n    }\n  });\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  // skip running this in jest/vitest because we don't need to check for emoji support in that environment\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\n/**\n * Check if the given emojis containing ZWJ characters are supported by the current browser (don't render\n * as double characters) and return true if all are supported.\n * @param zwjEmojisToCheck\n * @param baselineEmoji\n * @param emojiToDomNode\n */\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  let allSupported = true;\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    // sanity check to make sure the node is defined properly\n    /* istanbul ignore if */\n    if (!domNode) {\n      // This is a race condition that can occur when the component is unmounted/remounted\n      // It doesn't really matter what we do here since the old context is not going to render anymore.\n      // Just bail out of emoji support detection and return `allSupported=true` since the rendering context is gone\n      continue\n    }\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n\n    if (!supported) {\n      allSupported = false;\n    }\n  }\n  return allSupported\n}\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\n// At best the invalidation is useless, at worst it can cause infinite loops:\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\n// https://github.com/sveltejs/svelte/issues/6521\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\nfunction resetScrollTopIfPossible (element) {\n  /* istanbul ignore else */\n  if (element) { // Makes me nervous not to have this `if` guard\n    element.scrollTop = 0;\n  }\n}\n\nfunction getFromMap (cache, key, func) {\n  let cached = cache.get(key);\n  if (!cached) {\n    cached = func();\n    cache.set(key, cached);\n  }\n  return cached\n}\n\nfunction toString (value) {\n  return '' + value\n}\n\nfunction parseTemplate (htmlString) {\n  const template = document.createElement('template');\n  template.innerHTML = htmlString;\n  return template\n}\n\nconst parseCache = new WeakMap();\nconst domInstancesCache = new WeakMap();\n// This needs to be a symbol because it needs to be different from any possible output of a key function\nconst unkeyedSymbol = Symbol('un-keyed');\n\n// Not supported in Safari <=13\nconst hasReplaceChildren = 'replaceChildren' in Element.prototype;\nfunction replaceChildren (parentNode, newChildren) {\n  /* istanbul ignore else */\n  if (hasReplaceChildren) {\n    parentNode.replaceChildren(...newChildren);\n  } else { // minimal polyfill for Element.prototype.replaceChildren\n    parentNode.innerHTML = '';\n    parentNode.append(...newChildren);\n  }\n}\n\nfunction doChildrenNeedRerender (parentNode, newChildren) {\n  let oldChild = parentNode.firstChild;\n  let oldChildrenCount = 0;\n  // iterate using firstChild/nextSibling because browsers use a linked list under the hood\n  while (oldChild) {\n    const newChild = newChildren[oldChildrenCount];\n    // check if the old child and new child are the same\n    if (newChild !== oldChild) {\n      return true\n    }\n    oldChild = oldChild.nextSibling;\n    oldChildrenCount++;\n  }\n  // if new children length is different from old, we must re-render\n  return oldChildrenCount !== newChildren.length\n}\n\nfunction patchChildren (newChildren, instanceBinding) {\n  const { targetNode } = instanceBinding;\n  let { targetParentNode } = instanceBinding;\n\n  let needsRerender = false;\n\n  if (targetParentNode) { // already rendered once\n    needsRerender = doChildrenNeedRerender(targetParentNode, newChildren);\n  } else { // first render of list\n    needsRerender = true;\n    instanceBinding.targetNode = undefined; // placeholder node not needed anymore, free memory\n    instanceBinding.targetParentNode = targetParentNode = targetNode.parentNode;\n  }\n  // avoid re-rendering list if the dom nodes are exactly the same before and after\n  if (needsRerender) {\n    replaceChildren(targetParentNode, newChildren);\n  }\n}\n\nfunction patch (expressions, instanceBindings) {\n  for (const instanceBinding of instanceBindings) {\n    const {\n      targetNode,\n      currentExpression,\n      binding: {\n        expressionIndex,\n        attributeName,\n        attributeValuePre,\n        attributeValuePost\n      }\n    } = instanceBinding;\n\n    const expression = expressions[expressionIndex];\n\n    if (currentExpression === expression) {\n      // no need to update, same as before\n      continue\n    }\n\n    instanceBinding.currentExpression = expression;\n\n    if (attributeName) { // attribute replacement\n      if (expression === null) {\n        // null is treated as a special case by the framework - we don't render an attribute at all in this case\n        targetNode.removeAttribute(attributeName);\n      } else {\n        // attribute value is not null; set a new attribute\n        const newValue = attributeValuePre + toString(expression) + attributeValuePost;\n        targetNode.setAttribute(attributeName, newValue);\n      }\n    } else { // text node / child element / children replacement\n      let newNode;\n      if (Array.isArray(expression)) { // array of DOM elements produced by tag template literals\n        patchChildren(expression, instanceBinding);\n      } else if (expression instanceof Element) { // html tag template returning a DOM element\n        newNode = expression;\n        targetNode.replaceWith(newNode);\n      } else { // primitive - string, number, etc\n        // nodeValue is faster than textContent supposedly https://www.youtube.com/watch?v=LY6y3HbDVmg\n        // note we may be replacing the value in a placeholder text node\n        targetNode.nodeValue = toString(expression);\n      }\n      if (newNode) {\n        instanceBinding.targetNode = newNode;\n      }\n    }\n  }\n}\n\nfunction parse (tokens) {\n  let htmlString = '';\n\n  let withinTag = false;\n  let withinAttribute = false;\n  let elementIndexCounter = -1; // depth-first traversal order\n\n  const elementsToBindings = new Map();\n  const elementIndexes = [];\n\n  let skipTokenChars = 0;\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    const token = tokens[i];\n    htmlString += token.slice(skipTokenChars);\n\n    if (i === len - 1) {\n      break // no need to process characters - no more expressions to be found\n    }\n\n    for (let j = 0; j < token.length; j++) {\n      const char = token.charAt(j);\n      switch (char) {\n        case '<': {\n          const nextChar = token.charAt(j + 1);\n          if (nextChar === '/') { // closing tag\n            // leaving an element\n            elementIndexes.pop();\n          } else { // not a closing tag\n            withinTag = true;\n            elementIndexes.push(++elementIndexCounter);\n          }\n          break\n        }\n        case '>': {\n          withinTag = false;\n          withinAttribute = false;\n          break\n        }\n        case '=': {\n          withinAttribute = true;\n          break\n        }\n      }\n    }\n\n    const elementIndex = elementIndexes[elementIndexes.length - 1];\n    const bindings = getFromMap(elementsToBindings, elementIndex, () => []);\n\n    let attributeName;\n    let attributeValuePre;\n    let attributeValuePost;\n    if (withinAttribute) {\n      // I never use single-quotes for attribute values in HTML, so just support double-quotes or no-quotes\n      const attributePreMatch = /(\\S+)=\"?([^\"=]*)$/.exec(token);\n      attributeName = attributePreMatch[1];\n      attributeValuePre = attributePreMatch[2];\n      const attributePostMatch = /^([^\">]*)(\"?)/.exec(tokens[i + 1]);\n      attributeValuePost = attributePostMatch[1];\n      // Optimization: remove the attribute itself, so we don't create a default attribute which is either empty or just\n      // the \"pre\" text, e.g. `<div foo>` or `<div foo=\"prefix\">`. It will be replaced by the expression anyway.\n      htmlString = htmlString.slice(0, -1 * attributePreMatch[0].length);\n      skipTokenChars = attributePostMatch[0].length;\n    } else {\n      skipTokenChars = 0;\n    }\n\n    const binding = {\n      attributeName,\n      attributeValuePre,\n      attributeValuePost,\n      expressionIndex: i\n    };\n\n    bindings.push(binding);\n\n    if (!withinTag && !withinAttribute) {\n      // Add a placeholder text node, so we can find it later. Note we only support one dynamic child text node\n      htmlString += ' ';\n    }\n  }\n\n  const template = parseTemplate(htmlString);\n\n  return {\n    template,\n    elementsToBindings\n  }\n}\n\nfunction applyBindings (bindings, element, instanceBindings) {\n  for (let i = 0; i < bindings.length; i++) {\n    const binding = bindings[i];\n\n    const targetNode = binding.attributeName\n      ? element // attribute binding, just use the element itself\n      : element.firstChild; // not an attribute binding, so has a placeholder text node\n\n    const instanceBinding = {\n      binding,\n      targetNode,\n      targetParentNode: undefined,\n      currentExpression: undefined\n    };\n\n    instanceBindings.push(instanceBinding);\n  }\n}\n\nfunction traverseAndSetupBindings (rootElement, elementsToBindings) {\n  const instanceBindings = [];\n\n  let topLevelBindings;\n  if (elementsToBindings.size === 1 && (topLevelBindings = elementsToBindings.get(0))) {\n    // Optimization for the common case where there's only one element and one binding\n    // Skip creating a TreeWalker entirely and just handle the root DOM element\n    applyBindings(topLevelBindings, rootElement, instanceBindings);\n  } else {\n    // traverse dom\n    const treeWalker = document.createTreeWalker(rootElement, NodeFilter.SHOW_ELEMENT);\n\n    let element = rootElement;\n    let elementIndex = -1;\n    do {\n      const bindings = elementsToBindings.get(++elementIndex);\n      if (bindings) {\n        applyBindings(bindings, element, instanceBindings);\n      }\n    } while ((element = treeWalker.nextNode()))\n  }\n\n  return instanceBindings\n}\n\nfunction parseHtml (tokens) {\n  // All templates and bound expressions are unique per tokens array\n  const { template, elementsToBindings } = getFromMap(parseCache, tokens, () => parse(tokens));\n\n  // When we parseHtml, we always return a fresh DOM instance ready to be updated\n  const dom = template.cloneNode(true).content.firstElementChild;\n  const instanceBindings = traverseAndSetupBindings(dom, elementsToBindings);\n\n  return function updateDomInstance (expressions) {\n    patch(expressions, instanceBindings);\n    return dom\n  }\n}\n\nfunction createFramework (state) {\n  const domInstances = getFromMap(domInstancesCache, state, () => new Map());\n  let domInstanceCacheKey = unkeyedSymbol;\n\n  function html (tokens, ...expressions) {\n    // Each unique lexical usage of map() is considered unique due to the html`` tagged template call it makes,\n    // which has lexically unique tokens. The unkeyed symbol is just used for html`` usage outside of a map().\n    const domInstancesForTokens = getFromMap(domInstances, tokens, () => new Map());\n    const updateDomInstance = getFromMap(domInstancesForTokens, domInstanceCacheKey, () => parseHtml(tokens));\n\n    return updateDomInstance(expressions) // update with expressions\n  }\n\n  function map (array, callback, keyFunction) {\n    return array.map((item, index) => {\n      const originalCacheKey = domInstanceCacheKey;\n      domInstanceCacheKey = keyFunction(item);\n      try {\n        return callback(item, index)\n      } finally {\n        domInstanceCacheKey = originalCacheKey;\n      }\n    })\n  }\n\n  return { map, html }\n}\n\nfunction render (container, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender) {\n  const { labelWithSkin, titleForEmoji, unicodeWithSkin } = helpers;\n  const { html, map } = createFramework(state);\n\n  function emojiList (emojis, searchMode, prefix) {\n    return map(emojis, (emoji, i) => {\n      return html`<button role=\"${searchMode ? 'option' : 'menuitem'}\" aria-selected=\"${searchMode ? i === state.activeSearchItem : null}\" aria-label=\"${labelWithSkin(emoji, state.currentSkinTone)}\" title=\"${titleForEmoji(emoji)}\" class=\"${\n                'emoji' +\n                (searchMode && i === state.activeSearchItem ? ' active' : '') +\n                (emoji.unicode ? '' : ' custom-emoji')\n              }\" id=\"${`${prefix}-${emoji.id}`}\" style=\"${emoji.unicode ? null : `--custom-emoji-background: url(${JSON.stringify(emoji.url)})`}\">${\n        emoji.unicode\n          ? unicodeWithSkin(emoji, state.currentSkinTone)\n          : ''\n      }</button>`\n      // It's important for the cache key to be unique based on the prefix, because the framework caches based on the\n      // unique tokens + cache key, and the same emoji may be used in the tab as well as in the fav bar\n    }, emoji => `${prefix}-${emoji.id}`)\n  }\n\n  const section = () => {\n    return html`<section data-ref=\"rootElement\" class=\"picker\" aria-label=\"${state.i18n.regionLabel}\" style=\"${state.pickerStyle || ''}\"><div class=\"pad-top\"></div><div class=\"search-row\"><div class=\"search-wrapper\"><input id=\"search\" class=\"search\" type=\"search\" role=\"combobox\" enterkeyhint=\"search\" placeholder=\"${state.i18n.searchLabel}\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"true\" aria-expanded=\"${!!(state.searchMode && state.currentEmojis.length)}\" aria-controls=\"search-results\" aria-describedby=\"search-description\" aria-autocomplete=\"list\" aria-activedescendant=\"${state.activeSearchItemId ? `emo-${state.activeSearchItemId}` : null}\" data-ref=\"searchElement\" data-on-input=\"onSearchInput\" data-on-keydown=\"onSearchKeydown\"><label class=\"sr-only\" for=\"search\">${state.i18n.searchLabel}</label> <span id=\"search-description\" class=\"sr-only\">${state.i18n.searchDescription}</span></div><div class=\"skintone-button-wrapper ${state.skinTonePickerExpandedAfterAnimation ? 'expanded' : ''}\"><button id=\"skintone-button\" class=\"emoji ${state.skinTonePickerExpanded ? 'hide-focus' : ''}\" aria-label=\"${state.skinToneButtonLabel}\" title=\"${state.skinToneButtonLabel}\" aria-describedby=\"skintone-description\" aria-haspopup=\"listbox\" aria-expanded=\"${state.skinTonePickerExpanded}\" aria-controls=\"skintone-list\" data-on-click=\"onClickSkinToneButton\">${state.skinToneButtonText || ''}</button></div><span id=\"skintone-description\" class=\"sr-only\">${state.i18n.skinToneDescription}</span><div data-ref=\"skinToneDropdown\" id=\"skintone-list\" class=\"skintone-list hide-focus ${state.skinTonePickerExpanded ? '' : 'hidden no-animate'}\" style=\"transform:translateY(${state.skinTonePickerExpanded ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))'})\" role=\"listbox\" aria-label=\"${state.i18n.skinTonesLabel}\" aria-activedescendant=\"skintone-${state.activeSkinTone}\" aria-hidden=\"${!state.skinTonePickerExpanded}\" tabIndex=\"-1\" data-on-focusout=\"onSkinToneOptionsFocusOut\" data-on-click=\"onSkinToneOptionsClick\" data-on-keydown=\"onSkinToneOptionsKeydown\" data-on-keyup=\"onSkinToneOptionsKeyup\">${\n    map(state.skinTones, (skinTone, i) => {\n    return html`<div id=\"skintone-${i}\" class=\"emoji ${i === state.activeSkinTone ? 'active' : ''}\" aria-selected=\"${i === state.activeSkinTone}\" role=\"option\" title=\"${state.i18n.skinTones[i]}\" aria-label=\"${state.i18n.skinTones[i]}\">${skinTone}</div>`\n    }, skinTone => skinTone)\n        }</div></div><div class=\"nav\" role=\"tablist\" style=\"grid-template-columns:repeat(${state.groups.length},1fr)\" aria-label=\"${state.i18n.categoriesLabel}\" data-on-keydown=\"onNavKeydown\" data-on-click=\"onNavClick\">${\n            map(state.groups, (group) => {\n              return html`<button role=\"tab\" class=\"nav-button\" aria-controls=\"tab-${group.id}\" aria-label=\"${state.i18n.categories[group.name]}\" aria-selected=\"${!state.searchMode && state.currentGroup.id === group.id}\" title=\"${state.i18n.categories[group.name]}\" data-group-id=\"${group.id}\"><div class=\"nav-emoji emoji\">${group.emoji}</div></button>`\n            }, group => group.id)\n          }</div><div class=\"indicator-wrapper\"><div class=\"indicator\" style=\"transform:translateX(${(/* istanbul ignore next */ (state.isRtl ? -1 : 1)) * state.currentGroupIndex * 100}%)\"></div></div><div class=\"message ${state.message ? '' : 'gone'}\" role=\"alert\" aria-live=\"polite\">${state.message || ''}</div><div data-ref=\"tabpanelElement\" class=\"tabpanel ${(!state.databaseLoaded || state.message) ? 'gone' : ''}\" role=\"${state.searchMode ? 'region' : 'tabpanel'}\" aria-label=\"${state.searchMode ? state.i18n.searchResultsLabel : state.i18n.categories[state.currentGroup.name]}\" id=\"${state.searchMode ? null : `tab-${state.currentGroup.id}`}\" tabIndex=\"0\" data-on-click=\"onEmojiClick\"><div data-action=\"calculateEmojiGridStyle\">${\n              map(state.currentEmojisWithCategories, (emojiWithCategory, i) => {\n                return html`<div><div id=\"menu-label-${i}\" class=\"category ${state.currentEmojisWithCategories.length === 1 && state.currentEmojisWithCategories[0].category === '' ? 'gone' : ''}\" aria-hidden=\"true\">${\n                  state.searchMode\n                    ? state.i18n.searchResultsLabel\n                    : (\n                      emojiWithCategory.category\n                        ? emojiWithCategory.category\n                        : (\n                          state.currentEmojisWithCategories.length > 1\n                            ? state.i18n.categories.custom\n                            : state.i18n.categories[state.currentGroup.name]\n                        )\n                    )\n                }</div><div class=\"emoji-menu ${i !== 0 && !state.searchMode && state.currentGroup.id === -1 ? 'visibility-auto' : ''}\" style=\"${`--num-rows: ${Math.ceil(emojiWithCategory.emojis.length / state.numColumns)}`}\" data-action=\"updateOnIntersection\" role=\"${state.searchMode ? 'listbox' : 'menu'}\" aria-labelledby=\"menu-label-${i}\" id=\"${state.searchMode ? 'search-results' : null}\">${\n              emojiList(emojiWithCategory.emojis, state.searchMode, /* prefix */ 'emo')\n            }</div></div>`\n              }, emojiWithCategory => emojiWithCategory.category)\n            }</div></div><div class=\"favorites onscreen emoji-menu ${state.message ? 'gone' : ''}\" role=\"menu\" aria-label=\"${state.i18n.favoritesLabel}\" data-on-click=\"onEmojiClick\">${\n            emojiList(state.currentFavorites, /* searchMode */ false, /* prefix */ 'fav')\n          }</div><button data-ref=\"baselineEmoji\" aria-hidden=\"true\" tabindex=\"-1\" class=\"abs-pos hidden emoji baseline-emoji\"></button></section>`\n  };\n\n  const rootDom = section();\n\n  // helper for traversing the dom, finding elements by an attribute, and getting the attribute value\n  const forElementWithAttribute = (attributeName, callback) => {\n    for (const element of container.querySelectorAll(`[${attributeName}]`)) {\n      callback(element, element.getAttribute(attributeName));\n    }\n  };\n\n  if (firstRender) { // not a re-render\n    container.appendChild(rootDom);\n\n    // we only bind events/refs once - there is no need to find them again given this component structure\n\n    // bind events\n    for (const eventName of ['click', 'focusout', 'input', 'keydown', 'keyup']) {\n      forElementWithAttribute(`data-on-${eventName}`, (element, listenerName) => {\n        element.addEventListener(eventName, events[listenerName]);\n      });\n    }\n\n    // find refs\n    forElementWithAttribute('data-ref', (element, ref) => {\n      refs[ref] = element;\n    });\n\n    // destroy/abort logic\n    abortSignal.addEventListener('abort', () => {\n      container.removeChild(rootDom);\n    });\n  }\n\n  // set up actions - these are re-bound on every render\n  forElementWithAttribute('data-action', (element, action) => {\n    let boundActions = actionContext.get(action);\n    if (!boundActions) {\n      actionContext.set(action, (boundActions = new WeakSet()));\n    }\n\n    // avoid applying the same action to the same element multiple times\n    if (!boundActions.has(element)) {\n      boundActions.add(element);\n      actions[action](element);\n    }\n  });\n}\n\n/* istanbul ignore next */\nconst qM = typeof queueMicrotask === 'function' ? queueMicrotask : callback => Promise.resolve().then(callback);\n\nfunction createState (abortSignal) {\n  let destroyed = false;\n  let currentObserver;\n\n  const propsToObservers = new Map();\n  const dirtyObservers = new Set();\n\n  let queued;\n\n  const flush = () => {\n    if (destroyed) {\n      return\n    }\n    const observersToRun = [...dirtyObservers];\n    dirtyObservers.clear(); // clear before running to force any new updates to run in another tick of the loop\n    try {\n      for (const observer of observersToRun) {\n        observer();\n      }\n    } finally {\n      queued = false;\n      if (dirtyObservers.size) { // new updates, queue another one\n        queued = true;\n        qM(flush);\n      }\n    }\n  };\n\n  const state = new Proxy({}, {\n    get (target, prop) {\n      if (currentObserver) {\n        let observers = propsToObservers.get(prop);\n        if (!observers) {\n          observers = new Set();\n          propsToObservers.set(prop, observers);\n        }\n        observers.add(currentObserver);\n      }\n      return target[prop]\n    },\n    set (target, prop, newValue) {\n      if (target[prop] !== newValue) {\n        target[prop] = newValue;\n        const observers = propsToObservers.get(prop);\n        if (observers) {\n          for (const observer of observers) {\n            dirtyObservers.add(observer);\n          }\n          if (!queued) {\n            queued = true;\n            qM(flush);\n          }\n        }\n      }\n      return true\n    }\n  });\n\n  const createEffect = (callback) => {\n    const runnable = () => {\n      const oldObserver = currentObserver;\n      currentObserver = runnable;\n      try {\n        return callback()\n      } finally {\n        currentObserver = oldObserver;\n      }\n    };\n    return runnable()\n  };\n\n  // destroy logic\n  abortSignal.addEventListener('abort', () => {\n    destroyed = true;\n  });\n\n  return {\n    state,\n    createEffect\n  }\n}\n\n// Compare two arrays, with a function called on each item in the two arrays that returns true if the items are equal\nfunction arraysAreEqualByFunction (left, right, areEqualFunc) {\n  if (left.length !== right.length) {\n    return false\n  }\n  for (let i = 0; i < left.length; i++) {\n    if (!areEqualFunc(left[i], right[i])) {\n      return false\n    }\n  }\n  return true\n}\n\nconst intersectionObserverCache = new WeakMap();\n\nfunction intersectionObserverAction (node, abortSignal, listener) {\n  /* istanbul ignore else */\n  {\n    // The scroll root is always `.tabpanel`\n    const root = node.closest('.tabpanel');\n\n    let observer = intersectionObserverCache.get(root);\n    if (!observer) {\n      // TODO: replace this with the contentvisibilityautostatechange event when all supported browsers support it.\n      // For now we use IntersectionObserver because it has better cross-browser support, and it would be bad for\n      // old Safari versions if they eagerly downloaded all custom emoji all at once.\n      observer = new IntersectionObserver(listener, {\n        root,\n        // trigger if we are 1/2 scroll container height away so that the images load a bit quicker while scrolling\n        rootMargin: '50% 0px 50% 0px',\n        // trigger if any part of the emoji grid is intersecting\n        threshold: 0\n      });\n\n      // avoid creating a new IntersectionObserver for every category; just use one for the whole root\n      intersectionObserverCache.set(root, observer);\n\n      // assume that the abortSignal is always the same for this root node; just add one event listener\n      abortSignal.addEventListener('abort', () => {\n        observer.disconnect();\n      });\n    }\n\n    observer.observe(node);\n  }\n}\n\n/* eslint-disable prefer-const,no-labels,no-inner-declarations */\n\n// constants\nconst EMPTY_ARRAY = [];\n\nconst { assign } = Object;\n\nfunction createRoot (shadowRoot, props) {\n  const refs = {};\n  const abortController = new AbortController();\n  const abortSignal = abortController.signal;\n  const { state, createEffect } = createState(abortSignal);\n  const actionContext = new Map();\n\n  // initial state\n  assign(state, {\n    skinToneEmoji: undefined,\n    i18n: undefined,\n    database: undefined,\n    customEmoji: undefined,\n    customCategorySorting: undefined,\n    emojiVersion: undefined\n  });\n\n  // public props\n  assign(state, props);\n\n  // private props\n  assign(state, {\n    initialLoad: true,\n    currentEmojis: [],\n    currentEmojisWithCategories: [],\n    rawSearchText: '',\n    searchText: '',\n    searchMode: false,\n    activeSearchItem: -1,\n    message: undefined,\n    skinTonePickerExpanded: false,\n    skinTonePickerExpandedAfterAnimation: false,\n    currentSkinTone: 0,\n    activeSkinTone: 0,\n    skinToneButtonText: undefined,\n    pickerStyle: undefined,\n    skinToneButtonLabel: '',\n    skinTones: [],\n    currentFavorites: [],\n    defaultFavoriteEmojis: undefined,\n    numColumns: DEFAULT_NUM_COLUMNS,\n    isRtl: false,\n    currentGroupIndex: 0,\n    groups: groups,\n    databaseLoaded: false,\n    activeSearchItemId: undefined\n  });\n\n  //\n  // Update the current group based on the currentGroupIndex\n  //\n  createEffect(() => {\n    if (state.currentGroup !== state.groups[state.currentGroupIndex]) {\n      state.currentGroup = state.groups[state.currentGroupIndex];\n    }\n  });\n\n  //\n  // Utils/helpers\n  //\n\n  const focus = id => {\n    shadowRoot.getElementById(id).focus();\n  };\n\n  const emojiToDomNode = emoji => shadowRoot.getElementById(`emo-${emoji.id}`);\n\n  // fire a custom event that crosses the shadow boundary\n  const fireEvent = (name, detail) => {\n    refs.rootElement.dispatchEvent(new CustomEvent(name, {\n      detail,\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  //\n  // Comparison utils\n  //\n\n  const compareEmojiArrays = (a, b) => a.id === b.id;\n\n  const compareCurrentEmojisWithCategories = (a, b) => {\n    const { category: aCategory, emojis: aEmojis } = a;\n    const { category: bCategory, emojis: bEmojis } = b;\n\n    if (aCategory !== bCategory) {\n      return false\n    }\n\n    return arraysAreEqualByFunction(aEmojis, bEmojis, compareEmojiArrays)\n  };\n\n  //\n  // Update utils to avoid excessive re-renders\n  //\n\n  // avoid excessive re-renders by checking the value before setting\n  const updateCurrentEmojis = (newEmojis) => {\n    if (!arraysAreEqualByFunction(state.currentEmojis, newEmojis, compareEmojiArrays)) {\n      state.currentEmojis = newEmojis;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateSearchMode = (newSearchMode) => {\n    if (state.searchMode !== newSearchMode) {\n      state.searchMode = newSearchMode;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateCurrentEmojisWithCategories = (newEmojisWithCategories) => {\n    if (!arraysAreEqualByFunction(state.currentEmojisWithCategories, newEmojisWithCategories, compareCurrentEmojisWithCategories)) {\n      state.currentEmojisWithCategories = newEmojisWithCategories;\n    }\n  };\n\n  // Helpers used by PickerTemplate\n\n  const unicodeWithSkin = (emoji, currentSkinTone) => (\n    (currentSkinTone && emoji.skins && emoji.skins[currentSkinTone]) || emoji.unicode\n  );\n\n  const labelWithSkin = (emoji, currentSkinTone) => (\n    uniq([\n      (emoji.name || unicodeWithSkin(emoji, currentSkinTone)),\n      emoji.annotation,\n      ...(emoji.shortcodes || EMPTY_ARRAY)\n    ].filter(Boolean)).join(', ')\n  );\n\n  const titleForEmoji = (emoji) => (\n    emoji.annotation || (emoji.shortcodes || EMPTY_ARRAY).join(', ')\n  );\n\n  const helpers = {\n    labelWithSkin, titleForEmoji, unicodeWithSkin\n  };\n  const events = {\n    onClickSkinToneButton,\n    onEmojiClick,\n    onNavClick,\n    onNavKeydown,\n    onSearchKeydown,\n    onSkinToneOptionsClick,\n    onSkinToneOptionsFocusOut,\n    onSkinToneOptionsKeydown,\n    onSkinToneOptionsKeyup,\n    onSearchInput\n  };\n  const actions = {\n    calculateEmojiGridStyle,\n    updateOnIntersection\n  };\n\n  let firstRender = true;\n  createEffect(() => {\n    render(shadowRoot, state, helpers, events, actions, refs, abortSignal, actionContext, firstRender);\n    firstRender = false;\n  });\n\n  //\n  // Determine the emoji support level (in requestIdleCallback)\n  //\n\n  // mount logic\n  if (!state.emojiVersion) {\n    detectEmojiSupportLevel().then(level => {\n      // Can't actually test emoji support in Jest/Vitest/JSDom, emoji never render in color in Cairo\n      /* istanbul ignore next */\n      if (!level) {\n        state.message = state.i18n.emojiUnsupportedMessage;\n      }\n    });\n  }\n\n  //\n  // Set or update the database object\n  //\n\n  createEffect(() => {\n    // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n    async function handleDatabaseLoading () {\n      let showingLoadingMessage = false;\n      const timeoutHandle = setTimeout(() => {\n        showingLoadingMessage = true;\n        state.message = state.i18n.loadingMessage;\n      }, TIMEOUT_BEFORE_LOADING_MESSAGE);\n      try {\n        await state.database.ready();\n        state.databaseLoaded = true; // eslint-disable-line no-unused-vars\n      } catch (err) {\n        console.error(err);\n        state.message = state.i18n.networkErrorMessage;\n      } finally {\n        clearTimeout(timeoutHandle);\n        if (showingLoadingMessage) { // Seems safer than checking the i18n string, which may change\n          showingLoadingMessage = false;\n          state.message = ''; // eslint-disable-line no-unused-vars\n        }\n      }\n    }\n\n    if (state.database) {\n      /* no await */\n      handleDatabaseLoading();\n    }\n  });\n\n  //\n  // Global styles for the entire picker\n  //\n\n  createEffect(() => {\n    state.pickerStyle = `\n      --num-groups: ${state.groups.length}; \n      --indicator-opacity: ${state.searchMode ? 0 : 1}; \n      --num-skintones: ${NUM_SKIN_TONES};`;\n  });\n\n  //\n  // Set or update the customEmoji\n  //\n\n  createEffect(() => {\n    if (state.customEmoji && state.database) {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n    }\n  });\n\n  createEffect(() => {\n    if (state.customEmoji && state.customEmoji.length) {\n      if (state.groups !== allGroups) { // don't update unnecessarily\n        state.groups = allGroups;\n      }\n    } else if (state.groups !== groups) {\n      if (state.currentGroupIndex) {\n        // If the current group is anything other than \"custom\" (which is first), decrement.\n        // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n        state.currentGroupIndex--;\n      }\n      state.groups = groups;\n    }\n  });\n\n  //\n  // Set or update the preferred skin tone\n  //\n\n  createEffect(() => {\n    async function updatePreferredSkinTone () {\n      if (state.databaseLoaded) {\n        state.currentSkinTone = await state.database.getPreferredSkinTone();\n      }\n    }\n\n    /* no await */ updatePreferredSkinTone();\n  });\n\n  createEffect(() => {\n    state.skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(state.skinToneEmoji, i));\n  });\n\n  createEffect(() => {\n    state.skinToneButtonText = state.skinTones[state.currentSkinTone];\n  });\n\n  createEffect(() => {\n    state.skinToneButtonLabel = state.i18n.skinToneLabel.replace('{skinTone}', state.i18n.skinTones[state.currentSkinTone]);\n  });\n\n  //\n  // Set or update the favorites emojis\n  //\n\n  createEffect(() => {\n    async function updateDefaultFavoriteEmojis () {\n      const { database } = state;\n      const favs = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => (\n        database.getEmojiByUnicodeOrName(unicode)\n      )))).filter(Boolean); // filter because in Jest/Vitest tests we don't have all the emoji in the DB\n      state.defaultFavoriteEmojis = favs;\n    }\n\n    if (state.databaseLoaded) {\n      /* no await */ updateDefaultFavoriteEmojis();\n    }\n  });\n\n  function updateCustomEmoji () {\n    // Certain effects have an implicit dependency on customEmoji since it affects the database\n    // Getting it here on the state ensures this effect re-runs when customEmoji change.\n    const { customEmoji, database } = state;\n    const databaseCustomEmoji = customEmoji || EMPTY_ARRAY;\n    if (database.customEmoji !== databaseCustomEmoji) {\n      // Avoid setting this if the customEmoji have _not_ changed, because the setter triggers a re-computation of the\n      // `customEmojiIndex`. Note we don't bother with deep object changes.\n      database.customEmoji = databaseCustomEmoji;\n    }\n  }\n\n  createEffect(() => {\n    async function updateFavorites () {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n      const { database, defaultFavoriteEmojis, numColumns } = state;\n      const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n      const favorites = await summarizeEmojis(uniqBy([\n        ...dbFavorites,\n        ...defaultFavoriteEmojis\n      ], _ => (_.unicode || _.name)).slice(0, numColumns));\n      state.currentFavorites = favorites;\n    }\n\n    if (state.databaseLoaded && state.defaultFavoriteEmojis) {\n      /* no await */ updateFavorites();\n    }\n  });\n\n  //\n  // Re-run whenever the emoji grid changes size, and re-calc style/layout-related state variables:\n  // 1) Re-calculate the --num-columns var because it may have changed\n  // 2) Re-calculate whether we're in RTL mode or not.\n  //\n  // The benefit of doing this in one place is to align with rAF/ResizeObserver\n  // and do all the calculations in one go. RTL vs LTR is not strictly layout-related,\n  // but since we're already reading the style here, and since it's already aligned with\n  // the rAF loop, this is the most appropriate place to do it perf-wise.\n  //\n\n  function calculateEmojiGridStyle (node) {\n    resizeObserverAction(node, abortSignal, () => {\n      /* istanbul ignore next */\n      { // jsdom throws errors for this kind of fancy stuff\n        // read all the style/layout calculations we need to make\n        const style = getComputedStyle(refs.rootElement);\n        const newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n        const newIsRtl = style.getPropertyValue('direction') === 'rtl';\n\n        // write to state variables\n        state.numColumns = newNumColumns;\n        state.isRtl = newIsRtl;\n      }\n    });\n  }\n\n  // Re-run whenever the custom emoji in a category are shown/hidden. This is an optimization that simulates\n  // what we'd get from `<img loading=lazy>` but without rendering an `<img>`.\n  function updateOnIntersection (node) {\n    intersectionObserverAction(node, abortSignal, (entries) => {\n      for (const { target, isIntersecting } of entries) {\n        target.classList.toggle('onscreen', isIntersecting);\n      }\n    });\n  }\n\n  //\n  // Set or update the currentEmojis. Check for invalid ZWJ renderings\n  // (i.e. double emoji).\n  //\n\n  createEffect(() => {\n    async function updateEmojis () {\n      const { searchText, currentGroup, databaseLoaded, customEmoji } = state;\n      if (!databaseLoaded) {\n        state.currentEmojis = [];\n        state.searchMode = false;\n      } else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n        const newEmojis = await getEmojisBySearchQuery(searchText);\n        if (state.searchText === searchText) { // if the situation changes asynchronously, do not update\n          updateCurrentEmojis(newEmojis);\n          updateSearchMode(true);\n        }\n      } else { // database is loaded and we're not in search mode, so we're in normal category mode\n        const { id: currentGroupId } = currentGroup;\n        // avoid race condition where currentGroupId is -1 and customEmoji is undefined/empty\n        if (currentGroupId !== -1 || (customEmoji && customEmoji.length)) {\n          const newEmojis = await getEmojisByGroup(currentGroupId);\n          if (state.currentGroup.id === currentGroupId) { // if the situation changes asynchronously, do not update\n            updateCurrentEmojis(newEmojis);\n            updateSearchMode(false);\n          }\n        }\n      }\n    }\n\n    /* no await */ updateEmojis();\n  });\n\n  const resetScrollTopInRaf = () => {\n    rAF(() => resetScrollTopIfPossible(refs.tabpanelElement));\n  };\n\n  // Some emojis have their ligatures rendered as two or more consecutive emojis\n  // We want to treat these the same as unsupported emojis, so we compare their\n  // widths against the baseline widths and remove them as necessary\n  createEffect(() => {\n    const { currentEmojis, emojiVersion } = state;\n    const zwjEmojisToCheck = currentEmojis\n      .filter(emoji => emoji.unicode) // filter custom emoji\n      .filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode));\n    if (!emojiVersion && zwjEmojisToCheck.length) {\n      // render now, check their length later\n      updateCurrentEmojis(currentEmojis);\n      rAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n    } else {\n      const newEmojis = emojiVersion ? currentEmojis : currentEmojis.filter(isZwjSupported);\n      updateCurrentEmojis(newEmojis);\n      // Reset scroll top to 0 when emojis change\n      resetScrollTopInRaf();\n    }\n  });\n\n  function checkZwjSupportAndUpdate (zwjEmojisToCheck) {\n    const allSupported = checkZwjSupport(zwjEmojisToCheck, refs.baselineEmoji, emojiToDomNode);\n    if (allSupported) {\n      // Even if all emoji are supported, we still need to reset the scroll top to 0 when emojis change\n      resetScrollTopInRaf();\n    } else {\n      // Force update. We only do this if there are any unsupported ZWJ characters since otherwise,\n      // for browsers that support all emoji, it would be an unnecessary extra re-render.\n      state.currentEmojis = [...state.currentEmojis];\n    }\n  }\n\n  function isZwjSupported (emoji) {\n    return !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode)\n  }\n\n  async function filterEmojisByVersion (emojis) {\n    const emojiSupportLevel = state.emojiVersion || await detectEmojiSupportLevel();\n    // !version corresponds to custom emoji\n    return emojis.filter(({ version }) => !version || version <= emojiSupportLevel)\n  }\n\n  async function summarizeEmojis (emojis) {\n    return summarizeEmojisForUI(emojis, state.emojiVersion || await detectEmojiSupportLevel())\n  }\n\n  async function getEmojisByGroup (group) {\n    // -1 is custom emoji\n    const emoji = group === -1 ? state.customEmoji : await state.database.getEmojiByGroup(group);\n    return summarizeEmojis(await filterEmojisByVersion(emoji))\n  }\n\n  async function getEmojisBySearchQuery (query) {\n    return summarizeEmojis(await filterEmojisByVersion(await state.database.getEmojiBySearchQuery(query)))\n  }\n\n  createEffect(() => {\n  });\n\n  //\n  // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n  // are no categories, because it's just easier to code the HTML this way.\n  //\n\n  createEffect(() => {\n    function calculateCurrentEmojisWithCategories () {\n      const { searchMode, currentEmojis } = state;\n      if (searchMode) {\n        return [\n          {\n            category: '',\n            emojis: currentEmojis\n          }\n        ]\n      }\n      const categoriesToEmoji = new Map();\n      for (const emoji of currentEmojis) {\n        const category = emoji.category || '';\n        let emojis = categoriesToEmoji.get(category);\n        if (!emojis) {\n          emojis = [];\n          categoriesToEmoji.set(category, emojis);\n        }\n        emojis.push(emoji);\n      }\n      return [...categoriesToEmoji.entries()]\n        .map(([category, emojis]) => ({ category, emojis }))\n        .sort((a, b) => state.customCategorySorting(a.category, b.category))\n    }\n\n    const newEmojisWithCategories = calculateCurrentEmojisWithCategories();\n    updateCurrentEmojisWithCategories(newEmojisWithCategories);\n  });\n\n  //\n  // Handle active search item (i.e. pressing up or down while searching)\n  //\n\n  createEffect(() => {\n    state.activeSearchItemId = state.activeSearchItem !== -1 && state.currentEmojis[state.activeSearchItem].id;\n  });\n\n  //\n  // Handle user input on the search input\n  //\n\n  createEffect(() => {\n    const { rawSearchText } = state;\n    rIC(() => {\n      state.searchText = (rawSearchText || '').trim(); // defer to avoid input delays, plus we can trim here\n      state.activeSearchItem = -1;\n    });\n  });\n\n  function onSearchKeydown (event) {\n    if (!state.searchMode || !state.currentEmojis.length) {\n      return\n    }\n\n    const goToNextOrPrevious = (previous) => {\n      halt(event);\n      state.activeSearchItem = incrementOrDecrement(previous, state.activeSearchItem, state.currentEmojis);\n    };\n\n    switch (event.key) {\n      case 'ArrowDown':\n        return goToNextOrPrevious(false)\n      case 'ArrowUp':\n        return goToNextOrPrevious(true)\n      case 'Enter':\n        if (state.activeSearchItem === -1) {\n          // focus the first option in the list since the list must be non-empty at this point (it's verified above)\n          state.activeSearchItem = 0;\n        } else { // there is already an active search item\n          halt(event);\n          return clickEmoji(state.currentEmojis[state.activeSearchItem].id)\n        }\n    }\n  }\n\n  //\n  // Handle user input on nav\n  //\n\n  function onNavClick (event) {\n    const { target } = event;\n    const closestTarget = target.closest('.nav-button');\n    /* istanbul ignore if */\n    if (!closestTarget) {\n      return // This should never happen, but makes me nervous not to have it\n    }\n    const groupId = parseInt(closestTarget.dataset.groupId, 10);\n    refs.searchElement.value = ''; // clear search box input\n    state.rawSearchText = '';\n    state.searchText = '';\n    state.activeSearchItem = -1;\n    state.currentGroupIndex = state.groups.findIndex(_ => _.id === groupId);\n  }\n\n  function onNavKeydown (event) {\n    const { target, key } = event;\n\n    const doFocus = el => {\n      if (el) {\n        halt(event);\n        el.focus();\n      }\n    };\n\n    switch (key) {\n      case 'ArrowLeft':\n        return doFocus(target.previousElementSibling)\n      case 'ArrowRight':\n        return doFocus(target.nextElementSibling)\n      case 'Home':\n        return doFocus(target.parentElement.firstElementChild)\n      case 'End':\n        return doFocus(target.parentElement.lastElementChild)\n    }\n  }\n\n  async function getDetailForClickEvent (unicodeOrName) {\n    const emoji = await state.database.getEmojiByUnicodeOrName(unicodeOrName);\n    const emojiSummary = [...state.currentEmojis, ...state.currentFavorites]\n      .find(_ => (_.id === unicodeOrName));\n    const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, state.currentSkinTone);\n    await state.database.incrementFavoriteEmojiCount(unicodeOrName);\n    return {\n      emoji,\n      skinTone: state.currentSkinTone,\n      ...(skinTonedUnicode && { unicode: skinTonedUnicode }),\n      ...(emojiSummary.name && { name: emojiSummary.name })\n    }\n  }\n\n  //\n  // Handle user input on an emoji\n  //\n  async function clickEmoji (unicodeOrName) {\n    const promiseForDetail = getDetailForClickEvent(unicodeOrName);\n    // sync event to work around a safari bug: https://bugs.webkit.org/show_bug.cgi?id=222262\n    fireEvent('emoji-click-sync', promiseForDetail);\n    // async event for most normal use cases that don't need to work around the safari bug\n    fireEvent('emoji-click', await promiseForDetail);\n  }\n\n  function onEmojiClick (event) {\n    const { target } = event;\n    /* istanbul ignore if */\n    if (!target.classList.contains('emoji')) {\n      // This should never happen, but makes me nervous not to have it\n      return\n    }\n    halt(event);\n    const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n    /* no await */ clickEmoji(id);\n  }\n\n  //\n  // Handle user input on the skintone picker\n  //\n\n  function changeSkinTone (skinTone) {\n    state.currentSkinTone = skinTone;\n    state.skinTonePickerExpanded = false;\n    focus('skintone-button');\n    fireEvent('skin-tone-change', { skinTone });\n    /* no await */ state.database.setPreferredSkinTone(skinTone);\n  }\n\n  function onSkinToneOptionsClick (event) {\n    const { target: { id } } = event;\n    const match = id && id.match(/^skintone-(\\d)/); // skintone option format\n    /* istanbul ignore if */\n    if (!match) { // not a skintone option\n      return // This should never happen, but makes me nervous not to have it\n    }\n    halt(event);\n    const skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\n    changeSkinTone(skinTone);\n  }\n\n  function onClickSkinToneButton (event) {\n    state.skinTonePickerExpanded = !state.skinTonePickerExpanded;\n    state.activeSkinTone = state.currentSkinTone;\n    // this should always be true, since the button is obscured by the listbox, so this `if` is just to be sure\n    if (state.skinTonePickerExpanded) {\n      halt(event);\n      rAF(() => focus('skintone-list'));\n    }\n  }\n\n  // To make the animation nicer, change the z-index of the skintone picker button\n  // *after* the animation has played. This makes it appear that the picker box\n  // is expanding \"below\" the button\n  createEffect(() => {\n    if (state.skinTonePickerExpanded) {\n      refs.skinToneDropdown.addEventListener('transitionend', () => {\n        state.skinTonePickerExpandedAfterAnimation = true; // eslint-disable-line no-unused-vars\n      }, { once: true });\n    } else {\n      state.skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n    }\n  });\n\n  function onSkinToneOptionsKeydown (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    const changeActiveSkinTone = async nextSkinTone => {\n      halt(event);\n      state.activeSkinTone = nextSkinTone;\n    };\n\n    switch (event.key) {\n      case 'ArrowUp':\n        return changeActiveSkinTone(incrementOrDecrement(true, state.activeSkinTone, state.skinTones))\n      case 'ArrowDown':\n        return changeActiveSkinTone(incrementOrDecrement(false, state.activeSkinTone, state.skinTones))\n      case 'Home':\n        return changeActiveSkinTone(0)\n      case 'End':\n        return changeActiveSkinTone(state.skinTones.length - 1)\n      case 'Enter':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n      case 'Escape':\n        halt(event);\n        state.skinTonePickerExpanded = false;\n        return focus('skintone-button')\n    }\n  }\n\n  function onSkinToneOptionsKeyup (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    switch (event.key) {\n      case ' ':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n    }\n  }\n\n  async function onSkinToneOptionsFocusOut (event) {\n    // On blur outside of the skintone listbox, collapse the skintone picker.\n    const { relatedTarget } = event;\n    // The `else` should never happen, but makes me nervous not to have it\n    /* istanbul ignore else */\n    if (!relatedTarget || relatedTarget.id !== 'skintone-list') {\n      state.skinTonePickerExpanded = false;\n    }\n  }\n\n  function onSearchInput (event) {\n    state.rawSearchText = event.target.value;\n  }\n\n  return {\n    $set (newState) {\n      assign(state, newState);\n    },\n    $destroy () {\n      abortController.abort();\n    }\n  }\n}\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\nvar baseStyles = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--border-radius:0;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);border-radius:var(--border-radius);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;scrollbar-gutter:stable;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.emoji-menu.visibility-auto{content-visibility:auto;contain-intrinsic-size:calc(var(--num-columns)*var(--total-emoji-size)) calc(var(--num-rows)*var(--total-emoji-size))}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;height:var(--total-emoji-size);width:var(--total-emoji-size);line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.onscreen .custom-emoji::after{content:\\\"\\\";width:var(--emoji-size);height:var(--emoji-size);background-repeat:no-repeat;background-position:center center;background-size:contain;background-image:var(--custom-emoji-background)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{overflow-y:auto;scrollbar-gutter:stable;display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n\nconst PROPS = [\n  'customEmoji',\n  'customCategorySorting',\n  'database',\n  'dataSource',\n  'i18n',\n  'locale',\n  'skinToneEmoji',\n  'emojiVersion'\n];\n\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\nconst EXTRA_STYLES = `:host{--emoji-font-family:${FONT_FAMILY}}`;\n\nclass PickerElement extends HTMLElement {\n  constructor (props) {\n    super();\n    this.attachShadow({ mode: 'open' });\n    const style = document.createElement('style');\n    style.textContent = baseStyles + EXTRA_STYLES;\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      emojiVersion: null,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n\n  connectedCallback () {\n    // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\n    // do nothing (preserve the state)\n    if (!this._cmp) {\n      this._cmp = createRoot(this.shadowRoot, this._ctx);\n    }\n  }\n\n  disconnectedCallback () {\n    // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\n    // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\n    qM(() => {\n      // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\n      if (!this.isConnected && this._cmp) {\n        this._cmp.$destroy();\n        this._cmp = undefined;\n\n        const { database } = this._ctx;\n        database.close()\n          // only happens if the database failed to load in the first place, so we don't care\n          .catch(err => console.error(err));\n      }\n    });\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji', 'emoji-version'] // complex objects aren't supported, also use kebab-case\n  }\n\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    this._set(\n      // convert from kebab-case to camelcase\n      // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      // convert string attribute to float if necessary\n      attrName === 'emoji-version' ? parseFloat(newValue) : newValue\n    );\n  }\n\n  _set (prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({ [prop]: newValue });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n\n  _dbCreate () {\n    const { locale, dataSource, database } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({ locale, dataSource }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush () {\n    qM(() => (\n      this._dbCreate()\n    ));\n  }\n}\n\nconst definitions = {};\n\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get () {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop]\n    },\n    set (val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only')\n      }\n      this._set(prop, val);\n    }\n  };\n}\n\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\n\nexport { PickerElement as default };\n","function assertNonEmptyString (str) {\n  if (typeof str !== 'string' || !str) {\n    throw new Error('expected a non-empty string, got: ' + str)\n  }\n}\n\nfunction assertNumber (number) {\n  if (typeof number !== 'number') {\n    throw new Error('expected a number, got: ' + number)\n  }\n}\n\nconst DB_VERSION_CURRENT = 1;\nconst DB_VERSION_INITIAL = 1;\nconst STORE_EMOJI = 'emoji';\nconst STORE_KEYVALUE = 'keyvalue';\nconst STORE_FAVORITES = 'favorites';\nconst FIELD_TOKENS = 'tokens';\nconst INDEX_TOKENS = 'tokens';\nconst FIELD_UNICODE = 'unicode';\nconst INDEX_COUNT = 'count';\nconst FIELD_GROUP = 'group';\nconst FIELD_ORDER = 'order';\nconst INDEX_GROUP_AND_ORDER = 'group-order';\nconst KEY_ETAG = 'eTag';\nconst KEY_URL = 'url';\nconst KEY_PREFERRED_SKINTONE = 'skinTone';\nconst MODE_READONLY = 'readonly';\nconst MODE_READWRITE = 'readwrite';\nconst INDEX_SKIN_UNICODE = 'skinUnicodes';\nconst FIELD_SKIN_UNICODE = 'skinUnicodes';\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\nfunction uniqEmoji (emojis) {\n  return uniqBy(emojis, _ => _.unicode)\n}\n\nfunction initialMigration (db) {\n  function createObjectStore (name, keyPath, indexes) {\n    const store = keyPath\n      ? db.createObjectStore(name, { keyPath })\n      : db.createObjectStore(name);\n    if (indexes) {\n      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {\n        store.createIndex(indexName, keyPath, { multiEntry });\n      }\n    }\n    return store\n  }\n\n  createObjectStore(STORE_KEYVALUE);\n  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {\n    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],\n    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],\n    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]\n  });\n  createObjectStore(STORE_FAVORITES, undefined, {\n    [INDEX_COUNT]: ['']\n  });\n}\n\nconst openIndexedDBRequests = {};\nconst databaseCache = {};\nconst onCloseListeners = {};\n\nfunction handleOpenOrDeleteReq (resolve, reject, req) {\n  // These things are almost impossible to test with fakeIndexedDB sadly\n  /* istanbul ignore next */\n  req.onerror = () => reject(req.error);\n  /* istanbul ignore next */\n  req.onblocked = () => reject(new Error('IDB blocked'));\n  req.onsuccess = () => resolve(req.result);\n}\n\nasync function createDatabase (dbName) {\n  const db = await new Promise((resolve, reject) => {\n    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);\n    openIndexedDBRequests[dbName] = req;\n    req.onupgradeneeded = e => {\n      // Technically there is only one version, so we don't need this `if` check\n      // But if an old version of the JS is in another browser tab\n      // and it gets upgraded in the future and we have a new DB version, well...\n      // better safe than sorry.\n      /* istanbul ignore else */\n      if (e.oldVersion < DB_VERSION_INITIAL) {\n        initialMigration(req.result);\n      }\n    };\n    handleOpenOrDeleteReq(resolve, reject, req);\n  });\n  // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n  // No need for removeEventListener, because once the DB can no longer\n  // fire \"close\" events, it will auto-GC.\n  db.onclose = () => closeDatabase(dbName);\n  return db\n}\n\nfunction openDatabase (dbName) {\n  if (!databaseCache[dbName]) {\n    databaseCache[dbName] = createDatabase(dbName);\n  }\n  return databaseCache[dbName]\n}\n\nfunction dbPromise (db, storeName, readOnlyOrReadWrite, cb) {\n  return new Promise((resolve, reject) => {\n    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n    // are really irreplaceable data. IndexedDB is just a cache in this case.\n    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });\n    const store = typeof storeName === 'string'\n      ? txn.objectStore(storeName)\n      : storeName.map(name => txn.objectStore(name));\n    let res;\n    cb(store, txn, (result) => {\n      res = result;\n    });\n\n    txn.oncomplete = () => resolve(res);\n    /* istanbul ignore next */\n    txn.onerror = () => reject(txn.error);\n  })\n}\n\nfunction closeDatabase (dbName) {\n  // close any open requests\n  const req = openIndexedDBRequests[dbName];\n  const db = req && req.result;\n  if (db) {\n    db.close();\n    const listeners = onCloseListeners[dbName];\n    /* istanbul ignore else */\n    if (listeners) {\n      for (const listener of listeners) {\n        listener();\n      }\n    }\n  }\n  delete openIndexedDBRequests[dbName];\n  delete databaseCache[dbName];\n  delete onCloseListeners[dbName];\n}\n\nfunction deleteDatabase (dbName) {\n  return new Promise((resolve, reject) => {\n    // close any open requests\n    closeDatabase(dbName);\n    const req = indexedDB.deleteDatabase(dbName);\n    handleOpenOrDeleteReq(resolve, reject, req);\n  })\n}\n\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction addOnCloseListener (dbName, listener) {\n  let listeners = onCloseListeners[dbName];\n  if (!listeners) {\n    listeners = onCloseListeners[dbName] = [];\n  }\n  listeners.push(listener);\n}\n\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst irregularEmoticons = new Set([\n  ':D', 'XD', \":'D\", 'O:)',\n  ':X', ':P', ';P', 'XP',\n  ':L', ':Z', ':j', '8D',\n  'XO', '8)', ':B', ':O',\n  ':S', \":'o\", 'Dx', 'X(',\n  'D:', ':C', '>0)', ':3',\n  '</3', '<3', '\\\\M/', ':E',\n  '8#'\n]);\n\nfunction extractTokens (str) {\n  return str\n    .split(/[\\s_]+/)\n    .map(word => {\n      if (!word.match(/\\w/) || irregularEmoticons.has(word)) {\n        // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase()\n      }\n\n      return word\n        .replace(/[)(:,]/g, '')\n        .replace(//g, \"'\")\n        .toLowerCase()\n    }).filter(Boolean)\n}\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\n\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction normalizeTokens (str) {\n  return str\n    .filter(Boolean)\n    .map(_ => _.toLowerCase())\n    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)\n}\n\n// Transform emoji data for storage in IDB\nfunction transformEmojiData (emojiData) {\n  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {\n    const tokens = [...new Set(\n      normalizeTokens([\n        ...(shortcodes || []).map(extractTokens).flat(),\n        ...(tags || []).map(extractTokens).flat(),\n        ...extractTokens(annotation),\n        emoticon\n      ])\n    )].sort();\n    const res = {\n      annotation,\n      group,\n      order,\n      tags,\n      tokens,\n      unicode: emoji,\n      version\n    };\n    if (emoticon) {\n      res.emoticon = emoticon;\n    }\n    if (shortcodes) {\n      res.shortcodes = shortcodes;\n    }\n    if (skins) {\n      res.skinTones = [];\n      res.skinUnicodes = [];\n      res.skinVersions = [];\n      for (const { tone, emoji, version } of skins) {\n        res.skinTones.push(tone);\n        res.skinUnicodes.push(emoji);\n        res.skinVersions.push(version);\n      }\n    }\n    return res\n  });\n  return res\n}\n\n// helper functions that help compress the code better\n\nfunction callStore (store, method, key, cb) {\n  store[method](key).onsuccess = e => (cb && cb(e.target.result));\n}\n\nfunction getIDB (store, key, cb) {\n  callStore(store, 'get', key, cb);\n}\n\nfunction getAllIDB (store, key, cb) {\n  callStore(store, 'getAll', key, cb);\n}\n\nfunction commit (txn) {\n  /* istanbul ignore else */\n  if (txn.commit) {\n    txn.commit();\n  }\n}\n\n// like lodash's minBy\nfunction minBy (array, func) {\n  let minItem = array[0];\n  for (let i = 1; i < array.length; i++) {\n    const item = array[i];\n    if (func(minItem) > func(item)) {\n      minItem = item;\n    }\n  }\n  return minItem\n}\n\n// return an array of results representing all items that are found in each one of the arrays\n//\n\nfunction findCommonMembers (arrays, uniqByFunc) {\n  const shortestArray = minBy(arrays, _ => _.length);\n  const results = [];\n  for (const item of shortestArray) {\n    // if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {\n      results.push(item);\n    }\n  }\n  return results\n}\n\nasync function isEmpty (db) {\n  return !(await get(db, STORE_KEYVALUE, KEY_URL))\n}\n\nasync function hasData (db, url, eTag) {\n  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]\n    .map(key => get(db, STORE_KEYVALUE, key)));\n  return (oldETag === eTag && oldUrl === url)\n}\n\nasync function doFullDatabaseScanForSingleResult (db, predicate) {\n  // This batching algorithm is just a perf improvement over a basic\n  // cursor. The BATCH_SIZE is an estimate of what would give the best\n  // perf for doing a full DB scan (worst case).\n  //\n  // Mini-benchmark for determining the best batch size:\n  //\n  // PERF=1 pnpm build:rollup && pnpm test:adhoc\n  //\n  // (async () => {\n  //   performance.mark('start')\n  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n  //   performance.measure('total', 'start')\n  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n  // })()\n  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    let lastKey;\n\n    const processNextBatch = () => {\n      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {\n        const results = e.target.result;\n        for (const result of results) {\n          lastKey = result.unicode;\n          if (predicate(result)) {\n            return cb(result)\n          }\n        }\n        if (results.length < BATCH_SIZE) {\n          return cb()\n        }\n        processNextBatch();\n      };\n    };\n    processNextBatch();\n  })\n}\n\nasync function loadData (db, emojiData, url, eTag) {\n  try {\n    const transformedData = transformEmojiData(emojiData);\n    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {\n      let oldETag;\n      let oldUrl;\n      let todo = 0;\n\n      function checkFetched () {\n        if (++todo === 2) { // 2 requests made\n          onFetched();\n        }\n      }\n\n      function onFetched () {\n        if (oldETag === eTag && oldUrl === url) {\n          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n          return\n        }\n        // delete old data\n        emojiStore.clear();\n        // insert new data\n        for (const data of transformedData) {\n          emojiStore.put(data);\n        }\n        metaStore.put(eTag, KEY_ETAG);\n        metaStore.put(url, KEY_URL);\n        commit(txn);\n      }\n\n      getIDB(metaStore, KEY_ETAG, result => {\n        oldETag = result;\n        checkFetched();\n      });\n\n      getIDB(metaStore, KEY_URL, result => {\n        oldUrl = result;\n        checkFetched();\n      });\n    });\n  } finally {\n  }\n}\n\nasync function getEmojiByGroup (db, group) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);\n    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);\n  })\n}\n\nasync function getEmojiBySearchQuery (db, query) {\n  const tokens = normalizeTokens(extractTokens(query));\n\n  if (!tokens.length) {\n    return []\n  }\n\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    // get all results that contain all tokens (i.e. an AND query)\n    const intermediateResults = [];\n\n    const checkDone = () => {\n      if (intermediateResults.length === tokens.length) {\n        onDone();\n      }\n    };\n\n    const onDone = () => {\n      const results = findCommonMembers(intermediateResults, _ => _.unicode);\n      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));\n    };\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      const range = i === tokens.length - 1\n        ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\n        : IDBKeyRange.only(token); // treat all other tokens as an exact match\n      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {\n        intermediateResults.push(result);\n        checkDone();\n      });\n    }\n  })\n}\n\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function getEmojiByShortcode (db, shortcode) {\n  const emojis = await getEmojiBySearchQuery(db, shortcode);\n\n  // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n  // index on shortcodes.\n\n  if (!emojis.length) {\n    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));\n    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null\n  }\n\n  return emojis.filter(_ => {\n    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());\n    return lowerShortcodes.includes(shortcode.toLowerCase())\n  })[0] || null\n}\n\nasync function getEmojiByUnicode (db, unicode) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (\n    getIDB(emojiStore, unicode, result => {\n      if (result) {\n        return cb(result)\n      }\n      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));\n    })\n  ))\n}\n\nfunction get (db, storeName, key) {\n  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (\n    getIDB(store, key, cb)\n  ))\n}\n\nfunction set (db, storeName, key, value) {\n  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {\n    store.put(value, key);\n    commit(txn);\n  })\n}\n\nfunction incrementFavoriteEmojiCount (db, unicode) {\n  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (\n    getIDB(store, unicode, result => {\n      store.put((result || 0) + 1, unicode);\n      commit(txn);\n    })\n  ))\n}\n\nfunction getTopFavoriteEmoji (db, customEmojiIndex, limit) {\n  if (limit === 0) {\n    return []\n  }\n  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {\n    const results = [];\n    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {\n      const cursor = e.target.result;\n      if (!cursor) { // no more results\n        return cb(results)\n      }\n\n      function addResult (result) {\n        results.push(result);\n        if (results.length === limit) {\n          return cb(results) // done, reached the limit\n        }\n        cursor.continue();\n      }\n\n      const unicodeOrName = cursor.primaryKey;\n      const custom = customEmojiIndex.byName(unicodeOrName);\n      if (custom) {\n        return addResult(custom)\n      }\n      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n      // but my testing suggests it's not actually faster.\n      getIDB(emojiStore, unicodeOrName, emoji => {\n        if (emoji) {\n          return addResult(emoji)\n        }\n        // emoji not found somehow, ignore (may happen if custom emoji change)\n        cursor.continue();\n      });\n    };\n  })\n}\n\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\n\nconst CODA_MARKER = ''; // marks the end of the string\n\nfunction trie (arr, itemToTokens) {\n  const map = new Map();\n  for (const item of arr) {\n    const tokens = itemToTokens(item);\n    for (const token of tokens) {\n      let currentMap = map;\n      for (let i = 0; i < token.length; i++) {\n        const char = token.charAt(i);\n        let nextMap = currentMap.get(char);\n        if (!nextMap) {\n          nextMap = new Map();\n          currentMap.set(char, nextMap);\n        }\n        currentMap = nextMap;\n      }\n      let valuesAtCoda = currentMap.get(CODA_MARKER);\n      if (!valuesAtCoda) {\n        valuesAtCoda = [];\n        currentMap.set(CODA_MARKER, valuesAtCoda);\n      }\n      valuesAtCoda.push(item);\n    }\n  }\n\n  const search = (query, exact) => {\n    let currentMap = map;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charAt(i);\n      const nextMap = currentMap.get(char);\n      if (nextMap) {\n        currentMap = nextMap;\n      } else {\n        return []\n      }\n    }\n\n    if (exact) {\n      const results = currentMap.get(CODA_MARKER);\n      return results || []\n    }\n\n    const results = [];\n    // traverse\n    const queue = [currentMap];\n    while (queue.length) {\n      const currentMap = queue.shift();\n      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);\n      for (const [key, value] of entriesSortedByKey) {\n        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string\n          results.push(...value);\n        } else {\n          queue.push(value);\n        }\n      }\n    }\n    return results\n  };\n\n  return search\n}\n\nconst requiredKeys$1 = [\n  'name',\n  'url'\n];\n\nfunction assertCustomEmojis (customEmojis) {\n  const isArray = customEmojis && Array.isArray(customEmojis);\n  const firstItemIsFaulty = isArray &&\n    customEmojis.length &&\n    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));\n  if (!isArray || firstItemIsFaulty) {\n    throw new Error('Custom emojis are in the wrong format')\n  }\n}\n\nfunction customEmojiIndex (customEmojis) {\n  assertCustomEmojis(customEmojis);\n\n  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n\n  //\n  // all()\n  //\n  const all = customEmojis.sort(sortByName);\n\n  //\n  // search()\n  //\n  const emojiToTokens = emoji => {\n    const set = new Set();\n    if (emoji.shortcodes) {\n      for (const shortcode of emoji.shortcodes) {\n        for (const token of extractTokens(shortcode)) {\n          set.add(token);\n        }\n      }\n    }\n    return set\n  };\n  const searchTrie = trie(customEmojis, emojiToTokens);\n  const searchByExactMatch = _ => searchTrie(_, true);\n  const searchByPrefix = _ => searchTrie(_, false);\n\n  // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n  // is treated as a prefix search, but every other one is treated as an exact match.\n  // Then we AND the results together\n  const search = query => {\n    const tokens = extractTokens(query);\n    const intermediateResults = tokens.map((token, i) => (\n      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)\n    ));\n    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)\n  };\n\n  //\n  // byShortcode, byName\n  //\n  const shortcodeToEmoji = new Map();\n  const nameToEmoji = new Map();\n  for (const customEmoji of customEmojis) {\n    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n    for (const shortcode of (customEmoji.shortcodes || [])) {\n      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n  }\n\n  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());\n  const byName = name => nameToEmoji.get(name.toLowerCase());\n\n  return {\n    all,\n    search,\n    byShortcode,\n    byName\n  }\n}\n\nconst isFirefoxContentScript = typeof wrappedJSObject !== 'undefined';\n\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction cleanEmoji (emoji) {\n  if (!emoji) {\n    return emoji\n  }\n  // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\n  // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\n  /* istanbul ignore if */\n  if (isFirefoxContentScript) {\n    emoji = structuredClone(emoji);\n  }\n  delete emoji.tokens;\n  if (emoji.skinTones) {\n    const len = emoji.skinTones.length;\n    emoji.skins = Array(len);\n    for (let i = 0; i < len; i++) {\n      emoji.skins[i] = {\n        tone: emoji.skinTones[i],\n        unicode: emoji.skinUnicodes[i],\n        version: emoji.skinVersions[i]\n      };\n    }\n    delete emoji.skinTones;\n    delete emoji.skinUnicodes;\n    delete emoji.skinVersions;\n  }\n  return emoji\n}\n\nfunction warnETag (eTag) {\n  if (!eTag) {\n    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\n  }\n}\n\nconst requiredKeys = [\n  'annotation',\n  'emoji',\n  'group',\n  'order',\n  'version'\n];\n\nfunction assertEmojiData (emojiData) {\n  if (!emojiData ||\n    !Array.isArray(emojiData) ||\n    !emojiData[0] ||\n    (typeof emojiData[0] !== 'object') ||\n    requiredKeys.some(key => (!(key in emojiData[0])))) {\n    throw new Error('Emoji data is in the wrong format')\n  }\n}\n\nfunction assertStatus (response, dataSource) {\n  if (Math.floor(response.status / 100) !== 2) {\n    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)\n  }\n}\n\nasync function getETag (dataSource) {\n  const response = await fetch(dataSource, { method: 'HEAD' });\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  return eTag\n}\n\nasync function getETagAndData (dataSource) {\n  const response = await fetch(dataSource);\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  const emojiData = await response.json();\n  assertEmojiData(emojiData);\n  return [eTag, emojiData]\n}\n\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate \\_()_/\n/** @private */\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\n// generate a checksum based on the stringified JSON\nasync function jsonChecksum (object) {\n  const inString = JSON.stringify(object);\n  let inBuffer = binaryStringToArrayBuffer(inString);\n\n  // this does not need to be cryptographically secure, SHA-1 is fine\n  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\n  const outBinString = arrayBufferToBinaryString(outBuffer);\n  const res = btoa(outBinString);\n  return res\n}\n\nasync function doCheckForUpdates (db, dataSource) {\n  // just do a simple HEAD request first to see if the eTags match\n  let emojiData;\n  let eTag = await getETag(dataSource);\n  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers\n    const eTagAndData = await getETagAndData(dataSource);\n    eTag = eTagAndData[0];\n    emojiData = eTagAndData[1];\n    if (!eTag) {\n      eTag = await jsonChecksum(emojiData);\n    }\n  }\n  if (await hasData(db, dataSource, eTag)) ; else {\n    if (!emojiData) {\n      const eTagAndData = await getETagAndData(dataSource);\n      emojiData = eTagAndData[1];\n    }\n    await loadData(db, emojiData, dataSource, eTag);\n  }\n}\n\nasync function loadDataForFirstTime (db, dataSource) {\n  let [eTag, emojiData] = await getETagAndData(dataSource);\n  if (!eTag) {\n    // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await jsonChecksum(emojiData);\n  }\n\n  await loadData(db, emojiData, dataSource, eTag);\n}\n\nasync function checkForUpdates (db, dataSource) {\n  try {\n    await doCheckForUpdates(db, dataSource);\n  } catch (err) {\n    // Checking for updates is not a critical operation, and it can fail if e.g. the picker is quickly removed and\n    // re-added to the DOM. In those cases, we may get an IndexedDB InvalidStateError because we are attempting to close\n    // the database connection, possibly while another request is inflight. So there's effectively no way to prevent\n    // InvalidStateErrors unless we were to carefully sequence our IndexedDB operations. Much more simply, we can just\n    // ignore IndexedDB InvalidStateErrors here and give users one less useless error message in their console.\n    if (err.name !== 'InvalidStateError') {\n      throw err\n    }\n  }\n}\n\nclass Database {\n  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {\n    this.dataSource = dataSource;\n    this.locale = locale;\n    this._dbName = `emoji-picker-element-${this.locale}`;\n    this._db = undefined;\n    this._lazyUpdate = undefined;\n    this._custom = customEmojiIndex(customEmoji);\n\n    this._clear = this._clear.bind(this);\n    this._ready = this._init();\n  }\n\n  async _init () {\n    const db = this._db = await openDatabase(this._dbName);\n\n    addOnCloseListener(this._dbName, this._clear);\n    const dataSource = this.dataSource;\n    const empty = await isEmpty(db);\n\n    if (empty) {\n      await loadDataForFirstTime(db, dataSource);\n    } else { // offline-first - do an update asynchronously\n      this._lazyUpdate = checkForUpdates(db, dataSource);\n    }\n  }\n\n  async ready () {\n    const checkReady = async () => {\n      if (!this._ready) {\n        this._ready = this._init();\n      }\n      return this._ready\n    };\n    await checkReady();\n    // There's a possibility of a race condition where the element gets added, removed, and then added again\n    // with a particular timing, which would set the _db to undefined.\n    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n    if (!this._db) {\n      await checkReady();\n    }\n  }\n\n  async getEmojiByGroup (group) {\n    assertNumber(group);\n    await this.ready();\n    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)\n  }\n\n  async getEmojiBySearchQuery (query) {\n    assertNonEmptyString(query);\n    await this.ready();\n    const customs = this._custom.search(query);\n    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);\n    return [\n      ...customs,\n      ...natives\n    ]\n  }\n\n  async getEmojiByShortcode (shortcode) {\n    assertNonEmptyString(shortcode);\n    await this.ready();\n    const custom = this._custom.byShortcode(shortcode);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))\n  }\n\n  async getEmojiByUnicodeOrName (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    const custom = this._custom.byName(unicodeOrName);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))\n  }\n\n  async getPreferredSkinTone () {\n    await this.ready();\n    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0\n  }\n\n  async setPreferredSkinTone (skinTone) {\n    assertNumber(skinTone);\n    await this.ready();\n    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)\n  }\n\n  async incrementFavoriteEmojiCount (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    return incrementFavoriteEmojiCount(this._db, unicodeOrName)\n  }\n\n  async getTopFavoriteEmoji (limit) {\n    assertNumber(limit);\n    await this.ready();\n    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)\n  }\n\n  set customEmoji (customEmojis) {\n    this._custom = customEmojiIndex(customEmojis);\n  }\n\n  get customEmoji () {\n    return this._custom.all\n  }\n\n  async _shutdown () {\n    await this.ready(); // reopen if we've already been closed/deleted\n    try {\n      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n    } catch (err) { /* ignore network errors (offline-first) */ }\n  }\n\n  // clear references to IDB, e.g. during a close event\n  _clear () {\n    // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n    // The memory leak tests prove this is unnecessary. It's because:\n    // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n    // 2) we clear the manual close listeners in databaseLifecycle.js.\n    this._db = this._ready = this._lazyUpdate = undefined;\n  }\n\n  async close () {\n    await this._shutdown();\n    await closeDatabase(this._dbName);\n  }\n\n  async delete () {\n    await this._shutdown();\n    await deleteDatabase(this._dbName);\n  }\n}\n\nexport { Database as default };\n","var browserSupportsTextareaTextNodes;\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */\n\nfunction canManipulateViaTextNodes(input) {\n  if (input.nodeName !== \"TEXTAREA\") {\n    return false;\n  }\n\n  if (typeof browserSupportsTextareaTextNodes === \"undefined\") {\n    var textarea = document.createElement(\"textarea\");\n    textarea.value = 1;\n    browserSupportsTextareaTextNodes = !!textarea.firstChild;\n  }\n\n  return browserSupportsTextareaTextNodes;\n}\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */\n\n\nfunction index (input, text) {\n  // Most of the used APIs only work with the field selected\n  input.focus(); // IE 8-10\n\n  if (document.selection) {\n    var ieRange = document.selection.createRange();\n    ieRange.text = text; // Move cursor after the inserted text\n\n    ieRange.collapse(false\n    /* to the end */\n    );\n    ieRange.select();\n    return;\n  } // Webkit + Edge\n\n\n  var isSuccess = document.execCommand(\"insertText\", false, text);\n\n  if (!isSuccess) {\n    var start = input.selectionStart;\n    var end = input.selectionEnd; // Firefox (non-standard method)\n\n    if (typeof input.setRangeText === \"function\") {\n      input.setRangeText(text);\n    } else {\n      // To make a change we just need a Range, not a Selection\n      var range = document.createRange();\n      var textNode = document.createTextNode(text);\n\n      if (canManipulateViaTextNodes(input)) {\n        var node = input.firstChild; // If textarea is empty, just insert the text\n\n        if (!node) {\n          input.appendChild(textNode);\n        } else {\n          // Otherwise we need to find a nodes for start and end\n          var offset = 0;\n          var startNode = null;\n          var endNode = null;\n\n          while (node && (startNode === null || endNode === null)) {\n            var nodeLength = node.nodeValue.length; // if start of the selection falls into current node\n\n            if (start >= offset && start <= offset + nodeLength) {\n              range.setStart(startNode = node, start - offset);\n            } // if end of the selection falls into current node\n\n\n            if (end >= offset && end <= offset + nodeLength) {\n              range.setEnd(endNode = node, end - offset);\n            }\n\n            offset += nodeLength;\n            node = node.nextSibling;\n          } // If there is some text selected, remove it as we should replace it\n\n\n          if (start !== end) {\n            range.deleteContents();\n          }\n        }\n      } // If the node is a textarea and the range doesn't span outside the element\n      //\n      // Get the commonAncestorContainer of the selected range and test its type\n      // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n      // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n\n\n      if (canManipulateViaTextNodes(input) && range.commonAncestorContainer.nodeName === \"#text\") {\n        // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n        range.insertNode(textNode);\n      } else {\n        // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n        var value = input.value;\n        input.value = value.slice(0, start) + text + value.slice(end);\n      }\n    } // Correct the cursor position to be at the end of the insertion\n\n\n    input.setSelectionRange(start + text.length, start + text.length); // Notify any possible listeners of the change\n\n    var e = document.createEvent(\"UIEvent\");\n    e.initEvent(\"input\", true, false);\n    input.dispatchEvent(e);\n  }\n}\n\nexport default index;\n//# sourceMappingURL=index.esm.js.map\n","let browserSupportsTextareaTextNodes;\n\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */\nfunction canManipulateViaTextNodes(input) {\n  if (input.nodeName !== \"TEXTAREA\") {\n    return false;\n  }\n  if (typeof browserSupportsTextareaTextNodes === \"undefined\") {\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = 1;\n    browserSupportsTextareaTextNodes = !!textarea.firstChild;\n  }\n  return browserSupportsTextareaTextNodes;\n}\n\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */\nexport default function(input, text) {\n  // Most of the used APIs only work with the field selected\n  input.focus();\n\n  // IE 8-10\n  if (document.selection) {\n    const ieRange = document.selection.createRange();\n    ieRange.text = text;\n\n    // Move cursor after the inserted text\n    ieRange.collapse(false /* to the end */);\n    ieRange.select();\n\n    return;\n  }\n\n  // Webkit + Edge\n  const isSuccess = document.execCommand(\"insertText\", false, text);\n  if (!isSuccess) {\n    const start = input.selectionStart;\n    const end = input.selectionEnd;\n    // Firefox (non-standard method)\n    if (typeof input.setRangeText === \"function\") {\n      input.setRangeText(text);\n    } else {\n      // To make a change we just need a Range, not a Selection\n      const range = document.createRange();\n      const textNode = document.createTextNode(text);\n\n      if (canManipulateViaTextNodes(input)) {\n        let node = input.firstChild;\n\n        // If textarea is empty, just insert the text\n        if (!node) {\n          input.appendChild(textNode);\n        } else {\n          // Otherwise we need to find a nodes for start and end\n          let offset = 0;\n          let startNode = null;\n          let endNode = null;\n\n          while (node && (startNode === null || endNode === null)) {\n            const nodeLength = node.nodeValue.length;\n\n            // if start of the selection falls into current node\n            if (start >= offset && start <= offset + nodeLength) {\n              range.setStart((startNode = node), start - offset);\n            }\n\n            // if end of the selection falls into current node\n            if (end >= offset && end <= offset + nodeLength) {\n              range.setEnd((endNode = node), end - offset);\n            }\n\n            offset += nodeLength;\n            node = node.nextSibling;\n          }\n\n          // If there is some text selected, remove it as we should replace it\n          if (start !== end) {\n            range.deleteContents();\n          }\n        }\n      }\n\n      // If the node is a textarea and the range doesn't span outside the element\n      //\n      // Get the commonAncestorContainer of the selected range and test its type\n      // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n      // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n      if (\n        canManipulateViaTextNodes(input) &&\n        range.commonAncestorContainer.nodeName === \"#text\"\n      ) {\n        // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n        range.insertNode(textNode);\n      } else {\n        // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n        const value = input.value;\n        input.value = value.slice(0, start) + text + value.slice(end);\n      }\n    }\n\n    // Correct the cursor position to be at the end of the insertion\n    input.setSelectionRange(start + text.length, start + text.length);\n\n    // Notify any possible listeners of the change\n    const e = document.createEvent(\"UIEvent\");\n    e.initEvent(\"input\", true, false);\n    input.dispatchEvent(e);\n  }\n}\n","/*!\n * @georapbox/capture-photo-element\n * A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n *\n * @version 5.0.0\n * @homepage https://github.com/georapbox/capture-photo-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nvar c=(r,t,e)=>(Number.isNaN(t)&&(t=0),Number.isNaN(e)&&(e=0),Math.min(Math.max(r,Math.min(t,e)),Math.max(t,e)));var a=\"capture-photo\",d=`\n  :host { display: block; box-sizing: border-box; }\n  :host *, :host *::before, :host *::after { box-sizing: inherit;}\n  :host([hidden]), [hidden], ::slotted([hidden]) { display: none; }\n  video { display: block; }\n  #output:empty { display: none; }\n`,u=document.createElement(\"template\");u.innerHTML=`\n  <style>${d}</style>\n  <video part=\"video\" playsinline></video>\n  <canvas hidden></canvas>\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n    <slot name=\"actions\"></slot>\n  </div>\n  <slot></slot>\n  <div part=\"output-container\" id=\"output\"></div>\n`;var h=class r extends HTMLElement{#a={};#t=null;#n=null;#h=null;#e=null;#r=null;#i=null;constructor(){super(),this.#a=this.getSupportedConstraints(),this.shadowRoot||this.attachShadow({mode:\"open\"}).appendChild(u.content.cloneNode(!0))}static get observedAttributes(){return[\"no-image\",\"pan\",\"tilt\",\"zoom\",\"torch\"]}attributeChangedCallback(t,e,s){if(!this.isConnected)return;let i=this.getTrackCapabilities();if(t===\"no-image\"&&e!==s&&this.#u(),t===\"pan\"&&e!==s&&\"pan\"in this.#a){let o=\"pan\"in i&&i.pan?.min&&i.pan?.max?this.pan>=i.pan.min&&this.pan<=i.pan.max:!1;typeof this.pan==\"number\"&&o&&this.#o(\"pan\",this.pan)}if(t===\"tilt\"&&e!==s&&\"tilt\"in this.#a){let o=\"tilt\"in i&&i.tilt?.min&&i.tilt?.max?this.tilt>=i.tilt.min&&this.tilt<=i.tilt.max:!1;typeof this.tilt==\"number\"&&o&&this.#o(\"tilt\",this.tilt)}if(t===\"zoom\"&&e!==s&&\"zoom\"in this.#a){let o=\"zoom\"in i&&i.zoom?.min&&i.zoom?.max?this.zoom>=i.zoom.min&&this.zoom<=i.zoom.max:!1;typeof this.zoom==\"number\"&&o&&this.#o(\"zoom\",this.zoom)}t===\"torch\"&&e!==s&&\"torch\"in this.#a&&this.#o(\"torch\",this.torch)}async connectedCallback(){if(this.#s(\"autoPlay\"),this.#s(\"noImage\"),this.#s(\"facingMode\"),this.#s(\"cameraResolution\"),this.#s(\"pan\"),this.#s(\"tilt\"),this.#s(\"zoom\"),this.#s(\"torch\"),this.#s(\"calculateFileSize\"),this.#n=this.shadowRoot?.querySelector(\"canvas\")||null,this.#h=this.shadowRoot?.getElementById(\"output\")||null,this.#e=this.shadowRoot?.querySelector(\"video\")||null,this.#r=this.shadowRoot?.querySelector('slot[name=\"capture-button\"]')||null,this.#i=this.#m(),this.#e?.addEventListener(\"loadedmetadata\",this.#c),this.#r?.addEventListener(\"slotchange\",this.#d),this.#i?.addEventListener(\"click\",this.#l),!r.isSupported())return this.dispatchEvent(new CustomEvent(`${a}:error`,{bubbles:!0,composed:!0,detail:{error:{name:\"NotSupportedError\",message:\"Not supported\"}}}));this.autoPlay&&this.startVideoStream()}disconnectedCallback(){this.stopVideoStream(),this.#i?.removeEventListener(\"click\",this.#l),this.#e?.removeEventListener(\"loadedmetadata\",this.#c),this.#r?.removeEventListener(\"slotchange\",this.#d)}get autoPlay(){return this.hasAttribute(\"auto-play\")}set autoPlay(t){this.toggleAttribute(\"auto-play\",!!t)}get noImage(){return this.hasAttribute(\"no-image\")}set noImage(t){this.toggleAttribute(\"no-image\",!!t)}get facingMode(){let t=this.getAttribute(\"facing-mode\");return t!==\"user\"?\"environment\":t}set facingMode(t){this.setAttribute(\"facing-mode\",t)}get cameraResolution(){return this.getAttribute(\"camera-resolution\")||\"\"}set cameraResolution(t){this.setAttribute(\"camera-resolution\",t)}get pan(){return Number(this.getAttribute(\"pan\"))||0}set pan(t){this.setAttribute(\"pan\",t!=null?t.toString():t)}get tilt(){return Number(this.getAttribute(\"tilt\"))||0}set tilt(t){this.setAttribute(\"tilt\",t!=null?t.toString():t)}get zoom(){return Number(this.getAttribute(\"zoom\"))||1}set zoom(t){this.setAttribute(\"zoom\",t!=null?t.toString():t)}get torch(){return this.hasAttribute(\"torch\")}set torch(t){this.toggleAttribute(\"torch\",!!t)}get calculateFileSize(){return this.hasAttribute(\"calculate-file-size\")}set calculateFileSize(t){this.toggleAttribute(\"calculate-file-size\",!!t)}get loading(){return this.hasAttribute(\"loading\")}#l=t=>{t.preventDefault(),this.capture()};#c=t=>{let e=t.target;e.play().then(()=>{this.dispatchEvent(new CustomEvent(`${a}:video-play`,{bubbles:!0,composed:!0,detail:{video:e}}))}).catch(s=>{this.dispatchEvent(new CustomEvent(`${a}:error`,{bubbles:!0,composed:!0,detail:{error:s}}))}).finally(()=>{this.removeAttribute(\"loading\")})};#u(){this.#h&&this.#h.replaceChildren()}#o(t,e){if(!this.#t)return;let[s]=this.#t.getVideoTracks(),i=this.getTrackCapabilities(),o=this.getTrackSettings(),n=t===\"pan\"||t===\"tilt\"||t===\"zoom\"?c(Number(e),i[t]?.min||1,i[t]?.max||1):e;t in o&&s.applyConstraints({advanced:[{[t]:n}]}).catch(()=>{})}#d=t=>{t.target?.name===\"capture-button\"&&(this.#i?.removeEventListener(\"click\",this.#l),this.#i=this.#m(),this.#i&&(this.#i.addEventListener(\"click\",this.#l),this.#i.nodeName!==\"BUTTON\"&&!this.#i.hasAttribute(\"role\")&&this.#i.setAttribute(\"role\",\"button\")))};#m(){return this.#r&&this.#r.assignedElements({flatten:!0}).find(t=>t.nodeName===\"BUTTON\"||t.getAttribute(\"slot\")===\"capture-button\")||null}#s(t){let e=this;if(Object.prototype.hasOwnProperty.call(e,t)){let s=e[t];delete e[t],e[t]=s}}async startVideoStream(t){if(!r.isSupported()||this.#t)return;this.setAttribute(\"loading\",\"\");let e={video:{facingMode:{ideal:this.facingMode},pan:!0,tilt:!0,zoom:!0,torch:this.torch},audio:!1};if(typeof t==\"string\"&&t.trim().length>0&&(e.video.deviceId={exact:t}),typeof this.cameraResolution==\"string\"&&this.cameraResolution.trim().length>0){let[s=0,i=0]=this.cameraResolution.split(\"x\").map(o=>Number(o));s>0&&i>0&&(e.video.width=s,e.video.height=i)}try{this.#t=await navigator.mediaDevices.getUserMedia(e),this.#e&&(this.#e.srcObject=this.#t),this.#o(\"pan\",this.pan),this.#o(\"tilt\",this.tilt),this.#o(\"zoom\",this.zoom)}catch(s){this.dispatchEvent(new CustomEvent(`${a}:error`,{bubbles:!0,composed:!0,detail:{error:s}}))}finally{this.removeAttribute(\"loading\")}}restartVideoStream(t){this.#t&&this.#e&&this.stopVideoStream(),this.startVideoStream(t)}stopVideoStream(){if(!this.#e||!this.#t)return;let[t]=this.#t.getVideoTracks();t?.stop(),this.#e.srcObject=null,this.#t=null}async capture(){if(!(this.loading||!this.#n||!this.#e))try{let t=this.#n.getContext(\"2d\"),e=this.#e.videoWidth,s=this.#e.videoHeight;this.#n.width=e,this.#n.height=s,t?.drawImage(this.#e,0,0,e,s);let i=this.#n.toDataURL(\"image/png\");if(typeof i==\"string\"&&i.includes(\"data:image\")){if(!this.noImage){let n=new Image;n.src=i,n.width=e,n.height=s,n.alt=\"Captured photo\",n.setAttribute(\"part\",\"output-image\"),this.#u(),this.#h?.appendChild(n)}let o={dataURI:i,width:e,height:s};if(this.calculateFileSize)try{let l=(await(await fetch(i)).blob()).size;l&&(o.size=l)}catch{}this.dispatchEvent(new CustomEvent(`${a}:success`,{bubbles:!0,composed:!0,detail:o}))}}catch(t){this.dispatchEvent(new CustomEvent(`${a}:error`,{bubbles:!0,composed:!0,detail:{error:t}}))}}getSupportedConstraints(){return r.isSupported()?navigator.mediaDevices.getSupportedConstraints()||{}:{}}getTrackCapabilities(){if(!this.#t)return{};let[t]=this.#t.getVideoTracks();return t&&typeof t.getCapabilities==\"function\"?t.getCapabilities()||{}:{}}getTrackSettings(){if(!this.#t)return{};let[t]=this.#t.getVideoTracks();return t&&typeof t.getSettings==\"function\"?t.getSettings()||{}:{}}static async getVideoInputDevices(){return!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices?[]:(await navigator.mediaDevices.enumerateDevices()||[]).filter(e=>e.kind===\"videoinput\"&&!!e.deviceId)}static isSupported(){return!!navigator.mediaDevices?.getUserMedia}static defineCustomElement(t=a){typeof window<\"u\"&&!window.customElements.get(t)&&window.customElements.define(t,r)}};h.defineCustomElement();export{h as CapturePhoto};\n//# sourceMappingURL=capture-photo-defined.js.map\n","// @ts-check\n\n/**\n * Clamps number within the inclusive `min` and `max` bounds,\n * making sure it does not go beyond them on either side.\n * If `min` is greater than `max` the parameters are swapped to support inverted ranges.\n *\n * @param {number} value - The number to clamp.\n * @param {number} lower - The lower bound.\n * @param {number} upper - The upper bound.\n * @throws {TypeError} - If one or more of the arguments passed is not a number.\n * @returns {number} - The clamped number.\n * @example\n *\n * clamp(10, -5, 5);\n * // => 5\n *\n * clamp(-10, -5, 5);\n * // => -5\n *\n * clamp(-15, 0, 100);\n * // => 0\n *\n * clamp(120, 0, 100);\n * // => 100\n *\n * clamp(-5, NaN, 5); // If any of lower or upper bound are `NaN`, they will be converted to `0`.\n * // => 0\n *\n * clamp(120, 100, 0); // The order of lower and upper bounds is reversed (100 > 0)\n * // => 100\n */\nexport const clamp = (value, lower, upper) => {\n  if (Number.isNaN(lower)) {\n    lower = 0;\n  }\n\n  if (Number.isNaN(upper)) {\n    upper = 0;\n  }\n\n  return Math.min(Math.max(value, Math.min(lower, upper)), Math.max(lower, upper));\n};\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * @typedef {Object} ExtendedMediaTrackCapabilities\n * @property {ULongRange} [width] - The width of the video track.\n * @property {ULongRange} [height] - The height of the video track.\n * @property {ULongRange} [pan] - The pan level of the camera.\n * @property {ULongRange} [tilt] - The tilt level of the camera.\n * @property {ULongRange} [zoom] - The zoom level of the camera.\n * @property {MediaTrackCapabilities} [nativeMediaTrackCapabilities] - The native track capabilities.\n */\n\n/**\n * @typedef {Object} ExtendedMediaTrackConstraints\n * @property {MediaTrackConstraints & {pan: boolean, tilt: boolean, zoom: boolean, torch: boolean}} video - The video constraints.\n * @property {MediaTrackConstraints | boolean} audio - The audio constraints.\n */\n\nimport { clamp } from './utils/clamp.js';\n\nconst COMPONENT_NAME = 'capture-photo';\n\nconst styles = /* css */ `\n  :host { display: block; box-sizing: border-box; }\n  :host *, :host *::before, :host *::after { box-sizing: inherit;}\n  :host([hidden]), [hidden], ::slotted([hidden]) { display: none; }\n  video { display: block; }\n  #output:empty { display: none; }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n  <video part=\"video\" playsinline></video>\n  <canvas hidden></canvas>\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n    <slot name=\"actions\"></slot>\n  </div>\n  <slot></slot>\n  <div part=\"output-container\" id=\"output\"></div>\n`;\n\n/**\n * @summary A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n * @documentation https://github.com/georapbox/capture-photo-element\n *\n * @tagname capture-photo This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} autoPlay - Whether or not to start the video stream automatically.\n * @property {boolean} noImage - Whether or not to show the captured image.\n * @property {string} facingMode - The facing mode of the camera.\n * @property {string} cameraResolution - The resolution of the camera.\n * @property {number} pan - The pan value of the camera.\n * @property {number} tilt - The tilt value of the camera.\n * @property {number} zoom - The zoom value of the camera.\n * @property {boolean} torch - Whether or not the fill light is connected.\n * @property {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n * @property {boolean} loading - Whether or not the video stream is loading.\n *\n * @atttribute {boolean} auto-play - Reflects the autoPlay property.\n * @atttribute {boolean} no-image - Reflects the noImage property.\n * @atttribute {string} facing-mode - Reflects the facingMode property.\n * @atttribute {string} camera-resolution - Reflects the cameraResolution property.\n * @atttribute {number} pan - Reflects the pan property.\n * @atttribute {number} tilt - Reflects the tilt property.\n * @atttribute {number} zoom - Reflects the zoom property.\n * @atttribute {boolean} torch - Reflects the torch property.\n * @atttribute {boolean} calculate-file-size - Reflects the calculateFileSize property.\n * @atttribute {boolean} loading - Reflects the loading property.\n *\n * @slot capture-button - The capture button.\n * @slot capture-button-content - The capture button content.\n * @slot actions - The actions container.\n * @slot - A default un-named slot to add content inside the component.\n *\n * @csspart video - The video element.\n * @csspart actions-container - The actions container.\n * @csspart capture-button - The capture button.\n * @csspart output-container - The output container.\n * @csspart output-image - The output image.\n *\n * @event capture-photo:video-play - Fires when the video stream is successfully playing.\n * @event capture-photo:success - Fires when the photo is successfully captured.\n * @event capture-photo:error - Fires when an error occurs.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method isSupported - Static method. Checks if the MediaDevices.getUserMedia() method is supported.\n * @method getVideoInputDevices - Static method. Gets the available video devices.\n * @method startVideoStream - Instance method. Starts the video stream.\n * @method restartVideoStream - Instance method. Restarts the video stream.\n * @method stopVideoStream - Instance method. Stops the video stream.\n * @method capture - Instance method. Captures a photo.\n * @method getSupportedConstraints - Instance method. Gets the supported constraints.\n * @method getTrackCapabilities - Instance method. Gets the track capabilities.\n * @method getTrackSettings - Instance method. Gets the track settings.\n */\nclass CapturePhoto extends HTMLElement {\n  /** @type {MediaTrackSupportedConstraints | {}}*/\n  #supportedConstraints = {};\n\n  /** @type {Nullable<MediaStream>} */\n  #stream = null;\n\n  /** @type {Nullable<HTMLCanvasElement>} */\n  #canvasElement = null;\n\n  /** @type {Nullable<HTMLElement>} */\n  #outputElement = null;\n\n  /** @type {Nullable<HTMLVideoElement>} */\n  #videoElement = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #captureButtonSlot = null;\n\n  /** @type {Nullable<HTMLButtonElement | Element>} */\n  #captureButton = null;\n\n  constructor() {\n    super();\n\n    this.#supportedConstraints = this.getSupportedConstraints();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n  }\n\n  static get observedAttributes() {\n    return ['no-image', 'pan', 'tilt', 'zoom', 'torch'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (!this.isConnected) {\n      return;\n    }\n\n    /** @type {ExtendedMediaTrackCapabilities} */\n    const trackCapabilities = this.getTrackCapabilities();\n\n    if (name === 'no-image' && oldValue !== newValue) {\n      this.#emptyOutputElement();\n    }\n\n    if (name === 'pan' && oldValue !== newValue && 'pan' in this.#supportedConstraints) {\n      const panInAllowedRange =\n        'pan' in trackCapabilities && trackCapabilities.pan?.min && trackCapabilities.pan?.max\n          ? this.pan >= trackCapabilities.pan.min && this.pan <= trackCapabilities.pan.max\n          : false;\n\n      if (typeof this.pan === 'number' && panInAllowedRange) {\n        this.#applyConstraint('pan', this.pan);\n      }\n    }\n\n    if (name === 'tilt' && oldValue !== newValue && 'tilt' in this.#supportedConstraints) {\n      const tiltInAllowedRange =\n        'tilt' in trackCapabilities && trackCapabilities.tilt?.min && trackCapabilities.tilt?.max\n          ? this.tilt >= trackCapabilities.tilt.min && this.tilt <= trackCapabilities.tilt.max\n          : false;\n\n      if (typeof this.tilt === 'number' && tiltInAllowedRange) {\n        this.#applyConstraint('tilt', this.tilt);\n      }\n    }\n\n    if (name === 'zoom' && oldValue !== newValue && 'zoom' in this.#supportedConstraints) {\n      const zoomInAllowedRange =\n        'zoom' in trackCapabilities && trackCapabilities.zoom?.min && trackCapabilities.zoom?.max\n          ? this.zoom >= trackCapabilities.zoom.min && this.zoom <= trackCapabilities.zoom.max\n          : false;\n\n      if (typeof this.zoom === 'number' && zoomInAllowedRange) {\n        this.#applyConstraint('zoom', this.zoom);\n      }\n    }\n\n    if (name === 'torch' && oldValue !== newValue && 'torch' in this.#supportedConstraints) {\n      this.#applyConstraint('torch', this.torch);\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  async connectedCallback() {\n    this.#upgradeProperty('autoPlay');\n    this.#upgradeProperty('noImage');\n    this.#upgradeProperty('facingMode');\n    this.#upgradeProperty('cameraResolution');\n    this.#upgradeProperty('pan');\n    this.#upgradeProperty('tilt');\n    this.#upgradeProperty('zoom');\n    this.#upgradeProperty('torch');\n    this.#upgradeProperty('calculateFileSize');\n\n    this.#canvasElement = this.shadowRoot?.querySelector('canvas') || null;\n    this.#outputElement = this.shadowRoot?.getElementById('output') || null;\n    this.#videoElement = this.shadowRoot?.querySelector('video') || null;\n    this.#captureButtonSlot = this.shadowRoot?.querySelector('slot[name=\"capture-button\"]') || null;\n    this.#captureButton = this.#getCaptureButton();\n\n    this.#videoElement?.addEventListener('loadedmetadata', this.#onVideoLoadedMetaData);\n    this.#captureButtonSlot?.addEventListener('slotchange', this.#onCaptureButtonSlotChange);\n    this.#captureButton?.addEventListener('click', this.#onCapturePhotoButtonClick);\n\n    if (!CapturePhoto.isSupported()) {\n      return this.dispatchEvent(\n        new CustomEvent(`${COMPONENT_NAME}:error`, {\n          bubbles: true,\n          composed: true,\n          detail: {\n            error: {\n              name: 'NotSupportedError',\n              message: 'Not supported'\n            }\n          }\n        })\n      );\n    }\n\n    if (this.autoPlay) {\n      this.startVideoStream();\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.stopVideoStream();\n    this.#captureButton?.removeEventListener('click', this.#onCapturePhotoButtonClick);\n    this.#videoElement?.removeEventListener('loadedmetadata', this.#onVideoLoadedMetaData);\n    this.#captureButtonSlot?.removeEventListener('slotchange', this.#onCaptureButtonSlotChange);\n  }\n\n  /**\n   * @type {boolean} autoPlay - Whether or not to start the video stream automatically.\n   * @attribute auto-play - Reflects the autoPlay property.\n   */\n  get autoPlay() {\n    return this.hasAttribute('auto-play');\n  }\n\n  set autoPlay(value) {\n    this.toggleAttribute('auto-play', !!value);\n  }\n\n  /**\n   * @type {boolean} noImage - Whether or not to show the captured image.\n   * @attribute no-image - Reflects the noImage property.\n   */\n  get noImage() {\n    return this.hasAttribute('no-image');\n  }\n\n  set noImage(value) {\n    this.toggleAttribute('no-image', !!value);\n  }\n\n  /**\n   * @type {string} facingMode - The facing mode of the camera.\n   * @attribute facing-mode - Reflects the facingMode property.\n   */\n  get facingMode() {\n    const value = this.getAttribute('facing-mode');\n\n    if (value !== 'user') {\n      return 'environment';\n    }\n\n    return value;\n  }\n\n  set facingMode(value) {\n    this.setAttribute('facing-mode', value);\n  }\n\n  /**\n   * @type {string} cameraResolution - The resolution of the camera.\n   * @attribute camera-resolution - Reflects the cameraResolution property.\n   */\n  get cameraResolution() {\n    return this.getAttribute('camera-resolution') || '';\n  }\n\n  set cameraResolution(value) {\n    this.setAttribute('camera-resolution', value);\n  }\n\n  /**\n   * @type {number} pan - The pan value of the camera.\n   * @attribute pan - Reflects the pan property.\n   */\n  get pan() {\n    return Number(this.getAttribute('pan')) || 0;\n  }\n\n  set pan(value) {\n    this.setAttribute('pan', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} tilt - The tilt value of the camera.\n   * @attribute tilt - Reflects the tilt property.\n   */\n  get tilt() {\n    return Number(this.getAttribute('tilt')) || 0;\n  }\n\n  set tilt(value) {\n    this.setAttribute('tilt', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} zoom - The zoom value of the camera.\n   * @attribute zoom - Reflects the zoom property.\n   */\n  get zoom() {\n    return Number(this.getAttribute('zoom')) || 1;\n  }\n\n  set zoom(value) {\n    this.setAttribute('zoom', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} torch - Whether or not the fill light is connected.\n   * @attribute torch - Reflects the torch property.\n   */\n  get torch() {\n    return this.hasAttribute('torch');\n  }\n\n  set torch(value) {\n    this.toggleAttribute('torch', !!value);\n  }\n\n  /**\n   * @type {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n   * @attribute calculate-file-size - Reflects the calculateFileSize property.\n   */\n  get calculateFileSize() {\n    return this.hasAttribute('calculate-file-size');\n  }\n\n  set calculateFileSize(value) {\n    this.toggleAttribute('calculate-file-size', !!value);\n  }\n\n  /**\n   * @type {boolean} loading - Whether or not the video stream is loading.\n   * @attribute loading - Reflects the loading property.\n   */\n  get loading() {\n    return this.hasAttribute('loading');\n  }\n\n  /**\n   * Handles the click event of the capture button.\n   *\n   * @param {*} evt - The click event.\n   */\n  #onCapturePhotoButtonClick = evt => {\n    evt.preventDefault();\n    this.capture();\n  };\n\n  /**\n   * Handles the loadedmetadata event of the video element.\n   *\n   * @param {*} evt - The loadedmetadata event.\n   */\n  #onVideoLoadedMetaData = evt => {\n    const video = evt.target;\n\n    video\n      .play()\n      .then(() => {\n        this.dispatchEvent(\n          new CustomEvent(`${COMPONENT_NAME}:video-play`, {\n            bubbles: true,\n            composed: true,\n            detail: { video }\n          })\n        );\n      })\n      .catch(\n        /** @param {Error} error */ error => {\n          this.dispatchEvent(\n            new CustomEvent(`${COMPONENT_NAME}:error`, {\n              bubbles: true,\n              composed: true,\n              detail: { error }\n            })\n          );\n        }\n      )\n      .finally(() => {\n        this.removeAttribute('loading');\n      });\n  };\n\n  /**\n   * Removes all child nodes from the output element.\n   */\n  #emptyOutputElement() {\n    if (!this.#outputElement) {\n      return;\n    }\n\n    this.#outputElement.replaceChildren();\n  }\n\n  /**\n   * Applies a constraint to the video track.\n   *\n   * @param {string} constraint - The name of the constraint.\n   * @param {any} value - The value of the constraint.\n   */\n  #applyConstraint(constraint, value) {\n    if (!this.#stream) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n    /** @type {ExtendedMediaTrackCapabilities} */\n    const trackCapabilities = this.getTrackCapabilities();\n    const trackSettings = this.getTrackSettings();\n\n    const constraintValue =\n      constraint === 'pan' || constraint === 'tilt' || constraint === 'zoom'\n        ? clamp(Number(value), trackCapabilities[constraint]?.min || 1, trackCapabilities[constraint]?.max || 1)\n        : value;\n\n    if (constraint in trackSettings) {\n      track\n        .applyConstraints({\n          advanced: [{ [constraint]: constraintValue }]\n        })\n        .catch(() => {\n          // Fail silently...\n        });\n    }\n  }\n\n  /**\n   * Handles the slotchange event of the capture button slot.\n   *\n   * @param {*} evt - The slotchange event.\n   */\n  #onCaptureButtonSlotChange = evt => {\n    if (evt.target?.name === 'capture-button') {\n      this.#captureButton?.removeEventListener('click', this.#onCapturePhotoButtonClick);\n      this.#captureButton = this.#getCaptureButton();\n\n      if (this.#captureButton) {\n        this.#captureButton.addEventListener('click', this.#onCapturePhotoButtonClick);\n\n        if (this.#captureButton.nodeName !== 'BUTTON' && !this.#captureButton.hasAttribute('role')) {\n          this.#captureButton.setAttribute('role', 'button');\n        }\n      }\n    }\n  };\n\n  /**\n   * Returns the capture button.\n   *\n   * @returns {Nullable<HTMLButtonElement | Element>}\n   */\n  #getCaptureButton() {\n    if (!this.#captureButtonSlot) {\n      return null;\n    }\n\n    return (\n      this.#captureButtonSlot.assignedElements({ flatten: true }).find(el => {\n        return el.nodeName === 'BUTTON' || el.getAttribute('slot') === 'capture-button';\n      }) || null\n    );\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'autoPlay' | 'noImage' | 'facingMode' | 'cameraResolution' | 'pan' | 'tilt' | 'zoom' | 'calculateFileSize' | 'torch'} prop\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Starts the video stream.\n   *\n   * @param {string} [videoInputId] - The video input device ID.\n   * @returns Promise<void>\n   */\n  async startVideoStream(videoInputId) {\n    if (!CapturePhoto.isSupported() || this.#stream) {\n      return;\n    }\n\n    this.setAttribute('loading', '');\n\n    /** @type {ExtendedMediaTrackConstraints} */\n    const constraints = {\n      video: {\n        facingMode: {\n          ideal: this.facingMode\n        },\n        pan: true,\n        tilt: true,\n        zoom: true,\n        torch: this.torch\n      },\n      audio: false\n    };\n\n    if (typeof videoInputId === 'string' && videoInputId.trim().length > 0) {\n      constraints.video.deviceId = { exact: videoInputId };\n    }\n\n    if (typeof this.cameraResolution === 'string' && this.cameraResolution.trim().length > 0) {\n      const [width = 0, height = 0] = this.cameraResolution.split('x').map(x => Number(x));\n\n      if (width > 0 && height > 0) {\n        constraints.video.width = width;\n        constraints.video.height = height;\n      }\n    }\n\n    try {\n      this.#stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n      if (this.#videoElement) {\n        this.#videoElement.srcObject = this.#stream;\n      }\n\n      this.#applyConstraint('pan', this.pan);\n      this.#applyConstraint('tilt', this.tilt);\n      this.#applyConstraint('zoom', this.zoom);\n    } catch (error) {\n      this.dispatchEvent(\n        new CustomEvent(`${COMPONENT_NAME}:error`, {\n          bubbles: true,\n          composed: true,\n          detail: { error }\n        })\n      );\n    } finally {\n      this.removeAttribute('loading');\n    }\n  }\n\n  /**\n   * Restarts the video stream.\n   *\n   * @param {string} [videoInputId] - The video input device ID.\n   */\n  restartVideoStream(videoInputId) {\n    if (this.#stream && this.#videoElement) {\n      this.stopVideoStream();\n    }\n\n    this.startVideoStream(videoInputId);\n  }\n\n  /**\n   * Stops the video stream.\n   */\n  stopVideoStream() {\n    if (!this.#videoElement || !this.#stream) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    track?.stop();\n    this.#videoElement.srcObject = null;\n    this.#stream = null;\n  }\n\n  /**\n   * Captures a photo using the element's properties.\n   *\n   * @returns Promise<void>\n   */\n  async capture() {\n    if (this.loading || !this.#canvasElement || !this.#videoElement) {\n      return;\n    }\n\n    try {\n      const ctx = this.#canvasElement.getContext('2d');\n      const width = this.#videoElement.videoWidth;\n      const height = this.#videoElement.videoHeight;\n      this.#canvasElement.width = width;\n      this.#canvasElement.height = height;\n      ctx?.drawImage(this.#videoElement, 0, 0, width, height);\n      const dataURI = this.#canvasElement.toDataURL('image/png');\n\n      if (typeof dataURI === 'string' && dataURI.includes('data:image')) {\n        if (!this.noImage) {\n          const image = new Image();\n          image.src = dataURI;\n          image.width = width;\n          image.height = height;\n          image.alt = 'Captured photo';\n          image.setAttribute('part', 'output-image');\n          this.#emptyOutputElement();\n          this.#outputElement?.appendChild(image);\n        }\n\n        /** @type {{ dataURI: string, width: number, height: number, size?: number }} */\n        const eventDetail = { dataURI, width, height };\n\n        if (this.calculateFileSize) {\n          try {\n            const file = await fetch(dataURI);\n            const blob = await file.blob();\n            const size = blob.size;\n\n            if (size) {\n              eventDetail.size = size;\n            }\n          } catch {\n            // Fail silently...\n          }\n        }\n\n        this.dispatchEvent(\n          new CustomEvent(`${COMPONENT_NAME}:success`, {\n            bubbles: true,\n            composed: true,\n            detail: eventDetail\n          })\n        );\n      }\n    } catch (error) {\n      this.dispatchEvent(\n        new CustomEvent(`${COMPONENT_NAME}:error`, {\n          bubbles: true,\n          composed: true,\n          detail: { error }\n        })\n      );\n    }\n  }\n\n  /**\n   * Returns an object based on the `MediaTrackSupportedConstraints` dictionary,\n   * whose member fields each specify one ofthe constrainable properties the user agent understands.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaDevices/getSupportedConstraints\n   * @returns {MediaTrackSupportedConstraints | {}}\n   */\n  getSupportedConstraints() {\n    if (!CapturePhoto.isSupported()) {\n      return {};\n    }\n\n    return navigator.mediaDevices.getSupportedConstraints() || {};\n  }\n\n  /**\n   * Returns a `MediaTrackCapabilities` object which specifies the values or range of values\n   * which each constrainable property, based upon the platform and user agent.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getCapabilities\n   * @returns {MediaTrackCapabilities | {}}\n   */\n  getTrackCapabilities() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getCapabilities === 'function') {\n      return track.getCapabilities() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Returns a `MediaTrackSettings` object containing the current values of each of\n   * the constrainable properties for the current MediaStreamTrack.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getSettings\n   * @returns {MediaTrackSettings | {}}\n   */\n  getTrackSettings() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getSettings === 'function') {\n      return track.getSettings() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Returns the available video input devices.\n   *\n   * @returns {Promise<MediaDeviceInfo[]>}\n   */\n  static async getVideoInputDevices() {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n      return [];\n    }\n\n    const devices = (await navigator.mediaDevices.enumerateDevices()) || [];\n    return devices.filter(device => device.kind === 'videoinput' && !!device.deviceId);\n  }\n\n  /**\n   * Checks if the `MediaDevices.getUserMedia()` method is supported.\n   *\n   * @returns {boolean}\n   */\n  static isSupported() {\n    return Boolean(navigator.mediaDevices?.getUserMedia);\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='capture-photo'] - The name of the custom element.\n   * @example\n   *\n   * CapturePhoto.defineCustomElement('my-capture-photo');\n   */\n  static defineCustomElement(elementName = COMPONENT_NAME) {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, CapturePhoto);\n    }\n  }\n}\n\nexport { CapturePhoto };\n","import { CapturePhoto } from './capture-photo.js';\n\nCapturePhoto.defineCustomElement();\n\nexport { CapturePhoto };\n","/*!\n * @georapbox/web-share-element\n * A custom element that implements the Web Share API to share user-defined data.\n *\n * @version 3.1.1\n * @homepage https://github.com/georapbox/web-share-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nfunction r(a){return a!==null&&typeof a==\"object\"?\"share\"in navigator&&\"canShare\"in navigator&&navigator.canShare(a):\"share\"in navigator}export{r as isWebShareSupported};\n//# sourceMappingURL=is-web-share-supported.js.map\n","// @ts-check\n\n/**\n * Check if Web Share API is supported by the platform.\n *\n * @param {import('./web-share').ShareData} [options]\n * @returns {boolean} Returns `true` if Web Share API is supported; otherwise `false`.\n */\nfunction isWebShareSupported(options) {\n  if (options !== null && typeof options === 'object') {\n    return 'share' in navigator && 'canShare' in navigator && navigator.canShare(options);\n  }\n\n  return 'share' in navigator;\n}\n\nexport { isWebShareSupported };\n","/*!\n * @georapbox/theme-toggle-element\n * A custom element that allows you to toggle between dark and light theme.\n *\n * @version 4.0.2\n * @homepage https://github.com/georapbox/theme-toggle-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nvar n=\"theme-toggle/theme-preference\",r=\"data-theme\",a=document.createElement(\"template\"),h=`\n  :host {\n    display: inline-block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  .hidden {\n    display: none !important;\n  }\n\n  .button {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.375rem;\n    border: none;\n    background-color: transparent;\n    color: inherit;\n    cursor: pointer;\n    font-family: inherit;\n    font-size: inherit;\n  }\n\n  .icon--hidden {\n    display: none !important;\n  }\n\n  .label--hidden {\n    display: inline !important;\n    position: absolute !important;\n    width: 1px !important;\n    height: 1px !important;\n    padding: 0 !important;\n    margin: -1px !important;\n    overflow: hidden !important;\n    clip: rect(0, 0, 0, 0) !important;\n    white-space: nowrap !important;\n    border: 0 !important;\n  }\n\n  .icon__svg {\n    min-width: 1.5em;\n    width: 1.5em;\n    height: 1.5em;\n  }\n\n  .system-path {\n    transform: scale(0.4) translateY(-4px);\n    transform-origin: center;\n  }\n`;a.innerHTML=`\n  <style>${h}</style>\n\n  <button type=\"button\" part=\"base\" id=\"theme-toggle\" class=\"button\">\n    <slot name=\"light\">\n      <slot name=\"icon-light\" part=\"icon icon-light\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-light\" part=\"label label-light\" class=\"label\">Light theme</slot>\n    </slot>\n\n    <slot name=\"dark\">\n      <slot name=\"icon-dark\" part=\"icon icon-dark\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-dark\" part=\"label label-dark\" class=\"label\">Dark theme</slot>\n    </slot>\n\n    <slot name=\"system\">\n      <slot name=\"icon-system\" part=\"icon icon-system\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z\"></path>\n          <path class=\"system-path system-path--light\" d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n          <path class=\"system-path system-path--dark\" d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-system\" part=\"label label-system\" class=\"label\">System theme</slot>\n    </slot>\n  </button>\n`;var i=class l extends HTMLElement{#i=[\"light\",\"dark\",\"system\"];#t=\"system\";#s=0;#e=null;constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\",delegatesFocus:!0}).appendChild(a.content.cloneNode(!0)),this.#e=this.shadowRoot?.getElementById(\"theme-toggle\")||null}static get observedAttributes(){return[\"storage-key\",\"no-icon\",\"no-label\"]}attributeChangedCallback(t,e,s){t===\"storage-key\"&&e!==s&&(this.#t=this.#a(),this.#s=this.#i.indexOf(this.#t)||0,this.#o()),t===\"no-icon\"&&e!==s&&this.#e&&this.#e.querySelectorAll('slot[name^=\"icon\"]').forEach(o=>{o.classList.toggle(\"icon--hidden\",this.noIcon)}),t===\"no-label\"&&e!==s&&this.#e&&this.#e.querySelectorAll('slot[name^=\"label\"]').forEach(o=>{o.classList.toggle(\"label--hidden\",this.noLabel)})}get noStorage(){return this.hasAttribute(\"no-storage\")}set noStorage(t){t?this.setAttribute(\"no-storage\",\"\"):this.removeAttribute(\"no-storage\")}get storageKey(){return this.getAttribute(\"storage-key\")}set storageKey(t){t!=null&&this.setAttribute(\"storage-key\",t)}get noIcon(){return this.hasAttribute(\"no-icon\")}set noIcon(t){t?this.setAttribute(\"no-icon\",\"\"):this.removeAttribute(\"no-icon\")}get noLabel(){return this.hasAttribute(\"no-label\")}set noLabel(t){t?this.setAttribute(\"no-label\",\"\"):this.removeAttribute(\"no-label\")}connectedCallback(){this.#n(\"noStorage\"),this.#n(\"storageKey\"),this.#n(\"noIcon\"),this.#n(\"noLabel\"),this.#t=this.#a(),this.#s=this.#i.indexOf(this.#t)||0,this.#o(),this.#e?.addEventListener(\"click\",this.#l),window.matchMedia(\"(prefers-color-scheme: dark)\").addEventListener(\"change\",this.#r)}disconnectedCallback(){this.#e?.removeEventListener(\"click\",this.#l),window.matchMedia(\"(prefers-color-scheme: dark)\").removeEventListener(\"change\",this.#r)}#a(){if(this.noStorage)return\"system\";let t=\"\";try{t=window.localStorage.getItem(this.storageKey||n)||\"\"}catch{}return t===\"light\"||t===\"dark\"||t===\"system\"?t:\"system\"}#h(){if(!this.noStorage)try{window.localStorage.setItem(this.storageKey||n,this.#t)}catch{}}#o(){if(this.#e?.querySelectorAll('slot[name=\"light\"], slot[name=\"dark\"], slot[name=\"system\"]').forEach(t=>{t.classList.toggle(\"hidden\",!t.getAttribute(\"name\")?.startsWith(this.#t))}),document.documentElement.setAttribute(r,this.#t),this.#t===\"system\"){let t=window.matchMedia(\"(prefers-color-scheme: dark)\").matches;this.#e?.querySelectorAll(\".system-path\").forEach(e=>{e.classList.toggle(\"hidden\",t?e.classList.contains(\"system-path--light\"):e.classList.contains(\"system-path--dark\"))})}}#c(){return this.#s=(this.#s+1)%this.#i.length,this.#i[this.#s]}#l=()=>{this.#t=this.#c(),this.#h(),this.#o(),this.dispatchEvent(new CustomEvent(\"tt-theme-change\",{bubbles:!0,composed:!0,detail:{theme:this.#t}}))};#r=()=>{this.#o()};#n(t){let e=this;if(Object.prototype.hasOwnProperty.call(e,t)){let s=e[t];delete e[t],e[t]=s}}static defineCustomElement(t=\"theme-toggle\"){typeof window<\"u\"&&!window.customElements.get(t)&&window.customElements.define(t,l)}};i.defineCustomElement();export{i as ThemeToggle};\n//# sourceMappingURL=theme-toggle-defined.js.map\n","// @ts-check\n\nconst DEFAULT_STORAGE_KEY = 'theme-toggle/theme-preference';\nconst ROOT_ATTR = 'data-theme';\nconst template = document.createElement('template');\n\nconst styles = /* css */ `\n  :host {\n    display: inline-block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  .hidden {\n    display: none !important;\n  }\n\n  .button {\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n    gap: 0.375rem;\n    border: none;\n    background-color: transparent;\n    color: inherit;\n    cursor: pointer;\n    font-family: inherit;\n    font-size: inherit;\n  }\n\n  .icon--hidden {\n    display: none !important;\n  }\n\n  .label--hidden {\n    display: inline !important;\n    position: absolute !important;\n    width: 1px !important;\n    height: 1px !important;\n    padding: 0 !important;\n    margin: -1px !important;\n    overflow: hidden !important;\n    clip: rect(0, 0, 0, 0) !important;\n    white-space: nowrap !important;\n    border: 0 !important;\n  }\n\n  .icon__svg {\n    min-width: 1.5em;\n    width: 1.5em;\n    height: 1.5em;\n  }\n\n  .system-path {\n    transform: scale(0.4) translateY(-4px);\n    transform-origin: center;\n  }\n`;\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n\n  <button type=\"button\" part=\"base\" id=\"theme-toggle\" class=\"button\">\n    <slot name=\"light\">\n      <slot name=\"icon-light\" part=\"icon icon-light\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-light\" part=\"label label-light\" class=\"label\">Light theme</slot>\n    </slot>\n\n    <slot name=\"dark\">\n      <slot name=\"icon-dark\" part=\"icon icon-dark\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-dark\" part=\"label label-dark\" class=\"label\">Dark theme</slot>\n    </slot>\n\n    <slot name=\"system\">\n      <slot name=\"icon-system\" part=\"icon icon-system\" class=\"icon\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"icon__svg\" aria-hidden=\"true\">\n          <path d=\"M20 3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h3l-1 1v2h12v-2l-1-1h3c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 13H4V5h16v11z\"></path>\n          <path class=\"system-path system-path--light\" d=\"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"></path>\n          <path class=\"system-path system-path--dark\" d=\"M9.5 2c-1.82 0-3.53.5-5 1.35 2.99 1.73 5 4.95 5 8.65s-2.01 6.92-5 8.65c1.47.85 3.18 1.35 5 1.35 5.52 0 10-4.48 10-10S15.02 2 9.5 2z\"></path>\n        </svg>\n      </slot>\n      <slot name=\"label-system\" part=\"label label-system\" class=\"label\">System theme</slot>\n    </slot>\n  </button>\n`;\n\n/**\n * @summary A custom element that allows the user to toggle between light, dark and system theme.\n * @documentation https://github.com/georapbox/theme-toggle-element\n *\n * @tagname theme-toggle - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} noStorage - Indicates whether the theme state should be persisted to local storage.\n * @property {string} storageKey - The key used to store the theme state in local storage.\n * @property {boolean} noIcon - Indicates whether the icon should be hidden.\n * @property {boolean} noLabel - Indicates whether the label should be visually hidden.\n *\n * @attribute no-storage {boolean} - Indicates whether the theme state should be persisted to local storage.\n * @attribute storage-key {string} - The key used to store the theme state in local storage.\n * @attribute no-icon {boolean} - Indicates whether the icon should be hidden.\n * @attribute no-label {boolean} - Indicates whether the label should be visually hidden.\n *\n * @slot light - The light theme slot.\n * @slot icon-light - The light theme icon slot.\n * @slot label-light - The light theme label slot.\n * @slot dark - The dark theme slot.\n * @slot icon-dark - The dark theme icon slot.\n * @slot label-dark - The dark theme label slot.\n * @slot system - The system theme slot.\n * @slot icon-system - The system theme icon slot.\n * @slot label-system - The system theme label slot.\n *\n * @csspart base - The base wrapper element.\n * @csspart icon - The icon's wrapper element (including the light, dark and system theme icons).\n * @csspart icon-light - The light theme icon's wrapper element.\n * @csspart icon-dark - The dark theme icon's wrapper element.\n * @csspart icon-system - The system theme icon's wrapper element.\n * @csspart label - The label's wrapper element (including the light, dark and system theme labels).\n * @csspart label-light - The light theme label's wrapper element.\n * @csspart label-dark - The dark theme label's wrapper element.\n * @csspart label-system - The system theme label's wrapper element.\n *\n * @event tt-theme-change - Fired when the theme state changes.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n */\nclass ThemeToggle extends HTMLElement {\n  /**\n   * Holds the possible theme states.\n   * @type {('light' | 'dark' | 'system')[]}\n   */\n  #states = ['light', 'dark', 'system'];\n\n  /**\n   * The current theme state.\n   * @type {'light' | 'dark' | 'system'}\n   */\n  #theme = 'system';\n\n  /**\n   * The index of the currently selected theme state.\n   * @type {number}\n   */\n  #selectedThemeIndex = 0;\n\n  /**\n   * The theme toggle button.\n   * @type {HTMLElement | null}\n   */\n  #toggleButton = null;\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      /** @type {ShadowRoot} */\n      const shadowRoot = this.attachShadow({ mode: 'open', delegatesFocus: true });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    this.#toggleButton = this.shadowRoot?.getElementById('theme-toggle') || null;\n  }\n\n  /**\n   * The observed attributes.\n   *\n   * @returns {string[]}\n   */\n  static get observedAttributes() {\n    return ['storage-key', 'no-icon', 'no-label'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'storage-key' && oldValue !== newValue) {\n      this.#theme = this.#getThemePreference();\n      this.#selectedThemeIndex = this.#states.indexOf(this.#theme) || 0;\n      this.#reflectThemePreference();\n    }\n\n    if (name === 'no-icon' && oldValue !== newValue && this.#toggleButton) {\n      this.#toggleButton.querySelectorAll('slot[name^=\"icon\"]').forEach(el => {\n        el.classList.toggle('icon--hidden', this.noIcon);\n      });\n    }\n\n    if (name === 'no-label' && oldValue !== newValue && this.#toggleButton) {\n      this.#toggleButton.querySelectorAll('slot[name^=\"label\"]').forEach(el => {\n        el.classList.toggle('label--hidden', this.noLabel);\n      });\n    }\n  }\n\n  /**\n   * Indicates whether the theme state should be persisted to local storage.\n   *\n   * @type {boolean}\n   * @default false\n   * @attribute no-storage - Reflects the noStorage property.\n   */\n  get noStorage() {\n    return this.hasAttribute('no-storage');\n  }\n\n  set noStorage(value) {\n    if (value) {\n      this.setAttribute('no-storage', '');\n    } else {\n      this.removeAttribute('no-storage');\n    }\n  }\n\n  /**\n   * The key used to store the theme state in local storage.\n   *\n   * @type {string | null}\n   * @default 'theme-toggle/theme-preference'\n   * @attribute storage-key - Reflects the storageKey property.\n   */\n  get storageKey() {\n    return this.getAttribute('storage-key');\n  }\n\n  set storageKey(value) {\n    if (value != null) {\n      this.setAttribute('storage-key', value);\n    }\n  }\n\n  /**\n   * Indicates whether the icon should be hidden.\n   *\n   * @type {boolean}\n   * @default false\n   * @attribute no-label - Reflects the noIcon property.\n   */\n  get noIcon() {\n    return this.hasAttribute('no-icon');\n  }\n\n  set noIcon(value) {\n    if (value) {\n      this.setAttribute('no-icon', '');\n    } else {\n      this.removeAttribute('no-icon');\n    }\n  }\n\n  /**\n   * Indicates whether the label should be visually hidden.\n   *\n   * @type {boolean}\n   * @default false\n   * @attribute no-label - Reflects the noLabel property.\n   */\n  get noLabel() {\n    return this.hasAttribute('no-label');\n  }\n\n  set noLabel(value) {\n    if (value) {\n      this.setAttribute('no-label', '');\n    } else {\n      this.removeAttribute('no-label');\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('noStorage');\n    this.#upgradeProperty('storageKey');\n    this.#upgradeProperty('noIcon');\n    this.#upgradeProperty('noLabel');\n\n    this.#theme = this.#getThemePreference();\n    this.#selectedThemeIndex = this.#states.indexOf(this.#theme) || 0;\n    this.#reflectThemePreference();\n\n    this.#toggleButton?.addEventListener('click', this.#onClick);\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', this.#onMediaChange);\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#toggleButton?.removeEventListener('click', this.#onClick);\n    window.matchMedia('(prefers-color-scheme: dark)').removeEventListener('change', this.#onMediaChange);\n  }\n\n  /**\n   * Gets the current theme state from local storage.\n   *\n   * @returns {'light' | 'dark' | 'system'} Current theme state. Defaults to 'system' if no value is found.\n   */\n  #getThemePreference() {\n    if (this.noStorage) {\n      return 'system';\n    }\n\n    /** @type {string} */\n    let valueFromStorage = '';\n\n    try {\n      valueFromStorage = window.localStorage.getItem(this.storageKey || DEFAULT_STORAGE_KEY) || '';\n    } catch {\n      // Fail silently...\n    }\n\n    if (valueFromStorage === 'light' || valueFromStorage === 'dark' || valueFromStorage === 'system') {\n      return valueFromStorage;\n    }\n\n    return 'system';\n  }\n\n  /**\n   * Save the current theme state to local storage.\n   */\n  #setThemePreference() {\n    if (this.noStorage) {\n      return;\n    }\n\n    try {\n      window.localStorage.setItem(this.storageKey || DEFAULT_STORAGE_KEY, this.#theme);\n    } catch {\n      // Fail silently...\n    }\n  }\n\n  /**\n   * Reflects the current theme state.\n   * This method is called on initialization and when the theme state changes (e.g. via click event).\n   */\n  #reflectThemePreference() {\n    this.#toggleButton?.querySelectorAll(`slot[name=\"light\"], slot[name=\"dark\"], slot[name=\"system\"]`).forEach(el => {\n      el.classList.toggle('hidden', !el.getAttribute('name')?.startsWith(this.#theme));\n    });\n\n    document.documentElement.setAttribute(ROOT_ATTR, this.#theme);\n\n    if (this.#theme === 'system') {\n      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;\n      this.#toggleButton?.querySelectorAll('.system-path').forEach(el => {\n        el.classList.toggle(\n          'hidden',\n          prefersDark ? el.classList.contains('system-path--light') : el.classList.contains('system-path--dark')\n        );\n      });\n    }\n  }\n\n  /**\n   * Gets the next theme state.\n   *\n   * @returns {'light' | 'dark' | 'system'} Next theme state.\n   */\n  #nextTheme() {\n    this.#selectedThemeIndex = (this.#selectedThemeIndex + 1) % this.#states.length;\n    return this.#states[this.#selectedThemeIndex];\n  }\n\n  /**\n   * Handles the click event.\n   */\n  #onClick = () => {\n    this.#theme = this.#nextTheme();\n\n    this.#setThemePreference();\n    this.#reflectThemePreference();\n\n    this.dispatchEvent(\n      new CustomEvent('tt-theme-change', {\n        bubbles: true,\n        composed: true,\n        detail: {\n          theme: this.#theme\n        }\n      })\n    );\n  };\n\n  /**\n   * Handle media change event.\n   * This is only relevant when the theme state is set to 'system'.\n   */\n  #onMediaChange = () => {\n    this.#reflectThemePreference();\n  };\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'noStorage' | 'storageKey' | 'noIcon' | 'noLabel'} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='theme-toggle']\n   * @example\n   *\n   * ThemeToggle.defineCustomElement('my-theme-toggle');\n   */\n  static defineCustomElement(elementName = 'theme-toggle') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, ThemeToggle);\n    }\n  }\n}\n\nexport { ThemeToggle };\n","import { ThemeToggle } from './theme-toggle.js';\n\nThemeToggle.defineCustomElement();\n\nexport { ThemeToggle };\n","/*!\n * @georapbox/web-share-element\n * A custom element that implements the Web Share API to share user-defined data.\n *\n * @version 3.1.1\n * @homepage https://github.com/georapbox/web-share-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nvar h=`\n  :host {\n    display: inline-block;\n  }\n`,r=document.createElement(\"template\");r.innerHTML=`\n  <style>${h}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;var s=class a extends HTMLElement{#e;#t;#r=[];constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\",delegatesFocus:!0}).appendChild(r.content.cloneNode(!0)),this.#e=this.shadowRoot?.querySelector('slot[name=\"button\"]')||null,this.#t=this.#h()}static get observedAttributes(){return[\"disabled\"]}attributeChangedCallback(t,e,i){t===\"disabled\"&&e!==i&&this.#t&&(this.#t.toggleAttribute(\"disabled\",this.disabled),this.#t.setAttribute(\"aria-disabled\",this.disabled.toString()),this.#t.part&&this.#t.part.contains(\"button\")&&this.#t.part.toggle(\"button--disabled\",this.disabled))}connectedCallback(){this.#s(\"shareUrl\"),this.#s(\"shareTitle\"),this.#s(\"shareText\"),this.#s(\"shareFiles\"),this.#s(\"disabled\"),this.#e?.addEventListener(\"slotchange\",this.#a),this.#t?.addEventListener(\"click\",this.#i)}disconnectedCallback(){this.#e?.removeEventListener(\"slotchange\",this.#a),this.#t?.removeEventListener(\"click\",this.#i)}get disabled(){return this.hasAttribute(\"disabled\")}set disabled(t){this.toggleAttribute(\"disabled\",!!t)}get shareUrl(){return this.getAttribute(\"share-url\")||\"\"}set shareUrl(t){this.setAttribute(\"share-url\",t)}get shareTitle(){return this.getAttribute(\"share-title\")||\"\"}set shareTitle(t){this.setAttribute(\"share-title\",t)}get shareText(){return this.getAttribute(\"share-text\")||\"\"}set shareText(t){this.setAttribute(\"share-text\",t)}get shareFiles(){return this.#r}set shareFiles(t){Array.isArray(t)&&t.length>0&&(this.#r=t)}async share(){if(!this.disabled)try{let t={};this.shareUrl&&(t.url=this.shareUrl),this.shareTitle&&(t.title=this.shareTitle),this.shareText&&(t.text=this.shareText),Array.isArray(this.shareFiles)&&this.shareFiles.length>0&&navigator.canShare&&navigator.canShare({files:this.shareFiles})&&(t.files=this.shareFiles),await navigator.share(t),this.dispatchEvent(new CustomEvent(\"web-share:success\",{bubbles:!0,composed:!0,detail:{shareData:t}}))}catch(t){if(t instanceof Error&&t.name===\"AbortError\"){this.dispatchEvent(new CustomEvent(\"web-share:abort\",{bubbles:!0,composed:!0,detail:{error:t}}));return}this.dispatchEvent(new CustomEvent(\"web-share:error\",{bubbles:!0,composed:!0,detail:{error:t}}))}}#i=t=>{t.preventDefault(),!this.disabled&&this.share()};#a=t=>{t.target&&t.target.name===\"button\"&&(this.#t?.removeEventListener(\"click\",this.#i),this.#t=this.#h(),this.#t&&(this.#t.addEventListener(\"click\",this.#i),this.#t.nodeName!==\"BUTTON\"&&!this.#t.hasAttribute(\"role\")&&this.#t.setAttribute(\"role\",\"button\")))};#h(){return this.#e&&this.#e.assignedElements({flatten:!0}).find(t=>t.nodeName===\"BUTTON\"||t.getAttribute(\"slot\")===\"button\")||null}#s(t){let e=this;if(Object.prototype.hasOwnProperty.call(e,t)){let i=e[t];delete e[t],e[t]=i}}static defineCustomElement(t=\"web-share\"){typeof window<\"u\"&&!window.customElements.get(t)&&window.customElements.define(t,a)}};s.defineCustomElement();export{s as WebShare};\n//# sourceMappingURL=web-share-defined.js.map\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * Represents the data to share.\n *\n * @typedef {Object} ShareData\n * @property {string} [url] - The URL to share.\n * @property {string} [title] - The title to share.\n * @property {string} [text] - The text to share.\n * @property {File[]} [files] - The files to share.\n */\n\nconst styles = /* css */ `\n  :host {\n    display: inline-block;\n  }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;\n\n/**\n * @summary A custom element that provides a button to share content.\n * @documentation https://github.com/georapbox/web-share-element#readme\n *\n * @tagname web-share - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {boolean} disabled - Indicates whether the button is disabled.\n * @property {string} shareUrl - The URL to share.\n * @property {string} shareTitle - The title to share.\n * @property {string} shareText - The text to share.\n * @property {File[]} shareFiles - The files to share.\n *\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {string} share-url - Reflects the shareUrl property.\n * @attribute {string} share-title - Reflects the shareTitle property.\n * @attribute {string} share-text - Reflects the shareText property.\n *\n * @slot button - The button to share content.\n * @slot button-content - The content of the button to share content.\n *\n * @csspart button - The button to share content.\n * @csspart button--disabled - The button to share content when disabled.\n *\n * @event web-share:success - Fired when the share operation is successful.\n * @event web-share:abort - Fired when the share operation is aborted.\n * @event web-share:error - Fired when the share operation fails.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method share - Instance method. Shares the shareable data taken from the element's properties.\n */\nclass WebShare extends HTMLElement {\n  /** @type {Nullable<HTMLSlotElement>} */\n  #buttonSlot;\n\n  /** @type {Nullable<Element>} */\n  #buttonEl;\n\n  /** @type {File[]} */\n  #files = [];\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open', delegatesFocus: true });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    this.#buttonSlot = this.shadowRoot?.querySelector('slot[name=\"button\"]') || null;\n    this.#buttonEl = this.#getButton();\n  }\n\n  static get observedAttributes() {\n    return ['disabled'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'disabled' && oldValue !== newValue && this.#buttonEl) {\n      this.#buttonEl.toggleAttribute('disabled', this.disabled);\n      this.#buttonEl.setAttribute('aria-disabled', this.disabled.toString());\n\n      if (this.#buttonEl.part && this.#buttonEl.part.contains('button')) {\n        this.#buttonEl.part.toggle('button--disabled', this.disabled);\n      }\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('shareUrl');\n    this.#upgradeProperty('shareTitle');\n    this.#upgradeProperty('shareText');\n    this.#upgradeProperty('shareFiles');\n    this.#upgradeProperty('disabled');\n\n    this.#buttonSlot?.addEventListener('slotchange', this.#handleSlotChange);\n    this.#buttonEl?.addEventListener('click', this.#handleClick);\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#buttonSlot?.removeEventListener('slotchange', this.#handleSlotChange);\n    this.#buttonEl?.removeEventListener('click', this.#handleClick);\n  }\n\n  /**\n   * @type {boolean} - Indicates whether the button is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', !!value);\n  }\n\n  /**\n   * @type {string} - The URL to share.\n   * @attribute share-url - Reflects the shareUrl property.\n   */\n  get shareUrl() {\n    return this.getAttribute('share-url') || '';\n  }\n\n  set shareUrl(value) {\n    this.setAttribute('share-url', value);\n  }\n\n  /**\n   * @type {string} - The title to share.\n   * @attribute share-title - Reflects the shareTitle property.\n   */\n  get shareTitle() {\n    return this.getAttribute('share-title') || '';\n  }\n\n  set shareTitle(value) {\n    this.setAttribute('share-title', value);\n  }\n\n  /**\n   * @type {string} - The text to share.\n   * @attribute share-text - Reflects the shareText property.\n   */\n  get shareText() {\n    return this.getAttribute('share-text') || '';\n  }\n\n  set shareText(value) {\n    this.setAttribute('share-text', value);\n  }\n\n  /**\n   * @type {File[]} - The files to share.\n   */\n  get shareFiles() {\n    return this.#files;\n  }\n\n  set shareFiles(value) {\n    if (Array.isArray(value) && value.length > 0) {\n      this.#files = value;\n    }\n  }\n\n  /**\n   * Shares the shareable data taken from the element's properties.\n   *\n   * @returns {Promise<void>} - A promise that resolves when the share operation is complete.\n   */\n  async share() {\n    if (this.disabled) {\n      return;\n    }\n\n    try {\n      /** @type {ShareData} */\n      const shareData = {};\n\n      if (this.shareUrl) {\n        shareData.url = this.shareUrl;\n      }\n\n      if (this.shareTitle) {\n        shareData.title = this.shareTitle;\n      }\n\n      if (this.shareText) {\n        shareData.text = this.shareText;\n      }\n\n      if (\n        Array.isArray(this.shareFiles) &&\n        this.shareFiles.length > 0 &&\n        navigator.canShare &&\n        navigator.canShare({ files: this.shareFiles })\n      ) {\n        shareData.files = this.shareFiles;\n      }\n\n      await navigator.share(shareData);\n\n      this.dispatchEvent(\n        new CustomEvent('web-share:success', {\n          bubbles: true,\n          composed: true,\n          detail: { shareData }\n        })\n      );\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        this.dispatchEvent(\n          new CustomEvent('web-share:abort', {\n            bubbles: true,\n            composed: true,\n            detail: { error }\n          })\n        );\n\n        return;\n      }\n\n      this.dispatchEvent(\n        new CustomEvent('web-share:error', {\n          bubbles: true,\n          composed: true,\n          detail: { error }\n        })\n      );\n    }\n  }\n\n  /**\n   * Handles the click event on the button.\n   *\n   * @param {any} evt - The event object.\n   */\n  #handleClick = evt => {\n    evt.preventDefault();\n\n    if (this.disabled) {\n      return;\n    }\n\n    this.share();\n  };\n\n  /**\n   * Handles the slotchange event on the button slot.\n   *\n   * @param {any} evt - The event object.\n   */\n  #handleSlotChange = evt => {\n    if (evt.target && evt.target.name === 'button') {\n      this.#buttonEl?.removeEventListener('click', this.#handleClick);\n      this.#buttonEl = this.#getButton();\n\n      if (this.#buttonEl) {\n        this.#buttonEl.addEventListener('click', this.#handleClick);\n\n        if (this.#buttonEl.nodeName !== 'BUTTON' && !this.#buttonEl.hasAttribute('role')) {\n          this.#buttonEl.setAttribute('role', 'button');\n        }\n      }\n    }\n  };\n\n  /**\n   * Returns the button element from the button slot.\n   *\n   * @returns {Nullable<Element>} - The button element.\n   */\n  #getButton() {\n    if (!this.#buttonSlot) {\n      return null;\n    }\n\n    return (\n      this.#buttonSlot.assignedElements({ flatten: true }).find(el => {\n        return el.nodeName === 'BUTTON' || el.getAttribute('slot') === 'button';\n      }) || null\n    );\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'shareUrl' | 'shareTitle' | 'shareText' | 'shareFiles' | 'disabled'} prop - The property name to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='web-share'] - The name of the custom element.\n   * @example\n   *\n   * ClipboardCopy.defineCustomElement('my-web-share');\n   */\n  static defineCustomElement(elementName = 'web-share') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, WebShare);\n    }\n  }\n}\n\nexport { WebShare };\n","import { WebShare } from './web-share.js';\n\nWebShare.defineCustomElement();\n\nexport { WebShare };\n","/*!\n * @georapbox/modal-element\n * A custom element to create a modal, using the native dialog element under the hood.\n *\n * @version 1.10.0\n * @homepage https://github.com/georapbox/modal-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nvar r=document.createElement(\"template\"),l=`\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-color: canvastext;\n\n    --me-header-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-header-color: initial;\n\n    --me-body-spacing: 1rem;\n    --me-body-background-color: transparent;\n    --me-body-color: initial;\n    --me-footer-background-color: transparent;\n    --me-footer-color: initial;\n\n    --me-close-padding: 0.4375rem;\n    --me-close-border: none;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-close-color: inherit;\n    --me-close-font-size: 1rem;\n\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n    color: var(--me-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open]:not(.dialog--no-animations) {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog:not(.dialog--no-animations) {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open]:not(.dialog--no-animations) {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]:not(.dialog--no-animations)::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: 300ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n    color: var(--me-header-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    color: var(--me-body-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n    color: var(--me-footer-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: var(--me-close-padding);\n    border: var(--me-close-border);\n    border-radius: var(--me-close-border-radius);\n    background-color: var(--me-close-background-color);\n    color: var(--me-close-color);\n    font-size: var(--me-close-font-size);\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;r.innerHTML=`\n  <style>${l}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg part=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;var a=class n extends HTMLElement{static CLOSE_REQUEST_REASONS={CLOSE_BUTTON:\"close-button\",ESCAPE_KEY:\"escape-key\",BACKDROP_CLICK:\"backdrop-click\",EXTERNAL_INVOKER:\"external-invoker\"};#e=null;#i=null;#n=null;#o=void 0;constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\"}).appendChild(r.content.cloneNode(!0)),this.shadowRoot&&(this.#e=this.shadowRoot.querySelector(\"dialog\"),this.#i=this.shadowRoot.querySelector('slot[name=\"footer\"]'),this.#n=this.shadowRoot.querySelector('slot[name=\"close\"]'))}static get observedAttributes(){return[\"open\",\"no-header\",\"no-animations\",\"no-close-button\",\"close-label\"]}attributeChangedCallback(e,t,o){if(this.#e!==null){if(e===\"open\"&&t!==o&&(this.open?(this.#e.showModal(),this.dispatchEvent(new CustomEvent(\"me-open\",{bubbles:!0,composed:!0,detail:{element:this}})),document.body&&!this.preserveOverflow&&(document.body.style.overflow=\"hidden\")):this.#e.close()),e===\"no-header\"&&t!==o){let i=this.#e.querySelector(\".dialog__header\");i!==null&&(i.hidden=this.noHeader)}if(e===\"no-animations\"&&t!==o&&this.#e.classList.toggle(\"dialog--no-animations\",this.noAnimations),e===\"no-close-button\"&&t!==o){let i=this.#e.querySelector(\".dialog__close\");i!==null&&(i.hidden=this.noCloseButton)}e===\"close-label\"&&t!==o&&this.#r()}}connectedCallback(){this.#t(\"open\"),this.#t(\"staticBackdrop\"),this.#t(\"noHeader\"),this.#t(\"noAnimations\"),this.#t(\"noCloseButton\"),this.#t(\"fullscreen\"),this.#t(\"preserveOverflow\"),this.#t(\"placement\"),this.#t(\"closeLabel\"),this.#e?.addEventListener(\"click\",this.#h),this.#e?.addEventListener(\"close\",this.#l),this.#e?.addEventListener(\"cancel\",this.#d),this.#e?.querySelector('form[method=\"dialog\"]')?.addEventListener(\"submit\",this.#c),this.#i?.addEventListener(\"slotchange\",this.#g),this.#n?.addEventListener(\"slotchange\",this.#u),this.addEventListener(\"command\",this.#m)}disconnectedCallback(){this.#o&&clearTimeout(this.#o),this.#e?.removeEventListener(\"click\",this.#h),this.#e?.removeEventListener(\"close\",this.#l),this.#e?.removeEventListener(\"cancel\",this.#d),this.#e?.querySelector('form[method=\"dialog\"]')?.removeEventListener(\"submit\",this.#c),this.#i?.removeEventListener(\"slotchange\",this.#g),this.#n?.removeEventListener(\"slotchange\",this.#u),this.removeEventListener(\"command\",this.#m)}get open(){return this.hasAttribute(\"open\")}set open(e){this.toggleAttribute(\"open\",!!e)}get staticBackdrop(){return this.hasAttribute(\"static-backdrop\")}set staticBackdrop(e){this.toggleAttribute(\"static-backdrop\",!!e)}get noHeader(){return this.hasAttribute(\"no-header\")}set noHeader(e){this.toggleAttribute(\"no-header\",!!e)}get noAnimations(){return this.hasAttribute(\"no-animations\")}set noAnimations(e){this.toggleAttribute(\"no-animations\",!!e)}get noCloseButton(){return this.hasAttribute(\"no-close-button\")}set noCloseButton(e){this.toggleAttribute(\"no-close-button\",!!e)}get fullscreen(){return this.hasAttribute(\"fullscreen\")}set fullscreen(e){this.toggleAttribute(\"fullscreen\",!!e)}get preserveOverflow(){return this.hasAttribute(\"preserve-overflow\")}set preserveOverflow(e){this.toggleAttribute(\"preserve-overflow\",!!e)}get placement(){return this.getAttribute(\"placement\")||\"center\"}set placement(e){this.setAttribute(\"placement\",e!=null?e.toString():e)}get closeLabel(){return this.getAttribute(\"close-label\")||\"Close\"}set closeLabel(e){this.setAttribute(\"close-label\",e!=null?e.toString():e)}#r(){if(this.#e===null)return;let e=this.#e.querySelector(\".dialog__close\");if(e===null)return;(this.#n?.assignedElements()||[])?.some(i=>i.textContent?.replace(/\\s/g,\"\")!==\"\")?e.removeAttribute(\"aria-label\"):e.setAttribute(\"aria-label\",this.closeLabel)}#a(){this.#o||(this.#e?.classList.add(\"dialog--pulse\"),this.#o=setTimeout(()=>{this.#e?.classList.remove(\"dialog--pulse\"),clearTimeout(this.#o),this.#o=void 0},300))}#l=()=>{this.open=!1,this.dispatchEvent(new CustomEvent(\"me-close\",{bubbles:!0,composed:!0,detail:{element:this}})),document.body&&!this.preserveOverflow&&(document.body.style.overflow=\"\")};#d=e=>{let t=this.#s(n.CLOSE_REQUEST_REASONS.ESCAPE_KEY);this.dispatchEvent(t),t.defaultPrevented&&(e.preventDefault(),!this.noAnimations&&this.#a())};#c=e=>{let t=this.#s(n.CLOSE_REQUEST_REASONS.CLOSE_BUTTON);this.dispatchEvent(t),t.defaultPrevented&&(e.preventDefault(),!this.noAnimations&&this.#a())};#h=e=>{let t=e.target,o=e.currentTarget,i=null;if(t===o?i=n.CLOSE_REQUEST_REASONS.BACKDROP_CLICK:t instanceof HTMLElement&&t.closest(\"[data-me-close]\")!==null&&(i=n.CLOSE_REQUEST_REASONS.EXTERNAL_INVOKER),i!==null){let s=this.#s(i);this.dispatchEvent(s),s.defaultPrevented||this.staticBackdrop?!this.noAnimations&&this.#a():this.hide()}};#m=e=>{if(e.command===\"--me-open\"&&!this.open&&this.show(),e.command===\"--me-close\"&&this.open){let t=this.#s(\"external-invoker\");this.dispatchEvent(t),t.defaultPrevented?!this.noAnimations&&this.#a():this.hide()}};#g=()=>{if(this.#e===null)return;let e=this.#e.querySelector(\".dialog__footer\");if(e===null)return;let t=this.#i?.assignedNodes(),o=t?t.length>0:!1;e.hidden=!o};#u=()=>{this.#r()};#s(e){return new CustomEvent(\"me-request-close\",{bubbles:!0,composed:!0,cancelable:!0,detail:{reason:e,element:this}})}#t(e){let t=this;if(Object.prototype.hasOwnProperty.call(t,e)){let o=t[e];delete t[e],t[e]=o}}show(){this.open||(this.open=!0)}hide(){this.open&&(this.open=!1)}static defineCustomElement(e=\"modal-element\"){typeof window<\"u\"&&!window.customElements.get(e)&&window.customElements.define(e,n)}};a.defineCustomElement();export{a as ModalElement};\n//# sourceMappingURL=modal-element-defined.js.map\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * Stable identifier for the reason that the modal is about to close.\n *\n * @typedef {typeof ModalElement.CLOSE_REQUEST_REASONS[keyof typeof ModalElement.CLOSE_REQUEST_REASONS]} CloseRequestReason\n */\n\n/**\n * Represents a command event.\n *\n * @typedef {Event & { command: string }} CommandEvent\n */\n\nconst PULSE_ANIMATION_DURATION = 300; // milliseconds\nconst template = document.createElement('template');\n\nconst styles = /* css */ `\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-color: canvastext;\n\n    --me-header-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-header-color: initial;\n\n    --me-body-spacing: 1rem;\n    --me-body-background-color: transparent;\n    --me-body-color: initial;\n    --me-footer-background-color: transparent;\n    --me-footer-color: initial;\n\n    --me-close-padding: 0.4375rem;\n    --me-close-border: none;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-close-color: inherit;\n    --me-close-font-size: 1rem;\n\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n    color: var(--me-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open]:not(.dialog--no-animations) {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog:not(.dialog--no-animations) {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open]:not(.dialog--no-animations) {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]:not(.dialog--no-animations)::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: ${PULSE_ANIMATION_DURATION}ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n    color: var(--me-header-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    color: var(--me-body-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n    color: var(--me-footer-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: var(--me-close-padding);\n    border: var(--me-close-border);\n    border-radius: var(--me-close-border-radius);\n    background-color: var(--me-close-background-color);\n    color: var(--me-close-color);\n    font-size: var(--me-close-font-size);\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg part=\"close-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"1.125em\" height=\"1.125em\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;\n\n/**\n * @summary A custom element that renders a modal dialog.\n * @documentation https://github.com/georapbox/modal-element\n *\n * @tagname modal-element - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} open - Determines whether the modal is open or not.\n * @property {boolean} staticBackdrop - Determines whether the modal should close when the backdrop is clicked.\n * @property {boolean} noHeader - Determines whether the modal should have a header or not.\n * @property {boolean} noAnimations - Determines whether the modal should have animations or not when opening and closing.\n * @property {boolean} noCloseButton - Determines whether the modal should have a default close button or not.\n * @property {boolean} fullscreen - Determines whether the modal should be fullscreen or not.\n * @property {boolean} preserveOverflow - Determines whether the overflow of the body should be preserved when the modal is open.\n * @property {string} placement - Determines the placement of the modal.\n * @property {string} closeLabel - The label of the default close button, used as the aria-label attribute of the close button.\n *\n * @attribute {boolean} open - Reflects the open property.\n * @attribute {boolean} static-backdrop - Reflects the staticBackdrop property.\n * @attribute {boolean} no-header - Reflects the noHeader property.\n * @attribute {boolean} no-animations - Reflects the noAnimations property.\n * @attribute {boolean} no-close-button - Reflects the noCloseButton property.\n * @attribute {boolean} fullscreen - Reflects the fullscreen property.\n * @attribute {boolean} preserve-overflow - Reflects the preserveOverflow property.\n * @attribute {string} placement - Reflects the placement property.\n * @attribute {string} close-label - Reflects the closeLabel property.\n *\n * @slot - The modal's main content (default/unnamed slot).\n * @slot header - The modal's header content, usually a title.\n * @slot footer - The modals' footer content. Usually used for buttons or other actions.\n * @slot close - The content of the close button that appears in the modal's header.\n *\n * @cssproperty --me-width - The width of the modal.\n * @cssproperty --me-height - The height of the modal.\n * @cssproperty --me-border-color - The border color of the modal.\n * @cssproperty --me-border-style - The border style of the modal.\n * @cssproperty --me-border-width - The border width of the modal.\n * @cssproperty --me-border-radius - The border radius of the modal.\n * @cssproperty --me-box-shadow - The box shadow of the modal.\n * @cssproperty --me-background-color - The background color of the modal.\n * @cssproperty --me-color - The foreground color of the modal.\n * @cssproperty --me-header-spacing - The spacing of the header.\n * @cssproperty --me-header-background-color - The background color of the header.\n * @cssproperty --me-header-color - The foreground color of the header.\n * @cssproperty --me-body-spacing - The spacing of the body.\n * @cssproperty --me-body-background-color - The background color of the body.\n * @cssproperty --me-body-color - The foreground color of the body.\n * @cssproperty --me-footer-spacing - The spacing of the footer.\n * @cssproperty --me-footer-background-color - The background color of the footer.\n * @cssproperty --me-footer-color - The foreground color of the footer.\n * @cssproperty --me-close-padding - The padding of the close button.\n * @cssproperty --me-close-border - The border shorthand property of the close button.\n * @cssproperty --me-close-border-radius - The border radius shorthand property of the close button.\n * @cssproperty --me-close-background-color - The background color of the close button.\n * @cssproperty --me-close-color - The foreground color of the close button.\n * @cssproperty --me-close-font-size - The font size of the close button.\n * @cssproperty --me-backdrop-background - The background shorthand property of the backdrop.\n * @cssproperty --me-backdrop-filter - The backdrop filter property of the backdrop.\n *\n * @csspart base - The base wrapper of the modal.\n * @csspart panel - The panel wrapper of the modal.\n * @csspart header - The header wrapper of the modal.\n * @csspart title - The title wrapper of the modal.\n * @csspart close - The default close button rendered in the modal's header.\n * @csspart close-icon - The close icon of the default close button.\n * @csspart body - The body wrapper of the modal.\n * @csspart footer - The footer wrapper of the modal.\n *\n * @fires me-open - Dispatched when the modal is opened.\n * @fires me-close - Dispatched when the modal is closed.\n * @fires me-request-close - Dispatched when the modal is about to close.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method show - Instance method. Opens the modal if it is closed, otherwise does nothing.\n * @method hide - Instance method. Closes the modal if it is open, otherwise does nothing.\n */\nclass ModalElement extends HTMLElement {\n  /**\n   * Central list of all possible reasons that the modal is about to close.\n   * @readonly\n   */\n  static CLOSE_REQUEST_REASONS = /** @type {const} */ ({\n    CLOSE_BUTTON: 'close-button',\n    ESCAPE_KEY: 'escape-key',\n    BACKDROP_CLICK: 'backdrop-click',\n    EXTERNAL_INVOKER: 'external-invoker'\n  });\n\n  /** @type {Nullable<HTMLDialogElement>} */\n  #dialogEl = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #footerSlotEl = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #closeSlotEl = null;\n\n  /** @type {ReturnType<typeof setTimeout> | undefined} */\n  #pulseAnimationTimeout = void 0;\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    if (this.shadowRoot) {\n      this.#dialogEl = this.shadowRoot.querySelector('dialog');\n      this.#footerSlotEl = this.shadowRoot.querySelector('slot[name=\"footer\"]');\n      this.#closeSlotEl = this.shadowRoot.querySelector('slot[name=\"close\"]');\n    }\n  }\n\n  static get observedAttributes() {\n    return ['open', 'no-header', 'no-animations', 'no-close-button', 'close-label'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    if (name === 'open' && oldValue !== newValue) {\n      if (this.open) {\n        this.#dialogEl.showModal();\n\n        this.dispatchEvent(\n          new CustomEvent('me-open', {\n            bubbles: true,\n            composed: true,\n            detail: { element: this }\n          })\n        );\n\n        if (document.body && !this.preserveOverflow) {\n          document.body.style.overflow = 'hidden';\n        }\n      } else {\n        this.#dialogEl.close();\n      }\n    }\n\n    if (name === 'no-header' && oldValue !== newValue) {\n      /** @type {Nullable<HTMLElement>} */\n      const headerEl = this.#dialogEl.querySelector('.dialog__header');\n\n      if (headerEl !== null) {\n        headerEl.hidden = this.noHeader;\n      }\n    }\n\n    if (name === 'no-animations' && oldValue !== newValue) {\n      this.#dialogEl.classList.toggle('dialog--no-animations', this.noAnimations);\n    }\n\n    if (name === 'no-close-button' && oldValue !== newValue) {\n      /** @type {Nullable<HTMLElement>} */\n      const closeBtnEl = this.#dialogEl.querySelector('.dialog__close');\n\n      if (closeBtnEl !== null) {\n        closeBtnEl.hidden = this.noCloseButton;\n      }\n    }\n\n    if (name === 'close-label' && oldValue !== newValue) {\n      this.#updateCloseLabel();\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('open');\n    this.#upgradeProperty('staticBackdrop');\n    this.#upgradeProperty('noHeader');\n    this.#upgradeProperty('noAnimations');\n    this.#upgradeProperty('noCloseButton');\n    this.#upgradeProperty('fullscreen');\n    this.#upgradeProperty('preserveOverflow');\n    this.#upgradeProperty('placement');\n    this.#upgradeProperty('closeLabel');\n\n    this.#dialogEl?.addEventListener('click', this.#handleDialogClick);\n    this.#dialogEl?.addEventListener('close', this.#handleDialogClose);\n    this.#dialogEl?.addEventListener('cancel', this.#handleDialogCancel);\n    this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.addEventListener('submit', this.#handleCloseButtonClick);\n    this.#footerSlotEl?.addEventListener('slotchange', this.#handleFooterSlotChange);\n    this.#closeSlotEl?.addEventListener('slotchange', this.#handleCloseSlotChange);\n    this.addEventListener('command', /** @type {EventListener} */ (this.#handleCommandEvent));\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#pulseAnimationTimeout && clearTimeout(this.#pulseAnimationTimeout);\n    this.#dialogEl?.removeEventListener('click', this.#handleDialogClick);\n    this.#dialogEl?.removeEventListener('close', this.#handleDialogClose);\n    this.#dialogEl?.removeEventListener('cancel', this.#handleDialogCancel);\n    this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.removeEventListener('submit', this.#handleCloseButtonClick);\n    this.#footerSlotEl?.removeEventListener('slotchange', this.#handleFooterSlotChange);\n    this.#closeSlotEl?.removeEventListener('slotchange', this.#handleCloseSlotChange);\n    this.removeEventListener('command', /** @type {EventListener} */ (this.#handleCommandEvent));\n  }\n\n  /**\n   * Deternimes if the modal is open or not.\n   *\n   * @type {boolean} - True if the modal is open, otherwise false.\n   * @default false\n   * @attribute open - Reflects the open property.\n   */\n  get open() {\n    return this.hasAttribute('open');\n  }\n\n  set open(value) {\n    this.toggleAttribute('open', !!value);\n  }\n\n  /**\n   * Determines whether the modal should close when the backdrop is clicked.\n   *\n   * @type {boolean} - True if the modal should close when the backdrop is clicked, otherwise false.\n   * @default false\n   * @attribute static-backdrop - Reflects the staticBackdrop property.\n   */\n  get staticBackdrop() {\n    return this.hasAttribute('static-backdrop');\n  }\n\n  set staticBackdrop(value) {\n    this.toggleAttribute('static-backdrop', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have a header or not.\n   *\n   * @type {boolean} - True if the modal should have a header, otherwise false.\n   * @default false\n   * @attribute no-header - Reflects the noHeader property.\n   */\n  get noHeader() {\n    return this.hasAttribute('no-header');\n  }\n\n  set noHeader(value) {\n    this.toggleAttribute('no-header', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have animations or not when opening and closing.\n   *\n   * @type {boolean} - True if the modal should have animations, otherwise false.\n   * @default false\n   * @attribute no-animations - Reflects the noAnimations property.\n   */\n  get noAnimations() {\n    return this.hasAttribute('no-animations');\n  }\n\n  set noAnimations(value) {\n    this.toggleAttribute('no-animations', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have a default close button or not.\n   *\n   * @type {boolean} - True if the modal should have a close button, otherwise false.\n   * @default false\n   * @attribute no-close-button - Reflects the noCloseButton property.\n   */\n  get noCloseButton() {\n    return this.hasAttribute('no-close-button');\n  }\n\n  set noCloseButton(value) {\n    this.toggleAttribute('no-close-button', !!value);\n  }\n\n  /**\n   * Determines whether the modal should be fullscreen or not.\n   *\n   * @type {boolean} - True if the modal should be fullscreen, otherwise false.\n   * @default false\n   * @attribute fullscreen - Reflects the fullscreen property.\n   */\n  get fullscreen() {\n    return this.hasAttribute('fullscreen');\n  }\n\n  set fullscreen(value) {\n    this.toggleAttribute('fullscreen', !!value);\n  }\n\n  /**\n   * Determines whether the overflow of the body should be preserved when the modal is open.\n   *\n   * @type {boolean} - True if the overflow of the body should be preserved, otherwise false.\n   * @default false\n   * @attribute preserve-overflow - Reflects the preserveOverflow property.\n   */\n  get preserveOverflow() {\n    return this.hasAttribute('preserve-overflow');\n  }\n\n  set preserveOverflow(value) {\n    this.toggleAttribute('preserve-overflow', !!value);\n  }\n\n  /**\n   * Determines the placement of the modal.\n   * Possible values are 'top-start', 'top-center', 'top-end', 'center-start', 'center', 'center-end', 'bottom-start', 'bottom-center', 'bottom-end'.\n   *\n   * @type {string}\n   * @default 'center'\n   * @attribute placement - Reflects the placement property.\n   */\n  get placement() {\n    return this.getAttribute('placement') || 'center';\n  }\n\n  set placement(value) {\n    this.setAttribute('placement', value != null ? value.toString() : value);\n  }\n\n  /**\n   * The label of the default close button, used as the aria-label attribute of the close button.\n   * If user provides text content for the close button using the `close` slot, this property is ignored and the aria-label attribute is removed.\n   *\n   * @type {string}\n   * @default 'Close'\n   * @attribute close-label - Reflects the closeLabel property.\n   */\n  get closeLabel() {\n    return this.getAttribute('close-label') || 'Close';\n  }\n\n  set closeLabel(value) {\n    this.setAttribute('close-label', value != null ? value.toString() : value);\n  }\n\n  /**\n   * Updates the aria-label attribute of the close button.\n   * If the slot for the close button has text content, the aria-label attribute is removed to allow the text content to be used as the label.\n   * Otherwise, the aria-label attribute is set to the `closeLabel` property.\n   */\n  #updateCloseLabel() {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    const closeButtonEl = this.#dialogEl.querySelector('.dialog__close');\n\n    if (closeButtonEl === null) {\n      return;\n    }\n\n    const assignedElements = this.#closeSlotEl?.assignedElements() || [];\n    const hasTextContent = assignedElements?.some(el => el.textContent?.replace(/\\s/g, '') !== '');\n\n    hasTextContent\n      ? closeButtonEl.removeAttribute('aria-label')\n      : closeButtonEl.setAttribute('aria-label', this.closeLabel);\n  }\n\n  /**\n   * Applies a pulse effect on the dialog.\n   */\n  #applyPulseEffectOnDialog() {\n    if (this.#pulseAnimationTimeout) {\n      return;\n    }\n\n    this.#dialogEl?.classList.add('dialog--pulse');\n\n    this.#pulseAnimationTimeout = setTimeout(() => {\n      this.#dialogEl?.classList.remove('dialog--pulse');\n      clearTimeout(this.#pulseAnimationTimeout);\n      this.#pulseAnimationTimeout = void 0;\n    }, PULSE_ANIMATION_DURATION);\n  }\n\n  /**\n   * Handles the close event of the dialog.\n   */\n  #handleDialogClose = () => {\n    // This is required because the dialog element does not reset\n    // the open property when the dialog is closed by the user.\n    this.open = false;\n\n    this.dispatchEvent(\n      new CustomEvent('me-close', {\n        bubbles: true,\n        composed: true,\n        detail: { element: this }\n      })\n    );\n\n    if (document.body && !this.preserveOverflow) {\n      document.body.style.overflow = '';\n    }\n  };\n\n  /**\n   * Handles the cancel event of the dialog.\n   * This event is fired when the user presses the escape key.\n   *\n   * @param {Event} evt - The cancel event.\n   */\n  #handleDialogCancel = evt => {\n    const requestCloseEvent = this.#createRequestCloseEvent(ModalElement.CLOSE_REQUEST_REASONS.ESCAPE_KEY);\n\n    this.dispatchEvent(requestCloseEvent);\n\n    if (requestCloseEvent.defaultPrevented) {\n      evt.preventDefault();\n      !this.noAnimations && this.#applyPulseEffectOnDialog();\n    }\n  };\n\n  /**\n   * Handles the click event of the close button.\n   *\n   * @param {Event} evt - The click event.\n   */\n  #handleCloseButtonClick = evt => {\n    const requestCloseEvent = this.#createRequestCloseEvent(ModalElement.CLOSE_REQUEST_REASONS.CLOSE_BUTTON);\n\n    this.dispatchEvent(requestCloseEvent);\n\n    if (requestCloseEvent.defaultPrevented) {\n      evt.preventDefault();\n      !this.noAnimations && this.#applyPulseEffectOnDialog();\n    }\n  };\n\n  /**\n   * Handles the click event of the dialog.\n   *\n   * @param {MouseEvent} evt - The click event.\n   */\n  #handleDialogClick = evt => {\n    const target = evt.target;\n    const currentTarget = evt.currentTarget;\n    let reason = null;\n\n    if (target === currentTarget) {\n      reason = ModalElement.CLOSE_REQUEST_REASONS.BACKDROP_CLICK;\n    } else if (target instanceof HTMLElement && target.closest('[data-me-close]') !== null) {\n      reason = ModalElement.CLOSE_REQUEST_REASONS.EXTERNAL_INVOKER;\n    }\n\n    if (reason !== null) {\n      const requestCloseEvent = this.#createRequestCloseEvent(reason);\n      this.dispatchEvent(requestCloseEvent);\n\n      if (requestCloseEvent.defaultPrevented || this.staticBackdrop) {\n        !this.noAnimations && this.#applyPulseEffectOnDialog();\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  /**\n   * Handles the command event.\n   *\n   * @param {CommandEvent} evt - The command event.\n   */\n  #handleCommandEvent = evt => {\n    if (evt.command === '--me-open' && !this.open) {\n      this.show();\n    }\n\n    if (evt.command === '--me-close' && this.open) {\n      const requestCloseEvent = this.#createRequestCloseEvent('external-invoker');\n\n      this.dispatchEvent(requestCloseEvent);\n\n      if (requestCloseEvent.defaultPrevented) {\n        !this.noAnimations && this.#applyPulseEffectOnDialog();\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  /**\n   * Handles the slotchange event of the footer slot.\n   */\n  #handleFooterSlotChange = () => {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    /** @type {Nullable<HTMLElement>} */\n    const footerEl = this.#dialogEl.querySelector('.dialog__footer');\n\n    if (footerEl === null) {\n      return;\n    }\n\n    const footerSlotNodes = this.#footerSlotEl?.assignedNodes();\n    const hasFooterSlotNodes = footerSlotNodes ? footerSlotNodes.length > 0 : false;\n\n    footerEl.hidden = !hasFooterSlotNodes;\n  };\n\n  /**\n   * Handles the slotchange event of the close slot.\n   */\n  #handleCloseSlotChange = () => {\n    this.#updateCloseLabel();\n  };\n\n  /**\n   * Creates a request close event.\n   *\n   * @param {CloseRequestReason} reason - The reason that the modal is about to close.\n   */\n  #createRequestCloseEvent(reason) {\n    return new CustomEvent('me-request-close', {\n      bubbles: true,\n      composed: true,\n      cancelable: true,\n      detail: {\n        reason,\n        element: this\n      }\n    });\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'open' | 'staticBackdrop' | 'noHeader' | 'noAnimations' | 'noCloseButton' | 'fullscreen' | 'preserveOverflow' | 'placement' | 'closeLabel'} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Opens the modal if it is closed, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.show();\n   */\n  show() {\n    if (this.open) {\n      return;\n    }\n\n    this.open = true;\n  }\n\n  /**\n   * Closes the modal if it is open, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.hide();\n   */\n  hide() {\n    if (!this.open) {\n      return;\n    }\n\n    this.open = false;\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='modal-element']\n   * @example\n   * ModalElement.defineCustomElement('my-modal');\n   */\n  static defineCustomElement(elementName = 'modal-element') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, ModalElement);\n    }\n  }\n}\n\nexport { ModalElement };\n","import { ModalElement } from './modal-element.js';\n\nModalElement.defineCustomElement();\n\nexport { ModalElement };\n","/*!\n * @georapbox/files-dropzone-element\n * A custom element that creates a drag and drop zone for files\n *\n * @version 2.1.1\n * @homepage https://github.com/georapbox/files-dropzone-element#readme\n * @author George Raptis <georapbox@gmail.com>\n * @license MIT\n */\nfunction h(o,e=\"\"){if(!e)return!0;let t=[...new Set(e.split(\",\").map(r=>r.trim()).filter(Boolean))],i=o.type,s=i.replace(/\\/.*$/,\"\");for(let r of t)if(r.charAt(0)===\".\"){if(o.name.toLowerCase().indexOf(r.toLowerCase(),o.name.length-r.length)!==-1)return!0}else if(/\\/\\*$/.test(r)){if(s===r.replace(/\\/.*$/,\"\"))return!0}else if(i===r)return!0;return!1}var E=new Map([[\"aac\",\"audio/aac\"],[\"abw\",\"application/x-abiword\"],[\"arc\",\"application/x-freearc\"],[\"avif\",\"image/avif\"],[\"avi\",\"video/x-msvideo\"],[\"azw\",\"application/vnd.amazon.ebook\"],[\"bin\",\"application/octet-stream\"],[\"bmp\",\"image/bmp\"],[\"bz\",\"application/x-bzip\"],[\"bz2\",\"application/x-bzip2\"],[\"cda\",\"application/x-cdf\"],[\"csh\",\"application/x-csh\"],[\"css\",\"text/css\"],[\"csv\",\"text/csv\"],[\"doc\",\"application/msword\"],[\"docx\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"],[\"eot\",\"application/vnd.ms-fontobject\"],[\"epub\",\"application/epub+zip\"],[\"gz\",\"application/gzip\"],[\"gif\",\"image/gif\"],[\"heic\",\"image/heic\"],[\"heif\",\"image/heif\"],[\"htm\",\"text/html\"],[\"html\",\"text/html\"],[\"ico\",\"image/vnd.microsoft.icon\"],[\"ics\",\"text/calendar\"],[\"jar\",\"application/java-archive\"],[\"jpeg\",\"image/jpeg\"],[\"jpg\",\"image/jpeg\"],[\"jxl\",\"image/jxl\"],[\"js\",\"text/javascript\"],[\"json\",\"application/json\"],[\"jsonld\",\"application/ld+json\"],[\"markdown\",\"text/markdown\"],[\"md\",\"text/markdown\"],[\"mid\",\"audio/midi\"],[\"midi\",\"audio/midi\"],[\"mjs\",\"text/javascript\"],[\"mp3\",\"audio/mpeg\"],[\"mp4\",\"video/mp4\"],[\"mpeg\",\"video/mpeg\"],[\"mpkg\",\"application/vnd.apple.installer+xml\"],[\"odp\",\"application/vnd.oasis.opendocument.presentation\"],[\"ods\",\"application/vnd.oasis.opendocument.spreadsheet\"],[\"odt\",\"application/vnd.oasis.opendocument.text\"],[\"oga\",\"audio/ogg\"],[\"ogv\",\"video/ogg\"],[\"ogx\",\"application/ogg\"],[\"opus\",\"audio/opus\"],[\"otf\",\"font/otf\"],[\"png\",\"image/png\"],[\"pdf\",\"application/pdf\"],[\"php\",\"application/x-httpd-php\"],[\"ppt\",\"application/vnd.ms-powerpoint\"],[\"pptx\",\"application/vnd.openxmlformats-officedocument.presentationml.presentation\"],[\"rar\",\"application/vnd.rar\"],[\"rtf\",\"application/rtf\"],[\"sh\",\"application/x-sh\"],[\"svg\",\"image/svg+xml\"],[\"swf\",\"application/x-shockwave-flash\"],[\"tar\",\"application/x-tar\"],[\"tif\",\"image/tiff\"],[\"tiff\",\"image/tiff\"],[\"ts\",\"video/mp2t\"],[\"ttf\",\"font/ttf\"],[\"txt\",\"text/plain\"],[\"vsd\",\"application/vnd.visio\"],[\"wav\",\"audio/wav\"],[\"weba\",\"audio/webm\"],[\"webm\",\"video/webm\"],[\"webp\",\"image/webp\"],[\"woff\",\"font/woff\"],[\"woff2\",\"font/woff2\"],[\"xhtml\",\"application/xhtml+xml\"],[\"xls\",\"application/vnd.ms-excel\"],[\"xlsx\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"],[\"xml\",\"application/xml\"],[\"xul\",\"application/vnd.mozilla.xul+xml\"],[\"zip\",\"application/zip\"],[\"7z\",\"application/x-7z-compressed\"],[\"mkv\",\"video/x-matroska\"],[\"mov\",\"video/quicktime\"],[\"msg\",\"application/vnd.ms-outlook\"]]),f=[\".DS_Store\",\"Thumbs.db\"],z=o=>{let{name:e}=o;if(e&&e.lastIndexOf(\".\")!==-1&&!o.type){let i=(e.split(\".\").pop()||\"\").toLowerCase(),s=E.get(i);s&&Object.defineProperty(o,\"type\",{value:s,writable:!1,configurable:!1,enumerable:!0})}return o},g=(o,e)=>{let t=z(o);if(typeof t.path!=\"string\"){let{webkitRelativePath:i}=o;Object.defineProperty(t,\"path\",{value:typeof e==\"string\"?e:i||o.name,writable:!1,configurable:!1,enumerable:!0})}return t},u=async o=>await new Promise((e,t)=>{o.readEntries(e,t)}),x=async o=>{let e=[],t=await u(o);for(;t.length>0;)e.push(...t),t=await u(o);return e},y=o=>new Promise((e,t)=>{o.file(i=>e(g(i,o.fullPath)),t)}),w=async o=>{let e=[],t=[];for(let i of o){if(i.kind!==\"file\")continue;let s=i.getAsEntry?i.getAsEntry():i.webkitGetAsEntry();t.push(s)}for(;t.length>0;){let i=t.shift();if(i)if(i.isFile){let s=await y(i);f.indexOf(s.name)===-1&&e.push(s)}else i.isDirectory&&t.push(...await x(i.createReader()));else continue}return e},m=async o=>{let e=[];for(let t of o)f.indexOf(t.name)===-1&&e.push(g(t));return e},d=async o=>o.dataTransfer?o.dataTransfer.items?await w(o.dataTransfer.items):await m(o.dataTransfer.files):await m(o.target.files);var O=String.raw,L=String.raw,b=\"files-dropzone\",v=document.createElement(\"template\"),F=O`\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49, 132, 253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition:\n      border var(--dropzone-transition-duration) ease-in-out,\n      background-color var(--dropzone-transition-duration) ease-in-out,\n      color var(--dropzone-transition-duration) ease-in-out,\n      box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;v.innerHTML=L`\n  <style>\n    ${F}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden />\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot><span>Drag 'n' drop files here, or click to select files</span></slot>\n  </div>\n`;var a=class o extends HTMLElement{static ERROR_CODES={FILE_DIALOG_OPEN_FAILED:\"FILE_DIALOG_OPEN_FAILED\",FILE_INPUT_CHANGE_FAILED:\"FILE_INPUT_CHANGE_FAILED\",DROP_EVENT_PROCESSING_FAILED:\"DROP_EVENT_PROCESSING_FAILED\",UNKNOWN_ERROR:\"UNKNOWN_ERROR\"};static REJECTION_CODES={TOO_MANY_FILES:\"TOO_MANY_FILES\",FILE_TOO_LARGE:\"FILE_TOO_LARGE\",FILE_TOO_SMALL:\"FILE_TOO_SMALL\",INVALID_MIME_TYPE:\"INVALID_MIME_TYPE\"};#t=null;#e=null;constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\",delegatesFocus:!0}).appendChild(v.content.cloneNode(!0)),this.shadowRoot&&(this.#t=this.shadowRoot.getElementById(\"file-input\"),this.#e=this.shadowRoot.getElementById(\"dropzone\"))}static get observedAttributes(){return[\"accept\",\"disabled\",\"multiple\"]}attributeChangedCallback(e,t,i){e===\"accept\"&&t!==i&&this.#t&&(this.#t.accept=this.accept),e===\"disabled\"&&t!==i&&this.#t&&(this.#t.disabled=this.disabled,this.disabled?(this.#e?.removeAttribute(\"tabindex\"),this.#e?.setAttribute(\"aria-disabled\",\"true\")):(this.#e?.setAttribute(\"tabindex\",\"0\"),this.#e?.setAttribute(\"aria-disabled\",\"false\"))),e===\"multiple\"&&t!==i&&this.#t&&(this.#t.multiple=this.multiple)}connectedCallback(){this.#o(\"accept\"),this.#o(\"disabled\"),this.#o(\"maxFiles\"),this.#o(\"maxSize\"),this.#o(\"minSize\"),this.#o(\"multiple\"),this.#o(\"autoFocus\"),this.#o(\"noStyle\"),this.#t?.addEventListener(\"change\",this.#s),this.#e?.addEventListener(\"dragenter\",this.#n),this.#e?.addEventListener(\"dragover\",this.#a),this.#e?.addEventListener(\"dragleave\",this.#d),this.#e?.addEventListener(\"drop\",this.#l),this.#e?.addEventListener(\"click\",this.#c),this.#e?.addEventListener(\"keyup\",this.#p),this.autoFocus&&this.#e?.focus()}disconnectedCallback(){this.#t?.removeEventListener(\"change\",this.#s),this.#e?.removeEventListener(\"dragenter\",this.#n),this.#e?.removeEventListener(\"dragover\",this.#a),this.#e?.removeEventListener(\"dragleave\",this.#d),this.#e?.removeEventListener(\"drop\",this.#l),this.#e?.removeEventListener(\"click\",this.#c),this.#e?.removeEventListener(\"keyup\",this.#p)}get accept(){return this.getAttribute(\"accept\")||\"\"}set accept(e){this.setAttribute(\"accept\",e!=null?e.toString():e)}get disabled(){return this.hasAttribute(\"disabled\")}set disabled(e){this.toggleAttribute(\"disabled\",!!e)}get maxFiles(){let e=Number(this.getAttribute(\"max-files\"))||0;return e<=0?1/0:Math.floor(Math.abs(e))}set maxFiles(e){this.setAttribute(\"max-files\",e!=null?e.toString():e)}get maxSize(){let e=this.getAttribute(\"max-size\");if(e===null)return 1/0;let t=Number(e);return Number.isNaN(t)?1/0:t}set maxSize(e){this.setAttribute(\"max-size\",e!=null?e.toString():e)}get minSize(){let e=this.getAttribute(\"min-size\");if(e===null)return 0;let t=Number(e);return Number.isNaN(t)?0:t}set minSize(e){this.setAttribute(\"min-size\",e!=null?e.toString():e)}get multiple(){return this.hasAttribute(\"multiple\")}set multiple(e){this.toggleAttribute(\"multiple\",!!e)}get autoFocus(){return this.hasAttribute(\"auto-focus\")}set autoFocus(e){this.toggleAttribute(\"auto-focus\",!!e)}get noStyle(){return this.hasAttribute(\"no-style\")}set noStyle(e){this.toggleAttribute(\"no-style\",!!e)}#i(e,t,i){let s={bubbles:!0,composed:!0,cancelable:!1,...i,detail:t},r=new CustomEvent(`${b}-${e}`,s);return this.dispatchEvent(r)}#r(e,t){let i={code:e,error:t};this.#i(\"error\",i)}#s=async e=>{try{this.#h(await d(e))}catch(t){this.#r(o.ERROR_CODES.FILE_INPUT_CHANGE_FAILED,t)}};#n=()=>{this.disabled||this.#i(\"dragenter\")};#a=e=>{if(e.preventDefault(),this.disabled){e.dataTransfer.dropEffect=\"none\";return}e.dataTransfer.dropEffect=\"copy\",this.#e&&(this.#e.classList.add(\"dropzone--dragover\"),this.#e.part.add(\"dropzone--dragover\")),this.#i(\"dragover\")};#d=()=>{this.disabled||(this.#e&&(this.#e.classList.remove(\"dropzone--dragover\"),this.#e.part.remove(\"dropzone--dragover\")),this.#i(\"dragleave\"))};#l=async e=>{if(!this.disabled){e.preventDefault(),this.#e&&(this.#e.classList.remove(\"dropzone--dragover\"),this.#e.part.remove(\"dropzone--dragover\"));try{this.#h(await d(e))}catch(t){this.#r(o.ERROR_CODES.DROP_EVENT_PROCESSING_FAILED,t)}}};#c=()=>{this.disabled||this.openFileDialog()};#p=e=>{this.disabled||(e.key===\" \"||e.key===\"Enter\")&&this.openFileDialog()};#h(e){if(!Array.isArray(e)||!e.length)return;let t=[],i=[],s=e.length;if(!this.multiple&&s>1)for(let r of e)i.push({file:r,errors:[{code:o.REJECTION_CODES.TOO_MANY_FILES,message:\"Too many files selected. Only 1 file is allowed.\"}]});else if(this.multiple&&s>this.maxFiles)for(let r of e)i.push({file:r,errors:[{code:o.REJECTION_CODES.TOO_MANY_FILES,message:`Too many files selected. Only ${this.maxFiles} ${this.maxFiles>1?\"files are\":\"file is\"} allowed.`}]});else for(let r of e){let l=h(r,this.accept),c=r.size>this.maxSize,p=r.size<this.minSize;if(l&&!c&&!p)t.push(r);else{let n=[];l||n.push({code:o.REJECTION_CODES.INVALID_MIME_TYPE,message:`File type \"${r.type}\" is not accepted.`}),c&&n.push({code:o.REJECTION_CODES.FILE_TOO_LARGE,message:`File size ${r.size} exceeds the maximum size of ${this.maxSize}.`}),p&&n.push({code:o.REJECTION_CODES.FILE_TOO_SMALL,message:`File size ${r.size} is smaller than the minimum size of ${this.minSize}.`}),i.push({file:r,errors:n})}}this.#i(\"drop\",{acceptedFiles:t,rejectedFiles:i}),t.length>0&&this.#i(\"drop-accepted\",{acceptedFiles:t}),i.length>0&&this.#i(\"drop-rejected\",{rejectedFiles:i}),this.#t&&(this.#t.value=this.#t.defaultValue)}openFileDialog(){if(!(this.disabled||!this.#t)){if(\"showPicker\"in HTMLInputElement.prototype&&typeof this.#t.showPicker==\"function\"){try{this.#t.showPicker()}catch(e){this.#r(o.ERROR_CODES.FILE_DIALOG_OPEN_FAILED,e)}return}this.#t.click()}}#o(e){let t=this;if(Object.prototype.hasOwnProperty.call(t,e)){let i=t[e];delete t[e],t[e]=i}}static defineCustomElement(e=b){typeof window<\"u\"&&!window.customElements.get(e)&&window.customElements.define(e,o)}};a.defineCustomElement();export{a as FilesDropzone};\n//# sourceMappingURL=files-dropzone-defined.js.map\n","// @ts-check\n\n/**\n * Checks if a file is valid based on the accepted file type specifiers.\n *\n * @param {File} file - The File object to validate.\n * @param {string} [acceptedTypeSpecifiers=''] - The accepted file type specifiers.\n * @returns {boolean} - True if the file is valid, false otherwise.\n */\nexport function isValidFile(file, acceptedTypeSpecifiers = '') {\n  if (!acceptedTypeSpecifiers) {\n    return true;\n  }\n\n  const acceptedMimeTypesList = [\n    ...new Set(\n      acceptedTypeSpecifiers\n        .split(',')\n        .map(v => v.trim())\n        .filter(Boolean)\n    )\n  ];\n\n  const fileMimeType = file.type;\n  const baseMimeType = fileMimeType.replace(/\\/.*$/, '');\n\n  for (const validType of acceptedMimeTypesList) {\n    if (validType.charAt(0) === '.') {\n      if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n        return true;\n      }\n    } else if (/\\/\\*$/.test(validType)) {\n      // Check for mime type that looks like \"image/*\" or similar.\n      if (baseMimeType === validType.replace(/\\/.*$/, '')) {\n        return true;\n      }\n    } else {\n      if (fileMimeType === validType) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n","// @ts-check\n\n/**\n * A map of common file extensions and their associated MIME types.\n */\nconst COMMON_MIME_TYPES = new Map([\n  // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n  ['aac', 'audio/aac'],\n  ['abw', 'application/x-abiword'],\n  ['arc', 'application/x-freearc'],\n  ['avif', 'image/avif'],\n  ['avi', 'video/x-msvideo'],\n  ['azw', 'application/vnd.amazon.ebook'],\n  ['bin', 'application/octet-stream'],\n  ['bmp', 'image/bmp'],\n  ['bz', 'application/x-bzip'],\n  ['bz2', 'application/x-bzip2'],\n  ['cda', 'application/x-cdf'],\n  ['csh', 'application/x-csh'],\n  ['css', 'text/css'],\n  ['csv', 'text/csv'],\n  ['doc', 'application/msword'],\n  ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n  ['eot', 'application/vnd.ms-fontobject'],\n  ['epub', 'application/epub+zip'],\n  ['gz', 'application/gzip'],\n  ['gif', 'image/gif'],\n  ['heic', 'image/heic'],\n  ['heif', 'image/heif'],\n  ['htm', 'text/html'],\n  ['html', 'text/html'],\n  ['ico', 'image/vnd.microsoft.icon'],\n  ['ics', 'text/calendar'],\n  ['jar', 'application/java-archive'],\n  ['jpeg', 'image/jpeg'],\n  ['jpg', 'image/jpeg'],\n  ['jxl', 'image/jxl'],\n  ['js', 'text/javascript'],\n  ['json', 'application/json'],\n  ['jsonld', 'application/ld+json'],\n  ['markdown', 'text/markdown'],\n  ['md', 'text/markdown'],\n  ['mid', 'audio/midi'],\n  ['midi', 'audio/midi'],\n  ['mjs', 'text/javascript'],\n  ['mp3', 'audio/mpeg'],\n  ['mp4', 'video/mp4'],\n  ['mpeg', 'video/mpeg'],\n  ['mpkg', 'application/vnd.apple.installer+xml'],\n  ['odp', 'application/vnd.oasis.opendocument.presentation'],\n  ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],\n  ['odt', 'application/vnd.oasis.opendocument.text'],\n  ['oga', 'audio/ogg'],\n  ['ogv', 'video/ogg'],\n  ['ogx', 'application/ogg'],\n  ['opus', 'audio/opus'],\n  ['otf', 'font/otf'],\n  ['png', 'image/png'],\n  ['pdf', 'application/pdf'],\n  ['php', 'application/x-httpd-php'],\n  ['ppt', 'application/vnd.ms-powerpoint'],\n  ['pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation'],\n  ['rar', 'application/vnd.rar'],\n  ['rtf', 'application/rtf'],\n  ['sh', 'application/x-sh'],\n  ['svg', 'image/svg+xml'],\n  ['swf', 'application/x-shockwave-flash'],\n  ['tar', 'application/x-tar'],\n  ['tif', 'image/tiff'],\n  ['tiff', 'image/tiff'],\n  ['ts', 'video/mp2t'],\n  ['ttf', 'font/ttf'],\n  ['txt', 'text/plain'],\n  ['vsd', 'application/vnd.visio'],\n  ['wav', 'audio/wav'],\n  ['weba', 'audio/webm'],\n  ['webm', 'video/webm'],\n  ['webp', 'image/webp'],\n  ['woff', 'font/woff'],\n  ['woff2', 'font/woff2'],\n  ['xhtml', 'application/xhtml+xml'],\n  ['xls', 'application/vnd.ms-excel'],\n  ['xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n  ['xml', 'application/xml'],\n  ['xul', 'application/vnd.mozilla.xul+xml'],\n  ['zip', 'application/zip'],\n  ['7z', 'application/x-7z-compressed'],\n\n  // Others\n  ['mkv', 'video/x-matroska'],\n  ['mov', 'video/quicktime'],\n  ['msg', 'application/vnd.ms-outlook']\n]);\n\nconst FILES_TO_IGNORE = [\n  // Thumbnail cache files for macOS and Windows\n  '.DS_Store', // macOs\n  'Thumbs.db' // Windows\n];\n\n/**\n * Adds a `type` property to the file object if it doesn't have one and the file has an extension.\n * This is needed because Firefox doesn't add a type property to files dragged from the desktop.\n * @bug https://bugzilla.mozilla.org/show_bug.cgi?id=1424689\n *\n * @param {File} file - The file object to add the type property to.\n * @returns {File} - The file object with the type property added.\n */\nconst toFileWithMimeType = file => {\n  const { name } = file;\n  const hasExtension = name && name.lastIndexOf('.') !== -1;\n\n  if (hasExtension && !file.type) {\n    const extension = (name.split('.').pop() || '').toLowerCase();\n    const type = COMMON_MIME_TYPES.get(extension);\n\n    if (type) {\n      Object.defineProperty(file, 'type', {\n        value: type,\n        writable: false,\n        configurable: false,\n        enumerable: true\n      });\n    }\n  }\n\n  return file;\n};\n\n/**\n * Adds a `path` property to the file object if it doesn't have one.\n * If `path` is not provided, the `webkitRelativePath` property of the file will be used\n * or the file's name if `webkitRelativePath` is not available.\n *\n * @param {File} file - The file object to add the path property to.\n * @param {string} [path] - The path to set on the file object.\n * @returns {File} - The file object with the path property added.\n */\nconst toFileWithPath = (file, path) => {\n  const fileWithMimeType = toFileWithMimeType(file);\n\n  // @ts-ignore\n  if (typeof fileWithMimeType.path !== 'string') {\n    const { webkitRelativePath } = file;\n\n    Object.defineProperty(fileWithMimeType, 'path', {\n      value: typeof path === 'string' ? path : webkitRelativePath || file.name,\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n  }\n\n  return fileWithMimeType;\n};\n\n/**\n * Wrap `FileSystemDirectoryReader.readEntries` in a promise to make working with read entries easier.\n * https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryReader/readEntries\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */\nconst readEntriesPromise = async directoryReader => {\n  return await new Promise((resolve, reject) => {\n    directoryReader.readEntries(resolve, reject);\n  });\n};\n\n/**\n * Read all entries in a directory or sub-directory\n * by calling `readEntries` until it returns an empty array.\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */\nconst readAllDirectoryEntries = async directoryReader => {\n  const entries = [];\n  let readEntries = await readEntriesPromise(directoryReader);\n\n  while (readEntries.length > 0) {\n    entries.push(...readEntries);\n    readEntries = await readEntriesPromise(directoryReader);\n  }\n\n  return entries;\n};\n\n/**\n * Get a `File` object from a `FileSystemFileEntry` object.\n *\n * @param {FileSystemFileEntry} fileEntry - The file entry to get a `File` object from.\n * @returns {Promise<File>} - A promise that resolves with a `File` object.\n */\nconst getFileFromFileEntry = fileEntry => {\n  return new Promise((resolve, reject) => {\n    fileEntry.file(file => resolve(toFileWithPath(file, fileEntry.fullPath)), reject);\n  });\n};\n\n/**\n * Get an array of `File` objects from a `DataTransferItemList` object.\n *\n * @param {DataTransferItemList} dataTransferItemList - The item list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nconst getFilesFromDataTransferItemList = async dataTransferItemList => {\n  const files = [];\n\n  // Chromium browsers read only 100 files at a time as per the spec, so we need to use\n  // BFS (Breadth-first search) to traverse the entire directory/file structure.\n  // https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry#javascript_content\n  const queue = [];\n\n  for (const item of dataTransferItemList) {\n    if (item.kind !== 'file') {\n      // Ignore non-file items, such as links.\n      continue;\n    }\n\n    // https://developer.mozilla.org/docs/Web/API/DataTransferItem/webkitGetAsEntry\n    // This function is implemented as `webkitGetAsEntry()` in non-WebKit browsers\n    // including Firefox at this time but it may be renamed to `getAsEntry()` in the future.\n    // @ts-ignore\n    const entry = item.getAsEntry ? item.getAsEntry() : item.webkitGetAsEntry();\n\n    queue.push(entry);\n  }\n\n  while (queue.length > 0) {\n    const entry = queue.shift();\n\n    if (!entry) {\n      continue;\n    } else if (entry.isFile) {\n      const file = await getFileFromFileEntry(entry);\n\n      if (FILES_TO_IGNORE.indexOf(file.name) === -1) {\n        files.push(file);\n      }\n    } else if (entry.isDirectory) {\n      queue.push(...(await readAllDirectoryEntries(entry.createReader())));\n    }\n  }\n\n  return files;\n};\n\n/**\n * Get an array of `File` objects from a `FileList` object.\n *\n * @param {FileList} fileList - The file list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nconst getFilesFromFileList = async fileList => {\n  const files = [];\n\n  for (const file of fileList) {\n    if (FILES_TO_IGNORE.indexOf(file.name) === -1) {\n      files.push(toFileWithPath(file));\n    }\n  }\n\n  return files;\n};\n\n/**\n * Get an array of `File` objects from an event.\n * This function supports both `drop` and `change` events.\n *\n * @param {*} evt - The event to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nexport const getFilesFromEvent = async evt => {\n  if (evt.dataTransfer) {\n    return evt.dataTransfer.items\n      ? await getFilesFromDataTransferItemList(evt.dataTransfer.items)\n      : await getFilesFromFileList(evt.dataTransfer.files);\n  }\n\n  return await getFilesFromFileList(evt.target.files);\n};\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * Stable identifier for error codes used in the `files-dropzone-error` event.\n *\n * @typedef {typeof FilesDropzone.ERROR_CODES[keyof typeof FilesDropzone.ERROR_CODES]} FilesDropzoneErrorCode\n */\n\n/**\n * The detail payload for the `files-dropzone-error` event.\n *\n * @typedef {Object} FilesDropzoneErrorDetail\n * @property {FilesDropzoneErrorCode} code - Stable identifier for the type of error that occurred.\n * @property {unknown} error - The underlying error object or value that triggered the event.\n */\n\n/**\n * Stable identifier for rejection codes used in the various drop-related events.\n *\n * @typedef {typeof FilesDropzone.REJECTION_CODES[keyof typeof FilesDropzone.REJECTION_CODES]} FilesDropzoneRejectionCode\n */\n\nimport { isValidFile } from './utils/is-valid-file.js';\nimport { getFilesFromEvent } from './utils/files-selector.js';\n\nconst css = String.raw;\nconst html = String.raw;\nconst COMPONENT_NAME = 'files-dropzone';\nconst template = document.createElement('template');\n\nconst styles = css`\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49, 132, 253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition:\n      border var(--dropzone-transition-duration) ease-in-out,\n      background-color var(--dropzone-transition-duration) ease-in-out,\n      color var(--dropzone-transition-duration) ease-in-out,\n      box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;\n\ntemplate.innerHTML = html`\n  <style>\n    ${styles}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden />\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot><span>Drag 'n' drop files here, or click to select files</span></slot>\n  </div>\n`;\n\n/**\n * @summary A custom element that allows users to drag and drop files into it.\n * @documentation https://github.com/georapbox/files-dropzone-element\n *\n * @tagname files-dropzone - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {string} accept - A comma-separated list of unique file type specifiers describing file types to allow.\n * @property {boolean} disabled - Determines whether the dropzone is disabled.\n * @property {number} maxFiles - The maximum number of files allowed to be dropped.\n * @property {number} maxSize - The maximum file size allowed in bytes.\n * @property {number} minSize - The minimum file size allowed in bytes.\n * @property {boolean} multiple - Allows multiple files to be dropped.\n * @property {boolean} autoFocus - Automatically focuses the dropzone when it's connected to the DOM.\n * @property {boolean} noStyle - Prevents the dropzone from applying any styling.\n *\n * @attribute {string} accept - Reflects the accept property.\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {number} max-files - Reflects the maxFiles property.\n * @attribute {number} max-size - Reflects the maxSize property.\n * @attribute {number} min-size - Reflects the minSize property.\n * @attribute {boolean} multiple - Reflects the multiple property.\n * @attribute {boolean} auto-focus - Reflects the autoFocus property.\n * @attribute {boolean} no-style - Reflects the noStyle property.\n *\n * @slot - The default slot content of the dropzone.\n *\n * @csspart dropzone - The dropzone element.\n * @csspart dropzone--dragover - The state of the dropzone when dragging over it.\n *\n * @cssproperty --dropzone-border-width - The border width of the dropzone.\n * @cssproperty --dropzone-border-style - The border style of the dropzone.\n * @cssproperty --dropzone-border-radius - The border radius of the dropzone.\n * @cssproperty --dropzone-border-color - The border color of the dropzone.\n * @cssproperty --dropzone-border-color-dragover - The border color of the dropzone when dragging over it.\n * @cssproperty --dropzone-border-color-hover - The border color of the dropzone when hovering over it.\n * @cssproperty --dropzone-background-color - The background color of the dropzone.\n * @cssproperty --dropzone-background-color-dragover - The background color of the dropzone when dragging over it.\n * @cssproperty --dropzone-background-color-hover - The background color of the dropzone when hovering over it.\n * @cssproperty --dropzone-body-color - The text color of the dropzone.\n * @cssproperty --dropzone-body-color-dragover - The text color of the dropzone when dragging over it.\n * @cssproperty --dropzone-body-color-hover - The text color of the dropzone when hovering over it.\n * @cssproperty --dropzone-focus-shadow-rgb - The RGB value of the dropzone's focus shadow.\n * @cssproperty --dropzone-focus-box-shadow - The box shadow of the dropzone when focused.\n * @cssproperty --dropzone-transition-duration - The transition's duration for the dropzone area.\n *\n * @event files-dropzone-drop - Fired when files are dropped.\n * @event files-dropzone-drop-accepted - Fired when files dropped files are accepted.\n * @event files-dropzone-drop-rejected - Fired when files dropped files are rejected.\n * @event files-dropzone-dragenter - Fired when files are dragged into the dropzone.\n * @event files-dropzone-dragover - Fired when files are dragged over the dropzone.\n * @event files-dropzone-dragleave - Fired when files are dragged out of the dropzone.\n * @event files-dropzone-error - Fired when there is any error in the process of reading dropped files or directories.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method openFileDialog - Instance method. Opens the file dialog programmatically.\n */\nclass FilesDropzone extends HTMLElement {\n  /**\n   * Central list of error codes used in drop error event.\n   * @readonly\n   */\n  static ERROR_CODES = /** @type {const} */ ({\n    FILE_DIALOG_OPEN_FAILED: 'FILE_DIALOG_OPEN_FAILED',\n    FILE_INPUT_CHANGE_FAILED: 'FILE_INPUT_CHANGE_FAILED',\n    DROP_EVENT_PROCESSING_FAILED: 'DROP_EVENT_PROCESSING_FAILED',\n    UNKNOWN_ERROR: 'UNKNOWN_ERROR'\n  });\n\n  /**\n   * Central list of rejection codes for files that are rejected during the drop process.\n   * @readonly\n   */\n  static REJECTION_CODES = /** @type {const} */ ({\n    TOO_MANY_FILES: 'TOO_MANY_FILES',\n    FILE_TOO_LARGE: 'FILE_TOO_LARGE',\n    FILE_TOO_SMALL: 'FILE_TOO_SMALL',\n    INVALID_MIME_TYPE: 'INVALID_MIME_TYPE'\n  });\n\n  /** @type {Nullable<HTMLInputElement>} */\n  #fileInput = null;\n\n  /** @type {Nullable<HTMLElement>} */\n  #dropzoneEl = null;\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open', delegatesFocus: true });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    if (this.shadowRoot) {\n      this.#fileInput = /** @type {Nullable<HTMLInputElement>} */ (this.shadowRoot.getElementById('file-input'));\n      this.#dropzoneEl = this.shadowRoot.getElementById('dropzone');\n    }\n  }\n\n  static get observedAttributes() {\n    return ['accept', 'disabled', 'multiple'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'accept' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.accept = this.accept;\n    }\n\n    if (name === 'disabled' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.disabled = this.disabled;\n\n      if (this.disabled) {\n        this.#dropzoneEl?.removeAttribute('tabindex');\n        this.#dropzoneEl?.setAttribute('aria-disabled', 'true');\n      } else {\n        this.#dropzoneEl?.setAttribute('tabindex', '0');\n        this.#dropzoneEl?.setAttribute('aria-disabled', 'false');\n      }\n    }\n\n    if (name === 'multiple' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.multiple = this.multiple;\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('accept');\n    this.#upgradeProperty('disabled');\n    this.#upgradeProperty('maxFiles');\n    this.#upgradeProperty('maxSize');\n    this.#upgradeProperty('minSize');\n    this.#upgradeProperty('multiple');\n    this.#upgradeProperty('autoFocus');\n    this.#upgradeProperty('noStyle');\n\n    this.#fileInput?.addEventListener('change', this.#handleFileInputChange);\n    this.#dropzoneEl?.addEventListener('dragenter', this.#handleDragEnter);\n    this.#dropzoneEl?.addEventListener('dragover', this.#handleDragOver);\n    this.#dropzoneEl?.addEventListener('dragleave', this.#handleDragLeave);\n    this.#dropzoneEl?.addEventListener('drop', this.#handleDrop);\n    this.#dropzoneEl?.addEventListener('click', this.#handleClick);\n    this.#dropzoneEl?.addEventListener('keyup', this.#handleKeyUp);\n\n    this.autoFocus && this.#dropzoneEl?.focus();\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#fileInput?.removeEventListener('change', this.#handleFileInputChange);\n    this.#dropzoneEl?.removeEventListener('dragenter', this.#handleDragEnter);\n    this.#dropzoneEl?.removeEventListener('dragover', this.#handleDragOver);\n    this.#dropzoneEl?.removeEventListener('dragleave', this.#handleDragLeave);\n    this.#dropzoneEl?.removeEventListener('drop', this.#handleDrop);\n    this.#dropzoneEl?.removeEventListener('click', this.#handleClick);\n    this.#dropzoneEl?.removeEventListener('keyup', this.#handleKeyUp);\n  }\n\n  /**\n   * @type {string} - A comma-separated list of unique file type specifiers describing file types to allow.\n   * @attribute accept - Reflects the accept property.\n   */\n  get accept() {\n    return this.getAttribute('accept') || '';\n  }\n\n  set accept(value) {\n    this.setAttribute('accept', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} - Determines whether the dropzone is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', !!value);\n  }\n\n  /**\n   * @type {number} - The maximum number of files allowed to be dropped.\n   * @default Infinity\n   * @attribute max-files - Reflects the maxFiles property.\n   */\n  get maxFiles() {\n    const num = Number(this.getAttribute('max-files')) || 0;\n\n    if (num <= 0) {\n      return Infinity;\n    }\n\n    return Math.floor(Math.abs(num));\n  }\n\n  set maxFiles(value) {\n    this.setAttribute('max-files', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} - The maximum file size allowed in bytes.\n   * @default Infinity\n   * @attribute max-size - Reflects the maxSize property.\n   */\n  get maxSize() {\n    const value = this.getAttribute('max-size');\n\n    if (value === null) {\n      return Infinity;\n    }\n\n    const num = Number(value);\n\n    return Number.isNaN(num) ? Infinity : num;\n  }\n\n  set maxSize(value) {\n    this.setAttribute('max-size', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} - The minimum file size allowed in bytes.\n   * @default 0\n   * @attribute min-size - Reflects the minSize property.\n   */\n  get minSize() {\n    const value = this.getAttribute('min-size');\n\n    if (value === null) {\n      return 0;\n    }\n\n    const num = Number(value);\n\n    return Number.isNaN(num) ? 0 : num;\n  }\n\n  set minSize(value) {\n    this.setAttribute('min-size', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} - Allows multiple files to be dropped.\n   * @default false\n   * @attribute multiple - Reflects the multiple property.\n   */\n  get multiple() {\n    return this.hasAttribute('multiple');\n  }\n\n  set multiple(value) {\n    this.toggleAttribute('multiple', !!value);\n  }\n\n  /**\n   * @type {boolean} - Automatically focuses the dropzone when it's connected to the DOM.\n   * @default false\n   * @attribute auto-focus - Reflects the autoFocus property.\n   */\n  get autoFocus() {\n    return this.hasAttribute('auto-focus');\n  }\n\n  set autoFocus(value) {\n    this.toggleAttribute('auto-focus', !!value);\n  }\n\n  /**\n   * @type {boolean} - Prevents the dropzone from applying any styling.\n   * @default false\n   * @attribute no-style - Reflects the noStyle property.\n   */\n  get noStyle() {\n    return this.hasAttribute('no-style');\n  }\n\n  set noStyle(value) {\n    this.toggleAttribute('no-style', !!value);\n  }\n\n  /**\n   * Emit a custom event with the given name and detail.\n   *\n   * @template D\n   * @param {string} name - The name of the event.\n   * @param {D} [detail] - The detail payload of the event.\n   * @param {CustomEventInit<D>} [init] - Override the default event initialization options.\n   * @returns {boolean} - Returns false if at least one event listener called `preventDefault()`, otherwise true.\n   */\n  #emitEvent(name, detail, init) {\n    const options = {\n      bubbles: true,\n      composed: true,\n      cancelable: false,\n      ...init,\n      detail\n    };\n    const evt = new CustomEvent(`${COMPONENT_NAME}-${name}`, options);\n    return this.dispatchEvent(evt);\n  }\n\n  /**\n   * Emit a standardized error event with typed detail.\n   *\n   * @param {FilesDropzoneErrorCode} code - Stable identifier for the type of error that occurred.\n   * @param {unknown} error - The underlying error that triggered the event.\n   */\n  #emitErrorEvent(code, error) {\n    /** @type {FilesDropzoneErrorDetail} */\n    const detail = { code, error };\n\n    this.#emitEvent('error', detail);\n  }\n\n  /**\n   * Handles the change event of the file input.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleFileInputChange = async evt => {\n    try {\n      this.#handleFilesSelect(await getFilesFromEvent(evt));\n    } catch (err) {\n      this.#emitErrorEvent(FilesDropzone.ERROR_CODES.FILE_INPUT_CHANGE_FAILED, err);\n    }\n  };\n\n  /**\n   * Handles the dragenter event of the dropzone.\n   */\n  #handleDragEnter = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.#emitEvent('dragenter');\n  };\n\n  /**\n   * Handles the dragover event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleDragOver = evt => {\n    evt.preventDefault();\n\n    if (this.disabled) {\n      evt.dataTransfer.dropEffect = 'none';\n      return;\n    }\n\n    evt.dataTransfer.dropEffect = 'copy';\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.add('dropzone--dragover');\n      this.#dropzoneEl.part.add('dropzone--dragover');\n    }\n\n    this.#emitEvent('dragover');\n  };\n\n  /**\n   * Handles the dragleave event of the dropzone.\n   */\n  #handleDragLeave = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.remove('dropzone--dragover');\n      this.#dropzoneEl.part.remove('dropzone--dragover');\n    }\n\n    this.#emitEvent('dragleave');\n  };\n\n  /**\n   * Handles the drop event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleDrop = async evt => {\n    if (this.disabled) {\n      return;\n    }\n\n    evt.preventDefault();\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.remove('dropzone--dragover');\n      this.#dropzoneEl.part.remove('dropzone--dragover');\n    }\n\n    try {\n      this.#handleFilesSelect(await getFilesFromEvent(evt));\n    } catch (err) {\n      this.#emitErrorEvent(FilesDropzone.ERROR_CODES.DROP_EVENT_PROCESSING_FAILED, err);\n    }\n  };\n\n  /**\n   * Handles the click event of the dropzone.\n   */\n  #handleClick = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.openFileDialog();\n  };\n\n  /**\n   * Handles the keyup event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleKeyUp = evt => {\n    if (this.disabled) {\n      return;\n    }\n\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      this.openFileDialog();\n    }\n  };\n\n  /**\n   * Handles the selection of files.\n   *\n   * @param {File[]} files - The files to handle.\n   */\n  #handleFilesSelect(files) {\n    if (!Array.isArray(files) || !files.length) {\n      return;\n    }\n\n    const acceptedFiles = [];\n    const rejectedFiles = [];\n    const filesLength = files.length;\n\n    // If the component is not in multiple mode, reject all files.\n    if (!this.multiple && filesLength > 1) {\n      for (const file of files) {\n        rejectedFiles.push({\n          file,\n          errors: [\n            {\n              code: FilesDropzone.REJECTION_CODES.TOO_MANY_FILES,\n              message: `Too many files selected. Only 1 file is allowed.`\n            }\n          ]\n        });\n      }\n    } else if (this.multiple && filesLength > this.maxFiles) {\n      // If the component is in multiple mode, but the number of files exceeds\n      // the maxFiles attribute, reject all files.\n      for (const file of files) {\n        rejectedFiles.push({\n          file,\n          errors: [\n            {\n              code: FilesDropzone.REJECTION_CODES.TOO_MANY_FILES,\n              message: `Too many files selected. Only ${this.maxFiles} ${this.maxFiles > 1 ? 'files are' : 'file is'} allowed.`\n            }\n          ]\n        });\n      }\n    } else {\n      // Validate each file. If it's valid, add it to the accepted files array,\n      // otherwise add it to the rejected files array.\n      for (const file of files) {\n        const fileHasValidType = isValidFile(file, this.accept);\n        const fileExceedsMaxSize = file.size > this.maxSize;\n        const fileIsSmallerThanMinSize = file.size < this.minSize;\n\n        if (fileHasValidType && !fileExceedsMaxSize && !fileIsSmallerThanMinSize) {\n          acceptedFiles.push(file);\n        } else {\n          const errors = [];\n\n          if (!fileHasValidType) {\n            errors.push({\n              code: FilesDropzone.REJECTION_CODES.INVALID_MIME_TYPE,\n              message: `File type \"${file.type}\" is not accepted.`\n            });\n          }\n\n          if (fileExceedsMaxSize) {\n            errors.push({\n              code: FilesDropzone.REJECTION_CODES.FILE_TOO_LARGE,\n              message: `File size ${file.size} exceeds the maximum size of ${this.maxSize}.`\n            });\n          }\n\n          if (fileIsSmallerThanMinSize) {\n            errors.push({\n              code: FilesDropzone.REJECTION_CODES.FILE_TOO_SMALL,\n              message: `File size ${file.size} is smaller than the minimum size of ${this.minSize}.`\n            });\n          }\n\n          rejectedFiles.push({ file, errors });\n        }\n      }\n    }\n\n    this.#emitEvent('drop', { acceptedFiles, rejectedFiles });\n\n    if (acceptedFiles.length > 0) {\n      this.#emitEvent('drop-accepted', { acceptedFiles });\n    }\n\n    if (rejectedFiles.length > 0) {\n      this.#emitEvent('drop-rejected', { rejectedFiles });\n    }\n\n    if (this.#fileInput) {\n      this.#fileInput.value = this.#fileInput.defaultValue;\n    }\n  }\n\n  /**\n   * Opens the file dialog programmatically.\n   */\n  openFileDialog() {\n    if (this.disabled || !this.#fileInput) {\n      return;\n    }\n\n    // In modern browsers, use the showPicker() method if available.\n    // This way we are able to detect if the file dialog was blocked by the browser\n    // (e.g. if the method was called outside a user gesture event).\n    if ('showPicker' in HTMLInputElement.prototype && typeof this.#fileInput.showPicker === 'function') {\n      try {\n        this.#fileInput.showPicker();\n      } catch (err) {\n        this.#emitErrorEvent(FilesDropzone.ERROR_CODES.FILE_DIALOG_OPEN_FAILED, err);\n      }\n      return;\n    }\n\n    // Fallback for browsers that do not support showPicker().\n    // This may not work if the method is called outside a user gesture event.\n    // In such cases, the browser may block the file dialog from opening but\n    // most likely it won't throw an error rather just a warning in the console.\n    this.#fileInput.click();\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'accept' | 'disabled' | 'maxFiles' | 'maxSize' | 'minSize' | 'multiple' | 'autoFocus' | 'noStyle'} prop - The property name to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='files-dropzone'] - The name of the custom element.\n   * @example\n   *\n   * FilesDropzone.defineCustomElement('my-dropzone');\n   */\n  static defineCustomElement(elementName = COMPONENT_NAME) {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, FilesDropzone);\n    }\n  }\n}\n\nexport { FilesDropzone };\n","import { FilesDropzone } from './files-dropzone.js';\n\nFilesDropzone.defineCustomElement();\n\nexport { FilesDropzone };\n","export const ACCEPTED_MIME_TYPES = [\n  'image/jpg',\n  'image/jpeg',\n  'image/png',\n  'image/apng',\n  'image/gif',\n  'image/webp',\n  'image/avif'\n];\nexport const MAX_SHADOW_BLUR_SIZE = 20;\nexport const MAX_STROKE_WIDTH = 20;\nexport const MAX_ROTATE = 360;\n","/**\n * Generates a unique id of the form `${prefix}-${randomString}-${suffix}`.\n *\n * @param {string} [prefix=''] - The prefix to use for the id.\n * @param {string} [suffix=''] - The suffix to use for the id.\n * @returns {string} - The unique id.\n */\nconst uid = (prefix = '', suffix = '') => {\n  const prefixString = typeof prefix === 'string' && prefix !== '' ? prefix + '-' : '';\n  const suffixString = typeof suffix === 'string' && suffix !== '' ? '-' + suffix : '';\n  const randomString = Math.random().toString(36).substring(2, 8); // Pseudo-random string of six alphanumeric characters.\n\n  return `${prefixString}${randomString}${suffixString}`;\n};\n\nexport { uid };\n","import { ACCEPTED_MIME_TYPES } from '../constants.js';\n\n/**\n * Creates a file from a given URL.\n *\n * @param {{ url: string, filename: string, mimeType: string }} options\n * @param {string} options.url - The URL of the file to fetch.\n * @param {string} options.filename - The name of the file to create.\n * @param {string} options.mimeType - The MIME type of the file to create.\n * @returns {Promise<File>} - A promise that resolves to the file created from the given URL.\n */\nexport const fileFromUrl = async (options = {}) => {\n  const res = await fetch(options.url);\n  const blob = await res.blob();\n  const mimeType = options.mimeType || blob.type || '';\n\n  if (!ACCEPTED_MIME_TYPES.includes(mimeType)) {\n    throw new Error(\n      `This is not an accepted image format. Accepted MIME types are: ${ACCEPTED_MIME_TYPES.join(', ')}`\n    );\n  }\n\n  return new File([blob], options.filename || '', blob);\n};\n","/**\n * A class representing a storage utility for managing data in `localStorage` or `sessionStorage`.\n */\nclass Storage {\n  /**\n   * The prefix to be added to all keys.\n   *\n   * @type {string}\n   * @private\n   */\n  #keyPrefix = null;\n\n  /**\n   * The storage provider (`localStorage` or `sessionStorage`).\n   *\n   * @type {Storage}\n   * @private\n   */\n  #provider = null;\n\n  /**\n   * Creates an instance of Storage.\n   *\n   * @param {string} prefix - The prefix to be added to all keys when storing/retrieving data.\n   * @param {Storage} [provider=localStorage] - The storage provider (`localStorage` or `sessionStorage`).\n   * @throws {Error} If prefix is not provided or if the provider is not supported.\n   */\n  constructor(prefix, provider = localStorage) {\n    if (!prefix) {\n      throw new Error('Storage prefix is required');\n    }\n\n    if (provider !== localStorage && provider !== sessionStorage) {\n      throw new Error('Storage provider is not supported');\n    }\n\n    this.#keyPrefix = prefix;\n    this.#provider = provider;\n  }\n\n  /**\n   * Sets a key-value pair in the storage.\n   *\n   * @param {string} key - The key for the data.\n   * @param {*} value - The value to be stored (will be converted to JSON string).\n   */\n  set(key, value) {\n    try {\n      this.#provider.setItem(`${this.#keyPrefix}${key}`, JSON.stringify(value));\n    } catch (err) {\n      console.error('Error saving to storage', err);\n    }\n  }\n\n  /**\n   * Retrieves the value associated with the given key from the storage.\n   *\n   * @param {string} key - The key to retrieve the value for.\n   * @returns {*} The value associated with the key, or `null` if key is not found or an error occurs.\n   */\n  get(key) {\n    try {\n      const value = this.#provider.getItem(`${this.#keyPrefix}${key}`);\n      return value ? JSON.parse(value) : null;\n    } catch (err) {\n      console.error('Error getting from storage', err);\n      return null;\n    }\n  }\n}\n\nconst DEFAULT_STORAGE_PREFIX = 'meme-generator/';\nconst DEFAULT_STORAGE_PROVIDER = localStorage;\nconst storage = new Storage(DEFAULT_STORAGE_PREFIX, DEFAULT_STORAGE_PROVIDER);\n\nexport { Storage, storage };\n","export const isSolidColorSelected = selectedImage => {\n  return typeof selectedImage === 'string';\n};\n","import Pressuru from 'url:../assets/fonts/Pressuru/Pressuru.ttf';\nimport OswaldRegular from 'url:../assets/fonts/Oswald/Oswald-Regular.ttf';\nimport OswaldBold from 'url:../assets/fonts/Oswald/Oswald-Bold.ttf';\nimport RobotoRegular from 'url:../assets/fonts/Roboto/Roboto-Regular.ttf';\nimport RobotoBold from 'url:../assets/fonts/Roboto/Roboto-Bold.ttf';\nimport RobotoCondensedRegular from 'url:../assets/fonts/RobotoCondensed/RobotoCondensed-Regular.ttf';\nimport RobotoCondensedBold from 'url:../assets/fonts/RobotoCondensed/RobotoCondensed-Bold.ttf';\nimport CourierPrimeRegular from 'url:../assets/fonts/CourierPrime/CourierPrime-Regular.ttf';\nimport CourierPrimeBold from 'url:../assets/fonts/CourierPrime/CourierPrime-Bold.ttf';\nimport OpenSansRegular from 'url:../assets/fonts/OpenSans/OpenSans-Regular.ttf';\nimport OpenSansBold from 'url:../assets/fonts/OpenSans/OpenSans-Bold.ttf';\n\nexport const customFonts = [\n  {\n    name: 'Pressuru',\n    label: 'Pressuru',\n    path: Pressuru,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'Oswald-Regular',\n    label: 'Oswald',\n    path: OswaldRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'Oswald-Bold',\n    label: 'Oswald Bold',\n    path: OswaldBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'Roboto-Regular',\n    label: 'Roboto',\n    path: RobotoRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'Roboto-Bold',\n    label: 'Roboto Bold',\n    path: RobotoBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'RobotoCondensed-Regular',\n    label: 'Roboto Condensed',\n    path: RobotoCondensedRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'RobotoCondensed-Bold',\n    label: 'Roboto Condensed Bold',\n    path: RobotoCondensedBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'CourierPrime-Regular',\n    label: 'Courier Prime',\n    path: CourierPrimeRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'CourierPrime-Bold',\n    label: 'Courier Prime Bold',\n    path: CourierPrimeBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'OpenSans-Regular',\n    label: 'Open Sans',\n    path: OpenSansRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'OpenSans-Bold',\n    label: 'Open Sans Bold',\n    path: OpenSansBold,\n    style: 'normal',\n    weight: '400'\n  }\n];\n\nexport const loadCustomFont = async (name, path, options = {}) => {\n  try {\n    const font = new FontFace(name, `url(${path})`, { ...options });\n    await font.load();\n    document.fonts.add(font);\n  } catch (err) {\n    console.error(err);\n  }\n};\n","module.exports = parcelRequire.resolve(\"lRBOd\");","module.exports = parcelRequire.resolve(\"hOimC\");","module.exports = parcelRequire.resolve(\"c5nso\");","module.exports = parcelRequire.resolve(\"917SN\");","module.exports = parcelRequire.resolve(\"kCRYk\");","module.exports = parcelRequire.resolve(\"7mTjM\");","module.exports = parcelRequire.resolve(\"bNJU7\");","module.exports = parcelRequire.resolve(\"2zTNP\");","module.exports = parcelRequire.resolve(\"6U5us\");","module.exports = parcelRequire.resolve(\"jadM2\");","module.exports = parcelRequire.resolve(\"4rZHV\");","const errorsContainer = document.getElementById('errorsContainer');\n\nconst hideError = evt => {\n  const target = evt.currentTarget;\n  target.removeEventListener('click', hideError);\n  errorsContainer.removeChild(target.parentNode);\n};\n\nexport const toastAlert = (message = '', type = 'info') => {\n  const types = ['info', 'warning', 'danger'];\n\n  if (!types.includes(type)) {\n    type = 'info';\n  }\n\n  const template = /* html */ `\n    ${message}\n    <button type=\"button\" class=\"btn-close\" data-dismiss=\"alert\" aria-label=\"Close\"></button>\n  `;\n\n  const div = document.createElement('div');\n  div.className = `alert alert-${type} alert-dismissible text-break mb-2 fade`;\n  div.innerHTML = template;\n  div.querySelector('button').addEventListener('click', hideError);\n  errorsContainer.appendChild(div);\n  setTimeout(() => div.classList.add('show'), 100);\n};\n","import { uid } from './utils/uid.js';\nimport { customFonts } from './custom-fonts.js';\nimport { MAX_SHADOW_BLUR_SIZE, MAX_STROKE_WIDTH, MAX_ROTATE } from './constants.js';\n\nconst defaultTextboxData = {\n  id: '',\n  text: '',\n  fillColor: '#ffffff',\n  strokeColor: '#000000',\n  font: 'Pressuru',\n  fontSize: 40,\n  fontWeight: 'normal',\n  textAlign: 'center',\n  shadowBlur: 0,\n  strokeWidth: 1.5,\n  offsetY: 0,\n  offsetX: 0,\n  rotate: 0,\n  allCaps: true,\n  textBackgroundEnabled: false,\n  textBackgroundColor: '#000000'\n};\n\nconst textboxes = new Map();\n\nclass Textbox {\n  constructor(data) {\n    const id = uid('textbox', Date.now().toString(36));\n\n    this.data = data ? { ...data, id } : { ...defaultTextboxData, id };\n\n    textboxes.set(id, this);\n\n    document.dispatchEvent(\n      new CustomEvent(`textbox-create`, {\n        bubbles: true,\n        composed: true,\n        detail: { textbox: this }\n      })\n    );\n  }\n\n  getData() {\n    return this.data;\n  }\n\n  static hasDefaultValues(textboxData) {\n    for (const key of Object.keys(defaultTextboxData)) {\n      if (key !== 'id' && textboxData[key] !== defaultTextboxData[key]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  static create(data) {\n    return new Textbox(data);\n  }\n\n  static getAll() {\n    return textboxes;\n  }\n\n  static getById(id) {\n    return textboxes.get(id);\n  }\n\n  static remove(id) {\n    textboxes.delete(id);\n\n    document.dispatchEvent(\n      new CustomEvent(`textbox-remove`, {\n        bubbles: true,\n        composed: true,\n        detail: { id }\n      })\n    );\n  }\n\n  static createElement(textbox, autoFocus = true) {\n    if (!(textbox instanceof Textbox)) {\n      return;\n    }\n\n    const data = textbox.getData();\n    const {\n      id,\n      text,\n      fillColor,\n      strokeColor,\n      fontSize,\n      shadowBlur,\n      strokeWidth,\n      offsetX,\n      offsetY,\n      rotate,\n      textBackgroundColor\n    } = data;\n\n    const template = /* html */ `\n    <div class=\"d-flex align-items-center\" data-section=\"basic-settings\">\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"duplicate-text-box\" title=\"Duplicate text box\"></button>\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"delete-text-box\" title=\"Remove text box\"></button>\n\n      <textarea class=\"form-control meme-text\" type=\"text\" data-input=\"text\" autocomplete=\"off\" rows=\"1\" placeholder=\"${`Text #${textboxes.size}`}\">${text}</textarea>\n\n      <div class=\"d-flex align-items-center pe-2\">\n        <label for=\"fillColorInput\" class=\"visually-hidden\">Fill color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${fillColor}\" id=\"fillColorInput_${id}\" data-input=\"fillColor\" title=\"Fill color\">\n\n        <label for=\"strokeColorInput\" class=\"visually-hidden\">Outline color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${strokeColor}\" id=\"strokeColorInput_${id}\" data-input=\"strokeColor\" title=\"Outline color\">\n\n        <button type=\"button\" class=\"btn btn-secondary settings-button\" data-button=\"settings\" title=\"Settings\"></button>\n      </div>\n    </div>\n\n    <div class=\"p-2\" data-section=\"advanced-settings\" hidden>\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <details class=\"emoji-picker-details\">\n            <summary>Emoji picker</summary>\n            <emoji-picker class=\"light\"></emoji-picker>\n          </details>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontInput_${id}\" class=\"mb-1 d-block text-truncate\">Font: </label>\n\n          <select class=\"form-select\" data-input=\"font\" id=\"fontInput_${id}\">\n            <optgroup label=\"Web fonts\">\n              <option value=\"Impact\">Impact</option>\n              <option value=\"Arial\">Arial</option>\n              <option value=\"Arial Black\">Arial Black</option>\n              <option value=\"Helvetica\">Helvetica</option>\n              <option value=\"Comic Sans MS\">Comic Sans MS</option>\n              <option value=\"Times\">Times</option>\n              <option value=\"Times New Roman\">Times New Roman</option>\n              <option value=\"Courier New\">Courier New</option>\n              <option value=\"Verdana\">Verdana</option>\n              <option value=\"Georgia\">Georgia</option>\n              <option value=\"Palatino\">Palatino</option>\n              <option value=\"Garamond\">Garamond</option>\n              <option value=\"Bookman\">Bookman</option>\n              <option value=\"Trebuchet MS\">Trebuchet MS</option>\n            </optgroup>\n            <optgroup label=\"Google fonts\">\n              ${customFonts.map(({ name, label }) => `<option value=\"${name}\">${label}</option>`)}\n            </optgroup>\n          </select>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontSizeInput_${id}\" class=\"mb-1 d-block text-truncate\">Size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"1\" value=\"${fontSize}\" data-input=\"fontSize\" id=\"fontSizeInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontWeightInput_${id}\" class=\"mb-1 d-block text-truncate\">Weight:</label>\n          <select class=\"form-select\" data-input=\"fontWeight\" id=\"fontWeightInput_${id}\">\n            <option value=\"normal\">Normal</option>\n            <option value=\"bold\">Bold</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"shadowWidthInput_${id}\" class=\"mb-1 d-block text-truncate\">Shadow size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${MAX_SHADOW_BLUR_SIZE}\" value=\"${shadowBlur}\" data-input=\"shadowBlur\" id=\"shadowWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"strokeWidthInput_${id}\">Outline size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${MAX_STROKE_WIDTH}\" step=\"0.5\" value=\"${strokeWidth}\" data-input=\"strokeWidth\" id=\"strokeWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"textAlignInput_${id}\" class=\"mb-1 d-block text-truncate\">Text align:</label>\n          <select class=\"form-select\" data-input=\"textAlign\" id=\"textAlignInput_${id}\">\n            <option value=\"left\">Left</option>\n            <option value=\"center\">Center</option>\n            <option value=\"right\">Right</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetYInput_${id}\">Vertical offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetY}\" data-input=\"offsetY\" id=\"offsetYInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetXInput_${id}\">Horizontal offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetX}\" data-input=\"offsetX\" id=\"offsetXInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"textRotateInput_${id}\">Rotate:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${rotate}\" data-input=\"rotate\" id=\"textRotateInput_${id}\" min=\"-360\" max=\"${MAX_ROTATE}\">\n        </div>\n\n        <div class=\"col-12\">\n          <div class=\"move-text-actions mb-3\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Up\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Right\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Down\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Left\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <div class=\"form-check\">\n            <input type=\"checkbox\" class=\"form-check-input\" id=\"allCapsCheckbox_${id}\" data-input=\"allCaps\">\n            <label class=\"form-check-label\" for=\"allCapsCheckbox_${id}\">ALL CAPS</label>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <div class=\"d-flex align-items-center gap-3\">\n            <div class=\"form-check\">\n              <label class=\"form-check-label\" for=\"textBackgroundEnabledInput_${id}\">Enable text background</label>\n              <input class=\"form-check-input\" type=\"checkbox\" role=\"switch\" data-input=\"textBackgroundEnabled\" id=\"textBackgroundEnabledInput_${id}\">\n            </div>\n\n            <div>\n              <label class=\"visually-hidden\" for=\"textBackgroundColorInput_${id}\">Background color:</label>\n              <input class=\"border rounded p-0\" type=\"color\" value=\"${textBackgroundColor}\" data-input=\"textBackgroundColor\" id=\"textBackgroundColorInput_${id}\">\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n\n    const fragment = document.createDocumentFragment();\n    const div = document.createElement('div');\n\n    div.setAttribute('id', id);\n    div.setAttribute('data-section', 'textbox');\n    div.className = 'bg-body-tertiary border shadow-sm mb-3 rounded';\n    div.innerHTML = template;\n    div.querySelectorAll('select').forEach(el => (el.value = data[el.dataset.input]));\n    div.querySelectorAll('input[type=\"checkbox\"]').forEach(el => (el.checked = data[el.dataset.input]));\n\n    const textboxEl = fragment.appendChild(div);\n\n    if (autoFocus) {\n      setTimeout(() => textboxEl.querySelector('[data-input=\"text\"]').focus(), 0);\n    }\n\n    return textboxEl;\n  }\n}\n\nexport { Textbox };\n","import { isSolidColorSelected } from './utils/is-solid-color-selected.js';\nimport { MAX_SHADOW_BLUR_SIZE, MAX_STROKE_WIDTH, MAX_ROTATE } from './constants.js';\n\nexport class Canvas {\n  #canvas = null;\n  #ctx = null;\n\n  constructor(canvasEl) {\n    this.#canvas = canvasEl;\n    this.#ctx = this.#canvas.getContext('2d');\n  }\n\n  get width() {\n    return this.#canvas.width;\n  }\n\n  set width(value) {\n    this.#canvas.width = value;\n  }\n\n  get height() {\n    return this.#canvas.height;\n  }\n\n  set height(value) {\n    this.#canvas.height = value;\n  }\n\n  getDimensions() {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  setDimensions({ width, height }) {\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  toDataURL() {\n    return this.#canvas.toDataURL();\n  }\n\n  draw(image, textboxes = new Map()) {\n    if (image == null) {\n      return;\n    }\n\n    const canvas = this.#canvas;\n    const ctx = this.#ctx;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (isSolidColorSelected(image)) {\n      ctx.fillStyle = image;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    } else {\n      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n    }\n\n    let multiplier = 0;\n\n    textboxes.forEach(textbox => {\n      const { data } = textbox;\n\n      multiplier += 1;\n\n      ctx.save();\n\n      ctx.font = `${data.fontWeight} ${(data.fontSize * canvas.width) / 1000}px ${data.font}`;\n      ctx.textAlign = data.textAlign;\n      ctx.strokeStyle = data.strokeColor;\n\n      const xPos = canvas.width / 2;\n      const shadowBlur = data.shadowBlur;\n      const text = data.allCaps === true ? data.text.toUpperCase() : data.text;\n      const textLines = text.split('\\n').filter(line => line.trim() !== '');\n      const textMetrics = ctx.measureText(textLines[0]);\n      const textHeight = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent;\n      const bgOffset = data.textBackgroundEnabled ? textHeight / 4 : 0;\n      const lineHeight = textHeight + data.fontSize / 4 + bgOffset;\n\n      ctx.translate(xPos + data.offsetX, lineHeight * multiplier + data.offsetY);\n      ctx.rotate((Math.min(data.rotate, MAX_ROTATE) * Math.PI) / 180);\n\n      if (data.textBackgroundEnabled) {\n        ctx.fillStyle = data.textBackgroundColor;\n        textLines.forEach((line, index) => {\n          if (line) {\n            const textMetrics = ctx.measureText(line);\n            const textWidth = textMetrics.width;\n            const textHeight = textMetrics.actualBoundingBoxAscent + textMetrics.actualBoundingBoxDescent;\n            const xOffset = data.textAlign === 'left' ? 0 : data.textAlign === 'right' ? -textWidth : -textWidth / 2;\n\n            ctx.fillRect(\n              xOffset - bgOffset,\n              index * lineHeight - textHeight - bgOffset,\n              textWidth + bgOffset * 2,\n              textHeight + bgOffset * 2\n            );\n          }\n        });\n      }\n\n      ctx.save();\n      if (shadowBlur !== 0) {\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        ctx.shadowBlur = Math.min(shadowBlur, MAX_SHADOW_BLUR_SIZE);\n        ctx.shadowColor = data.strokeColor;\n      }\n      ctx.fillStyle = data.fillColor;\n      textLines.forEach((text, index) => ctx.fillText(text, 0, index * lineHeight));\n      ctx.restore();\n\n      if (data.strokeWidth > 0) {\n        ctx.lineWidth = Math.min(data.strokeWidth, MAX_STROKE_WIDTH);\n        textLines.forEach((text, index) => ctx.strokeText(text, 0, index * lineHeight));\n      }\n\n      ctx.restore();\n    });\n\n    return this;\n  }\n\n  clear() {\n    this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n    return this;\n  }\n\n  show() {\n    this.#canvas.hidden = false;\n    return this;\n  }\n\n  hide() {\n    this.#canvas.hidden = true;\n    return this;\n  }\n\n  static createInstance(canvasEl) {\n    return new Canvas(canvasEl);\n  }\n}\n"],"names":["$9e9d3488b14d9168$var$promise","$9e9d3488b14d9168$var$baselineEmojiWidth","$parcel$interopDefault","a","__esModule","default","$parcel$resolve","url","URL","$parcel$distDir","parcelRequire","i","toString","$bf4f0cf05f6fd378$var$browserSupportsTextareaTextNodes","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","$736431a7b9521865$var$assertNonEmptyString","str","Error","$736431a7b9521865$var$assertNumber","number","id","exports","init","module","call","err","code","register","Object","assign","$736431a7b9521865$var$STORE_EMOJI","$736431a7b9521865$var$STORE_KEYVALUE","$736431a7b9521865$var$STORE_FAVORITES","$736431a7b9521865$var$INDEX_TOKENS","$736431a7b9521865$var$INDEX_COUNT","$736431a7b9521865$var$INDEX_GROUP_AND_ORDER","$736431a7b9521865$var$KEY_ETAG","$736431a7b9521865$var$KEY_PREFERRED_SKINTONE","$736431a7b9521865$var$MODE_READONLY","$736431a7b9521865$var$MODE_READWRITE","$736431a7b9521865$var$INDEX_SKIN_UNICODE","$736431a7b9521865$var$uniqEmoji","emojis","$736431a7b9521865$var$uniqBy","arr","func","set","Set","res","item","key","has","add","push","_","unicode","$736431a7b9521865$var$openIndexedDBRequests","$736431a7b9521865$var$databaseCache","$736431a7b9521865$var$onCloseListeners","$736431a7b9521865$var$handleOpenOrDeleteReq","resolve","reject","req","onerror","error","onblocked","onsuccess","result","$736431a7b9521865$var$createDatabase","dbName","db","Promise","indexedDB","open","onupgradeneeded","e","oldVersion","$736431a7b9521865$var$initialMigration","createObjectStore","name","keyPath","indexes","store","indexName","multiEntry","entries","createIndex","undefined","onclose","$736431a7b9521865$var$closeDatabase","$736431a7b9521865$var$dbPromise","storeName","readOnlyOrReadWrite","cb","txn","transaction","durability","objectStore","map","oncomplete","close","listeners","listener","$736431a7b9521865$var$irregularEmoticons","$736431a7b9521865$var$extractTokens","split","word","match","toLowerCase","replace","filter","Boolean","$736431a7b9521865$var$normalizeTokens","length","$736431a7b9521865$var$callStore","method","target","$736431a7b9521865$var$getIDB","$736431a7b9521865$var$getAllIDB","$736431a7b9521865$var$commit","commit","$736431a7b9521865$var$findCommonMembers","arrays","uniqByFunc","shortestArray","$736431a7b9521865$var$minBy","array","minItem","results","some","findIndex","$736431a7b9521865$var$isEmpty","$736431a7b9521865$var$get","$736431a7b9521865$var$hasData","eTag","oldETag","oldUrl","all","$736431a7b9521865$var$doFullDatabaseScanForSingleResult","predicate","emojiStore","lastKey","processNextBatch","getAll","IDBKeyRange","lowerBound","$736431a7b9521865$var$loadData","emojiData","transformedData","annotation","emoticon","group","order","shortcodes","skins","tags","emoji","version","tokens","flat","sort","tone","skinTones","skinUnicodes","skinVersions","metaStore","todo","checkFetched","onFetched","data","clear","put","$736431a7b9521865$var$getEmojiByGroup","range","bound","index","$736431a7b9521865$var$getEmojiBySearchQuery","query","intermediateResults","checkDone","onDone","b","token","only","$736431a7b9521865$var$getEmojiByShortcode","shortcode","lowerShortcodes","includes","$736431a7b9521865$var$getEmojiByUnicode","$736431a7b9521865$var$requiredKeys$1","$736431a7b9521865$var$customEmojiIndex","customEmojis","isArray","Array","firstItemIsFaulty","sortByName","searchTrie","$736431a7b9521865$var$trie","itemToTokens","Map","currentMap","char","charAt","nextMap","get","valuesAtCoda","exact","queue","value","shift","shortcodeToEmoji","nameToEmoji","customEmoji","search","byShortcode","byName","$736431a7b9521865$var$isFirefoxContentScript","wrappedJSObject","$736431a7b9521865$var$cleanEmoji","structuredClone","len","$736431a7b9521865$var$warnETag","console","warn","$736431a7b9521865$var$requiredKeys","$736431a7b9521865$var$assertStatus","response","dataSource","Math","floor","status","$736431a7b9521865$var$getETag","fetch","headers","$736431a7b9521865$var$getETagAndData","json","$736431a7b9521865$var$jsonChecksum","object","inBuffer","$736431a7b9521865$var$binaryStringToArrayBuffer","binary","buf","ArrayBuffer","Uint8Array","charCodeAt","JSON","stringify","btoa","$736431a7b9521865$var$arrayBufferToBinaryString","buffer","bytes","byteLength","String","fromCharCode","crypto","subtle","digest","$736431a7b9521865$var$doCheckForUpdates","eTagAndData","$736431a7b9521865$var$loadDataForFirstTime","$736431a7b9521865$var$checkForUpdates","$736431a7b9521865$export$2e2bcd8739ae039","locale","_dbName","_db","_lazyUpdate","_custom","_clear","bind","_ready","_init","ready","checkReady","getEmojiByGroup","getEmojiBySearchQuery","getEmojiByShortcode","custom","getEmojiByUnicodeOrName","unicodeOrName","getPreferredSkinTone","setPreferredSkinTone","skinTone","incrementFavoriteEmojiCount","getTopFavoriteEmoji","limit","customEmojiIndex","favoritesStore","openCursor","cursor","addResult","continue","primaryKey","_shutdown","delete","deleteDatabase","$9e9d3488b14d9168$var$allGroups","$9e9d3488b14d9168$var$groups","slice","$9e9d3488b14d9168$var$rIC","requestIdleCallback","setTimeout","$9e9d3488b14d9168$var$hasZwj","$9e9d3488b14d9168$var$versionsAndTestEmoji","$9e9d3488b14d9168$var$MOST_COMMONLY_USED_EMOJI","$9e9d3488b14d9168$var$FONT_FAMILY","$9e9d3488b14d9168$var$DEFAULT_CATEGORY_SORTING","$9e9d3488b14d9168$var$getTextFeature","text","color","canvas","document","createElement","width","height","ctx","getContext","willReadFrequently","textBaseline","font","fillStyle","scale","fillText","getImageData","$9e9d3488b14d9168$var$detectEmojiSupportLevel","$9e9d3488b14d9168$var$determineEmojiSupportLevel","$9e9d3488b14d9168$var$testColorEmojiSupported","feature1Str","feature1","feature2","join","startsWith","$9e9d3488b14d9168$var$supportedZwjEmojis","$9e9d3488b14d9168$var$halt","event","preventDefault","stopPropagation","$9e9d3488b14d9168$var$incrementOrDecrement","decrement","val","$9e9d3488b14d9168$var$uniqBy","$9e9d3488b14d9168$var$rAF","requestAnimationFrame","$9e9d3488b14d9168$var$resizeObserverSupported","ResizeObserver","$9e9d3488b14d9168$var$calculateTextWidth","node","createRange","selectNode","firstChild","getBoundingClientRect","$9e9d3488b14d9168$var$getFromMap","cache","cached","$9e9d3488b14d9168$var$parseCache","WeakMap","$9e9d3488b14d9168$var$domInstancesCache","$9e9d3488b14d9168$var$unkeyedSymbol","Symbol","$9e9d3488b14d9168$var$hasReplaceChildren","Element","prototype","$9e9d3488b14d9168$var$applyBindings","bindings","element","instanceBindings","binding","targetNode","attributeName","instanceBinding","targetParentNode","currentExpression","$9e9d3488b14d9168$var$qM","queueMicrotask","callback","then","$9e9d3488b14d9168$var$arraysAreEqualByFunction","left","right","areEqualFunc","$9e9d3488b14d9168$var$intersectionObserverCache","$9e9d3488b14d9168$var$EMPTY_ARRAY","$9e9d3488b14d9168$var$assign","$9e9d3488b14d9168$var$enI18n","categoriesLabel","emojiUnsupportedMessage","favoritesLabel","loadingMessage","networkErrorMessage","regionLabel","searchDescription","searchLabel","searchResultsLabel","skinToneDescription","skinToneLabel","skinTonesLabel","categories","activities","objects","symbols","flags","$9e9d3488b14d9168$var$PROPS","$9e9d3488b14d9168$var$EXTRA_STYLES","$9e9d3488b14d9168$export$2e2bcd8739ae039","HTMLElement","props","attachShadow","mode","style","prop","textContent","$9e9d3488b14d9168$var$baseStyles","shadowRoot","appendChild","_ctx","skinToneEmoji","customCategorySorting","i18n","emojiVersion","hasOwnProperty","_dbFlush","connectedCallback","_cmp","$9e9d3488b14d9168$var$createRoot","currentObserver","queued","destroyed","propsToObservers","dirtyObservers","flush","state","refs","abortController","AbortController","abortSignal","signal","createEffect","observersToRun","observer","size","Proxy","observers","newValue","addEventListener","runnable","oldObserver","actionContext","database","initialLoad","currentEmojis","currentEmojisWithCategories","rawSearchText","searchText","searchMode","activeSearchItem","message","skinTonePickerExpanded","skinTonePickerExpandedAfterAnimation","currentSkinTone","activeSkinTone","skinToneButtonText","pickerStyle","skinToneButtonLabel","currentFavorites","defaultFavoriteEmojis","numColumns","isRtl","currentGroupIndex","groups","databaseLoaded","activeSearchItemId","currentGroup","focus","getElementById","emojiToDomNode","fireEvent","detail","rootElement","dispatchEvent","CustomEvent","bubbles","composed","compareEmojiArrays","compareCurrentEmojisWithCategories","category","aCategory","aEmojis","bCategory","bEmojis","updateCurrentEmojis","newEmojis","updateSearchMode","newSearchMode","unicodeWithSkin","helpers","labelWithSkin","$9e9d3488b14d9168$var$uniq","titleForEmoji","events","onClickSkinToneButton","onEmojiClick","classList","contains","clickEmoji","substring","onNavClick","closestTarget","closest","groupId","parseInt","dataset","searchElement","onNavKeydown","doFocus","el","previousElementSibling","nextElementSibling","parentElement","firstElementChild","lastElementChild","onSearchKeydown","goToNextOrPrevious","previous","onSkinToneOptionsClick","changeSkinTone","onSkinToneOptionsFocusOut","onSkinToneOptionsKeydown","changeActiveSkinTone","nextSkinTone","onSkinToneOptionsKeyup","onSearchInput","actions","calculateEmojiGridStyle","onUpdate","resizeObserver","getComputedStyle","newNumColumns","getPropertyValue","newIsRtl","observe","disconnect","updateOnIntersection","root","IntersectionObserver","isIntersecting","toggle","rootMargin","threshold","firstRender","updateCustomEmoji","databaseCustomEmoji","$9e9d3488b14d9168$var$render","container","domInstances","domInstanceCacheKey","html","keyFunction","originalCacheKey","expressions","domInstancesForTokens","updateDomInstance","$9e9d3488b14d9168$var$parseHtml","template","elementsToBindings","$9e9d3488b14d9168$var$parse","htmlString","withinTag","withinAttribute","elementIndexCounter","elementIndexes","skipTokenChars","attributeValuePre","attributeValuePost","j","nextChar","pop","attributePreMatch","exec","attributePostMatch","expressionIndex","innerHTML","dom","cloneNode","content","$9e9d3488b14d9168$var$traverseAndSetupBindings","topLevelBindings","treeWalker","createTreeWalker","NodeFilter","SHOW_ELEMENT","elementIndex","nextNode","expression","removeAttribute","setAttribute","newNode","$9e9d3488b14d9168$var$patchChildren","newChildren","parentNode","needsRerender","$9e9d3488b14d9168$var$doChildrenNeedRerender","oldChild","oldChildrenCount","newChild","nextSibling","replaceChildren","append","replaceWith","nodeValue","emojiList","prefix","rootDom","emojiWithCategory","ceil","forElementWithAttribute","querySelectorAll","getAttribute","eventName","listenerName","ref","removeChild","action","boundActions","WeakSet","level","handleDatabaseLoading","showingLoadingMessage","timeoutHandle","clearTimeout","updatePreferredSkinTone","fill","$9e9d3488b14d9168$var$applySkinTone","zwjIndex","indexOf","fromCodePoint","$9e9d3488b14d9168$var$LIGHT_SKIN_TONE","endsWith","$9e9d3488b14d9168$var$LIGHT_SKIN_TONE_MODIFIER","updateDefaultFavoriteEmojis","updateFavorites","dbFavorites","summarizeEmojis","updateEmojis","getEmojisBySearchQuery","currentGroupId","getEmojisByGroup","resetScrollTopInRaf","tabpanelElement","scrollTop","isZwjSupported","filterEmojisByVersion","emojiSupportLevel","toSimpleSkinsMap","skin","getDetailForClickEvent","emojiSummary","find","skinTonedUnicode","promiseForDetail","relatedTarget","zwjEmojisToCheck","$9e9d3488b14d9168$var$checkZwjSupport","baselineEmoji","allSupported","domNode","emojiWidth","supported","newEmojisWithCategories","calculateCurrentEmojisWithCategories","categoriesToEmoji","trim","skinToneDropdown","once","$set","newState","$destroy","abort","disconnectedCallback","isConnected","catch","observedAttributes","attributeChangedCallback","attrName","oldValue","_set","up","toUpperCase","parseFloat","_dbCreate","$9e9d3488b14d9168$var$definitions","$bf4f0cf05f6fd378$var$canManipulateViaTextNodes","input","nodeName","textarea","defineProperties","customElements","define","$bf4f0cf05f6fd378$export$2e2bcd8739ae039","selection","ieRange","collapse","select","execCommand","start","selectionStart","end","selectionEnd","setRangeText","textNode","createTextNode","offset","startNode","endNode","nodeLength","setStart","setEnd","deleteContents","commonAncestorContainer","insertNode","setSelectionRange","createEvent","initEvent","$dced0d224c6d876e$var$a","$dced0d224c6d876e$var$d","$dced0d224c6d876e$var$u","$dced0d224c6d876e$export$cc30a98fe3890794","r","getSupportedConstraints","t","s","getTrackCapabilities","o","pan","min","max","tilt","zoom","torch","querySelector","isSupported","autoPlay","startVideoStream","stopVideoStream","removeEventListener","hasAttribute","toggleAttribute","noImage","facingMode","cameraResolution","Number","calculateFileSize","loading","capture","play","video","finally","getVideoTracks","getTrackSettings","n","isNaN","applyConstraints","advanced","assignedElements","flatten","ideal","audio","deviceId","navigator","mediaDevices","getUserMedia","srcObject","restartVideoStream","stop","videoWidth","videoHeight","drawImage","toDataURL","Image","src","alt","dataURI","l","blob","getCapabilities","getSettings","getVideoInputDevices","enumerateDevices","kind","defineCustomElement","$7a2aca835bb05064$export$c37129e465f64ef0","canShare","$647a8d39392e9d40$var$n","$647a8d39392e9d40$var$a","$647a8d39392e9d40$var$h","$647a8d39392e9d40$export$173e0a822059eddc","delegatesFocus","forEach","noIcon","noLabel","noStorage","storageKey","matchMedia","localStorage","getItem","setItem","documentElement","matches","theme","$cd62c5572235e737$var$h","$cd62c5572235e737$var$r","$cd62c5572235e737$export$30b344bef3e55b67","disabled","part","shareUrl","shareTitle","shareText","shareFiles","share","title","files","shareData","$d9c5053bade2d3f8$var$r","$d9c5053bade2d3f8$var$l","$d9c5053bade2d3f8$export$32589115725b904b","CLOSE_REQUEST_REASONS","CLOSE_BUTTON","ESCAPE_KEY","BACKDROP_CLICK","EXTERNAL_INVOKER","showModal","body","preserveOverflow","overflow","hidden","noHeader","noAnimations","noCloseButton","staticBackdrop","fullscreen","placement","closeLabel","remove","defaultPrevented","currentTarget","hide","command","show","assignedNodes","cancelable","reason","$9351176e8d763a78$var$E","$9351176e8d763a78$var$f","$9351176e8d763a78$var$g","$9351176e8d763a78$var$z","lastIndexOf","type","defineProperty","writable","configurable","enumerable","path","webkitRelativePath","$9351176e8d763a78$var$u","readEntries","$9351176e8d763a78$var$x","$9351176e8d763a78$var$y","file","fullPath","$9351176e8d763a78$var$w","getAsEntry","webkitGetAsEntry","isFile","isDirectory","createReader","$9351176e8d763a78$var$m","$9351176e8d763a78$var$d","dataTransfer","items","$9351176e8d763a78$var$O","raw","$9351176e8d763a78$var$L","$9351176e8d763a78$var$b","$9351176e8d763a78$var$v","$9351176e8d763a78$var$F","$9351176e8d763a78$export$6ccd1735166caad9","ERROR_CODES","FILE_DIALOG_OPEN_FAILED","FILE_INPUT_CHANGE_FAILED","DROP_EVENT_PROCESSING_FAILED","UNKNOWN_ERROR","REJECTION_CODES","TOO_MANY_FILES","FILE_TOO_LARGE","FILE_TOO_SMALL","INVALID_MIME_TYPE","accept","multiple","autoFocus","maxFiles","abs","maxSize","minSize","noStyle","dropEffect","openFileDialog","errors","$9351176e8d763a78$var$h","test","c","p","acceptedFiles","rejectedFiles","defaultValue","HTMLInputElement","showPicker","click","$65136e012e05e2d7$export$63e7bed68b07a85c","$17004b28c97c1306$export$e2a22331486dcca0","suffix","randomString","random","$2669cb7c28251d2a$export$6539e087749cf9d3","options","mimeType","File","filename","$9e093dbdf49c6d51$var$DEFAULT_STORAGE_PROVIDER","$9e093dbdf49c6d51$export$ddcffe0146c8f882","provider","sessionStorage","parse","$4ce134d17b44ae18$exports","$4aac2f31d7cdbf2a$exports","$7047d5eb69770188$exports","$50860fc9edc85a1e$exports","$ab9b02fed1d18789$exports","$9453a539ecff3153$exports","$2740691160ef63b7$exports","$d2dea0daed093658$exports","$abfbe5e1894df7bd$exports","$42aed72aaf921606$exports","$1b830496d4af00a3$exports","$56b863c8b6be7003$export$6874249d87f2602a","label","weight","$56b863c8b6be7003$export$59eceaef0c7797b2","FontFace","load","fonts","$3969451ff60cb8d5$var$errorsContainer","$3969451ff60cb8d5$var$hideError","evt","$3969451ff60cb8d5$export$af04143326425dbd","types","div","className","$a5e4a78f80aa8693$var$defaultTextboxData","fillColor","strokeColor","fontSize","fontWeight","textAlign","shadowBlur","strokeWidth","offsetY","offsetX","rotate","allCaps","textBackgroundEnabled","textBackgroundColor","$a5e4a78f80aa8693$var$textboxes","$a5e4a78f80aa8693$export$8e3dca5fa4d5f04b","Date","now","textbox","getData","hasDefaultValues","textboxData","keys","create","getById","fragment","createDocumentFragment","checked","textboxEl","$9b58d7721ff4a93e$export$8d01c972ee8b14a9","canvasEl","getDimensions","setDimensions","draw","image","textboxes","clearRect","fillRect","multiplier","save","strokeStyle","xPos","textLines","line","textMetrics","measureText","textHeight","actualBoundingBoxAscent","actualBoundingBoxDescent","bgOffset","lineHeight","translate","PI","textWidth","xOffset","shadowOffsetX","shadowOffsetY","shadowColor","restore","lineWidth","strokeText","createInstance","$85a5f86b715fe7db$var$canvas","$85a5f86b715fe7db$var$videoModal","$85a5f86b715fe7db$var$downloadModal","$85a5f86b715fe7db$var$capturePhotoEl","$85a5f86b715fe7db$var$cameraSelect","$85a5f86b715fe7db$var$capturePhotoButton","$85a5f86b715fe7db$var$torchButton","$85a5f86b715fe7db$var$dropzoneEl","$85a5f86b715fe7db$var$instructionsEl","$85a5f86b715fe7db$var$imageUploadMethodSelect","$85a5f86b715fe7db$var$fileSelectBtn","$85a5f86b715fe7db$var$imageUrlForm","$85a5f86b715fe7db$var$addTextboxBtn","$85a5f86b715fe7db$var$textboxesContainer","$85a5f86b715fe7db$var$generateMemeBtn","$85a5f86b715fe7db$var$openVideoModalBtn","$85a5f86b715fe7db$var$downloadMemeBtn","$85a5f86b715fe7db$var$downloadMemePreview","$85a5f86b715fe7db$var$webShareComponent","$85a5f86b715fe7db$var$galleryEl","$85a5f86b715fe7db$var$gallerySearchEl","$85a5f86b715fe7db$var$galleryNoResultsEl","$85a5f86b715fe7db$var$solidColorForm","$85a5f86b715fe7db$var$uploadMethodEls","$85a5f86b715fe7db$var$removeConfirmationModal","$85a5f86b715fe7db$var$removeTextForm","$85a5f86b715fe7db$var$maxImageDimensionsForm","$85a5f86b715fe7db$var$maxImageDimensionsSelect","$85a5f86b715fe7db$var$clearCanvasBtn","$85a5f86b715fe7db$var$maxImageDimensionsFromStorage","$85a5f86b715fe7db$var$shouldFocusOnTextboxCreate","$85a5f86b715fe7db$var$selectedImage","$85a5f86b715fe7db$var$reqAnimFrame","$85a5f86b715fe7db$var$generateMeme","dataUrl","downloadLink","download","href","$85a5f86b715fe7db$var$setImageMaxDimensions","maxWidthValue","maxHeightValue","maxImageDimensionsSelect","MAX_WIDTH","MAX_HEIGHT","$85a5f86b715fe7db$var$afterImageSelect","$85a5f86b715fe7db$var$handleImageLoad","$85a5f86b715fe7db$var$handleFileSelect","reader","FileReader","readAsDataURL","$85a5f86b715fe7db$var$handleTextPropChange","textboxId","$85a5f86b715fe7db$var$handleImageUploadFromURL","form","submitButton","imageUrl","$85a5f86b715fe7db$var$moveTextUsingArrowbuttons","direction","offsetYInput","offsetXInput","$85a5f86b715fe7db$var$handleGalleryClick","button","img","$85a5f86b715fe7db$var$toggleTorchButtonStatus","isTorchOn","iconPaths","display","$85a5f86b715fe7db$var$handleCapturePhotoVideoPlay","trackCapabilities","videoInputDevices","device","option","deviceTheme","errorMessage","reset","idx","inputMap","textboxSettingsEl","currentTextboxEl","currentTextboxData","textboxToDelete","textboxIdInput","cancelAnimationFrame","galleryItems","videoDeviceId","$85a5f86b715fe7db$var$changesHaveOccurred","hasChanges","v","values","returnValue","$85a5f86b715fe7db$var$renderAcceptedImageFormats","acceptedMimeTypes","rootEl","extensions","small","browserSupportsTextareaTextNodes","canManipulateViaTextNodes","isSuccess","clamp","lower","upper","COMPONENT_NAME","styles","CapturePhoto","_CapturePhoto","#supportedConstraints","#stream","#canvasElement","#outputElement","#videoElement","#captureButtonSlot","#captureButton","#emptyOutputElement","panInAllowedRange","#applyConstraint","tiltInAllowedRange","zoomInAllowedRange","#upgradeProperty","#getCaptureButton","#onVideoLoadedMetaData","#onCaptureButtonSlotChange","#onCapturePhotoButtonClick","constraint","track","trackSettings","constraintValue","instance","videoInputId","constraints","x","eventDetail","elementName","isWebShareSupported","DEFAULT_STORAGE_KEY","ROOT_ATTR","ThemeToggle","_ThemeToggle","#states","#theme","#selectedThemeIndex","#toggleButton","#getThemePreference","#reflectThemePreference","#onClick","#onMediaChange","valueFromStorage","#setThemePreference","prefersDark","#nextTheme","WebShare","_WebShare","#buttonSlot","#buttonEl","#files","#getButton","#handleSlotChange","#handleClick","ModalElement","_ModalElement","#dialogEl","#footerSlotEl","#closeSlotEl","#pulseAnimationTimeout","headerEl","closeBtnEl","#updateCloseLabel","#handleDialogClick","#handleDialogClose","#handleDialogCancel","#handleCloseButtonClick","#handleFooterSlotChange","#handleCloseSlotChange","#handleCommandEvent","closeButtonEl","#applyPulseEffectOnDialog","requestCloseEvent","#createRequestCloseEvent","footerEl","footerSlotNodes","hasFooterSlotNodes","isValidFile","acceptedTypeSpecifiers","acceptedMimeTypesList","fileMimeType","baseMimeType","validType","COMMON_MIME_TYPES","FILES_TO_IGNORE","toFileWithMimeType","extension","toFileWithPath","fileWithMimeType","readEntriesPromise","directoryReader","readAllDirectoryEntries","getFileFromFileEntry","fileEntry","getFilesFromDataTransferItemList","dataTransferItemList","entry","getFilesFromFileList","fileList","getFilesFromEvent","css","FilesDropzone","_FilesDropzone","#fileInput","#dropzoneEl","#handleFileInputChange","#handleDragEnter","#handleDragOver","#handleDragLeave","#handleDrop","#handleKeyUp","num","#emitEvent","#emitErrorEvent","#handleFilesSelect","filesLength","fileHasValidType","fileExceedsMaxSize","fileIsSmallerThanMinSize"],"version":3,"file":"meme-generator.c15e28dd.js.map"}