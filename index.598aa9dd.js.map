{"mappings":"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","sources":["<anon>","src/js/index.js","node_modules/emoji-picker-element/index.js","node_modules/emoji-picker-element/picker.js","node_modules/emoji-picker-element/database.js","node_modules/insert-text-at-cursor/dist/index.esm.js","node_modules/insert-text-at-cursor/index.js","node_modules/@georapbox/web-share-element/dist/is-web-share-supported.js","node_modules/@georapbox/web-share-element/dist/<anon>","node_modules/@georapbox/web-share-element/dist/src/is-web-share-supported.js","node_modules/@georapbox/web-share-element/dist/web-share-defined.js","node_modules/@georapbox/web-share-element/dist/src/web-share-defined.js","node_modules/@georapbox/web-share-element/dist/src/web-share.js","node_modules/@georapbox/capture-photo-element/dist/capture-photo-defined.js","node_modules/@georapbox/capture-photo-element/dist/<anon>","node_modules/@georapbox/capture-photo-element/dist/src/capture-photo-defined.js","node_modules/@georapbox/capture-photo-element/dist/src/capture-photo.js","node_modules/@georapbox/capture-photo-element/dist/src/utils/clamp.js","node_modules/@georapbox/modal-element/dist/modal-element-defined.js","node_modules/@georapbox/modal-element/dist/<anon>","node_modules/@georapbox/modal-element/dist/src/modal-element-defined.js","node_modules/@georapbox/modal-element/dist/src/modal-element.js","node_modules/@georapbox/files-dropzone-element/dist/files-dropzone-defined.js","node_modules/@georapbox/files-dropzone-element/dist/<anon>","node_modules/@georapbox/files-dropzone-element/dist/src/files-dropzone-defined.js","node_modules/@georapbox/files-dropzone-element/dist/src/files-dropzone.js","node_modules/@georapbox/files-dropzone-element/dist/src/utils/is-valid-file.js","node_modules/@georapbox/files-dropzone-element/dist/src/utils/files-selector.js","src/js/constants.js","src/js/utils/uid.js","src/js/utils/file-from-url.js","src/js/utils/storage.js","src/js/utils/is-solid-color-selected.js","src/js/custom-fonts.js","node_modules/@parcel/runtime-js/lib/runtime-dc4c638fb3cf3900.js","node_modules/@parcel/runtime-js/lib/runtime-f0173e87d28c89f8.js","node_modules/@parcel/runtime-js/lib/runtime-73957b0a5a96c8f8.js","node_modules/@parcel/runtime-js/lib/runtime-2fab85f36645c8e5.js","node_modules/@parcel/runtime-js/lib/runtime-410721d5a743746d.js","node_modules/@parcel/runtime-js/lib/runtime-ef58ed596f597f4b.js","node_modules/@parcel/runtime-js/lib/runtime-06fb3edab3c48625.js","node_modules/@parcel/runtime-js/lib/runtime-caaef9dc1e506632.js","node_modules/@parcel/runtime-js/lib/runtime-3c82f1536232dcbc.js","node_modules/@parcel/runtime-js/lib/runtime-85d0488227eae081.js","node_modules/@parcel/runtime-js/lib/runtime-80e5177a38047bea.js","src/js/toast-alert.js","src/js/textbox.js","src/js/canvas.js"],"sourcesContent":["(function () {\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequire5078\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequire5078\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nfunction $d1f26ac162b12b4a$var$assertNonEmptyString(str) {\n    if (typeof str !== \"string\" || !str) throw new Error(\"expected a non-empty string, got: \" + str);\n}\nfunction $d1f26ac162b12b4a$var$assertNumber(number) {\n    if (typeof number !== \"number\") throw new Error(\"expected a number, got: \" + number);\n}\nconst $d1f26ac162b12b4a$var$DB_VERSION_CURRENT = 1;\nconst $d1f26ac162b12b4a$var$DB_VERSION_INITIAL = 1;\nconst $d1f26ac162b12b4a$var$STORE_EMOJI = \"emoji\";\nconst $d1f26ac162b12b4a$var$STORE_KEYVALUE = \"keyvalue\";\nconst $d1f26ac162b12b4a$var$STORE_FAVORITES = \"favorites\";\nconst $d1f26ac162b12b4a$var$FIELD_TOKENS = \"tokens\";\nconst $d1f26ac162b12b4a$var$INDEX_TOKENS = \"tokens\";\nconst $d1f26ac162b12b4a$var$FIELD_UNICODE = \"unicode\";\nconst $d1f26ac162b12b4a$var$INDEX_COUNT = \"count\";\nconst $d1f26ac162b12b4a$var$FIELD_GROUP = \"group\";\nconst $d1f26ac162b12b4a$var$FIELD_ORDER = \"order\";\nconst $d1f26ac162b12b4a$var$INDEX_GROUP_AND_ORDER = \"group-order\";\nconst $d1f26ac162b12b4a$var$KEY_ETAG = \"eTag\";\nconst $d1f26ac162b12b4a$var$KEY_URL = \"url\";\nconst $d1f26ac162b12b4a$var$KEY_PREFERRED_SKINTONE = \"skinTone\";\nconst $d1f26ac162b12b4a$var$MODE_READONLY = \"readonly\";\nconst $d1f26ac162b12b4a$var$MODE_READWRITE = \"readwrite\";\nconst $d1f26ac162b12b4a$var$INDEX_SKIN_UNICODE = \"skinUnicodes\";\nconst $d1f26ac162b12b4a$var$FIELD_SKIN_UNICODE = \"skinUnicodes\";\nconst $d1f26ac162b12b4a$var$DEFAULT_DATA_SOURCE = \"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json\";\nconst $d1f26ac162b12b4a$var$DEFAULT_LOCALE = \"en\";\n// like lodash's uniqBy but much smaller\nfunction $d1f26ac162b12b4a$var$uniqBy(arr, func) {\n    const set = new Set();\n    const res = [];\n    for (const item of arr){\n        const key = func(item);\n        if (!set.has(key)) {\n            set.add(key);\n            res.push(item);\n        }\n    }\n    return res;\n}\nfunction $d1f26ac162b12b4a$var$uniqEmoji(emojis) {\n    return $d1f26ac162b12b4a$var$uniqBy(emojis, (_)=>_.unicode);\n}\nfunction $d1f26ac162b12b4a$var$initialMigration(db) {\n    function createObjectStore(name, keyPath, indexes) {\n        const store = keyPath ? db.createObjectStore(name, {\n            keyPath: keyPath\n        }) : db.createObjectStore(name);\n        if (indexes) for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes))store.createIndex(indexName, keyPath, {\n            multiEntry: multiEntry\n        });\n        return store;\n    }\n    createObjectStore($d1f26ac162b12b4a$var$STORE_KEYVALUE);\n    createObjectStore($d1f26ac162b12b4a$var$STORE_EMOJI, /* keyPath */ $d1f26ac162b12b4a$var$FIELD_UNICODE, {\n        [$d1f26ac162b12b4a$var$INDEX_TOKENS]: [\n            $d1f26ac162b12b4a$var$FIELD_TOKENS,\n            /* multiEntry */ true\n        ],\n        [$d1f26ac162b12b4a$var$INDEX_GROUP_AND_ORDER]: [\n            [\n                $d1f26ac162b12b4a$var$FIELD_GROUP,\n                $d1f26ac162b12b4a$var$FIELD_ORDER\n            ]\n        ],\n        [$d1f26ac162b12b4a$var$INDEX_SKIN_UNICODE]: [\n            $d1f26ac162b12b4a$var$FIELD_SKIN_UNICODE,\n            /* multiEntry */ true\n        ]\n    });\n    createObjectStore($d1f26ac162b12b4a$var$STORE_FAVORITES, undefined, {\n        [$d1f26ac162b12b4a$var$INDEX_COUNT]: [\n            \"\"\n        ]\n    });\n}\nconst $d1f26ac162b12b4a$var$openIndexedDBRequests = {};\nconst $d1f26ac162b12b4a$var$databaseCache = {};\nconst $d1f26ac162b12b4a$var$onCloseListeners = {};\nfunction $d1f26ac162b12b4a$var$handleOpenOrDeleteReq(resolve, reject, req) {\n    // These things are almost impossible to test with fakeIndexedDB sadly\n    /* istanbul ignore next */ req.onerror = ()=>reject(req.error);\n    /* istanbul ignore next */ req.onblocked = ()=>reject(new Error(\"IDB blocked\"));\n    req.onsuccess = ()=>resolve(req.result);\n}\nasync function $d1f26ac162b12b4a$var$createDatabase(dbName) {\n    const db = await new Promise((resolve, reject)=>{\n        const req = indexedDB.open(dbName, $d1f26ac162b12b4a$var$DB_VERSION_CURRENT);\n        $d1f26ac162b12b4a$var$openIndexedDBRequests[dbName] = req;\n        req.onupgradeneeded = (e)=>{\n            // Technically there is only one version, so we don't need this `if` check\n            // But if an old version of the JS is in another browser tab\n            // and it gets upgraded in the future and we have a new DB version, well...\n            // better safe than sorry.\n            /* istanbul ignore else */ if (e.oldVersion < $d1f26ac162b12b4a$var$DB_VERSION_INITIAL) $d1f26ac162b12b4a$var$initialMigration(req.result);\n        };\n        $d1f26ac162b12b4a$var$handleOpenOrDeleteReq(resolve, reject, req);\n    });\n    // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n    // No need for removeEventListener, because once the DB can no longer\n    // fire \"close\" events, it will auto-GC.\n    // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50\n    /* istanbul ignore next */ db.onclose = ()=>$d1f26ac162b12b4a$var$closeDatabase(dbName);\n    return db;\n}\nfunction $d1f26ac162b12b4a$var$openDatabase(dbName) {\n    if (!$d1f26ac162b12b4a$var$databaseCache[dbName]) $d1f26ac162b12b4a$var$databaseCache[dbName] = $d1f26ac162b12b4a$var$createDatabase(dbName);\n    return $d1f26ac162b12b4a$var$databaseCache[dbName];\n}\nfunction $d1f26ac162b12b4a$var$dbPromise(db, storeName, readOnlyOrReadWrite, cb) {\n    return new Promise((resolve, reject)=>{\n        // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n        // are really irreplaceable data. IndexedDB is just a cache in this case.\n        const txn = db.transaction(storeName, readOnlyOrReadWrite, {\n            durability: \"relaxed\"\n        });\n        const store = typeof storeName === \"string\" ? txn.objectStore(storeName) : storeName.map((name)=>txn.objectStore(name));\n        let res;\n        cb(store, txn, (result)=>{\n            res = result;\n        });\n        txn.oncomplete = ()=>resolve(res);\n        /* istanbul ignore next */ txn.onerror = ()=>reject(txn.error);\n    });\n}\nfunction $d1f26ac162b12b4a$var$closeDatabase(dbName) {\n    // close any open requests\n    const req = $d1f26ac162b12b4a$var$openIndexedDBRequests[dbName];\n    const db = req && req.result;\n    if (db) {\n        db.close();\n        const listeners = $d1f26ac162b12b4a$var$onCloseListeners[dbName];\n        /* istanbul ignore else */ if (listeners) for (const listener of listeners)listener();\n    }\n    delete $d1f26ac162b12b4a$var$openIndexedDBRequests[dbName];\n    delete $d1f26ac162b12b4a$var$databaseCache[dbName];\n    delete $d1f26ac162b12b4a$var$onCloseListeners[dbName];\n}\nfunction $d1f26ac162b12b4a$var$deleteDatabase(dbName) {\n    return new Promise((resolve, reject)=>{\n        // close any open requests\n        $d1f26ac162b12b4a$var$closeDatabase(dbName);\n        const req = indexedDB.deleteDatabase(dbName);\n        $d1f26ac162b12b4a$var$handleOpenOrDeleteReq(resolve, reject, req);\n    });\n}\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction $d1f26ac162b12b4a$var$addOnCloseListener(dbName, listener) {\n    let listeners = $d1f26ac162b12b4a$var$onCloseListeners[dbName];\n    if (!listeners) listeners = $d1f26ac162b12b4a$var$onCloseListeners[dbName] = [];\n    listeners.push(listener);\n}\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst $d1f26ac162b12b4a$var$irregularEmoticons = new Set([\n    \":D\",\n    \"XD\",\n    \":'D\",\n    \"O:)\",\n    \":X\",\n    \":P\",\n    \";P\",\n    \"XP\",\n    \":L\",\n    \":Z\",\n    \":j\",\n    \"8D\",\n    \"XO\",\n    \"8)\",\n    \":B\",\n    \":O\",\n    \":S\",\n    \":'o\",\n    \"Dx\",\n    \"X(\",\n    \"D:\",\n    \":C\",\n    \">0)\",\n    \":3\",\n    \"</3\",\n    \"<3\",\n    \"\\\\M/\",\n    \":E\",\n    \"8#\"\n]);\nfunction $d1f26ac162b12b4a$var$extractTokens(str) {\n    return str.split(/[\\s_]+/).map((word)=>{\n        if (!word.match(/\\w/) || $d1f26ac162b12b4a$var$irregularEmoticons.has(word)) // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase();\n        return word.replace(/[)(:,]/g, \"\").replace(//g, \"'\").toLowerCase();\n    }).filter(Boolean);\n}\nconst $d1f26ac162b12b4a$var$MIN_SEARCH_TEXT_LENGTH = 2;\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction $d1f26ac162b12b4a$var$normalizeTokens(str) {\n    return str.filter(Boolean).map((_)=>_.toLowerCase()).filter((_)=>_.length >= $d1f26ac162b12b4a$var$MIN_SEARCH_TEXT_LENGTH);\n}\n// Transform emoji data for storage in IDB\nfunction $d1f26ac162b12b4a$var$transformEmojiData(emojiData) {\n    const res = emojiData.map(({ annotation: annotation, emoticon: emoticon, group: group, order: order, shortcodes: shortcodes, skins: skins, tags: tags, emoji: emoji, version: version })=>{\n        const tokens = [\n            ...new Set($d1f26ac162b12b4a$var$normalizeTokens([\n                ...(shortcodes || []).map($d1f26ac162b12b4a$var$extractTokens).flat(),\n                ...tags.map($d1f26ac162b12b4a$var$extractTokens).flat(),\n                ...$d1f26ac162b12b4a$var$extractTokens(annotation),\n                emoticon\n            ]))\n        ].sort();\n        const res = {\n            annotation: annotation,\n            group: group,\n            order: order,\n            tags: tags,\n            tokens: tokens,\n            unicode: emoji,\n            version: version\n        };\n        if (emoticon) res.emoticon = emoticon;\n        if (shortcodes) res.shortcodes = shortcodes;\n        if (skins) {\n            res.skinTones = [];\n            res.skinUnicodes = [];\n            res.skinVersions = [];\n            for (const { tone: tone, emoji: emoji, version: version } of skins){\n                res.skinTones.push(tone);\n                res.skinUnicodes.push(emoji);\n                res.skinVersions.push(version);\n            }\n        }\n        return res;\n    });\n    return res;\n}\n// helper functions that help compress the code better\nfunction $d1f26ac162b12b4a$var$callStore(store, method, key, cb) {\n    store[method](key).onsuccess = (e)=>cb && cb(e.target.result);\n}\nfunction $d1f26ac162b12b4a$var$getIDB(store, key, cb) {\n    $d1f26ac162b12b4a$var$callStore(store, \"get\", key, cb);\n}\nfunction $d1f26ac162b12b4a$var$getAllIDB(store, key, cb) {\n    $d1f26ac162b12b4a$var$callStore(store, \"getAll\", key, cb);\n}\nfunction $d1f26ac162b12b4a$var$commit(txn) {\n    /* istanbul ignore else */ if (txn.commit) txn.commit();\n}\n// like lodash's minBy\nfunction $d1f26ac162b12b4a$var$minBy(array, func) {\n    let minItem = array[0];\n    for(let i = 1; i < array.length; i++){\n        const item = array[i];\n        if (func(minItem) > func(item)) minItem = item;\n    }\n    return minItem;\n}\n// return an array of results representing all items that are found in each one of the arrays\n//\nfunction $d1f26ac162b12b4a$var$findCommonMembers(arrays, uniqByFunc) {\n    const shortestArray = $d1f26ac162b12b4a$var$minBy(arrays, (_)=>_.length);\n    const results = [];\n    for (const item of shortestArray)// if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some((array)=>array.findIndex((_)=>uniqByFunc(_) === uniqByFunc(item)) === -1)) results.push(item);\n    return results;\n}\nasync function $d1f26ac162b12b4a$var$isEmpty(db) {\n    return !await $d1f26ac162b12b4a$var$get(db, $d1f26ac162b12b4a$var$STORE_KEYVALUE, $d1f26ac162b12b4a$var$KEY_URL);\n}\nasync function $d1f26ac162b12b4a$var$hasData(db, url, eTag) {\n    const [oldETag, oldUrl] = await Promise.all([\n        $d1f26ac162b12b4a$var$KEY_ETAG,\n        $d1f26ac162b12b4a$var$KEY_URL\n    ].map((key)=>$d1f26ac162b12b4a$var$get(db, $d1f26ac162b12b4a$var$STORE_KEYVALUE, key)));\n    return oldETag === eTag && oldUrl === url;\n}\nasync function $d1f26ac162b12b4a$var$doFullDatabaseScanForSingleResult(db, predicate) {\n    // This batching algorithm is just a perf improvement over a basic\n    // cursor. The BATCH_SIZE is an estimate of what would give the best\n    // perf for doing a full DB scan (worst case).\n    //\n    // Mini-benchmark for determining the best batch size:\n    //\n    // PERF=1 pnpm build:rollup && pnpm test:adhoc\n    //\n    // (async () => {\n    //   performance.mark('start')\n    //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n    //   performance.measure('total', 'start')\n    //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n    // })()\n    const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n    return $d1f26ac162b12b4a$var$dbPromise(db, $d1f26ac162b12b4a$var$STORE_EMOJI, $d1f26ac162b12b4a$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        let lastKey;\n        const processNextBatch = ()=>{\n            emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = (e)=>{\n                const results = e.target.result;\n                for (const result of results){\n                    lastKey = result.unicode;\n                    if (predicate(result)) return cb(result);\n                }\n                if (results.length < BATCH_SIZE) return cb();\n                processNextBatch();\n            };\n        };\n        processNextBatch();\n    });\n}\nasync function $d1f26ac162b12b4a$var$loadData(db, emojiData, url, eTag) {\n    {\n        const transformedData = $d1f26ac162b12b4a$var$transformEmojiData(emojiData);\n        await $d1f26ac162b12b4a$var$dbPromise(db, [\n            $d1f26ac162b12b4a$var$STORE_EMOJI,\n            $d1f26ac162b12b4a$var$STORE_KEYVALUE\n        ], $d1f26ac162b12b4a$var$MODE_READWRITE, ([emojiStore, metaStore], txn)=>{\n            let oldETag;\n            let oldUrl;\n            let todo = 0;\n            function checkFetched() {\n                if (++todo === 2) onFetched();\n            }\n            function onFetched() {\n                if (oldETag === eTag && oldUrl === url) // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n                return;\n                // delete old data\n                emojiStore.clear();\n                // insert new data\n                for (const data of transformedData)emojiStore.put(data);\n                metaStore.put(eTag, $d1f26ac162b12b4a$var$KEY_ETAG);\n                metaStore.put(url, $d1f26ac162b12b4a$var$KEY_URL);\n                $d1f26ac162b12b4a$var$commit(txn);\n            }\n            $d1f26ac162b12b4a$var$getIDB(metaStore, $d1f26ac162b12b4a$var$KEY_ETAG, (result)=>{\n                oldETag = result;\n                checkFetched();\n            });\n            $d1f26ac162b12b4a$var$getIDB(metaStore, $d1f26ac162b12b4a$var$KEY_URL, (result)=>{\n                oldUrl = result;\n                checkFetched();\n            });\n        });\n    }\n}\nasync function $d1f26ac162b12b4a$var$getEmojiByGroup(db, group) {\n    return $d1f26ac162b12b4a$var$dbPromise(db, $d1f26ac162b12b4a$var$STORE_EMOJI, $d1f26ac162b12b4a$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        const range = IDBKeyRange.bound([\n            group,\n            0\n        ], [\n            group + 1,\n            0\n        ], false, true);\n        $d1f26ac162b12b4a$var$getAllIDB(emojiStore.index($d1f26ac162b12b4a$var$INDEX_GROUP_AND_ORDER), range, cb);\n    });\n}\nasync function $d1f26ac162b12b4a$var$getEmojiBySearchQuery(db, query) {\n    const tokens = $d1f26ac162b12b4a$var$normalizeTokens($d1f26ac162b12b4a$var$extractTokens(query));\n    if (!tokens.length) return [];\n    return $d1f26ac162b12b4a$var$dbPromise(db, $d1f26ac162b12b4a$var$STORE_EMOJI, $d1f26ac162b12b4a$var$MODE_READONLY, (emojiStore, txn, cb)=>{\n        // get all results that contain all tokens (i.e. an AND query)\n        const intermediateResults = [];\n        const checkDone = ()=>{\n            if (intermediateResults.length === tokens.length) onDone();\n        };\n        const onDone = ()=>{\n            const results = $d1f26ac162b12b4a$var$findCommonMembers(intermediateResults, (_)=>_.unicode);\n            cb(results.sort((a, b)=>a.order < b.order ? -1 : 1));\n        };\n        for(let i = 0; i < tokens.length; i++){\n            const token = tokens[i];\n            const range = i === tokens.length - 1 ? IDBKeyRange.bound(token, token + \"\\uFFFF\", false, true) // treat last token as a prefix search\n             : IDBKeyRange.only(token); // treat all other tokens as an exact match\n            $d1f26ac162b12b4a$var$getAllIDB(emojiStore.index($d1f26ac162b12b4a$var$INDEX_TOKENS), range, (result)=>{\n                intermediateResults.push(result);\n                checkDone();\n            });\n        }\n    });\n}\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function $d1f26ac162b12b4a$var$getEmojiByShortcode(db, shortcode) {\n    const emojis = await $d1f26ac162b12b4a$var$getEmojiBySearchQuery(db, shortcode);\n    // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n    // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n    // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n    // index on shortcodes.\n    if (!emojis.length) {\n        const predicate = (_)=>(_.shortcodes || []).includes(shortcode.toLowerCase());\n        return await $d1f26ac162b12b4a$var$doFullDatabaseScanForSingleResult(db, predicate) || null;\n    }\n    return emojis.filter((_)=>{\n        const lowerShortcodes = (_.shortcodes || []).map((_)=>_.toLowerCase());\n        return lowerShortcodes.includes(shortcode.toLowerCase());\n    })[0] || null;\n}\nasync function $d1f26ac162b12b4a$var$getEmojiByUnicode(db, unicode) {\n    return $d1f26ac162b12b4a$var$dbPromise(db, $d1f26ac162b12b4a$var$STORE_EMOJI, $d1f26ac162b12b4a$var$MODE_READONLY, (emojiStore, txn, cb)=>$d1f26ac162b12b4a$var$getIDB(emojiStore, unicode, (result)=>{\n            if (result) return cb(result);\n            $d1f26ac162b12b4a$var$getIDB(emojiStore.index($d1f26ac162b12b4a$var$INDEX_SKIN_UNICODE), unicode, (result)=>cb(result || null));\n        }));\n}\nfunction $d1f26ac162b12b4a$var$get(db, storeName, key) {\n    return $d1f26ac162b12b4a$var$dbPromise(db, storeName, $d1f26ac162b12b4a$var$MODE_READONLY, (store, txn, cb)=>$d1f26ac162b12b4a$var$getIDB(store, key, cb));\n}\nfunction $d1f26ac162b12b4a$var$set(db, storeName, key, value) {\n    return $d1f26ac162b12b4a$var$dbPromise(db, storeName, $d1f26ac162b12b4a$var$MODE_READWRITE, (store, txn)=>{\n        store.put(value, key);\n        $d1f26ac162b12b4a$var$commit(txn);\n    });\n}\nfunction $d1f26ac162b12b4a$var$incrementFavoriteEmojiCount(db, unicode) {\n    return $d1f26ac162b12b4a$var$dbPromise(db, $d1f26ac162b12b4a$var$STORE_FAVORITES, $d1f26ac162b12b4a$var$MODE_READWRITE, (store, txn)=>$d1f26ac162b12b4a$var$getIDB(store, unicode, (result)=>{\n            store.put((result || 0) + 1, unicode);\n            $d1f26ac162b12b4a$var$commit(txn);\n        }));\n}\nfunction $d1f26ac162b12b4a$var$getTopFavoriteEmoji(db, customEmojiIndex, limit) {\n    if (limit === 0) return [];\n    return $d1f26ac162b12b4a$var$dbPromise(db, [\n        $d1f26ac162b12b4a$var$STORE_FAVORITES,\n        $d1f26ac162b12b4a$var$STORE_EMOJI\n    ], $d1f26ac162b12b4a$var$MODE_READONLY, ([favoritesStore, emojiStore], txn, cb)=>{\n        const results = [];\n        favoritesStore.index($d1f26ac162b12b4a$var$INDEX_COUNT).openCursor(undefined, \"prev\").onsuccess = (e)=>{\n            const cursor = e.target.result;\n            if (!cursor) return cb(results);\n            function addResult(result) {\n                results.push(result);\n                if (results.length === limit) return cb(results) // done, reached the limit\n                ;\n                cursor.continue();\n            }\n            const unicodeOrName = cursor.primaryKey;\n            const custom = customEmojiIndex.byName(unicodeOrName);\n            if (custom) return addResult(custom);\n            // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n            // but my testing suggests it's not actually faster.\n            $d1f26ac162b12b4a$var$getIDB(emojiStore, unicodeOrName, (emoji)=>{\n                if (emoji) return addResult(emoji);\n                // emoji not found somehow, ignore (may happen if custom emoji change)\n                cursor.continue();\n            });\n        };\n    });\n}\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\nconst $d1f26ac162b12b4a$var$CODA_MARKER = \"\"; // marks the end of the string\nfunction $d1f26ac162b12b4a$var$trie(arr, itemToTokens) {\n    const map = new Map();\n    for (const item of arr){\n        const tokens = itemToTokens(item);\n        for (const token of tokens){\n            let currentMap = map;\n            for(let i = 0; i < token.length; i++){\n                const char = token.charAt(i);\n                let nextMap = currentMap.get(char);\n                if (!nextMap) {\n                    nextMap = new Map();\n                    currentMap.set(char, nextMap);\n                }\n                currentMap = nextMap;\n            }\n            let valuesAtCoda = currentMap.get($d1f26ac162b12b4a$var$CODA_MARKER);\n            if (!valuesAtCoda) {\n                valuesAtCoda = [];\n                currentMap.set($d1f26ac162b12b4a$var$CODA_MARKER, valuesAtCoda);\n            }\n            valuesAtCoda.push(item);\n        }\n    }\n    const search = (query, exact)=>{\n        let currentMap = map;\n        for(let i = 0; i < query.length; i++){\n            const char = query.charAt(i);\n            const nextMap = currentMap.get(char);\n            if (nextMap) currentMap = nextMap;\n            else return [];\n        }\n        if (exact) {\n            const results = currentMap.get($d1f26ac162b12b4a$var$CODA_MARKER);\n            return results || [];\n        }\n        const results = [];\n        // traverse\n        const queue = [\n            currentMap\n        ];\n        while(queue.length){\n            const currentMap = queue.shift();\n            const entriesSortedByKey = [\n                ...currentMap.entries()\n            ].sort((a, b)=>a[0] < b[0] ? -1 : 1);\n            for (const [key, value] of entriesSortedByKey)if (key === $d1f26ac162b12b4a$var$CODA_MARKER) results.push(...value);\n            else queue.push(value);\n        }\n        return results;\n    };\n    return search;\n}\nconst $d1f26ac162b12b4a$var$requiredKeys$1 = [\n    \"name\",\n    \"url\"\n];\nfunction $d1f26ac162b12b4a$var$assertCustomEmojis(customEmojis) {\n    const isArray = customEmojis && Array.isArray(customEmojis);\n    const firstItemIsFaulty = isArray && customEmojis.length && (!customEmojis[0] || $d1f26ac162b12b4a$var$requiredKeys$1.some((key)=>!(key in customEmojis[0])));\n    if (!isArray || firstItemIsFaulty) throw new Error(\"Custom emojis are in the wrong format\");\n}\nfunction $d1f26ac162b12b4a$var$customEmojiIndex(customEmojis) {\n    $d1f26ac162b12b4a$var$assertCustomEmojis(customEmojis);\n    const sortByName = (a, b)=>a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n    //\n    // all()\n    //\n    const all = customEmojis.sort(sortByName);\n    //\n    // search()\n    //\n    const emojiToTokens = (emoji)=>[\n            ...new Set((emoji.shortcodes || []).map((shortcode)=>$d1f26ac162b12b4a$var$extractTokens(shortcode)).flat())\n        ];\n    const searchTrie = $d1f26ac162b12b4a$var$trie(customEmojis, emojiToTokens);\n    const searchByExactMatch = (_)=>searchTrie(_, true);\n    const searchByPrefix = (_)=>searchTrie(_, false);\n    // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n    // is treated as a prefix search, but every other one is treated as an exact match.\n    // Then we AND the results together\n    const search = (query)=>{\n        const tokens = $d1f26ac162b12b4a$var$extractTokens(query);\n        const intermediateResults = tokens.map((token, i)=>(i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token));\n        return $d1f26ac162b12b4a$var$findCommonMembers(intermediateResults, (_)=>_.name).sort(sortByName);\n    };\n    //\n    // byShortcode, byName\n    //\n    const shortcodeToEmoji = new Map();\n    const nameToEmoji = new Map();\n    for (const customEmoji of customEmojis){\n        nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n        for (const shortcode of customEmoji.shortcodes || [])shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n    const byShortcode = (shortcode)=>shortcodeToEmoji.get(shortcode.toLowerCase());\n    const byName = (name)=>nameToEmoji.get(name.toLowerCase());\n    return {\n        all: all,\n        search: search,\n        byShortcode: byShortcode,\n        byName: byName\n    };\n}\nconst $d1f26ac162b12b4a$var$isFirefoxContentScript = typeof wrappedJSObject !== \"undefined\";\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction $d1f26ac162b12b4a$var$cleanEmoji(emoji) {\n    if (!emoji) return emoji;\n    // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\n    // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\n    /* istanbul ignore if */ if ($d1f26ac162b12b4a$var$isFirefoxContentScript) emoji = structuredClone(emoji);\n    delete emoji.tokens;\n    if (emoji.skinTones) {\n        const len = emoji.skinTones.length;\n        emoji.skins = Array(len);\n        for(let i = 0; i < len; i++)emoji.skins[i] = {\n            tone: emoji.skinTones[i],\n            unicode: emoji.skinUnicodes[i],\n            version: emoji.skinVersions[i]\n        };\n        delete emoji.skinTones;\n        delete emoji.skinUnicodes;\n        delete emoji.skinVersions;\n    }\n    return emoji;\n}\nfunction $d1f26ac162b12b4a$var$warnETag(eTag) {\n    if (!eTag) console.warn(\"emoji-picker-element is more efficient if the dataSource server exposes an ETag header.\");\n}\nconst $d1f26ac162b12b4a$var$requiredKeys = [\n    \"annotation\",\n    \"emoji\",\n    \"group\",\n    \"order\",\n    \"tags\",\n    \"version\"\n];\nfunction $d1f26ac162b12b4a$var$assertEmojiData(emojiData) {\n    if (!emojiData || !Array.isArray(emojiData) || !emojiData[0] || typeof emojiData[0] !== \"object\" || $d1f26ac162b12b4a$var$requiredKeys.some((key)=>!(key in emojiData[0]))) throw new Error(\"Emoji data is in the wrong format\");\n}\nfunction $d1f26ac162b12b4a$var$assertStatus(response, dataSource) {\n    if (Math.floor(response.status / 100) !== 2) throw new Error(\"Failed to fetch: \" + dataSource + \":  \" + response.status);\n}\nasync function $d1f26ac162b12b4a$var$getETag(dataSource) {\n    const response = await fetch(dataSource, {\n        method: \"HEAD\"\n    });\n    $d1f26ac162b12b4a$var$assertStatus(response, dataSource);\n    const eTag = response.headers.get(\"etag\");\n    $d1f26ac162b12b4a$var$warnETag(eTag);\n    return eTag;\n}\nasync function $d1f26ac162b12b4a$var$getETagAndData(dataSource) {\n    const response = await fetch(dataSource);\n    $d1f26ac162b12b4a$var$assertStatus(response, dataSource);\n    const eTag = response.headers.get(\"etag\");\n    $d1f26ac162b12b4a$var$warnETag(eTag);\n    const emojiData = await response.json();\n    $d1f26ac162b12b4a$var$assertEmojiData(emojiData);\n    return [\n        eTag,\n        emojiData\n    ];\n}\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate \\_()_/\n/** @private */ /**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */ function $d1f26ac162b12b4a$var$arrayBufferToBinaryString(buffer) {\n    var binary = \"\";\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while(++i < length)binary += String.fromCharCode(bytes[i]);\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */ function $d1f26ac162b12b4a$var$binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while(++i < length)arr[i] = binary.charCodeAt(i);\n    return buf;\n}\n// generate a checksum based on the stringified JSON\nasync function $d1f26ac162b12b4a$var$jsonChecksum(object) {\n    const inString = JSON.stringify(object);\n    let inBuffer = $d1f26ac162b12b4a$var$binaryStringToArrayBuffer(inString);\n    // this does not need to be cryptographically secure, SHA-1 is fine\n    const outBuffer = await crypto.subtle.digest(\"SHA-1\", inBuffer);\n    const outBinString = $d1f26ac162b12b4a$var$arrayBufferToBinaryString(outBuffer);\n    const res = btoa(outBinString);\n    return res;\n}\nasync function $d1f26ac162b12b4a$var$checkForUpdates(db, dataSource) {\n    // just do a simple HEAD request first to see if the eTags match\n    let emojiData;\n    let eTag = await $d1f26ac162b12b4a$var$getETag(dataSource);\n    if (!eTag) {\n        const eTagAndData = await $d1f26ac162b12b4a$var$getETagAndData(dataSource);\n        eTag = eTagAndData[0];\n        emojiData = eTagAndData[1];\n        if (!eTag) eTag = await $d1f26ac162b12b4a$var$jsonChecksum(emojiData);\n    }\n    if (await $d1f26ac162b12b4a$var$hasData(db, dataSource, eTag)) ;\n    else {\n        if (!emojiData) {\n            const eTagAndData = await $d1f26ac162b12b4a$var$getETagAndData(dataSource);\n            emojiData = eTagAndData[1];\n        }\n        await $d1f26ac162b12b4a$var$loadData(db, emojiData, dataSource, eTag);\n    }\n}\nasync function $d1f26ac162b12b4a$var$loadDataForFirstTime(db, dataSource) {\n    let [eTag, emojiData] = await $d1f26ac162b12b4a$var$getETagAndData(dataSource);\n    if (!eTag) // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await $d1f26ac162b12b4a$var$jsonChecksum(emojiData);\n    await $d1f26ac162b12b4a$var$loadData(db, emojiData, dataSource, eTag);\n}\nclass $d1f26ac162b12b4a$export$2e2bcd8739ae039 {\n    constructor({ dataSource: dataSource = $d1f26ac162b12b4a$var$DEFAULT_DATA_SOURCE, locale: locale = $d1f26ac162b12b4a$var$DEFAULT_LOCALE, customEmoji: customEmoji = [] } = {}){\n        this.dataSource = dataSource;\n        this.locale = locale;\n        this._dbName = `emoji-picker-element-${this.locale}`;\n        this._db = undefined;\n        this._lazyUpdate = undefined;\n        this._custom = $d1f26ac162b12b4a$var$customEmojiIndex(customEmoji);\n        this._clear = this._clear.bind(this);\n        this._ready = this._init();\n    }\n    async _init() {\n        const db = this._db = await $d1f26ac162b12b4a$var$openDatabase(this._dbName);\n        $d1f26ac162b12b4a$var$addOnCloseListener(this._dbName, this._clear);\n        const dataSource = this.dataSource;\n        const empty = await $d1f26ac162b12b4a$var$isEmpty(db);\n        if (empty) await $d1f26ac162b12b4a$var$loadDataForFirstTime(db, dataSource);\n        else this._lazyUpdate = $d1f26ac162b12b4a$var$checkForUpdates(db, dataSource);\n    }\n    async ready() {\n        const checkReady = async ()=>{\n            if (!this._ready) this._ready = this._init();\n            return this._ready;\n        };\n        await checkReady();\n        // There's a possibility of a race condition where the element gets added, removed, and then added again\n        // with a particular timing, which would set the _db to undefined.\n        // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n        if (!this._db) await checkReady();\n    }\n    async getEmojiByGroup(group) {\n        $d1f26ac162b12b4a$var$assertNumber(group);\n        await this.ready();\n        return $d1f26ac162b12b4a$var$uniqEmoji(await $d1f26ac162b12b4a$var$getEmojiByGroup(this._db, group)).map($d1f26ac162b12b4a$var$cleanEmoji);\n    }\n    async getEmojiBySearchQuery(query) {\n        $d1f26ac162b12b4a$var$assertNonEmptyString(query);\n        await this.ready();\n        const customs = this._custom.search(query);\n        const natives = $d1f26ac162b12b4a$var$uniqEmoji(await $d1f26ac162b12b4a$var$getEmojiBySearchQuery(this._db, query)).map($d1f26ac162b12b4a$var$cleanEmoji);\n        return [\n            ...customs,\n            ...natives\n        ];\n    }\n    async getEmojiByShortcode(shortcode) {\n        $d1f26ac162b12b4a$var$assertNonEmptyString(shortcode);\n        await this.ready();\n        const custom = this._custom.byShortcode(shortcode);\n        if (custom) return custom;\n        return $d1f26ac162b12b4a$var$cleanEmoji(await $d1f26ac162b12b4a$var$getEmojiByShortcode(this._db, shortcode));\n    }\n    async getEmojiByUnicodeOrName(unicodeOrName) {\n        $d1f26ac162b12b4a$var$assertNonEmptyString(unicodeOrName);\n        await this.ready();\n        const custom = this._custom.byName(unicodeOrName);\n        if (custom) return custom;\n        return $d1f26ac162b12b4a$var$cleanEmoji(await $d1f26ac162b12b4a$var$getEmojiByUnicode(this._db, unicodeOrName));\n    }\n    async getPreferredSkinTone() {\n        await this.ready();\n        return await $d1f26ac162b12b4a$var$get(this._db, $d1f26ac162b12b4a$var$STORE_KEYVALUE, $d1f26ac162b12b4a$var$KEY_PREFERRED_SKINTONE) || 0;\n    }\n    async setPreferredSkinTone(skinTone) {\n        $d1f26ac162b12b4a$var$assertNumber(skinTone);\n        await this.ready();\n        return $d1f26ac162b12b4a$var$set(this._db, $d1f26ac162b12b4a$var$STORE_KEYVALUE, $d1f26ac162b12b4a$var$KEY_PREFERRED_SKINTONE, skinTone);\n    }\n    async incrementFavoriteEmojiCount(unicodeOrName) {\n        $d1f26ac162b12b4a$var$assertNonEmptyString(unicodeOrName);\n        await this.ready();\n        return $d1f26ac162b12b4a$var$incrementFavoriteEmojiCount(this._db, unicodeOrName);\n    }\n    async getTopFavoriteEmoji(limit) {\n        $d1f26ac162b12b4a$var$assertNumber(limit);\n        await this.ready();\n        return (await $d1f26ac162b12b4a$var$getTopFavoriteEmoji(this._db, this._custom, limit)).map($d1f26ac162b12b4a$var$cleanEmoji);\n    }\n    set customEmoji(customEmojis) {\n        this._custom = $d1f26ac162b12b4a$var$customEmojiIndex(customEmojis);\n    }\n    get customEmoji() {\n        return this._custom.all;\n    }\n    async _shutdown() {\n        await this.ready(); // reopen if we've already been closed/deleted\n        try {\n            await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n        } catch (err) {}\n    }\n    // clear references to IDB, e.g. during a close event\n    _clear() {\n        // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n        // The memory leak tests prove this is unnecessary. It's because:\n        // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n        // 2) we clear the manual close listeners in databaseLifecycle.js.\n        this._db = this._ready = this._lazyUpdate = undefined;\n    }\n    async close() {\n        await this._shutdown();\n        await $d1f26ac162b12b4a$var$closeDatabase(this._dbName);\n    }\n    async delete() {\n        await this._shutdown();\n        await $d1f26ac162b12b4a$var$deleteDatabase(this._dbName);\n    }\n}\n\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst $1e5dc5e467331cb9$var$allGroups = [\n    [\n        -1,\n        \"\\u2728\",\n        \"custom\"\n    ],\n    [\n        0,\n        \"\\uD83D\\uDE00\",\n        \"smileys-emotion\"\n    ],\n    [\n        1,\n        \"\\uD83D\\uDC4B\",\n        \"people-body\"\n    ],\n    [\n        3,\n        \"\\uD83D\\uDC31\",\n        \"animals-nature\"\n    ],\n    [\n        4,\n        \"\\uD83C\\uDF4E\",\n        \"food-drink\"\n    ],\n    [\n        5,\n        \"\\uD83C\\uDFE0\\uFE0F\",\n        \"travel-places\"\n    ],\n    [\n        6,\n        \"\\u26BD\",\n        \"activities\"\n    ],\n    [\n        7,\n        \"\\uD83D\\uDCDD\",\n        \"objects\"\n    ],\n    [\n        8,\n        \"\\u26D4\\uFE0F\",\n        \"symbols\"\n    ],\n    [\n        9,\n        \"\\uD83C\\uDFC1\",\n        \"flags\"\n    ]\n].map(([id, emoji, name])=>({\n        id: id,\n        emoji: emoji,\n        name: name\n    }));\nconst $1e5dc5e467331cb9$var$groups = $1e5dc5e467331cb9$var$allGroups.slice(1);\nconst $1e5dc5e467331cb9$var$MIN_SEARCH_TEXT_LENGTH = 2;\nconst $1e5dc5e467331cb9$var$NUM_SKIN_TONES = 6;\n/* istanbul ignore next */ const $1e5dc5e467331cb9$var$rIC = typeof requestIdleCallback === \"function\" ? requestIdleCallback : setTimeout;\n// check for ZWJ (zero width joiner) character\nfunction $1e5dc5e467331cb9$var$hasZwj(emoji) {\n    return emoji.unicode.includes(\"\\u200D\");\n}\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst $1e5dc5e467331cb9$var$versionsAndTestEmoji = {\n    \"\\uD83E\\uDEE8\": 15.1,\n    \"\\uD83E\\uDEE0\": 14,\n    \"\\uD83E\\uDD72\": 13.1,\n    \"\\uD83E\\uDD7B\": 12.1,\n    \"\\uD83E\\uDD70\": 11,\n    \"\\uD83E\\uDD29\": 5,\n    \"\\uD83D\\uDC71\\u200D\\u2640\\uFE0F\": 4,\n    \"\\uD83E\\uDD23\": 3,\n    \"\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8\\uFE0F\": 2,\n    \"\\uD83D\\uDE00\": 1,\n    \"\\uD83D\\uDE10\\uFE0F\": 0.7,\n    \"\\uD83D\\uDE03\": 0.6\n};\nconst $1e5dc5e467331cb9$var$TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst $1e5dc5e467331cb9$var$DEFAULT_SKIN_TONE_EMOJI = \"\\uD83D\\uDD90\\uFE0F\";\nconst $1e5dc5e467331cb9$var$DEFAULT_NUM_COLUMNS = 8;\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst $1e5dc5e467331cb9$var$MOST_COMMONLY_USED_EMOJI = [\n    \"\\uD83D\\uDE0A\",\n    \"\\uD83D\\uDE12\",\n    \"\\u2764\\uFE0F\",\n    \"\\uD83D\\uDC4D\\uFE0F\",\n    \"\\uD83D\\uDE0D\",\n    \"\\uD83D\\uDE02\",\n    \"\\uD83D\\uDE2D\",\n    \"\\u263A\\uFE0F\",\n    \"\\uD83D\\uDE14\",\n    \"\\uD83D\\uDE29\",\n    \"\\uD83D\\uDE0F\",\n    \"\\uD83D\\uDC95\",\n    \"\\uD83D\\uDE4C\",\n    \"\\uD83D\\uDE18\"\n];\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst $1e5dc5e467331cb9$var$FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n/* istanbul ignore next */ const $1e5dc5e467331cb9$var$DEFAULT_CATEGORY_SORTING = (a, b)=>a < b ? -1 : a > b ? 1 : 0;\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n// and https://www.npmjs.com/package/if-emoji for inspiration\n// This implementation is largely borrowed from if-emoji, adding the font-family\nconst $1e5dc5e467331cb9$var$getTextFeature = (text, color)=>{\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.textBaseline = \"top\";\n    ctx.font = `100px ${$1e5dc5e467331cb9$var$FONT_FAMILY}`;\n    ctx.fillStyle = color;\n    ctx.scale(0.01, 0.01);\n    ctx.fillText(text, 0, 0);\n    return ctx.getImageData(0, 0, 1, 1).data;\n};\nconst $1e5dc5e467331cb9$var$compareFeatures = (feature1, feature2)=>{\n    const feature1Str = [\n        ...feature1\n    ].join(\",\");\n    const feature2Str = [\n        ...feature2\n    ].join(\",\");\n    // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n    // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n    // 0,0,0,61 - there is a transparency here.\n    return feature1Str === feature2Str && !feature1Str.startsWith(\"0,0,0,\");\n};\nfunction $1e5dc5e467331cb9$var$testColorEmojiSupported(text) {\n    // Render white and black and then compare them to each other and ensure they're the same\n    // color, and neither one is black. This shows that the emoji was rendered in color.\n    const feature1 = $1e5dc5e467331cb9$var$getTextFeature(text, \"#000\");\n    const feature2 = $1e5dc5e467331cb9$var$getTextFeature(text, \"#fff\");\n    return feature1 && feature2 && $1e5dc5e467331cb9$var$compareFeatures(feature1, feature2);\n}\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n// different emoji releases to determine what the font supports\nfunction $1e5dc5e467331cb9$var$determineEmojiSupportLevel() {\n    const entries = Object.entries($1e5dc5e467331cb9$var$versionsAndTestEmoji);\n    try {\n        // start with latest emoji and work backwards\n        for (const [emoji, version] of entries){\n            if ($1e5dc5e467331cb9$var$testColorEmojiSupported(emoji)) return version;\n        }\n    } catch (e) {} finally{}\n    // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n    // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n    return entries[0][1] // first one in the list is the most recent version\n    ;\n}\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nlet $1e5dc5e467331cb9$var$promise;\nconst $1e5dc5e467331cb9$var$detectEmojiSupportLevel = ()=>{\n    if (!$1e5dc5e467331cb9$var$promise) // Delay so it can run while the IDB database is being created by the browser (on another thread).\n    // This helps especially with first load  we want to start pre-populating the database on the main thread,\n    // and then wait for IDB to commit everything, and while waiting we run this check.\n    $1e5dc5e467331cb9$var$promise = new Promise((resolve)=>$1e5dc5e467331cb9$var$rIC(()=>resolve($1e5dc5e467331cb9$var$determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n        ));\n    return $1e5dc5e467331cb9$var$promise;\n};\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst $1e5dc5e467331cb9$var$supportedZwjEmojis = new Map();\nconst $1e5dc5e467331cb9$var$VARIATION_SELECTOR = \"\\uFE0F\";\nconst $1e5dc5e467331cb9$var$SKINTONE_MODIFIER = \"\\ud83c\";\nconst $1e5dc5e467331cb9$var$ZWJ = \"\\u200D\";\nconst $1e5dc5e467331cb9$var$LIGHT_SKIN_TONE = 0x1F3FB;\nconst $1e5dc5e467331cb9$var$LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction $1e5dc5e467331cb9$var$applySkinTone(str, skinTone) {\n    if (skinTone === 0) return str;\n    const zwjIndex = str.indexOf($1e5dc5e467331cb9$var$ZWJ);\n    if (zwjIndex !== -1) return str.substring(0, zwjIndex) + String.fromCodePoint($1e5dc5e467331cb9$var$LIGHT_SKIN_TONE + skinTone - 1) + str.substring(zwjIndex);\n    if (str.endsWith($1e5dc5e467331cb9$var$VARIATION_SELECTOR)) str = str.substring(0, str.length - 1);\n    return str + $1e5dc5e467331cb9$var$SKINTONE_MODIFIER + String.fromCodePoint($1e5dc5e467331cb9$var$LIGHT_SKIN_TONE_MODIFIER + skinTone - 1);\n}\nfunction $1e5dc5e467331cb9$var$halt(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction $1e5dc5e467331cb9$var$incrementOrDecrement(decrement, val, arr) {\n    val += decrement ? -1 : 1;\n    if (val < 0) val = arr.length - 1;\n    else if (val >= arr.length) val = 0;\n    return val;\n}\n// like lodash's uniqBy but much smaller\nfunction $1e5dc5e467331cb9$var$uniqBy(arr, func) {\n    const set = new Set();\n    const res = [];\n    for (const item of arr){\n        const key = func(item);\n        if (!set.has(key)) {\n            set.add(key);\n            res.push(item);\n        }\n    }\n    return res;\n}\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\nfunction $1e5dc5e467331cb9$var$summarizeEmojisForUI(emojis, emojiSupportLevel) {\n    const toSimpleSkinsMap = (skins)=>{\n        const res = {};\n        for (const skin of skins)// ignore arrays like [1, 2] with multiple skin tones\n        // also ignore variants that are in an unsupported emoji version\n        // (these do exist - variants from a different version than their base emoji)\n        if (typeof skin.tone === \"number\" && skin.version <= emojiSupportLevel) res[skin.tone] = skin.unicode;\n        return res;\n    };\n    return emojis.map(({ unicode: unicode, skins: skins, shortcodes: shortcodes, url: url, name: name, category: category, annotation: annotation })=>({\n            unicode: unicode,\n            name: name,\n            shortcodes: shortcodes,\n            url: url,\n            category: category,\n            annotation: annotation,\n            id: unicode || name,\n            skins: skins && toSimpleSkinsMap(skins)\n        }));\n}\n// import rAF from one place so that the bundle size is a bit smaller\nconst $1e5dc5e467331cb9$var$rAF = requestAnimationFrame;\n// Svelte action to calculate the width of an element and auto-update\n// using ResizeObserver. If ResizeObserver is unsupported, we just use rAF once\n// and don't bother to update.\nlet $1e5dc5e467331cb9$var$resizeObserverSupported = typeof ResizeObserver === \"function\";\nfunction $1e5dc5e467331cb9$var$calculateWidth(node, abortSignal, onUpdate) {\n    let resizeObserver;\n    if ($1e5dc5e467331cb9$var$resizeObserverSupported) {\n        resizeObserver = new ResizeObserver((entries)=>onUpdate(entries[0].contentRect.width));\n        resizeObserver.observe(node);\n    } else $1e5dc5e467331cb9$var$rAF(()=>onUpdate(node.getBoundingClientRect().width));\n    // cleanup function (called on destroy)\n    abortSignal.addEventListener(\"abort\", ()=>{\n        if (resizeObserver) resizeObserver.disconnect();\n    });\n}\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction $1e5dc5e467331cb9$var$calculateTextWidth(node) {\n    /* istanbul ignore else */ {\n        const range = document.createRange();\n        range.selectNode(node.firstChild);\n        return range.getBoundingClientRect().width;\n    }\n}\nlet $1e5dc5e467331cb9$var$baselineEmojiWidth;\nfunction $1e5dc5e467331cb9$var$checkZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n    for (const emoji of zwjEmojisToCheck){\n        const domNode = emojiToDomNode(emoji);\n        const emojiWidth = $1e5dc5e467331cb9$var$calculateTextWidth(domNode);\n        if (typeof $1e5dc5e467331cb9$var$baselineEmojiWidth === \"undefined\") $1e5dc5e467331cb9$var$baselineEmojiWidth = $1e5dc5e467331cb9$var$calculateTextWidth(baselineEmoji);\n        // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n        // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n        // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n        // So here we set the threshold at 1.8 times the size of the baseline emoji.\n        const supported = emojiWidth / 1.8 < $1e5dc5e467331cb9$var$baselineEmojiWidth;\n        $1e5dc5e467331cb9$var$supportedZwjEmojis.set(emoji.unicode, supported);\n    }\n}\n// like lodash's uniq\nfunction $1e5dc5e467331cb9$var$uniq(arr) {\n    return $1e5dc5e467331cb9$var$uniqBy(arr, (_)=>_);\n}\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\n// At best the invalidation is useless, at worst it can cause infinite loops:\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\n// https://github.com/sveltejs/svelte/issues/6521\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\nfunction $1e5dc5e467331cb9$var$resetScrollTopIfPossible(element) {\n    /* istanbul ignore else */ if (element) element.scrollTop = 0;\n}\nfunction $1e5dc5e467331cb9$var$getFromMap(cache, key, func) {\n    let cached = cache.get(key);\n    if (!cached) {\n        cached = func();\n        cache.set(key, cached);\n    }\n    return cached;\n}\nfunction $1e5dc5e467331cb9$var$toString(value) {\n    return \"\" + value;\n}\nfunction $1e5dc5e467331cb9$var$parseTemplate(htmlString) {\n    const template = document.createElement(\"template\");\n    template.innerHTML = htmlString;\n    return template;\n}\nconst $1e5dc5e467331cb9$var$parseCache = new WeakMap();\nconst $1e5dc5e467331cb9$var$domInstancesCache = new WeakMap();\n// This needs to be a symbol because it needs to be different from any possible output of a key function\nconst $1e5dc5e467331cb9$var$unkeyedSymbol = Symbol(\"un-keyed\");\n// Not supported in Safari <=13\nconst $1e5dc5e467331cb9$var$hasReplaceChildren = \"replaceChildren\" in Element.prototype;\nfunction $1e5dc5e467331cb9$var$replaceChildren(parentNode, newChildren) {\n    /* istanbul ignore else */ if ($1e5dc5e467331cb9$var$hasReplaceChildren) parentNode.replaceChildren(...newChildren);\n    else {\n        parentNode.innerHTML = \"\";\n        parentNode.append(...newChildren);\n    }\n}\nfunction $1e5dc5e467331cb9$var$doChildrenNeedRerender(parentNode, newChildren) {\n    let oldChild = parentNode.firstChild;\n    let oldChildrenCount = 0;\n    // iterate using firstChild/nextSibling because browsers use a linked list under the hood\n    while(oldChild){\n        const newChild = newChildren[oldChildrenCount];\n        // check if the old child and new child are the same\n        if (newChild !== oldChild) return true;\n        oldChild = oldChild.nextSibling;\n        oldChildrenCount++;\n    }\n    // if new children length is different from old, we must re-render\n    return oldChildrenCount !== newChildren.length;\n}\nfunction $1e5dc5e467331cb9$var$patchChildren(newChildren, instanceBinding) {\n    const { targetNode: targetNode } = instanceBinding;\n    let { targetParentNode: targetParentNode } = instanceBinding;\n    let needsRerender = false;\n    if (targetParentNode) needsRerender = $1e5dc5e467331cb9$var$doChildrenNeedRerender(targetParentNode, newChildren);\n    else {\n        needsRerender = true;\n        instanceBinding.targetNode = undefined; // placeholder node not needed anymore, free memory\n        instanceBinding.targetParentNode = targetParentNode = targetNode.parentNode;\n    }\n    // avoid re-rendering list if the dom nodes are exactly the same before and after\n    if (needsRerender) $1e5dc5e467331cb9$var$replaceChildren(targetParentNode, newChildren);\n}\nfunction $1e5dc5e467331cb9$var$patch(expressions, instanceBindings) {\n    for (const instanceBinding of instanceBindings){\n        const { targetNode: targetNode, currentExpression: currentExpression, binding: { expressionIndex: expressionIndex, attributeName: attributeName, attributeValuePre: attributeValuePre, attributeValuePost: attributeValuePost } } = instanceBinding;\n        const expression = expressions[expressionIndex];\n        if (currentExpression === expression) continue;\n        instanceBinding.currentExpression = expression;\n        if (attributeName) targetNode.setAttribute(attributeName, attributeValuePre + $1e5dc5e467331cb9$var$toString(expression) + attributeValuePost);\n        else {\n            let newNode;\n            if (Array.isArray(expression)) $1e5dc5e467331cb9$var$patchChildren(expression, instanceBinding);\n            else if (expression instanceof Element) {\n                newNode = expression;\n                targetNode.replaceWith(newNode);\n            } else // nodeValue is faster than textContent supposedly https://www.youtube.com/watch?v=LY6y3HbDVmg\n            // note we may be replacing the value in a placeholder text node\n            targetNode.nodeValue = $1e5dc5e467331cb9$var$toString(expression);\n            if (newNode) instanceBinding.targetNode = newNode;\n        }\n    }\n}\nfunction $1e5dc5e467331cb9$var$parse(tokens) {\n    let htmlString = \"\";\n    let withinTag = false;\n    let withinAttribute = false;\n    let elementIndexCounter = -1; // depth-first traversal order\n    const elementsToBindings = new Map();\n    const elementIndexes = [];\n    for(let i = 0, len = tokens.length; i < len; i++){\n        const token = tokens[i];\n        htmlString += token;\n        if (i === len - 1) break; // no need to process characters - no more expressions to be found\n        for(let j = 0; j < token.length; j++){\n            const char = token.charAt(j);\n            switch(char){\n                case \"<\":\n                    {\n                        const nextChar = token.charAt(j + 1);\n                        if (nextChar === \"/\") // leaving an element\n                        elementIndexes.pop();\n                        else {\n                            withinTag = true;\n                            elementIndexes.push(++elementIndexCounter);\n                        }\n                        break;\n                    }\n                case \">\":\n                    withinTag = false;\n                    withinAttribute = false;\n                    break;\n                case \"=\":\n                    withinAttribute = true;\n                    break;\n            }\n        }\n        const elementIndex = elementIndexes[elementIndexes.length - 1];\n        const bindings = $1e5dc5e467331cb9$var$getFromMap(elementsToBindings, elementIndex, ()=>[]);\n        let attributeName;\n        let attributeValuePre;\n        let attributeValuePost;\n        if (withinAttribute) {\n            // I never use single-quotes for attribute values in HTML, so just support double-quotes or no-quotes\n            const match = /(\\S+)=\"?([^\"=]*)$/.exec(token);\n            attributeName = match[1];\n            attributeValuePre = match[2];\n            attributeValuePost = /^[^\">]*/.exec(tokens[i + 1])[0];\n        }\n        const binding = {\n            attributeName: attributeName,\n            attributeValuePre: attributeValuePre,\n            attributeValuePost: attributeValuePost,\n            expressionIndex: i\n        };\n        bindings.push(binding);\n        if (!withinTag && !withinAttribute) // Add a placeholder text node, so we can find it later. Note we only support one dynamic child text node\n        htmlString += \" \";\n    }\n    const template = $1e5dc5e467331cb9$var$parseTemplate(htmlString);\n    return {\n        template: template,\n        elementsToBindings: elementsToBindings\n    };\n}\nfunction $1e5dc5e467331cb9$var$traverseAndSetupBindings(dom, elementsToBindings) {\n    const instanceBindings = [];\n    // traverse dom\n    const treeWalker = document.createTreeWalker(dom, NodeFilter.SHOW_ELEMENT);\n    let element = dom;\n    let elementIndex = -1;\n    do {\n        const bindings = elementsToBindings.get(++elementIndex);\n        if (bindings) for(let i = 0; i < bindings.length; i++){\n            const binding = bindings[i];\n            const targetNode = binding.attributeName ? element // attribute binding, just use the element itself\n             : element.firstChild; // not an attribute binding, so has a placeholder text node\n            const instanceBinding = {\n                binding: binding,\n                targetNode: targetNode,\n                targetParentNode: undefined,\n                currentExpression: undefined\n            };\n            instanceBindings.push(instanceBinding);\n        }\n    }while (element = treeWalker.nextNode());\n    return instanceBindings;\n}\nfunction $1e5dc5e467331cb9$var$parseHtml(tokens) {\n    // All templates and bound expressions are unique per tokens array\n    const { template: template, elementsToBindings: elementsToBindings } = $1e5dc5e467331cb9$var$getFromMap($1e5dc5e467331cb9$var$parseCache, tokens, ()=>$1e5dc5e467331cb9$var$parse(tokens));\n    // When we parseHtml, we always return a fresh DOM instance ready to be updated\n    const dom = template.cloneNode(true).content.firstElementChild;\n    const instanceBindings = $1e5dc5e467331cb9$var$traverseAndSetupBindings(dom, elementsToBindings);\n    return function updateDomInstance(expressions) {\n        $1e5dc5e467331cb9$var$patch(expressions, instanceBindings);\n        return dom;\n    };\n}\nfunction $1e5dc5e467331cb9$var$createFramework(state) {\n    const domInstances = $1e5dc5e467331cb9$var$getFromMap($1e5dc5e467331cb9$var$domInstancesCache, state, ()=>new Map());\n    let domInstanceCacheKey = $1e5dc5e467331cb9$var$unkeyedSymbol;\n    function html(tokens, ...expressions) {\n        // Each unique lexical usage of map() is considered unique due to the html`` tagged template call it makes,\n        // which has lexically unique tokens. The unkeyed symbol is just used for html`` usage outside of a map().\n        const domInstancesForTokens = $1e5dc5e467331cb9$var$getFromMap(domInstances, tokens, ()=>new Map());\n        const updateDomInstance = $1e5dc5e467331cb9$var$getFromMap(domInstancesForTokens, domInstanceCacheKey, ()=>$1e5dc5e467331cb9$var$parseHtml(tokens));\n        return updateDomInstance(expressions) // update with expressions\n        ;\n    }\n    function map(array, callback, keyFunction) {\n        return array.map((item, index)=>{\n            const originalCacheKey = domInstanceCacheKey;\n            domInstanceCacheKey = keyFunction(item);\n            try {\n                return callback(item, index);\n            } finally{\n                domInstanceCacheKey = originalCacheKey;\n            }\n        });\n    }\n    return {\n        map: map,\n        html: html\n    };\n}\nfunction $1e5dc5e467331cb9$var$render(container, state, helpers, events, actions, refs, abortSignal, firstRender) {\n    const { labelWithSkin: labelWithSkin, titleForEmoji: titleForEmoji, unicodeWithSkin: unicodeWithSkin } = helpers;\n    const { html: html, map: map } = $1e5dc5e467331cb9$var$createFramework(state);\n    function emojiList(emojis, searchMode, prefix) {\n        return map(emojis, (emoji, i)=>{\n            return html`<button role=\"${searchMode ? \"option\" : \"menuitem\"}\" aria-selected=\"${state.searchMode ? i === state.activeSearchItem : \"\"}\" aria-label=\"${labelWithSkin(emoji, state.currentSkinTone)}\" title=\"${titleForEmoji(emoji)}\" class=\"emoji ${searchMode && i === state.activeSearchItem ? \"active\" : \"\"}\" id=\"${`${prefix}-${emoji.id}`}\">${emoji.unicode ? unicodeWithSkin(emoji, state.currentSkinTone) : html`<img class=\"custom-emoji\" src=\"${emoji.url}\" alt=\"\" loading=\"lazy\">`}</button>`;\n        // It's important for the cache key to be unique based on the prefix, because the framework caches based on the\n        // unique tokens + cache key, and the same emoji may be used in the tab as well as in the fav bar\n        }, (emoji)=>`${prefix}-${emoji.id}`);\n    }\n    const section = ()=>{\n        return html`<section data-ref=\"rootElement\" class=\"picker\" aria-label=\"${state.i18n.regionLabel}\" style=\"${state.pickerStyle}\"><div class=\"pad-top\"></div><div class=\"search-row\"><div class=\"search-wrapper\"><input id=\"search\" class=\"search\" type=\"search\" role=\"combobox\" enterkeyhint=\"search\" placeholder=\"${state.i18n.searchLabel}\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"true\" aria-expanded=\"${!!(state.searchMode && state.currentEmojis.length)}\" aria-controls=\"search-results\" aria-describedby=\"search-description\" aria-autocomplete=\"list\" aria-activedescendant=\"${state.activeSearchItemId ? `emo-${state.activeSearchItemId}` : \"\"}\" data-ref=\"searchElement\" data-on-input=\"onSearchInput\" data-on-keydown=\"onSearchKeydown\"><label class=\"sr-only\" for=\"search\">${state.i18n.searchLabel}</label> <span id=\"search-description\" class=\"sr-only\">${state.i18n.searchDescription}</span></div><div class=\"skintone-button-wrapper ${state.skinTonePickerExpandedAfterAnimation ? \"expanded\" : \"\"}\"><button id=\"skintone-button\" class=\"emoji ${state.skinTonePickerExpanded ? \"hide-focus\" : \"\"}\" aria-label=\"${state.skinToneButtonLabel}\" title=\"${state.skinToneButtonLabel}\" aria-describedby=\"skintone-description\" aria-haspopup=\"listbox\" aria-expanded=\"${state.skinTonePickerExpanded}\" aria-controls=\"skintone-list\" data-on-click=\"onClickSkinToneButton\">${state.skinToneButtonText}</button></div><span id=\"skintone-description\" class=\"sr-only\">${state.i18n.skinToneDescription}</span><div data-ref=\"skinToneDropdown\" id=\"skintone-list\" class=\"skintone-list hide-focus ${state.skinTonePickerExpanded ? \"\" : \"hidden no-animate\"}\" style=\"transform:translateY(${state.skinTonePickerExpanded ? 0 : \"calc(-1 * var(--num-skintones) * var(--total-emoji-size))\"})\" role=\"listbox\" aria-label=\"${state.i18n.skinTonesLabel}\" aria-activedescendant=\"skintone-${state.activeSkinTone}\" aria-hidden=\"${!state.skinTonePickerExpanded}\" tabIndex=\"-1\" data-on-focusout=\"onSkinToneOptionsFocusOut\" data-on-click=\"onSkinToneOptionsClick\" data-on-keydown=\"onSkinToneOptionsKeydown\" data-on-keyup=\"onSkinToneOptionsKeyup\">${map(state.skinTones, (skinTone, i)=>{\n            return html`<div id=\"skintone-${i}\" class=\"emoji ${i === state.activeSkinTone ? \"active\" : \"\"}\" aria-selected=\"${i === state.activeSkinTone}\" role=\"option\" title=\"${state.i18n.skinTones[i]}\" aria-label=\"${state.i18n.skinTones[i]}\">${skinTone}</div>`;\n        }, (skinTone)=>skinTone)}</div></div><div class=\"nav\" role=\"tablist\" style=\"grid-template-columns:repeat(${state.groups.length},1fr)\" aria-label=\"${state.i18n.categoriesLabel}\" data-on-keydown=\"onNavKeydown\" data-on-click=\"onNavClick\">${map(state.groups, (group)=>{\n            return html`<button role=\"tab\" class=\"nav-button\" aria-controls=\"tab-${group.id}\" aria-label=\"${state.i18n.categories[group.name]}\" aria-selected=\"${!state.searchMode && state.currentGroup.id === group.id}\" title=\"${state.i18n.categories[group.name]}\" data-group-id=\"${group.id}\"><div class=\"nav-emoji emoji\">${group.emoji}</div></button>`;\n        }, (group)=>group.id)}</div><div class=\"indicator-wrapper\"><div class=\"indicator\" style=\"transform:translateX(${/* istanbul ignore next */ (state.isRtl ? -1 : 1) * state.currentGroupIndex * 100}%)\"></div></div><div class=\"message ${state.message ? \"\" : \"gone\"}\" role=\"alert\" aria-live=\"polite\">${state.message}</div><div data-ref=\"tabpanelElement\" class=\"tabpanel ${!state.databaseLoaded || state.message ? \"gone\" : \"\"}\" role=\"${state.searchMode ? \"region\" : \"tabpanel\"}\" aria-label=\"${state.searchMode ? state.i18n.searchResultsLabel : state.i18n.categories[state.currentGroup.name]}\" id=\"${state.searchMode ? \"\" : `tab-${state.currentGroup.id}`}\" tabIndex=\"0\" data-on-click=\"onEmojiClick\"><div data-action=\"calculateEmojiGridStyle\">${map(state.currentEmojisWithCategories, (emojiWithCategory, i)=>{\n            return html`<div><div id=\"menu-label-${i}\" class=\"category ${state.currentEmojisWithCategories.length === 1 && state.currentEmojisWithCategories[0].category === \"\" ? \"gone\" : \"\"}\" aria-hidden=\"true\">${state.searchMode ? state.i18n.searchResultsLabel : emojiWithCategory.category ? emojiWithCategory.category : state.currentEmojisWithCategories.length > 1 ? state.i18n.categories.custom : state.i18n.categories[state.currentGroup.name]}</div><div class=\"emoji-menu\" role=\"${state.searchMode ? \"listbox\" : \"menu\"}\" aria-labelledby=\"menu-label-${i}\" id=\"${state.searchMode ? \"search-results\" : \"\"}\">${emojiList(emojiWithCategory.emojis, state.searchMode, /* prefix */ \"emo\")}</div></div>`;\n        }, (emojiWithCategory)=>emojiWithCategory.category)}</div></div><div class=\"favorites emoji-menu ${state.message ? \"gone\" : \"\"}\" role=\"menu\" aria-label=\"${state.i18n.favoritesLabel}\" style=\"padding-inline-end:${`${state.scrollbarWidth}px`}\" data-on-click=\"onEmojiClick\">${emojiList(state.currentFavorites, /* searchMode */ false, /* prefix */ \"fav\")}</div><button data-ref=\"baselineEmoji\" aria-hidden=\"true\" tabindex=\"-1\" class=\"abs-pos hidden emoji baseline-emoji\"></button></section>`;\n    };\n    const rootDom = section();\n    if (firstRender) {\n        container.appendChild(rootDom);\n        // we only bind events/refs/actions once - there is no need to find them again given this component structure\n        // helper for traversing the dom, finding elements by an attribute, and getting the attribute value\n        const forElementWithAttribute = (attributeName, callback)=>{\n            for (const element of container.querySelectorAll(`[${attributeName}]`))callback(element, element.getAttribute(attributeName));\n        };\n        // bind events\n        for (const eventName of [\n            \"click\",\n            \"focusout\",\n            \"input\",\n            \"keydown\",\n            \"keyup\"\n        ])forElementWithAttribute(`data-on-${eventName}`, (element, listenerName)=>{\n            element.addEventListener(eventName, events[listenerName]);\n        });\n        // find refs\n        forElementWithAttribute(\"data-ref\", (element, ref)=>{\n            refs[ref] = element;\n        });\n        // set up actions\n        forElementWithAttribute(\"data-action\", (element, action)=>{\n            actions[action](element);\n        });\n        // destroy/abort logic\n        abortSignal.addEventListener(\"abort\", ()=>{\n            container.removeChild(rootDom);\n        });\n    }\n}\n/* istanbul ignore next */ const $1e5dc5e467331cb9$var$qM = typeof queueMicrotask === \"function\" ? queueMicrotask : (callback)=>Promise.resolve().then(callback);\nfunction $1e5dc5e467331cb9$var$createState(abortSignal) {\n    let destroyed = false;\n    let currentObserver;\n    const propsToObservers = new Map();\n    const dirtyObservers = new Set();\n    let queued;\n    const flush = ()=>{\n        if (destroyed) return;\n        const observersToRun = [\n            ...dirtyObservers\n        ];\n        dirtyObservers.clear(); // clear before running to force any new updates to run in another tick of the loop\n        try {\n            for (const observer of observersToRun)observer();\n        } finally{\n            queued = false;\n            if (dirtyObservers.size) {\n                queued = true;\n                $1e5dc5e467331cb9$var$qM(flush);\n            }\n        }\n    };\n    const state = new Proxy({}, {\n        get (target, prop) {\n            if (currentObserver) {\n                let observers = propsToObservers.get(prop);\n                if (!observers) {\n                    observers = new Set();\n                    propsToObservers.set(prop, observers);\n                }\n                observers.add(currentObserver);\n            }\n            return target[prop];\n        },\n        set (target, prop, newValue) {\n            target[prop] = newValue;\n            const observers = propsToObservers.get(prop);\n            if (observers) {\n                for (const observer of observers)dirtyObservers.add(observer);\n                if (!queued) {\n                    queued = true;\n                    $1e5dc5e467331cb9$var$qM(flush);\n                }\n            }\n            return true;\n        }\n    });\n    const createEffect = (callback)=>{\n        const runnable = ()=>{\n            const oldObserver = currentObserver;\n            currentObserver = runnable;\n            try {\n                return callback();\n            } finally{\n                currentObserver = oldObserver;\n            }\n        };\n        return runnable();\n    };\n    // destroy logic\n    abortSignal.addEventListener(\"abort\", ()=>{\n        destroyed = true;\n    });\n    return {\n        state: state,\n        createEffect: createEffect\n    };\n}\n// Compare two arrays, with a function called on each item in the two arrays that returns true if the items are equal\nfunction $1e5dc5e467331cb9$var$arraysAreEqualByFunction(left, right, areEqualFunc) {\n    if (left.length !== right.length) return false;\n    for(let i = 0; i < left.length; i++){\n        if (!areEqualFunc(left[i], right[i])) return false;\n    }\n    return true;\n}\n/* eslint-disable prefer-const,no-labels,no-inner-declarations */ // constants\nconst $1e5dc5e467331cb9$var$EMPTY_ARRAY = [];\nconst { assign: $1e5dc5e467331cb9$var$assign } = Object;\nfunction $1e5dc5e467331cb9$var$createRoot(shadowRoot, props) {\n    const refs = {};\n    const abortController = new AbortController();\n    const abortSignal = abortController.signal;\n    const { state: state, createEffect: createEffect } = $1e5dc5e467331cb9$var$createState(abortSignal);\n    // initial state\n    $1e5dc5e467331cb9$var$assign(state, {\n        skinToneEmoji: undefined,\n        i18n: undefined,\n        database: undefined,\n        customEmoji: undefined,\n        customCategorySorting: undefined,\n        emojiVersion: undefined\n    });\n    // public props\n    $1e5dc5e467331cb9$var$assign(state, props);\n    // private props\n    $1e5dc5e467331cb9$var$assign(state, {\n        initialLoad: true,\n        currentEmojis: [],\n        currentEmojisWithCategories: [],\n        rawSearchText: \"\",\n        searchText: \"\",\n        searchMode: false,\n        activeSearchItem: -1,\n        message: undefined,\n        skinTonePickerExpanded: false,\n        skinTonePickerExpandedAfterAnimation: false,\n        currentSkinTone: 0,\n        activeSkinTone: 0,\n        skinToneButtonText: undefined,\n        pickerStyle: undefined,\n        skinToneButtonLabel: \"\",\n        skinTones: [],\n        currentFavorites: [],\n        defaultFavoriteEmojis: undefined,\n        numColumns: $1e5dc5e467331cb9$var$DEFAULT_NUM_COLUMNS,\n        isRtl: false,\n        scrollbarWidth: 0,\n        currentGroupIndex: 0,\n        groups: $1e5dc5e467331cb9$var$groups,\n        databaseLoaded: false,\n        activeSearchItemId: undefined\n    });\n    //\n    // Update the current group based on the currentGroupIndex\n    //\n    createEffect(()=>{\n        if (state.currentGroup !== state.groups[state.currentGroupIndex]) state.currentGroup = state.groups[state.currentGroupIndex];\n    });\n    //\n    // Utils/helpers\n    //\n    const focus = (id)=>{\n        shadowRoot.getElementById(id).focus();\n    };\n    const emojiToDomNode = (emoji)=>shadowRoot.getElementById(`emo-${emoji.id}`);\n    // fire a custom event that crosses the shadow boundary\n    const fireEvent = (name, detail)=>{\n        refs.rootElement.dispatchEvent(new CustomEvent(name, {\n            detail: detail,\n            bubbles: true,\n            composed: true\n        }));\n    };\n    //\n    // Comparison utils\n    //\n    const compareEmojiArrays = (a, b)=>a.id === b.id;\n    const compareCurrentEmojisWithCategories = (a, b)=>{\n        const { category: aCategory, emojis: aEmojis } = a;\n        const { category: bCategory, emojis: bEmojis } = b;\n        if (aCategory !== bCategory) return false;\n        return $1e5dc5e467331cb9$var$arraysAreEqualByFunction(aEmojis, bEmojis, compareEmojiArrays);\n    };\n    //\n    // Update utils to avoid excessive re-renders\n    //\n    // avoid excessive re-renders by checking the value before setting\n    const updateCurrentEmojis = (newEmojis)=>{\n        if (!$1e5dc5e467331cb9$var$arraysAreEqualByFunction(state.currentEmojis, newEmojis, compareEmojiArrays)) state.currentEmojis = newEmojis;\n    };\n    // avoid excessive re-renders\n    const updateSearchMode = (newSearchMode)=>{\n        if (state.searchMode !== newSearchMode) state.searchMode = newSearchMode;\n    };\n    // avoid excessive re-renders\n    const updateCurrentEmojisWithCategories = (newEmojisWithCategories)=>{\n        if (!$1e5dc5e467331cb9$var$arraysAreEqualByFunction(state.currentEmojisWithCategories, newEmojisWithCategories, compareCurrentEmojisWithCategories)) state.currentEmojisWithCategories = newEmojisWithCategories;\n    };\n    // Helpers used by PickerTemplate\n    const unicodeWithSkin = (emoji, currentSkinTone)=>currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n    const labelWithSkin = (emoji, currentSkinTone)=>$1e5dc5e467331cb9$var$uniq([\n            emoji.name || unicodeWithSkin(emoji, currentSkinTone),\n            emoji.annotation,\n            ...emoji.shortcodes || $1e5dc5e467331cb9$var$EMPTY_ARRAY\n        ].filter(Boolean)).join(\", \");\n    const titleForEmoji = (emoji)=>emoji.annotation || (emoji.shortcodes || $1e5dc5e467331cb9$var$EMPTY_ARRAY).join(\", \");\n    const helpers = {\n        labelWithSkin: labelWithSkin,\n        titleForEmoji: titleForEmoji,\n        unicodeWithSkin: unicodeWithSkin\n    };\n    const events = {\n        onClickSkinToneButton: onClickSkinToneButton,\n        onEmojiClick: onEmojiClick,\n        onNavClick: onNavClick,\n        onNavKeydown: onNavKeydown,\n        onSearchKeydown: onSearchKeydown,\n        onSkinToneOptionsClick: onSkinToneOptionsClick,\n        onSkinToneOptionsFocusOut: onSkinToneOptionsFocusOut,\n        onSkinToneOptionsKeydown: onSkinToneOptionsKeydown,\n        onSkinToneOptionsKeyup: onSkinToneOptionsKeyup,\n        onSearchInput: onSearchInput\n    };\n    const actions = {\n        calculateEmojiGridStyle: calculateEmojiGridStyle\n    };\n    let firstRender = true;\n    createEffect(()=>{\n        $1e5dc5e467331cb9$var$render(shadowRoot, state, helpers, events, actions, refs, abortSignal, firstRender);\n        firstRender = false;\n    });\n    //\n    // Determine the emoji support level (in requestIdleCallback)\n    //\n    // mount logic\n    if (!state.emojiVersion) $1e5dc5e467331cb9$var$detectEmojiSupportLevel().then((level)=>{\n        // Can't actually test emoji support in Jest/Vitest/JSDom, emoji never render in color in Cairo\n        /* istanbul ignore next */ if (!level) state.message = state.i18n.emojiUnsupportedMessage;\n    });\n    //\n    // Set or update the database object\n    //\n    createEffect(()=>{\n        // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n        async function handleDatabaseLoading() {\n            let showingLoadingMessage = false;\n            const timeoutHandle = setTimeout(()=>{\n                showingLoadingMessage = true;\n                state.message = state.i18n.loadingMessage;\n            }, $1e5dc5e467331cb9$var$TIMEOUT_BEFORE_LOADING_MESSAGE);\n            try {\n                await state.database.ready();\n                state.databaseLoaded = true; // eslint-disable-line no-unused-vars\n            } catch (err) {\n                console.error(err);\n                state.message = state.i18n.networkErrorMessage;\n            } finally{\n                clearTimeout(timeoutHandle);\n                if (showingLoadingMessage) {\n                    showingLoadingMessage = false;\n                    state.message = \"\"; // eslint-disable-line no-unused-vars\n                }\n            }\n        }\n        if (state.database) /* no await */ handleDatabaseLoading();\n    });\n    //\n    // Global styles for the entire picker\n    //\n    createEffect(()=>{\n        state.pickerStyle = `\n      --num-groups: ${state.groups.length}; \n      --indicator-opacity: ${state.searchMode ? 0 : 1}; \n      --num-skintones: ${$1e5dc5e467331cb9$var$NUM_SKIN_TONES};`;\n    });\n    //\n    // Set or update the customEmoji\n    //\n    createEffect(()=>{\n        if (state.customEmoji && state.database) updateCustomEmoji(); // re-run whenever customEmoji change\n    });\n    createEffect(()=>{\n        if (state.customEmoji && state.customEmoji.length) {\n            if (state.groups !== $1e5dc5e467331cb9$var$allGroups) state.groups = $1e5dc5e467331cb9$var$allGroups;\n        } else if (state.groups !== $1e5dc5e467331cb9$var$groups) {\n            if (state.currentGroupIndex) // If the current group is anything other than \"custom\" (which is first), decrement.\n            // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n            state.currentGroupIndex--;\n            state.groups = $1e5dc5e467331cb9$var$groups;\n        }\n    });\n    //\n    // Set or update the preferred skin tone\n    //\n    createEffect(()=>{\n        async function updatePreferredSkinTone() {\n            if (state.databaseLoaded) state.currentSkinTone = await state.database.getPreferredSkinTone();\n        }\n        /* no await */ updatePreferredSkinTone();\n    });\n    createEffect(()=>{\n        state.skinTones = Array($1e5dc5e467331cb9$var$NUM_SKIN_TONES).fill().map((_, i)=>$1e5dc5e467331cb9$var$applySkinTone(state.skinToneEmoji, i));\n    });\n    createEffect(()=>{\n        state.skinToneButtonText = state.skinTones[state.currentSkinTone];\n    });\n    createEffect(()=>{\n        state.skinToneButtonLabel = state.i18n.skinToneLabel.replace(\"{skinTone}\", state.i18n.skinTones[state.currentSkinTone]);\n    });\n    //\n    // Set or update the favorites emojis\n    //\n    createEffect(()=>{\n        async function updateDefaultFavoriteEmojis() {\n            const { database: database } = state;\n            const favs = (await Promise.all($1e5dc5e467331cb9$var$MOST_COMMONLY_USED_EMOJI.map((unicode)=>database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean); // filter because in Jest/Vitest tests we don't have all the emoji in the DB\n            state.defaultFavoriteEmojis = favs;\n        }\n        if (state.databaseLoaded) /* no await */ updateDefaultFavoriteEmojis();\n    });\n    function updateCustomEmoji() {\n        // Certain effects have an implicit dependency on customEmoji since it affects the database\n        // Getting it here on the state ensures this effect re-runs when customEmoji change.\n        // Setting it on the database is pointless but prevents this code from being removed by a minifier.\n        state.database.customEmoji = state.customEmoji || $1e5dc5e467331cb9$var$EMPTY_ARRAY;\n    }\n    createEffect(()=>{\n        async function updateFavorites() {\n            updateCustomEmoji(); // re-run whenever customEmoji change\n            const { database: database, defaultFavoriteEmojis: defaultFavoriteEmojis, numColumns: numColumns } = state;\n            const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n            const favorites = await summarizeEmojis($1e5dc5e467331cb9$var$uniqBy([\n                ...dbFavorites,\n                ...defaultFavoriteEmojis\n            ], (_)=>_.unicode || _.name).slice(0, numColumns));\n            state.currentFavorites = favorites;\n        }\n        if (state.databaseLoaded && state.defaultFavoriteEmojis) /* no await */ updateFavorites();\n    });\n    //\n    // Calculate the width of the emoji grid. This serves two purposes:\n    // 1) Re-calculate the --num-columns var because it may have changed\n    // 2) Re-calculate the scrollbar width because it may have changed\n    //   (i.e. because the number of items changed)\n    // 3) Re-calculate whether we're in RTL mode or not.\n    //\n    // The benefit of doing this in one place is to align with rAF/ResizeObserver\n    // and do all the calculations in one go. RTL vs LTR is not strictly width-related,\n    // but since we're already reading the style here, and since it's already aligned with\n    // the rAF loop, this is the most appropriate place to do it perf-wise.\n    //\n    function calculateEmojiGridStyle(node) {\n        $1e5dc5e467331cb9$var$calculateWidth(node, abortSignal, (width)=>{\n            /* istanbul ignore next */ {\n                // read all the style/layout calculations we need to make\n                const style = getComputedStyle(refs.rootElement);\n                const newNumColumns = parseInt(style.getPropertyValue(\"--num-columns\"), 10);\n                const newIsRtl = style.getPropertyValue(\"direction\") === \"rtl\";\n                const parentWidth = node.parentElement.getBoundingClientRect().width;\n                const newScrollbarWidth = parentWidth - width;\n                // write to state variables\n                state.numColumns = newNumColumns;\n                state.scrollbarWidth = newScrollbarWidth; // eslint-disable-line no-unused-vars\n                state.isRtl = newIsRtl; // eslint-disable-line no-unused-vars\n            }\n        });\n    }\n    //\n    // Set or update the currentEmojis. Check for invalid ZWJ renderings\n    // (i.e. double emoji).\n    //\n    createEffect(()=>{\n        async function updateEmojis() {\n            const { searchText: searchText, currentGroup: currentGroup, databaseLoaded: databaseLoaded, customEmoji: customEmoji } = state;\n            if (!databaseLoaded) {\n                state.currentEmojis = [];\n                state.searchMode = false;\n            } else if (searchText.length >= $1e5dc5e467331cb9$var$MIN_SEARCH_TEXT_LENGTH) {\n                const newEmojis = await getEmojisBySearchQuery(searchText);\n                if (state.searchText === searchText) {\n                    updateCurrentEmojis(newEmojis);\n                    updateSearchMode(true);\n                }\n            } else {\n                const { id: currentGroupId } = currentGroup;\n                // avoid race condition where currentGroupId is -1 and customEmoji is undefined/empty\n                if (currentGroupId !== -1 || customEmoji && customEmoji.length) {\n                    const newEmojis = await getEmojisByGroup(currentGroupId);\n                    if (state.currentGroup.id === currentGroupId) {\n                        updateCurrentEmojis(newEmojis);\n                        updateSearchMode(false);\n                    }\n                }\n            }\n        }\n        /* no await */ updateEmojis();\n    });\n    // Some emojis have their ligatures rendered as two or more consecutive emojis\n    // We want to treat these the same as unsupported emojis, so we compare their\n    // widths against the baseline widths and remove them as necessary\n    createEffect(()=>{\n        const { currentEmojis: currentEmojis, emojiVersion: emojiVersion } = state;\n        const zwjEmojisToCheck = currentEmojis.filter((emoji)=>emoji.unicode) // filter custom emoji\n        .filter((emoji)=>$1e5dc5e467331cb9$var$hasZwj(emoji) && !$1e5dc5e467331cb9$var$supportedZwjEmojis.has(emoji.unicode));\n        if (!emojiVersion && zwjEmojisToCheck.length) {\n            // render now, check their length later\n            updateCurrentEmojis(currentEmojis);\n            $1e5dc5e467331cb9$var$rAF(()=>checkZwjSupportAndUpdate(zwjEmojisToCheck));\n        } else {\n            const newEmojis = emojiVersion ? currentEmojis : currentEmojis.filter(isZwjSupported);\n            updateCurrentEmojis(newEmojis);\n            // Reset scroll top to 0 when emojis change\n            $1e5dc5e467331cb9$var$rAF(()=>$1e5dc5e467331cb9$var$resetScrollTopIfPossible(refs.tabpanelElement));\n        }\n    });\n    function checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n        $1e5dc5e467331cb9$var$checkZwjSupport(zwjEmojisToCheck, refs.baselineEmoji, emojiToDomNode);\n        // force update\n        // eslint-disable-next-line no-self-assign\n        state.currentEmojis = state.currentEmojis;\n    }\n    function isZwjSupported(emoji) {\n        return !emoji.unicode || !$1e5dc5e467331cb9$var$hasZwj(emoji) || $1e5dc5e467331cb9$var$supportedZwjEmojis.get(emoji.unicode);\n    }\n    async function filterEmojisByVersion(emojis) {\n        const emojiSupportLevel = state.emojiVersion || await $1e5dc5e467331cb9$var$detectEmojiSupportLevel();\n        // !version corresponds to custom emoji\n        return emojis.filter(({ version: version })=>!version || version <= emojiSupportLevel);\n    }\n    async function summarizeEmojis(emojis) {\n        return $1e5dc5e467331cb9$var$summarizeEmojisForUI(emojis, state.emojiVersion || await $1e5dc5e467331cb9$var$detectEmojiSupportLevel());\n    }\n    async function getEmojisByGroup(group) {\n        // -1 is custom emoji\n        const emoji = group === -1 ? state.customEmoji : await state.database.getEmojiByGroup(group);\n        return summarizeEmojis(await filterEmojisByVersion(emoji));\n    }\n    async function getEmojisBySearchQuery(query) {\n        return summarizeEmojis(await filterEmojisByVersion(await state.database.getEmojiBySearchQuery(query)));\n    }\n    createEffect(()=>{});\n    //\n    // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n    // are no categories, because it's just easier to code the HTML this way.\n    //\n    createEffect(()=>{\n        function calculateCurrentEmojisWithCategories() {\n            const { searchMode: searchMode, currentEmojis: currentEmojis } = state;\n            if (searchMode) return [\n                {\n                    category: \"\",\n                    emojis: currentEmojis\n                }\n            ];\n            const categoriesToEmoji = new Map();\n            for (const emoji of currentEmojis){\n                const category = emoji.category || \"\";\n                let emojis = categoriesToEmoji.get(category);\n                if (!emojis) {\n                    emojis = [];\n                    categoriesToEmoji.set(category, emojis);\n                }\n                emojis.push(emoji);\n            }\n            return [\n                ...categoriesToEmoji.entries()\n            ].map(([category, emojis])=>({\n                    category: category,\n                    emojis: emojis\n                })).sort((a, b)=>state.customCategorySorting(a.category, b.category));\n        }\n        const newEmojisWithCategories = calculateCurrentEmojisWithCategories();\n        updateCurrentEmojisWithCategories(newEmojisWithCategories);\n    });\n    //\n    // Handle active search item (i.e. pressing up or down while searching)\n    //\n    createEffect(()=>{\n        state.activeSearchItemId = state.activeSearchItem !== -1 && state.currentEmojis[state.activeSearchItem].id;\n    });\n    //\n    // Handle user input on the search input\n    //\n    createEffect(()=>{\n        const { rawSearchText: rawSearchText } = state;\n        $1e5dc5e467331cb9$var$rIC(()=>{\n            state.searchText = (rawSearchText || \"\").trim(); // defer to avoid input delays, plus we can trim here\n            state.activeSearchItem = -1;\n        });\n    });\n    function onSearchKeydown(event) {\n        if (!state.searchMode || !state.currentEmojis.length) return;\n        const goToNextOrPrevious = (previous)=>{\n            $1e5dc5e467331cb9$var$halt(event);\n            state.activeSearchItem = $1e5dc5e467331cb9$var$incrementOrDecrement(previous, state.activeSearchItem, state.currentEmojis);\n        };\n        switch(event.key){\n            case \"ArrowDown\":\n                return goToNextOrPrevious(false);\n            case \"ArrowUp\":\n                return goToNextOrPrevious(true);\n            case \"Enter\":\n                if (state.activeSearchItem === -1) // focus the first option in the list since the list must be non-empty at this point (it's verified above)\n                state.activeSearchItem = 0;\n                else {\n                    $1e5dc5e467331cb9$var$halt(event);\n                    return clickEmoji(state.currentEmojis[state.activeSearchItem].id);\n                }\n        }\n    }\n    //\n    // Handle user input on nav\n    //\n    function onNavClick(event) {\n        const { target: target } = event;\n        const closestTarget = target.closest(\".nav-button\");\n        /* istanbul ignore if */ if (!closestTarget) return; // This should never happen, but makes me nervous not to have it\n        const groupId = parseInt(closestTarget.dataset.groupId, 10);\n        refs.searchElement.value = \"\"; // clear search box input\n        state.rawSearchText = \"\";\n        state.searchText = \"\";\n        state.activeSearchItem = -1;\n        state.currentGroupIndex = state.groups.findIndex((_)=>_.id === groupId);\n    }\n    function onNavKeydown(event) {\n        const { target: target, key: key } = event;\n        const doFocus = (el)=>{\n            if (el) {\n                $1e5dc5e467331cb9$var$halt(event);\n                el.focus();\n            }\n        };\n        switch(key){\n            case \"ArrowLeft\":\n                return doFocus(target.previousElementSibling);\n            case \"ArrowRight\":\n                return doFocus(target.nextElementSibling);\n            case \"Home\":\n                return doFocus(target.parentElement.firstElementChild);\n            case \"End\":\n                return doFocus(target.parentElement.lastElementChild);\n        }\n    }\n    //\n    // Handle user input on an emoji\n    //\n    async function clickEmoji(unicodeOrName) {\n        const emoji = await state.database.getEmojiByUnicodeOrName(unicodeOrName);\n        const emojiSummary = [\n            ...state.currentEmojis,\n            ...state.currentFavorites\n        ].find((_)=>_.id === unicodeOrName);\n        const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, state.currentSkinTone);\n        await state.database.incrementFavoriteEmojiCount(unicodeOrName);\n        fireEvent(\"emoji-click\", {\n            emoji: emoji,\n            skinTone: state.currentSkinTone,\n            ...skinTonedUnicode && {\n                unicode: skinTonedUnicode\n            },\n            ...emojiSummary.name && {\n                name: emojiSummary.name\n            }\n        });\n    }\n    async function onEmojiClick(event) {\n        const { target: target } = event;\n        /* istanbul ignore if */ if (!target.classList.contains(\"emoji\")) // This should never happen, but makes me nervous not to have it\n        return;\n        $1e5dc5e467331cb9$var$halt(event);\n        const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n        /* no await */ clickEmoji(id);\n    }\n    //\n    // Handle user input on the skintone picker\n    //\n    function changeSkinTone(skinTone) {\n        state.currentSkinTone = skinTone;\n        state.skinTonePickerExpanded = false;\n        focus(\"skintone-button\");\n        fireEvent(\"skin-tone-change\", {\n            skinTone: skinTone\n        });\n        /* no await */ state.database.setPreferredSkinTone(skinTone);\n    }\n    function onSkinToneOptionsClick(event) {\n        const { target: { id: id } } = event;\n        const match = id && id.match(/^skintone-(\\d)/); // skintone option format\n        /* istanbul ignore if */ if (!match) return; // This should never happen, but makes me nervous not to have it\n        $1e5dc5e467331cb9$var$halt(event);\n        const skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\n        changeSkinTone(skinTone);\n    }\n    function onClickSkinToneButton(event) {\n        state.skinTonePickerExpanded = !state.skinTonePickerExpanded;\n        state.activeSkinTone = state.currentSkinTone;\n        // this should always be true, since the button is obscured by the listbox, so this `if` is just to be sure\n        if (state.skinTonePickerExpanded) {\n            $1e5dc5e467331cb9$var$halt(event);\n            $1e5dc5e467331cb9$var$rAF(()=>focus(\"skintone-list\"));\n        }\n    }\n    // To make the animation nicer, change the z-index of the skintone picker button\n    // *after* the animation has played. This makes it appear that the picker box\n    // is expanding \"below\" the button\n    createEffect(()=>{\n        if (state.skinTonePickerExpanded) refs.skinToneDropdown.addEventListener(\"transitionend\", ()=>{\n            state.skinTonePickerExpandedAfterAnimation = true; // eslint-disable-line no-unused-vars\n        }, {\n            once: true\n        });\n        else state.skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n    });\n    function onSkinToneOptionsKeydown(event) {\n        // this should never happen, but makes me nervous not to have it\n        /* istanbul ignore if */ if (!state.skinTonePickerExpanded) return;\n        const changeActiveSkinTone = async (nextSkinTone)=>{\n            $1e5dc5e467331cb9$var$halt(event);\n            state.activeSkinTone = nextSkinTone;\n        };\n        switch(event.key){\n            case \"ArrowUp\":\n                return changeActiveSkinTone($1e5dc5e467331cb9$var$incrementOrDecrement(true, state.activeSkinTone, state.skinTones));\n            case \"ArrowDown\":\n                return changeActiveSkinTone($1e5dc5e467331cb9$var$incrementOrDecrement(false, state.activeSkinTone, state.skinTones));\n            case \"Home\":\n                return changeActiveSkinTone(0);\n            case \"End\":\n                return changeActiveSkinTone(state.skinTones.length - 1);\n            case \"Enter\":\n                // enter on keydown, space on keyup. this is just how browsers work for buttons\n                // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n                $1e5dc5e467331cb9$var$halt(event);\n                return changeSkinTone(state.activeSkinTone);\n            case \"Escape\":\n                $1e5dc5e467331cb9$var$halt(event);\n                state.skinTonePickerExpanded = false;\n                return focus(\"skintone-button\");\n        }\n    }\n    function onSkinToneOptionsKeyup(event) {\n        // this should never happen, but makes me nervous not to have it\n        /* istanbul ignore if */ if (!state.skinTonePickerExpanded) return;\n        switch(event.key){\n            case \" \":\n                // enter on keydown, space on keyup. this is just how browsers work for buttons\n                // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n                $1e5dc5e467331cb9$var$halt(event);\n                return changeSkinTone(state.activeSkinTone);\n        }\n    }\n    async function onSkinToneOptionsFocusOut(event) {\n        // On blur outside of the skintone listbox, collapse the skintone picker.\n        const { relatedTarget: relatedTarget } = event;\n        // The `else` should never happen, but makes me nervous not to have it\n        /* istanbul ignore else */ if (!relatedTarget || relatedTarget.id !== \"skintone-list\") state.skinTonePickerExpanded = false;\n    }\n    function onSearchInput(event) {\n        state.rawSearchText = event.target.value;\n    }\n    return {\n        $set (newState) {\n            $1e5dc5e467331cb9$var$assign(state, newState);\n        },\n        $destroy () {\n            abortController.abort();\n        }\n    };\n}\nconst $1e5dc5e467331cb9$var$DEFAULT_DATA_SOURCE = \"https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json\";\nconst $1e5dc5e467331cb9$var$DEFAULT_LOCALE = \"en\";\nvar $1e5dc5e467331cb9$var$enI18n = {\n    categoriesLabel: \"Categories\",\n    emojiUnsupportedMessage: \"Your browser does not support color emoji.\",\n    favoritesLabel: \"Favorites\",\n    loadingMessage: \"Loading\\u2026\",\n    networkErrorMessage: \"Could not load emoji.\",\n    regionLabel: \"Emoji picker\",\n    searchDescription: \"When search results are available, press up or down to select and enter to choose.\",\n    searchLabel: \"Search\",\n    searchResultsLabel: \"Search results\",\n    skinToneDescription: \"When expanded, press up or down to select and enter to choose.\",\n    skinToneLabel: \"Choose a skin tone (currently {skinTone})\",\n    skinTonesLabel: \"Skin tones\",\n    skinTones: [\n        \"Default\",\n        \"Light\",\n        \"Medium-Light\",\n        \"Medium\",\n        \"Medium-Dark\",\n        \"Dark\"\n    ],\n    categories: {\n        custom: \"Custom\",\n        \"smileys-emotion\": \"Smileys and emoticons\",\n        \"people-body\": \"People and body\",\n        \"animals-nature\": \"Animals and nature\",\n        \"food-drink\": \"Food and drink\",\n        \"travel-places\": \"Travel and places\",\n        activities: \"Activities\",\n        objects: \"Objects\",\n        symbols: \"Symbols\",\n        flags: \"Flags\"\n    }\n};\nvar $1e5dc5e467331cb9$var$baseStyles = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\nconst $1e5dc5e467331cb9$var$PROPS = [\n    \"customEmoji\",\n    \"customCategorySorting\",\n    \"database\",\n    \"dataSource\",\n    \"i18n\",\n    \"locale\",\n    \"skinToneEmoji\",\n    \"emojiVersion\"\n];\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\nconst $1e5dc5e467331cb9$var$EXTRA_STYLES = `:host{--emoji-font-family:${$1e5dc5e467331cb9$var$FONT_FAMILY}}`;\nclass $1e5dc5e467331cb9$export$2e2bcd8739ae039 extends HTMLElement {\n    constructor(props){\n        super();\n        this.attachShadow({\n            mode: \"open\"\n        });\n        const style = document.createElement(\"style\");\n        style.textContent = $1e5dc5e467331cb9$var$baseStyles + $1e5dc5e467331cb9$var$EXTRA_STYLES;\n        this.shadowRoot.appendChild(style);\n        this._ctx = {\n            // Set defaults\n            locale: $1e5dc5e467331cb9$var$DEFAULT_LOCALE,\n            dataSource: $1e5dc5e467331cb9$var$DEFAULT_DATA_SOURCE,\n            skinToneEmoji: $1e5dc5e467331cb9$var$DEFAULT_SKIN_TONE_EMOJI,\n            customCategorySorting: $1e5dc5e467331cb9$var$DEFAULT_CATEGORY_SORTING,\n            customEmoji: null,\n            i18n: $1e5dc5e467331cb9$var$enI18n,\n            emojiVersion: null,\n            ...props\n        };\n        // Handle properties set before the element was upgraded\n        for (const prop of $1e5dc5e467331cb9$var$PROPS)if (prop !== \"database\" && Object.prototype.hasOwnProperty.call(this, prop)) {\n            this._ctx[prop] = this[prop];\n            delete this[prop];\n        }\n        this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n    }\n    connectedCallback() {\n        // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\n        // do nothing (preserve the state)\n        if (!this._cmp) this._cmp = $1e5dc5e467331cb9$var$createRoot(this.shadowRoot, this._ctx);\n    }\n    disconnectedCallback() {\n        // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\n        // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\n        $1e5dc5e467331cb9$var$qM(()=>{\n            // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\n            if (!this.isConnected && this._cmp) {\n                this._cmp.$destroy();\n                this._cmp = undefined;\n                const { database: database } = this._ctx;\n                database.close()// only happens if the database failed to load in the first place, so we don't care\n                .catch((err)=>console.error(err));\n            }\n        });\n    }\n    static get observedAttributes() {\n        return [\n            \"locale\",\n            \"data-source\",\n            \"skin-tone-emoji\",\n            \"emoji-version\"\n        ] // complex objects aren't supported, also use kebab-case\n        ;\n    }\n    attributeChangedCallback(attrName, oldValue, newValue) {\n        this._set(// convert from kebab-case to camelcase\n        // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n        attrName.replace(/-([a-z])/g, (_, up)=>up.toUpperCase()), // convert string attribute to float if necessary\n        attrName === \"emoji-version\" ? parseFloat(newValue) : newValue);\n    }\n    _set(prop, newValue) {\n        this._ctx[prop] = newValue;\n        if (this._cmp) this._cmp.$set({\n            [prop]: newValue\n        });\n        if ([\n            \"locale\",\n            \"dataSource\"\n        ].includes(prop)) this._dbFlush();\n    }\n    _dbCreate() {\n        const { locale: locale, dataSource: dataSource, database: database } = this._ctx;\n        // only create a new database if we really need to\n        if (!database || database.locale !== locale || database.dataSource !== dataSource) this._set(\"database\", new (0, $d1f26ac162b12b4a$export$2e2bcd8739ae039)({\n            locale: locale,\n            dataSource: dataSource\n        }));\n    }\n    // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n    // so we don't create two Databases if e.g. both the locale and the dataSource change\n    _dbFlush() {\n        $1e5dc5e467331cb9$var$qM(()=>this._dbCreate());\n    }\n}\nconst $1e5dc5e467331cb9$var$definitions = {};\nfor (const prop of $1e5dc5e467331cb9$var$PROPS)$1e5dc5e467331cb9$var$definitions[prop] = {\n    get () {\n        if (prop === \"database\") // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n        return this._ctx[prop];\n    },\n    set (val) {\n        if (prop === \"database\") throw new Error(\"database is read-only\");\n        this._set(prop, val);\n    }\n};\nObject.defineProperties($1e5dc5e467331cb9$export$2e2bcd8739ae039.prototype, $1e5dc5e467331cb9$var$definitions);\n/* istanbul ignore else */ if (!customElements.get(\"emoji-picker\")) customElements.define(\"emoji-picker\", $1e5dc5e467331cb9$export$2e2bcd8739ae039);\n\n\n\n\n\nvar $dec5faeb65064cfd$var$browserSupportsTextareaTextNodes;\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */ function $dec5faeb65064cfd$var$canManipulateViaTextNodes(input) {\n    if (input.nodeName !== \"TEXTAREA\") return false;\n    if (typeof $dec5faeb65064cfd$var$browserSupportsTextareaTextNodes === \"undefined\") {\n        var textarea = document.createElement(\"textarea\");\n        textarea.value = 1;\n        $dec5faeb65064cfd$var$browserSupportsTextareaTextNodes = !!textarea.firstChild;\n    }\n    return $dec5faeb65064cfd$var$browserSupportsTextareaTextNodes;\n}\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */ function $dec5faeb65064cfd$var$index(input, text) {\n    // Most of the used APIs only work with the field selected\n    input.focus(); // IE 8-10\n    if (document.selection) {\n        var ieRange = document.selection.createRange();\n        ieRange.text = text; // Move cursor after the inserted text\n        ieRange.collapse(false);\n        ieRange.select();\n        return;\n    } // Webkit + Edge\n    var isSuccess = document.execCommand(\"insertText\", false, text);\n    if (!isSuccess) {\n        var start = input.selectionStart;\n        var end = input.selectionEnd; // Firefox (non-standard method)\n        if (typeof input.setRangeText === \"function\") input.setRangeText(text);\n        else {\n            // To make a change we just need a Range, not a Selection\n            var range = document.createRange();\n            var textNode = document.createTextNode(text);\n            if ($dec5faeb65064cfd$var$canManipulateViaTextNodes(input)) {\n                var node = input.firstChild; // If textarea is empty, just insert the text\n                if (!node) input.appendChild(textNode);\n                else {\n                    // Otherwise we need to find a nodes for start and end\n                    var offset = 0;\n                    var startNode = null;\n                    var endNode = null;\n                    while(node && (startNode === null || endNode === null)){\n                        var nodeLength = node.nodeValue.length; // if start of the selection falls into current node\n                        if (start >= offset && start <= offset + nodeLength) range.setStart(startNode = node, start - offset);\n                         // if end of the selection falls into current node\n                        if (end >= offset && end <= offset + nodeLength) range.setEnd(endNode = node, end - offset);\n                        offset += nodeLength;\n                        node = node.nextSibling;\n                    } // If there is some text selected, remove it as we should replace it\n                    if (start !== end) range.deleteContents();\n                }\n            } // If the node is a textarea and the range doesn't span outside the element\n            //\n            // Get the commonAncestorContainer of the selected range and test its type\n            // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n            // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n            if ($dec5faeb65064cfd$var$canManipulateViaTextNodes(input) && range.commonAncestorContainer.nodeName === \"#text\") // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n            range.insertNode(textNode);\n            else {\n                // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n                var value = input.value;\n                input.value = value.slice(0, start) + text + value.slice(end);\n            }\n        } // Correct the cursor position to be at the end of the insertion\n        input.setSelectionRange(start + text.length, start + text.length); // Notify any possible listeners of the change\n        var e = document.createEvent(\"UIEvent\");\n        e.initEvent(\"input\", true, false);\n        input.dispatchEvent(e);\n    }\n}\nvar $dec5faeb65064cfd$export$2e2bcd8739ae039 = $dec5faeb65064cfd$var$index;\n\n\nfunction $94933cc6427541bd$export$c37129e465f64ef0(a) {\n    return null !== a && \"object\" == typeof a ? \"share\" in navigator && \"canShare\" in navigator && navigator.canShare(a) : \"share\" in navigator;\n}\n\n\nObject.defineProperty({}, \"WebShare\", {\n    get: function() {\n        return $4f74a8126e204146$export$30b344bef3e55b67;\n    },\n    set: void 0,\n    enumerable: !0,\n    configurable: !0\n});\nlet $4f74a8126e204146$var$t = `\n  :host {\n    display: inline-block;\n  }\n`, $4f74a8126e204146$var$e = document.createElement(\"template\");\n$4f74a8126e204146$var$e.innerHTML = `\n  <style>${$4f74a8126e204146$var$t}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;\nclass $4f74a8126e204146$export$30b344bef3e55b67 extends HTMLElement {\n    #t;\n    #e;\n    #s = [];\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\",\n            delegatesFocus: !0\n        }).appendChild($4f74a8126e204146$var$e.content.cloneNode(!0)), this.#t = this.shadowRoot?.querySelector('slot[name=\"button\"]') || null, this.#e = this.#i();\n    }\n    static get observedAttributes() {\n        return [\n            \"disabled\"\n        ];\n    }\n    attributeChangedCallback(t, e, s) {\n        \"disabled\" === t && e !== s && this.#e && (this.#e.toggleAttribute(\"disabled\", this.disabled), this.#e.setAttribute(\"aria-disabled\", this.disabled.toString()), this.#e.part && this.#e.part.contains(\"button\") && this.#e.part.toggle(\"button--disabled\", this.disabled));\n    }\n    connectedCallback() {\n        this.#r(\"shareUrl\"), this.#r(\"shareTitle\"), this.#r(\"shareText\"), this.#r(\"shareFiles\"), this.#r(\"disabled\"), this.#t?.addEventListener(\"slotchange\", this.#a), this.#e?.addEventListener(\"click\", this.#n);\n    }\n    disconnectedCallback() {\n        this.#t?.removeEventListener(\"slotchange\", this.#a), this.#e?.removeEventListener(\"click\", this.#n);\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(t) {\n        this.toggleAttribute(\"disabled\", !!t);\n    }\n    get shareUrl() {\n        return this.getAttribute(\"share-url\") || \"\";\n    }\n    set shareUrl(t) {\n        this.setAttribute(\"share-url\", t);\n    }\n    get shareTitle() {\n        return this.getAttribute(\"share-title\") || \"\";\n    }\n    set shareTitle(t) {\n        this.setAttribute(\"share-title\", t);\n    }\n    get shareText() {\n        return this.getAttribute(\"share-text\") || \"\";\n    }\n    set shareText(t) {\n        this.setAttribute(\"share-text\", t);\n    }\n    get shareFiles() {\n        return this.#s;\n    }\n    set shareFiles(t) {\n        Array.isArray(t) && t.length > 0 && (this.#s = t);\n    }\n    async share() {\n        if (!this.disabled) try {\n            let t = {};\n            this.shareUrl && (t.url = this.shareUrl), this.shareTitle && (t.title = this.shareTitle), this.shareText && (t.text = this.shareText), Array.isArray(this.shareFiles) && this.shareFiles.length > 0 && navigator.canShare && navigator.canShare({\n                files: this.shareFiles\n            }) && (t.files = this.shareFiles), await navigator.share(t), this.dispatchEvent(new CustomEvent(\"web-share:success\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    shareData: t\n                }\n            }));\n        } catch (t) {\n            if (t instanceof Error && \"AbortError\" === t.name) {\n                this.dispatchEvent(new CustomEvent(\"web-share:abort\", {\n                    bubbles: !0,\n                    composed: !0,\n                    detail: {\n                        error: t\n                    }\n                }));\n                return;\n            }\n            this.dispatchEvent(new CustomEvent(\"web-share:error\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        }\n    }\n    #n = (t)=>{\n        t.preventDefault(), this.disabled || this.share();\n    };\n    #a = (t)=>{\n        t.target && \"button\" === t.target.name && (this.#e?.removeEventListener(\"click\", this.#n), this.#e = this.#i(), this.#e && (this.#e.addEventListener(\"click\", this.#n), \"BUTTON\" === this.#e.nodeName || this.#e.hasAttribute(\"role\") || this.#e.setAttribute(\"role\", \"button\")));\n    };\n    #i() {\n        return this.#t && this.#t.assignedElements({\n            flatten: !0\n        }).find((t)=>\"BUTTON\" === t.nodeName || \"button\" === t.getAttribute(\"slot\")) || null;\n    }\n    #r(t) {\n        if (Object.prototype.hasOwnProperty.call(this, t)) {\n            let e = this[t];\n            delete this[t], this[t] = e;\n        }\n    }\n    static defineCustomElement(t = \"web-share\") {\n        \"undefined\" == typeof window || window.customElements.get(t) || window.customElements.define(t, $4f74a8126e204146$export$30b344bef3e55b67);\n    }\n}\n$4f74a8126e204146$export$30b344bef3e55b67.defineCustomElement();\n\n\nObject.defineProperty({}, \"CapturePhoto\", {\n    get: function() {\n        return $636b0cf1ed0b9f88$export$cc30a98fe3890794;\n    },\n    set: void 0,\n    enumerable: !0,\n    configurable: !0\n});\nlet $636b0cf1ed0b9f88$var$t = (t, e, i)=>(Number.isNaN(e) && (e = 0), Number.isNaN(i) && (i = 0), Math.min(Math.max(t, Math.min(e, i)), Math.max(e, i))), $636b0cf1ed0b9f88$var$e = \"capture-photo\", $636b0cf1ed0b9f88$var$i = `\n  :host {\n    display: block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden],\n  ::slotted([hidden]) {\n    display: none;\n  }\n\n  video {\n    display: block;\n  }\n\n  #output:empty {\n    display: none;\n  }\n`, $636b0cf1ed0b9f88$var$o = document.createElement(\"template\");\n$636b0cf1ed0b9f88$var$o.innerHTML = `\n  <style>${$636b0cf1ed0b9f88$var$i}</style>\n\n  <video part=\"video\" playsinline></video>\n\n  <canvas hidden></canvas>\n\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n\n    <slot name=\"facing-mode-button\" hidden>\n      <button part=\"facing-mode-button\" type=\"button\">\n        <slot name=\"facing-mode-button-content\">Toggle facing mode</slot>\n      </button>\n    </slot>\n\n    <slot name=\"actions\"></slot>\n  </div>\n\n  <slot></slot>\n\n  <div part=\"output-container\" id=\"output\"></div>\n`;\nclass $636b0cf1ed0b9f88$export$cc30a98fe3890794 extends HTMLElement {\n    #t = {};\n    #e = null;\n    #i = null;\n    #o = null;\n    #n = null;\n    #a = null;\n    #s = null;\n    #r = null;\n    #l = null;\n    constructor(){\n        super(), this.#t = this.getSupportedConstraints(), this.shadowRoot || this.attachShadow({\n            mode: \"open\"\n        }).appendChild($636b0cf1ed0b9f88$var$o.content.cloneNode(!0));\n    }\n    static get observedAttributes() {\n        return [\n            \"no-image\",\n            \"facing-mode\",\n            \"camera-resolution\",\n            \"pan\",\n            \"tilt\",\n            \"zoom\"\n        ];\n    }\n    attributeChangedCallback(t, e, i) {\n        if (!this.isConnected) return;\n        let o = this.getTrackCapabilities(), n = this.getTrackSettings();\n        if (\"no-image\" === t && e !== i && this.#u(), \"facing-mode\" === t && e !== i && \"facingMode\" in this.#t) {\n            let t = [\n                \"user\",\n                \"environment\"\n            ].includes(this.facingMode || \"\");\n            \"facingMode\" in n && t && (this.stopVideoStream(), this.startVideoStream());\n        }\n        if (\"camera-resolution\" === t && e !== i && \"string\" == typeof this.cameraResolution && this.cameraResolution.trim().length > 0) {\n            let [t = 0, e = 0] = this.cameraResolution.split(\"x\").map((t)=>Number(t));\n            if (t > 0 && e > 0 && \"width\" in o && \"height\" in o) {\n                let i = !!(o.width?.min && o.width?.max) && t >= o?.width?.min && t <= o?.width?.max, a = !!(o.height?.min && o.height?.max) && e >= o?.height?.min && e <= o?.height?.max;\n                \"width\" in n && \"height\" in n && i && a && (this.stopVideoStream(), this.startVideoStream());\n            }\n        }\n        if (\"pan\" === t && e !== i && \"pan\" in this.#t) {\n            let t = !!(\"pan\" in o && o.pan?.min && o.pan?.max) && this.pan >= o.pan.min && this.pan <= o.pan.max;\n            \"pan\" in n && \"number\" == typeof this.pan && t && this.#h(\"pan\", this.pan);\n        }\n        if (\"tilt\" === t && e !== i && \"tilt\" in this.#t) {\n            let t = !!(\"tilt\" in o && o.tilt?.min && o.tilt?.max) && this.tilt >= o.tilt.min && this.tilt <= o.tilt.max;\n            \"tilt\" in n && \"number\" == typeof this.tilt && t && this.#h(\"tilt\", this.tilt);\n        }\n        if (\"zoom\" === t && e !== i && \"zoom\" in this.#t) {\n            let t = !!(\"zoom\" in o && o.zoom?.min && o.zoom?.max) && this.zoom >= o.zoom.min && this.zoom <= o.zoom.max;\n            \"zoom\" in n && \"number\" == typeof this.zoom && t && this.#h(\"zoom\", this.zoom);\n        }\n    }\n    connectedCallback() {\n        if (this.#d(\"autpoPlay\"), this.#d(\"noImage\"), this.#d(\"facingMode\"), this.#d(\"cameraResolution\"), this.#d(\"pan\"), this.#d(\"tilt\"), this.#d(\"zoom\"), this.#d(\"calculateFileSize\"), this.#i = this.shadowRoot?.querySelector(\"canvas\") || null, this.#o = this.shadowRoot?.getElementById(\"output\") || null, this.#n = this.shadowRoot?.querySelector(\"video\") || null, this.#a = this.shadowRoot?.querySelector('slot[name=\"capture-button\"]') || null, this.#s = this.#c(), this.#r = this.shadowRoot?.querySelector('slot[name=\"facing-mode-button\"]') || null, this.#l = this.#m(), this.#n?.addEventListener(\"loadedmetadata\", this.#p), this.#a?.addEventListener(\"slotchange\", this.#g), this.#s?.addEventListener(\"click\", this.#b), this.#r?.addEventListener(\"slotchange\", this.#f), this.#l?.addEventListener(\"click\", this.#v), !$636b0cf1ed0b9f88$export$cc30a98fe3890794.isSupported()) return this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:error`, {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                error: {\n                    name: \"NotSupportedError\",\n                    message: \"Not supported\"\n                }\n            }\n        }));\n        this.autoPlay && this.startVideoStream();\n    }\n    disconnectedCallback() {\n        this.stopVideoStream(), this.#l?.removeEventListener(\"click\", this.#v), this.#s?.removeEventListener(\"click\", this.#b), this.#n?.removeEventListener(\"canplay\", this.#p), this.#a?.removeEventListener(\"slotchange\", this.#g), this.#r?.removeEventListener(\"slotchange\", this.#f);\n    }\n    get autoPlay() {\n        return this.hasAttribute(\"auto-play\");\n    }\n    set autoPlay(t) {\n        this.toggleAttribute(\"auto-play\", !!t);\n    }\n    get noImage() {\n        return this.hasAttribute(\"no-image\");\n    }\n    set noImage(t) {\n        this.toggleAttribute(\"no-image\", !!t);\n    }\n    get facingMode() {\n        return this.getAttribute(\"facing-mode\") || \"user\";\n    }\n    set facingMode(t) {\n        this.setAttribute(\"facing-mode\", t);\n    }\n    get cameraResolution() {\n        return this.getAttribute(\"camera-resolution\") || \"\";\n    }\n    set cameraResolution(t) {\n        this.setAttribute(\"camera-resolution\", t);\n    }\n    get pan() {\n        return Number(this.getAttribute(\"pan\")) || 0;\n    }\n    set pan(t) {\n        this.setAttribute(\"pan\", null != t ? t.toString() : t);\n    }\n    get tilt() {\n        return Number(this.getAttribute(\"tilt\")) || 0;\n    }\n    set tilt(t) {\n        this.setAttribute(\"tilt\", null != t ? t.toString() : t);\n    }\n    get zoom() {\n        return Number(this.getAttribute(\"zoom\")) || 1;\n    }\n    set zoom(t) {\n        this.setAttribute(\"zoom\", null != t ? t.toString() : t);\n    }\n    get loading() {\n        return this.hasAttribute(\"loading\");\n    }\n    get calculateFileSize() {\n        return this.hasAttribute(\"calculate-file-size\");\n    }\n    set calculateFileSize(t) {\n        this.toggleAttribute(\"calculate-file-size\", !!t);\n    }\n    #v = (t)=>{\n        t.preventDefault(), this.loading || (this.facingMode = \"user\" !== this.facingMode && this.facingMode ? \"user\" : \"environment\");\n    };\n    #b = (t)=>{\n        t.preventDefault(), this.capture();\n    };\n    #p = (t)=>{\n        let i = t.target;\n        i.play().then(()=>{\n            this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:video-play`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    video: i\n                }\n            }));\n        }).catch((t)=>{\n            this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        }).finally(()=>{\n            this.removeAttribute(\"loading\");\n        });\n    };\n    #u() {\n        this.#o && Array.from(this.#o.childNodes).forEach((t)=>t.remove());\n    }\n    #h(e, i) {\n        if (!this.#e || !e || !i) return;\n        let [o] = this.#e.getVideoTracks(), n = this.getTrackCapabilities();\n        e in this.getTrackSettings() && o.applyConstraints({\n            advanced: [\n                {\n                    [e]: $636b0cf1ed0b9f88$var$t(Number(i), n[e]?.min || 1, n[e]?.max || 1)\n                }\n            ]\n        });\n    }\n    #g = (t)=>{\n        t.target?.name === \"capture-button\" && (this.#s?.removeEventListener(\"click\", this.#b), this.#s = this.#c(), this.#s && (this.#s.addEventListener(\"click\", this.#b), \"BUTTON\" === this.#s.nodeName || this.#s.hasAttribute(\"role\") || this.#s.setAttribute(\"role\", \"button\")));\n    };\n    #f = (t)=>{\n        t.target?.name === \"facing-mode-button\" && (this.#l?.removeEventListener(\"click\", this.#v), this.#l = this.#m(), this.#l && (this.#l.addEventListener(\"click\", this.#v), \"BUTTON\" === this.#l.nodeName || this.#l.hasAttribute(\"role\") || this.#l.setAttribute(\"role\", \"button\")));\n    };\n    #m() {\n        return this.#r && this.#r.assignedElements({\n            flatten: !0\n        }).find((t)=>\"BUTTON\" === t.nodeName || \"facing-mode-button\" === t.getAttribute(\"slot\")) || null;\n    }\n    #c() {\n        return this.#a && this.#a.assignedElements({\n            flatten: !0\n        }).find((t)=>\"BUTTON\" === t.nodeName || \"capture-button\" === t.getAttribute(\"slot\")) || null;\n    }\n    #d(t) {\n        if (Object.prototype.hasOwnProperty.call(this, t)) {\n            let e = this[t];\n            delete this[t], this[t] = e;\n        }\n    }\n    async startVideoStream() {\n        if (!$636b0cf1ed0b9f88$export$cc30a98fe3890794.isSupported() || this.#e) return;\n        this.setAttribute(\"loading\", \"\");\n        let t = {\n            video: {\n                facingMode: {\n                    ideal: this.facingMode || \"user\"\n                },\n                pan: !0,\n                tilt: !0,\n                zoom: !0\n            },\n            audio: !1\n        };\n        if (\"string\" == typeof this.cameraResolution && this.cameraResolution.trim().length > 0) {\n            let [e = 0, i = 0] = this.cameraResolution.split(\"x\").map((t)=>Number(t));\n            e > 0 && i > 0 && (t.video.width = e, t.video.height = i);\n        }\n        try {\n            this.#e = await navigator.mediaDevices.getUserMedia(t), this.#n && (this.#n.srcObject = this.#e), this.#h(\"pan\", this.pan), this.#h(\"tilt\", this.tilt), this.#h(\"zoom\", this.zoom);\n            let e = this.getTrackSettings();\n            \"facingMode\" in e && this.#r && (this.#r.hidden = !1);\n        } catch (t) {\n            this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        } finally{\n            this.removeAttribute(\"loading\");\n        }\n    }\n    stopVideoStream() {\n        if (!this.#n || !this.#e) return;\n        let [t] = this.#e.getVideoTracks();\n        t?.stop(), this.#n.srcObject = null, this.#e = null;\n    }\n    async capture() {\n        if (!this.loading && this.#i && this.#n) try {\n            let t = this.#i.getContext(\"2d\"), i = this.#n.videoWidth, o = this.#n.videoHeight;\n            this.#i.width = i, this.#i.height = o, t?.drawImage(this.#n, 0, 0, i, o);\n            let n = this.#i.toDataURL(\"image/png\");\n            if (\"string\" == typeof n && n.includes(\"data:image\")) {\n                if (!this.noImage) {\n                    let t = new Image;\n                    t.src = n, t.width = i, t.height = o, t.setAttribute(\"part\", \"output-image\"), this.#u(), this.#o?.appendChild(t);\n                }\n                let t = {\n                    dataURI: n,\n                    width: i,\n                    height: o\n                };\n                if (this.calculateFileSize) try {\n                    let e = await fetch(n), i = (await e.blob()).size;\n                    i && (t.size = i);\n                } catch (t) {}\n                this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:success`, {\n                    bubbles: !0,\n                    composed: !0,\n                    detail: t\n                }));\n            }\n        } catch (t) {\n            this.dispatchEvent(new CustomEvent(`${$636b0cf1ed0b9f88$var$e}:error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: t\n                }\n            }));\n        }\n    }\n    getSupportedConstraints() {\n        return $636b0cf1ed0b9f88$export$cc30a98fe3890794.isSupported() && navigator.mediaDevices.getSupportedConstraints() || {};\n    }\n    getTrackCapabilities() {\n        if (!this.#e) return {};\n        let [t] = this.#e.getVideoTracks();\n        return t && \"function\" == typeof t.getCapabilities && t.getCapabilities() || {};\n    }\n    getTrackSettings() {\n        if (!this.#e) return {};\n        let [t] = this.#e.getVideoTracks();\n        return t && \"function\" == typeof t.getSettings && t.getSettings() || {};\n    }\n    static isSupported() {\n        return !!navigator.mediaDevices?.getUserMedia;\n    }\n    static defineCustomElement(t = $636b0cf1ed0b9f88$var$e) {\n        \"undefined\" == typeof window || window.customElements.get(t) || window.customElements.define(t, $636b0cf1ed0b9f88$export$cc30a98fe3890794);\n    }\n}\n$636b0cf1ed0b9f88$export$cc30a98fe3890794.defineCustomElement();\n\n\nObject.defineProperty({}, \"ModalElement\", {\n    get: function() {\n        return $4da30046ce6d9325$export$32589115725b904b;\n    },\n    set: void 0,\n    enumerable: !0,\n    configurable: !0\n});\nlet $4da30046ce6d9325$var$e = document.createElement(\"template\"), $4da30046ce6d9325$var$t = /* css */ `\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-header-spacing: 1rem;\n    --me-body-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-body-background-color: transparent;\n    --me-footer-background-color: transparent;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open] {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open] {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: 300ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0.4375rem;\n    border: none;\n    background-color: transparent;\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;\n$4da30046ce6d9325$var$e.innerHTML = /* html */ `\n  <style>${$4da30046ce6d9325$var$t}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`; /**\n * @summary A custom element that renders a modal dialog.\n * @documentation https://github.com/georapbox/modal-element\n *\n * @tagname modal-element - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} open - Determines whether the modal is open or not.\n * @property {boolean} staticBackdrop - Determines whether the modal should close when the backdrop is clicked.\n * @property {boolean} noHeader - Determines whether the modal should have a header or not.\n * @property {boolean} noAnimations - Determines whether the modal should have animations or not when opening and closing.\n * @property {boolean} noCloseButton - Determines whether the modal should have a default close button or not.\n * @property {boolean} fullscreen - Determines whether the modal should be fullscreen or not.\n * @property {boolean} preserveOverflow - Determines whether the overflow of the body should be preserved when the modal is open.\n * @property {string} placement - Determines the placement of the modal.\n * @property {string} closeLabel - The label of the default close button, used as the aria-label attribute of the close button.\n *\n * @attribute {boolean} open - Reflects the open property.\n * @attribute {boolean} static-backdrop - Reflects the staticBackdrop property.\n * @attribute {boolean} no-header - Reflects the noHeader property.\n * @attribute {boolean} no-animations - Reflects the noAnimations property.\n * @attribute {boolean} no-close-button - Reflects the noCloseButton property.\n * @attribute {boolean} fullscreen - Reflects the fullscreen property.\n * @attribute {boolean} preserve-overflow - Reflects the preserveOverflow property.\n * @attribute {string} placement - Reflects the placement property.\n * @attribute {string} close-label - Reflects the closeLabel property.\n *\n * @slot - The modal's main content (default/unnamed slot).\n * @slot header - The modal's header content, usually a title.\n * @slot footer - The modals' footer content. Usually used for buttons or other actions.\n * @slot close - The content of the close button that appears in the modal's header.\n *\n * @cssproperty --me-width - The width of the modal. Default is 32rem.\n * @cssproperty --me-height - The height of the modal. Default is fit-content.\n * @cssproperty --me-border-color - The border color of the modal. Default is initial.\n * @cssproperty --me-border-style - The border style of the modal. Default is solid.\n * @cssproperty --me-border-width - The border width of the modal. Default is initial.\n * @cssproperty --me-border-radius - The border radius of the modal. Default is 0.\n * @cssproperty --me-box-shadow - The box shadow of the modal. Default is none.\n * @cssproperty --me-background-color - The background color of the modal. Default is canvas.\n * @cssproperty --me-header-spacing - The spacing of the header. Default is 1rem.\n * @cssproperty --me-body-spacing - The spacing of the body. Default is 1rem.\n * @cssproperty --me-footer-spacing - The spacing of the footer. Default is 1rem.\n * @cssproperty --me-header-background-color - The background color of the header. Default is transparent.\n * @cssproperty --me-body-background-color - The background color of the body. Default is transparent.\n * @cssproperty --me-footer-background-color - The background color of the footer. Default is transparent.\n * @cssproperty --me-close-border-radius - The border radius of the close button. Default is 0.\n * @cssproperty --me-close-background-color - The background color of the close button. Default is transparent.\n * @cssproperty --me-backdrop-background - The background shorthand property of the backdrop. Default is rgba(0, 0, 0, 0.5).\n * @cssproperty --me-backdrop-filter - The backdrop filter property of the backdrop. Default is none.\n *\n * @csspart base - The base wrapper of the modal.\n * @csspart panel - The panel wrapper of the modal.\n * @csspart header - The header wrapper of the modal.\n * @csspart title - The title wrapper of the modal.\n * @csspart body - The body wrapper of the modal.\n * @csspart footer - The footer wrapper of the modal.\n * @csspart close - The close button of the modal.\n *\n * @fires me-open - Dispatched when the modal is opened.\n * @fires me-close - Dispatched when the modal is closed.\n * @fires me-request-close - Dispatched when the modal is about to close.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method show - Instance method. Opens the modal if it is closed, otherwise does nothing.\n * @method hide - Instance method. Closes the modal if it is open, otherwise does nothing.\n */ \nclass $4da30046ce6d9325$export$32589115725b904b extends HTMLElement {\n    #e = null;\n    #t = null;\n    #o = null;\n    #l = void 0;\n    constructor(){\n        if (super(), !this.shadowRoot) {\n            let t = this.attachShadow({\n                mode: \"open\"\n            });\n            t.appendChild($4da30046ce6d9325$var$e.content.cloneNode(!0));\n        }\n        this.shadowRoot && (this.#e = this.shadowRoot.querySelector(\"dialog\"), this.#t = this.shadowRoot.querySelector('slot[name=\"footer\"]'), this.#o = this.shadowRoot.querySelector('slot[name=\"close\"]'));\n    }\n    static get observedAttributes() {\n        return [\n            \"open\",\n            \"no-header\",\n            \"no-animations\",\n            \"no-close-button\",\n            \"close-label\"\n        ];\n    }\n    attributeChangedCallback(e, t, o) {\n        if (null !== this.#e) {\n            if (\"open\" === e && t !== o && (this.open ? (this.#e.showModal(), this.dispatchEvent(new CustomEvent(\"me-open\", {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    element: this\n                }\n            })), document.body && !this.preserveOverflow && (document.body.style.overflow = \"hidden\")) : this.#e.close()), \"no-header\" === e && t !== o) {\n                let e = this.#e.querySelector(\".dialog__header\");\n                null !== e && (e.hidden = this.noHeader);\n            }\n            if (\"no-animations\" === e && t !== o && this.#e.classList.toggle(\"dialog--no-animations\", this.noAnimations), \"no-close-button\" === e && t !== o) {\n                let e = this.#e.querySelector(\".dialog__close\");\n                null !== e && (e.hidden = this.noCloseButton);\n            }\n            \"close-label\" === e && t !== o && this.#a();\n        }\n    }\n    connectedCallback() {\n        this.#i(\"open\"), this.#i(\"staticBackdrop\"), this.#i(\"noHeader\"), this.#i(\"noAnimations\"), this.#i(\"noCloseButton\"), this.#i(\"fullscreen\"), this.#i(\"preserveOverflow\"), this.#i(\"placement\"), this.#i(\"closeLabel\"), this.#e?.addEventListener(\"click\", this.#n), this.#e?.addEventListener(\"close\", this.#r), this.#e?.addEventListener(\"cancel\", this.#s), this.#e?.querySelector('form[method=\"dialog\"]')?.addEventListener(\"submit\", this.#d), this.#t?.addEventListener(\"slotchange\", this.#c), this.#o?.addEventListener(\"slotchange\", this.#h);\n    }\n    disconnectedCallback() {\n        this.#l && clearTimeout(this.#l), this.#e?.addEventListener(\"click\", this.#n), this.#e?.removeEventListener(\"close\", this.#r), this.#e?.removeEventListener(\"cancel\", this.#s), this.#e?.querySelector('form[method=\"dialog\"]')?.removeEventListener(\"submit\", this.#d), this.#t?.removeEventListener(\"slotchange\", this.#c), this.#o?.removeEventListener(\"slotchange\", this.#h);\n    }\n    get open() {\n        return this.hasAttribute(\"open\");\n    }\n    set open(e) {\n        this.toggleAttribute(\"open\", !!e);\n    }\n    get staticBackdrop() {\n        return this.hasAttribute(\"static-backdrop\");\n    }\n    set staticBackdrop(e) {\n        this.toggleAttribute(\"static-backdrop\", !!e);\n    }\n    get noHeader() {\n        return this.hasAttribute(\"no-header\");\n    }\n    set noHeader(e) {\n        this.toggleAttribute(\"no-header\", !!e);\n    }\n    get noAnimations() {\n        return this.hasAttribute(\"no-animations\");\n    }\n    set noAnimations(e) {\n        this.toggleAttribute(\"no-animations\", !!e);\n    }\n    get noCloseButton() {\n        return this.hasAttribute(\"no-close-button\");\n    }\n    set noCloseButton(e) {\n        this.toggleAttribute(\"no-close-button\", !!e);\n    }\n    get fullscreen() {\n        return this.hasAttribute(\"fullscreen\");\n    }\n    set fullscreen(e) {\n        this.toggleAttribute(\"fullscreen\", !!e);\n    }\n    get preserveOverflow() {\n        return this.hasAttribute(\"preserve-overflow\");\n    }\n    set preserveOverflow(e) {\n        this.toggleAttribute(\"preserve-overflow\", !!e);\n    }\n    get placement() {\n        return this.getAttribute(\"placement\") || \"center\";\n    }\n    set placement(e) {\n        this.setAttribute(\"placement\", null != e ? e.toString() : e);\n    }\n    get closeLabel() {\n        return this.getAttribute(\"close-label\") || \"Close\";\n    }\n    set closeLabel(e) {\n        this.setAttribute(\"close-label\", null != e ? e.toString() : e);\n    }\n    #a() {\n        if (null === this.#e) return;\n        let e = this.#e.querySelector(\".dialog__close\");\n        if (null === e) return;\n        let t = this.#o?.assignedElements() || [], o = t?.some((e)=>e.textContent?.replace(/\\s/g, \"\") !== \"\");\n        o ? e.removeAttribute(\"aria-label\") : e.setAttribute(\"aria-label\", this.closeLabel);\n    }\n    #g() {\n        this.#l || (this.#e?.classList.add(\"dialog--pulse\"), this.#l = setTimeout(()=>{\n            this.#e?.classList.remove(\"dialog--pulse\"), clearTimeout(this.#l), this.#l = void 0;\n        }, 300));\n    }\n    #r = ()=>{\n        // the open property when the dialog is closed by the user.\n        this.open = !1, this.dispatchEvent(new CustomEvent(\"me-close\", {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                element: this\n            }\n        })), document.body && !this.preserveOverflow && (document.body.style.overflow = \"\");\n    };\n    #s = (e)=>{\n        let t = this.#m(\"escape-key\");\n        this.dispatchEvent(t), t.defaultPrevented && (e.preventDefault(), this.noAnimations || this.#g());\n    };\n    #d = (e)=>{\n        let t = this.#m(\"close-button\");\n        this.dispatchEvent(t), t.defaultPrevented && (e.preventDefault(), this.noAnimations || this.#g());\n    };\n    #n = (e)=>{\n        let t = e.target, o = e.currentTarget; // Close the dialog when the backdrop is clicked.\n        if (t === o) {\n            let e = this.#m(\"backdrop-click\");\n            this.dispatchEvent(e), e.defaultPrevented || this.staticBackdrop ? this.noAnimations || this.#g() : this.hide();\n        } // Close the dialog when external invoker is clicked.\n        if (t instanceof HTMLElement && null !== t.closest(\"[data-me-close]\")) {\n            let e = this.#m(\"external-invoker\");\n            this.dispatchEvent(e), e.defaultPrevented ? this.noAnimations || this.#g() : this.hide();\n        }\n    };\n    #c = ()=>{\n        if (null === this.#e) return; /** @type {Nullable<HTMLElement>} */ \n        let e = this.#e.querySelector(\".dialog__footer\");\n        if (null === e) return;\n        let t = this.#t?.assignedNodes(), o = !!t && t.length > 0;\n        e.hidden = !o;\n    };\n    #h = ()=>{\n        this.#a();\n    };\n    #m(e) {\n        return new CustomEvent(\"me-request-close\", {\n            bubbles: !0,\n            composed: !0,\n            cancelable: !0,\n            detail: {\n                reason: e,\n                element: this\n            }\n        });\n    }\n    #i(e) {\n        if (Object.prototype.hasOwnProperty.call(this, e)) {\n            let t = this[e];\n            delete this[e], this[e] = t;\n        }\n    }\n    show() {\n        this.open || (this.open = !0);\n    }\n    hide() {\n        this.open && (this.open = !1);\n    }\n    static defineCustomElement(e = \"modal-element\") {\n        \"undefined\" == typeof window || window.customElements.get(e) || window.customElements.define(e, $4da30046ce6d9325$export$32589115725b904b);\n    }\n}\n$4da30046ce6d9325$export$32589115725b904b.defineCustomElement();\n //# sourceMappingURL=modal-element-defined.js.map\n\n\nObject.defineProperty({}, \"FilesDropzone\", {\n    get: function() {\n        return $7aad62ebc3d6fae8$export$6ccd1735166caad9;\n    },\n    set: void 0,\n    enumerable: !0,\n    configurable: !0\n});\nlet $7aad62ebc3d6fae8$var$e = new Map([\n    [\n        \"aac\",\n        \"audio/aac\"\n    ],\n    [\n        \"abw\",\n        \"application/x-abiword\"\n    ],\n    [\n        \"arc\",\n        \"application/x-freearc\"\n    ],\n    [\n        \"avif\",\n        \"image/avif\"\n    ],\n    [\n        \"avi\",\n        \"video/x-msvideo\"\n    ],\n    [\n        \"azw\",\n        \"application/vnd.amazon.ebook\"\n    ],\n    [\n        \"bin\",\n        \"application/octet-stream\"\n    ],\n    [\n        \"bmp\",\n        \"image/bmp\"\n    ],\n    [\n        \"bz\",\n        \"application/x-bzip\"\n    ],\n    [\n        \"bz2\",\n        \"application/x-bzip2\"\n    ],\n    [\n        \"cda\",\n        \"application/x-cdf\"\n    ],\n    [\n        \"csh\",\n        \"application/x-csh\"\n    ],\n    [\n        \"css\",\n        \"text/css\"\n    ],\n    [\n        \"csv\",\n        \"text/csv\"\n    ],\n    [\n        \"doc\",\n        \"application/msword\"\n    ],\n    [\n        \"docx\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n    ],\n    [\n        \"eot\",\n        \"application/vnd.ms-fontobject\"\n    ],\n    [\n        \"epub\",\n        \"application/epub+zip\"\n    ],\n    [\n        \"gz\",\n        \"application/gzip\"\n    ],\n    [\n        \"gif\",\n        \"image/gif\"\n    ],\n    [\n        \"heic\",\n        \"image/heic\"\n    ],\n    [\n        \"heif\",\n        \"image/heif\"\n    ],\n    [\n        \"htm\",\n        \"text/html\"\n    ],\n    [\n        \"html\",\n        \"text/html\"\n    ],\n    [\n        \"ico\",\n        \"image/vnd.microsoft.icon\"\n    ],\n    [\n        \"ics\",\n        \"text/calendar\"\n    ],\n    [\n        \"jar\",\n        \"application/java-archive\"\n    ],\n    [\n        \"jpeg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jpg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jxl\",\n        \"image/jxl\"\n    ],\n    [\n        \"js\",\n        \"text/javascript\"\n    ],\n    [\n        \"json\",\n        \"application/json\"\n    ],\n    [\n        \"jsonld\",\n        \"application/ld+json\"\n    ],\n    [\n        \"markdown\",\n        \"text/markdown\"\n    ],\n    [\n        \"md\",\n        \"text/markdown\"\n    ],\n    [\n        \"mid\",\n        \"audio/midi\"\n    ],\n    [\n        \"midi\",\n        \"audio/midi\"\n    ],\n    [\n        \"mjs\",\n        \"text/javascript\"\n    ],\n    [\n        \"mp3\",\n        \"audio/mpeg\"\n    ],\n    [\n        \"mp4\",\n        \"video/mp4\"\n    ],\n    [\n        \"mpeg\",\n        \"video/mpeg\"\n    ],\n    [\n        \"mpkg\",\n        \"application/vnd.apple.installer+xml\"\n    ],\n    [\n        \"odp\",\n        \"application/vnd.oasis.opendocument.presentation\"\n    ],\n    [\n        \"ods\",\n        \"application/vnd.oasis.opendocument.spreadsheet\"\n    ],\n    [\n        \"odt\",\n        \"application/vnd.oasis.opendocument.text\"\n    ],\n    [\n        \"oga\",\n        \"audio/ogg\"\n    ],\n    [\n        \"ogv\",\n        \"video/ogg\"\n    ],\n    [\n        \"ogx\",\n        \"application/ogg\"\n    ],\n    [\n        \"opus\",\n        \"audio/opus\"\n    ],\n    [\n        \"otf\",\n        \"font/otf\"\n    ],\n    [\n        \"png\",\n        \"image/png\"\n    ],\n    [\n        \"pdf\",\n        \"application/pdf\"\n    ],\n    [\n        \"php\",\n        \"application/x-httpd-php\"\n    ],\n    [\n        \"ppt\",\n        \"application/vnd.ms-powerpoint\"\n    ],\n    [\n        \"pptx\",\n        \"application/vnd.openxmlformats-officedocument.presentationml.presentation\"\n    ],\n    [\n        \"rar\",\n        \"application/vnd.rar\"\n    ],\n    [\n        \"rtf\",\n        \"application/rtf\"\n    ],\n    [\n        \"sh\",\n        \"application/x-sh\"\n    ],\n    [\n        \"svg\",\n        \"image/svg+xml\"\n    ],\n    [\n        \"swf\",\n        \"application/x-shockwave-flash\"\n    ],\n    [\n        \"tar\",\n        \"application/x-tar\"\n    ],\n    [\n        \"tif\",\n        \"image/tiff\"\n    ],\n    [\n        \"tiff\",\n        \"image/tiff\"\n    ],\n    [\n        \"ts\",\n        \"video/mp2t\"\n    ],\n    [\n        \"ttf\",\n        \"font/ttf\"\n    ],\n    [\n        \"txt\",\n        \"text/plain\"\n    ],\n    [\n        \"vsd\",\n        \"application/vnd.visio\"\n    ],\n    [\n        \"wav\",\n        \"audio/wav\"\n    ],\n    [\n        \"weba\",\n        \"audio/webm\"\n    ],\n    [\n        \"webm\",\n        \"video/webm\"\n    ],\n    [\n        \"webp\",\n        \"image/webp\"\n    ],\n    [\n        \"woff\",\n        \"font/woff\"\n    ],\n    [\n        \"woff2\",\n        \"font/woff2\"\n    ],\n    [\n        \"xhtml\",\n        \"application/xhtml+xml\"\n    ],\n    [\n        \"xls\",\n        \"application/vnd.ms-excel\"\n    ],\n    [\n        \"xlsx\",\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n    ],\n    [\n        \"xml\",\n        \"application/xml\"\n    ],\n    [\n        \"xul\",\n        \"application/vnd.mozilla.xul+xml\"\n    ],\n    [\n        \"zip\",\n        \"application/zip\"\n    ],\n    [\n        \"7z\",\n        \"application/x-7z-compressed\"\n    ],\n    [\n        \"mkv\",\n        \"video/x-matroska\"\n    ],\n    [\n        \"mov\",\n        \"video/quicktime\"\n    ],\n    [\n        \"msg\",\n        \"application/vnd.ms-outlook\"\n    ]\n]), $7aad62ebc3d6fae8$var$t = [\n    \".DS_Store\",\n    \"Thumbs.db\"\n], $7aad62ebc3d6fae8$var$o = (t)=>{\n    let { name: o } = t;\n    if (o && -1 !== o.lastIndexOf(\".\") && !t.type) {\n        let i = (o.split(\".\").pop() || \"\").toLowerCase(), r = $7aad62ebc3d6fae8$var$e.get(i);\n        r && Object.defineProperty(t, \"type\", {\n            value: r,\n            writable: !1,\n            configurable: !1,\n            enumerable: !0\n        });\n    }\n    return t;\n}, $7aad62ebc3d6fae8$var$i = (e, t)=>{\n    let i = $7aad62ebc3d6fae8$var$o(e);\n    if (\"string\" != typeof i.path) {\n        let { webkitRelativePath: o } = e;\n        Object.defineProperty(i, \"path\", {\n            value: \"string\" == typeof t ? t : o || e.name,\n            writable: !1,\n            configurable: !1,\n            enumerable: !0\n        });\n    }\n    return i;\n}, $7aad62ebc3d6fae8$var$r = async (e)=>await new Promise((t, o)=>{\n        e.readEntries(t, o);\n    }), $7aad62ebc3d6fae8$var$a = async (e)=>{\n    let t = [], o = await $7aad62ebc3d6fae8$var$r(e);\n    for(; o.length > 0;)t.push(...o), o = await $7aad62ebc3d6fae8$var$r(e);\n    return t;\n}, $7aad62ebc3d6fae8$var$n = (e)=>new Promise((t, o)=>{\n        e.file((o)=>t($7aad62ebc3d6fae8$var$i(o, e.fullPath)), o);\n    }), $7aad62ebc3d6fae8$var$s = async (e)=>{\n    let o = [], i = [];\n    for (let t of e){\n        if (\"file\" !== t.kind) continue;\n        let e = t.getAsEntry ? t.getAsEntry() : t.webkitGetAsEntry();\n        i.push(e);\n    }\n    for(; i.length > 0;){\n        let e = i.shift();\n        if (e) {\n            if (e.isFile) {\n                let i = await $7aad62ebc3d6fae8$var$n(e);\n                -1 === $7aad62ebc3d6fae8$var$t.indexOf(i.name) && o.push(i);\n            } else e.isDirectory && i.push(...await $7aad62ebc3d6fae8$var$a(e.createReader()));\n        }\n    }\n    return o;\n}, $7aad62ebc3d6fae8$var$d = async (e)=>{\n    let o = [];\n    for (let r of e)-1 === $7aad62ebc3d6fae8$var$t.indexOf(r.name) && o.push($7aad62ebc3d6fae8$var$i(r));\n    return o;\n}, $7aad62ebc3d6fae8$var$l = async (e)=>e.dataTransfer ? e.dataTransfer.items ? await $7aad62ebc3d6fae8$var$s(e.dataTransfer.items) : await $7aad62ebc3d6fae8$var$d(e.dataTransfer.files) : await $7aad62ebc3d6fae8$var$d(e.target.files), $7aad62ebc3d6fae8$var$p = \"files-dropzone\", $7aad62ebc3d6fae8$var$c = \"TOO_MANY_FILES\", $7aad62ebc3d6fae8$var$h = document.createElement(\"template\"), $7aad62ebc3d6fae8$var$u = `\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49,132,253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition: border var(--dropzone-transition-duration) ease-in-out, background-color var(--dropzone-transition-duration) ease-in-out, color var(--dropzone-transition-duration) ease-in-out, box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;\n$7aad62ebc3d6fae8$var$h.innerHTML = `\n  <style>\n    ${$7aad62ebc3d6fae8$var$u}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden>\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot>Drag 'n' drop files here, or click to select files</slot>\n  </div>\n`;\nclass $7aad62ebc3d6fae8$export$6ccd1735166caad9 extends HTMLElement {\n    #e = null;\n    #t = null;\n    constructor(){\n        super(), this.shadowRoot || this.attachShadow({\n            mode: \"open\",\n            delegatesFocus: !0\n        }).appendChild($7aad62ebc3d6fae8$var$h.content.cloneNode(!0)), this.shadowRoot && (this.#e = this.shadowRoot.getElementById(\"file-input\"), this.#t = this.shadowRoot.getElementById(\"dropzone\"));\n    }\n    static get observedAttributes() {\n        return [\n            \"accept\",\n            \"disabled\",\n            \"multiple\"\n        ];\n    }\n    attributeChangedCallback(e, t, o) {\n        \"accept\" === e && t !== o && this.#e && (this.#e.accept = this.accept), \"disabled\" === e && t !== o && this.#e && (this.#e.disabled = this.disabled, this.disabled ? (this.#t?.removeAttribute(\"tabindex\"), this.#t?.setAttribute(\"aria-disabled\", \"true\")) : (this.#t?.setAttribute(\"tabindex\", \"0\"), this.#t?.setAttribute(\"aria-disabled\", \"false\"))), \"multiple\" === e && t !== o && this.#e && (this.#e.multiple = this.multiple);\n    }\n    connectedCallback() {\n        this.#o(\"accept\"), this.#o(\"disabled\"), this.#o(\"maxFiles\"), this.#o(\"maxSize\"), this.#o(\"minSize\"), this.#o(\"multiple\"), this.#o(\"autoFocus\"), this.#o(\"noStyle\"), this.#e?.addEventListener(\"change\", this.#i), this.#t?.addEventListener(\"dragenter\", this.#r), this.#t?.addEventListener(\"dragover\", this.#a), this.#t?.addEventListener(\"dragleave\", this.#n), this.#t?.addEventListener(\"drop\", this.#s), this.#t?.addEventListener(\"click\", this.#d), this.#t?.addEventListener(\"keyup\", this.#l), this.autoFocus && this.#t?.focus();\n    }\n    disconnectedCallback() {\n        this.#e?.removeEventListener(\"change\", this.#i), this.#t?.removeEventListener(\"dragenter\", this.#r), this.#t?.removeEventListener(\"dragover\", this.#a), this.#t?.removeEventListener(\"dragleave\", this.#n), this.#t?.removeEventListener(\"drop\", this.#s), this.#t?.removeEventListener(\"click\", this.#d), this.#t?.removeEventListener(\"keyup\", this.#l);\n    }\n    get accept() {\n        return this.getAttribute(\"accept\") || \"\";\n    }\n    set accept(e) {\n        this.setAttribute(\"accept\", null != e ? e.toString() : e);\n    }\n    get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(e) {\n        this.toggleAttribute(\"disabled\", !!e);\n    }\n    get maxFiles() {\n        let e = Number(this.getAttribute(\"max-files\")) || 0;\n        return e <= 0 ? 1 / 0 : Math.floor(Math.abs(e));\n    }\n    set maxFiles(e) {\n        this.setAttribute(\"max-files\", null != e ? e.toString() : e);\n    }\n    get maxSize() {\n        let e = this.getAttribute(\"max-size\");\n        if (null === e) return 1 / 0;\n        let t = Number(e);\n        return Number.isNaN(t) ? 1 / 0 : t;\n    }\n    set maxSize(e) {\n        this.setAttribute(\"max-size\", null != e ? e.toString() : e);\n    }\n    get minSize() {\n        let e = this.getAttribute(\"min-size\");\n        if (null === e) return 0;\n        let t = Number(e);\n        return Number.isNaN(t) ? 0 : t;\n    }\n    set minSize(e) {\n        this.setAttribute(\"min-size\", null != e ? e.toString() : e);\n    }\n    get multiple() {\n        return this.hasAttribute(\"multiple\");\n    }\n    set multiple(e) {\n        this.toggleAttribute(\"multiple\", !!e);\n    }\n    get autoFocus() {\n        return this.hasAttribute(\"auto-focus\");\n    }\n    set autoFocus(e) {\n        this.toggleAttribute(\"auto-focus\", !!e);\n    }\n    get noStyle() {\n        return this.hasAttribute(\"no-style\");\n    }\n    set noStyle(e) {\n        this.toggleAttribute(\"no-style\", !!e);\n    }\n    #i = async (e)=>{\n        try {\n            this.#p(await $7aad62ebc3d6fae8$var$l(e));\n        } catch (e) {\n            this.dispatchEvent(new CustomEvent(`${$7aad62ebc3d6fae8$var$p}-error`, {\n                bubbles: !0,\n                composed: !0,\n                detail: {\n                    error: e\n                }\n            }));\n        }\n    };\n    #r = ()=>{\n        this.disabled || this.dispatchEvent(new Event(`${$7aad62ebc3d6fae8$var$p}-dragenter`, {\n            bubbles: !0,\n            composed: !0\n        }));\n    };\n    #a = (e)=>{\n        if (e.preventDefault(), this.disabled) {\n            e.dataTransfer.dropEffect = \"none\";\n            return;\n        }\n        e.dataTransfer.dropEffect = \"copy\", this.#t && (this.#t.classList.add(\"dropzone--dragover\"), this.#t.part.add(\"dropzone--dragover\")), this.dispatchEvent(new Event(`${$7aad62ebc3d6fae8$var$p}-dragover`, {\n            bubbles: !0,\n            composed: !0\n        }));\n    };\n    #n = ()=>{\n        this.disabled || (this.#t && (this.#t.classList.remove(\"dropzone--dragover\"), this.#t.part.remove(\"dropzone--dragover\")), this.dispatchEvent(new Event(`${$7aad62ebc3d6fae8$var$p}-dragleave`, {\n            bubbles: !0,\n            composed: !0\n        })));\n    };\n    #s = async (e)=>{\n        if (!this.disabled) {\n            e.preventDefault(), this.#t && (this.#t.classList.remove(\"dropzone--dragover\"), this.#t.part.remove(\"dropzone--dragover\"));\n            try {\n                this.#p(await $7aad62ebc3d6fae8$var$l(e));\n            } catch (e) {\n                this.dispatchEvent(new CustomEvent(`${$7aad62ebc3d6fae8$var$p}-error`, {\n                    bubbles: !0,\n                    composed: !0,\n                    detail: {\n                        error: e\n                    }\n                }));\n            }\n        }\n    };\n    #d = ()=>{\n        this.disabled || this.#e?.click();\n    };\n    #l = (e)=>{\n        this.disabled || \" \" !== e.key && \"Enter\" !== e.key || this.#e?.click();\n    };\n    #p(e) {\n        if (!Array.isArray(e) || !e.length) return;\n        let t = [], o = [], i = e.length;\n        if (!this.multiple && i > 1) for (let t of e)o.push({\n            file: t,\n            errors: [\n                {\n                    code: $7aad62ebc3d6fae8$var$c,\n                    message: \"Too many files selected. Only 1 file is allowed.\"\n                }\n            ]\n        });\n        else if (this.multiple && i > this.maxFiles) for (let t of e)o.push({\n            file: t,\n            errors: [\n                {\n                    code: $7aad62ebc3d6fae8$var$c,\n                    message: `Too many files selected. Only ${this.maxFiles} ${this.maxFiles > 1 ? \"files are\" : \"file is\"} allowed.`\n                }\n            ]\n        });\n        else for (let i of e){\n            let e = function(e, t = \"\") {\n                if (!t) return !0;\n                let o = [\n                    ...new Set(t.split(\",\").map((e)=>e.trim()).filter(Boolean))\n                ], i = e.type, r = i.replace(/\\/.*$/, \"\");\n                for (let t of o)if (\".\" === t.charAt(0)) {\n                    if (-1 !== e.name.toLowerCase().indexOf(t.toLowerCase(), e.name.length - t.length)) return !0;\n                } else if (/\\/\\*$/.test(t)) {\n                    if (r === t.replace(/\\/.*$/, \"\")) return !0;\n                } else if (i === t) return !0;\n                return !1;\n            }(i, this.accept), r = i.size > this.maxSize, a = i.size < this.minSize;\n            if (!e || r || a) {\n                let t = [];\n                e || t.push({\n                    code: \"INVALID_MIME_TYPE\",\n                    message: `File type \"${i.type}\" is not accepted.`\n                }), r && t.push({\n                    code: \"FILE_TOO_LARGE\",\n                    message: `File size ${i.size} exceeds the maximum size of ${this.maxSize}.`\n                }), a && t.push({\n                    code: \"FILE_TOO_SMALL\",\n                    message: `File size ${i.size} is smaller than the minimum size of ${this.minSize}.`\n                }), o.push({\n                    file: i,\n                    errors: t\n                });\n            } else t.push(i);\n        }\n        this.dispatchEvent(new CustomEvent(`${$7aad62ebc3d6fae8$var$p}-drop`, {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                acceptedFiles: t,\n                rejectedFiles: o\n            }\n        })), t.length > 0 && this.dispatchEvent(new CustomEvent(`${$7aad62ebc3d6fae8$var$p}-drop-accepted`, {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                acceptedFiles: t\n            }\n        })), o.length > 0 && this.dispatchEvent(new CustomEvent(`${$7aad62ebc3d6fae8$var$p}-drop-rejected`, {\n            bubbles: !0,\n            composed: !0,\n            detail: {\n                rejectedFiles: o\n            }\n        })), this.#e && (this.#e.value = this.#e.defaultValue);\n    }\n    openFileDialog() {\n        this.disabled || this.#e?.click();\n    }\n    #o(e) {\n        if (Object.prototype.hasOwnProperty.call(this, e)) {\n            let t = this[e];\n            delete this[e], this[e] = t;\n        }\n    }\n    static defineCustomElement(e = $7aad62ebc3d6fae8$var$p) {\n        \"undefined\" == typeof window || window.customElements.get(e) || window.customElements.define(e, $7aad62ebc3d6fae8$export$6ccd1735166caad9);\n    }\n}\n$7aad62ebc3d6fae8$export$6ccd1735166caad9.defineCustomElement();\n\n\n\n\nconst $33dea9d9a6da4c9a$export$63e7bed68b07a85c = [\n    \"image/jpg\",\n    \"image/jpeg\",\n    \"image/png\",\n    \"image/apng\",\n    \"image/gif\",\n    \"image/webp\",\n    \"image/avif\"\n];\nconst $33dea9d9a6da4c9a$export$62045be72fe457b4 = 20;\nconst $33dea9d9a6da4c9a$export$8f089f0a062560ff = 20;\nconst $33dea9d9a6da4c9a$export$d3f4819a57998cf7 = 360;\n\n\n/**\n * Generates a unique id of the form `${prefix}-${randomString}-${suffix}`.\n *\n * @param {string} [prefix=''] - The prefix to use for the id.\n * @param {string} [suffix=''] - The suffix to use for the id.\n * @returns {string} - The unique id.\n */ const $21c3f3a8dccfa4fd$export$e2a22331486dcca0 = (prefix = \"\", suffix = \"\")=>{\n    const prefixString = typeof prefix === \"string\" && prefix !== \"\" ? prefix + \"-\" : \"\";\n    const suffixString = typeof suffix === \"string\" && suffix !== \"\" ? \"-\" + suffix : \"\";\n    const randomString = Math.random().toString(36).substring(2, 8); // Pseudo-random string of six alphanumeric characters.\n    return `${prefixString}${randomString}${suffixString}`;\n};\n\n\n\nconst $c3d7e05a1ce34ed5$export$6539e087749cf9d3 = async (options = {})=>{\n    const res = await fetch(options.url);\n    const blob = await res.blob();\n    const mimeType = options.mimeType || blob.type || \"\";\n    if (!(0, $33dea9d9a6da4c9a$export$63e7bed68b07a85c).includes(mimeType)) throw new Error(`This is not an accepted image format. Accepted MIME types are: ${(0, $33dea9d9a6da4c9a$export$63e7bed68b07a85c).join(\", \")}`);\n    return new File([\n        blob\n    ], options.filename || \"\", blob);\n};\n\n\n/**\n * A class representing a storage utility for managing data in `localStorage` or `sessionStorage`.\n */ class $f0a2ccd611c71db8$export$bf2a15d34f3c441c {\n    /**\n   * The prefix to be added to all keys.\n   *\n   * @type {string}\n   * @private\n   */ #keyPrefix = null;\n    /**\n   * The storage provider (`localStorage` or `sessionStorage`).\n   *\n   * @type {Storage}\n   * @private\n   */ #provider = null;\n    /**\n   * Creates an instance of Storage.\n   *\n   * @param {string} prefix - The prefix to be added to all keys when storing/retrieving data.\n   * @param {Storage} [provider=localStorage] - The storage provider (`localStorage` or `sessionStorage`).\n   * @throws {Error} If prefix is not provided or if the provider is not supported.\n   */ constructor(prefix, provider = localStorage){\n        if (!prefix) throw new Error(\"Storage prefix is required\");\n        if (provider !== localStorage && provider !== sessionStorage) throw new Error(\"Storage provider is not supported\");\n        this.#keyPrefix = prefix;\n        this.#provider = provider;\n    }\n    /**\n   * Sets a key-value pair in the storage.\n   *\n   * @param {string} key - The key for the data.\n   * @param {*} value - The value to be stored (will be converted to JSON string).\n   */ set(key, value) {\n        try {\n            this.#provider.setItem(`${this.#keyPrefix}${key}`, JSON.stringify(value));\n        } catch (err) {\n            console.error(\"Error saving to storage\", err);\n        }\n    }\n    /**\n   * Retrieves the value associated with the given key from the storage.\n   *\n   * @param {string} key - The key to retrieve the value for.\n   * @returns {*} The value associated with the key, or `null` if key is not found or an error occurs.\n   */ get(key) {\n        try {\n            const value = this.#provider.getItem(`${this.#keyPrefix}${key}`);\n            return value ? JSON.parse(value) : null;\n        } catch (err) {\n            console.error(\"Error getting from storage\", err);\n            return null;\n        }\n    }\n}\nconst $f0a2ccd611c71db8$var$DEFAULT_STORAGE_PREFIX = \"meme-generator/\";\nconst $f0a2ccd611c71db8$var$DEFAULT_STORAGE_PROVIDER = localStorage;\nconst $f0a2ccd611c71db8$export$ddcffe0146c8f882 = new $f0a2ccd611c71db8$export$bf2a15d34f3c441c($f0a2ccd611c71db8$var$DEFAULT_STORAGE_PREFIX, $f0a2ccd611c71db8$var$DEFAULT_STORAGE_PROVIDER);\n\n\nconst $fbb55a96d78c7ba0$export$de75f46579dcf24 = (selectedImage)=>{\n    return typeof selectedImage === \"string\";\n};\n\n\nvar $eccf21b2da8f185e$exports = {};\n\n$eccf21b2da8f185e$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"Pressuru.684952ea.ttf\";\n\n\nvar $4e9367b4637ab0b3$exports = {};\n\n$4e9367b4637ab0b3$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"Oswald-Regular.89ec7d89.ttf\";\n\n\nvar $98768b53aac35bcc$exports = {};\n\n$98768b53aac35bcc$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"Oswald-Bold.0f6a7ca6.ttf\";\n\n\nvar $81873ad161a9f996$exports = {};\n\n$81873ad161a9f996$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"Roboto-Regular.ca197847.ttf\";\n\n\nvar $f1c993919e45d5c2$exports = {};\n\n$f1c993919e45d5c2$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"Roboto-Bold.fdb9b54a.ttf\";\n\n\nvar $8f40b96e34825d38$exports = {};\n\n$8f40b96e34825d38$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"RobotoCondensed-Regular.d585f5c7.ttf\";\n\n\nvar $51e3f333db254f7d$exports = {};\n\n$51e3f333db254f7d$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"RobotoCondensed-Bold.e1f96d4b.ttf\";\n\n\nvar $0d878777045f8608$exports = {};\n\n$0d878777045f8608$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"CourierPrime-Regular.3a25a501.ttf\";\n\n\nvar $da7f4261981c6446$exports = {};\n\n$da7f4261981c6446$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"CourierPrime-Bold.3d6bf689.ttf\";\n\n\nvar $553eebead4d87493$exports = {};\n\n$553eebead4d87493$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"OpenSans-Regular.edf9e01b.ttf\";\n\n\nvar $e4f4da01dd92f98a$exports = {};\n\n$e4f4da01dd92f98a$exports = (parcelRequire(\"aNJCr\")).getBundleURL(\"9p9yL\") + \"OpenSans-Bold.8fceb72b.ttf\";\n\n\nconst $055531bbd0af154c$export$6874249d87f2602a = [\n    {\n        name: \"Pressuru\",\n        label: \"Pressuru\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($eccf21b2da8f185e$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"Oswald-Regular\",\n        label: \"Oswald\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($4e9367b4637ab0b3$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"Oswald-Bold\",\n        label: \"Oswald Bold\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($98768b53aac35bcc$exports))),\n        style: \"normal\",\n        weight: \"700\"\n    },\n    {\n        name: \"Roboto-Regular\",\n        label: \"Roboto\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($81873ad161a9f996$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"Roboto-Bold\",\n        label: \"Roboto Bold\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($f1c993919e45d5c2$exports))),\n        style: \"normal\",\n        weight: \"700\"\n    },\n    {\n        name: \"RobotoCondensed-Regular\",\n        label: \"Roboto Condensed\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($8f40b96e34825d38$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"RobotoCondensed-Bold\",\n        label: \"Roboto Condensed Bold\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($51e3f333db254f7d$exports))),\n        style: \"normal\",\n        weight: \"700\"\n    },\n    {\n        name: \"CourierPrime-Regular\",\n        label: \"Courier Prime\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($0d878777045f8608$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"CourierPrime-Bold\",\n        label: \"Courier Prime Bold\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($da7f4261981c6446$exports))),\n        style: \"normal\",\n        weight: \"700\"\n    },\n    {\n        name: \"OpenSans-Regular\",\n        label: \"Open Sans\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($553eebead4d87493$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    },\n    {\n        name: \"OpenSans-Bold\",\n        label: \"Open Sans Bold\",\n        path: (0, (/*@__PURE__*/$parcel$interopDefault($e4f4da01dd92f98a$exports))),\n        style: \"normal\",\n        weight: \"400\"\n    }\n];\nconst $055531bbd0af154c$export$59eceaef0c7797b2 = async (name, path, options = {})=>{\n    try {\n        const font = new FontFace(name, `url(${path})`, {\n            ...options\n        });\n        await font.load();\n        document.fonts.add(font);\n    } catch (err) {\n        console.error(err);\n    }\n};\n\n\nconst $166cfb2484b08c80$var$errorsContainer = document.getElementById(\"errorsContainer\");\nconst $166cfb2484b08c80$var$hideError = (evt)=>{\n    const target = evt.currentTarget;\n    target.removeEventListener(\"click\", $166cfb2484b08c80$var$hideError);\n    $166cfb2484b08c80$var$errorsContainer.removeChild(target.parentNode);\n};\nconst $166cfb2484b08c80$export$af04143326425dbd = (message = \"\", type = \"info\")=>{\n    const types = [\n        \"info\",\n        \"warning\",\n        \"danger\"\n    ];\n    if (!types.includes(type)) type = \"info\";\n    const template = /* html */ `\n    ${message}\n    <button type=\"button\" class=\"btn-close\" data-dismiss=\"alert\" aria-label=\"Close\"></button>\n  `;\n    const div = document.createElement(\"div\");\n    div.className = `alert alert-${type} alert-dismissible text-break mb-2 fade`;\n    div.innerHTML = template;\n    div.querySelector(\"button\").addEventListener(\"click\", $166cfb2484b08c80$var$hideError);\n    $166cfb2484b08c80$var$errorsContainer.appendChild(div);\n    setTimeout(()=>div.classList.add(\"show\"), 100);\n};\n\n\n\n\n\nconst $f0ee20a32c2bc385$var$defaultTextboxData = {\n    id: \"\",\n    text: \"\",\n    fillColor: \"#ffffff\",\n    strokeColor: \"#000000\",\n    font: \"Pressuru\",\n    fontSize: 40,\n    fontWeight: \"normal\",\n    textAlign: \"center\",\n    shadowBlur: 0,\n    strokeWidth: 1.5,\n    offsetY: 0,\n    offsetX: 0,\n    rotate: 0,\n    allCaps: true\n};\nconst $f0ee20a32c2bc385$var$textboxes = new Map();\nclass $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b {\n    constructor(data){\n        const id = (0, $21c3f3a8dccfa4fd$export$e2a22331486dcca0)(\"textbox\", Date.now().toString(36));\n        this.data = data ? {\n            ...data,\n            id: id\n        } : {\n            ...$f0ee20a32c2bc385$var$defaultTextboxData,\n            id: id\n        };\n        $f0ee20a32c2bc385$var$textboxes.set(id, this);\n        document.dispatchEvent(new CustomEvent(`textbox-create`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                textbox: this\n            }\n        }));\n    }\n    getData() {\n        return this.data;\n    }\n    static create(data) {\n        return new $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b(data);\n    }\n    static getAll() {\n        return $f0ee20a32c2bc385$var$textboxes;\n    }\n    static getById(id) {\n        return $f0ee20a32c2bc385$var$textboxes.get(id);\n    }\n    static remove(id) {\n        $f0ee20a32c2bc385$var$textboxes.delete(id);\n        document.dispatchEvent(new CustomEvent(`textbox-remove`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                id: id\n            }\n        }));\n    }\n    static createElement(textbox, autoFocus = true) {\n        if (!(textbox instanceof $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b)) return;\n        const data = textbox.getData();\n        const { id: id, text: text, fillColor: fillColor, strokeColor: strokeColor, fontSize: fontSize, shadowBlur: shadowBlur, strokeWidth: strokeWidth, offsetX: offsetX, offsetY: offsetY, rotate: rotate } = data;\n        const template = /* html */ `\n    <div class=\"d-flex align-items-center\">\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"duplicate-text-box\" title=\"Duplicate text box\"></button>\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"delete-text-box\" title=\"Remove text box\"></button>\n\n      <textarea class=\"form-control meme-text\" type=\"text\" data-input=\"text\" autocomplete=\"off\" rows=\"1\" placeholder=\"${`Text #${$f0ee20a32c2bc385$var$textboxes.size}`}\">${text}</textarea>\n\n      <div class=\"d-flex align-items-center pe-2\">\n        <label for=\"fillColorInput\" class=\"visually-hidden\">Fill color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${fillColor}\" id=\"fillColorInput\" data-input=\"fillColor\" title=\"Fill color\">\n\n        <label for=\"strokeColorInput\" class=\"visually-hidden\">Outline color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${strokeColor}\" id=\"strokeColorInput\" data-input=\"strokeColor\" title=\"Outline color\">\n\n        <button type=\"button\" class=\"btn btn-secondary settings-button\" data-button=\"settings\" title=\"Settings\"></button>\n      </div>\n    </div>\n\n    <div class=\"p-2\" data-section=\"settings\" hidden>\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <details class=\"emoji-picker-details\">\n            <summary>Emoji picker</summary>\n            <emoji-picker class=\"light\"></emoji-picker>\n          </details>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontInput_${id}\" class=\"mb-1 d-block text-truncate\">Font: </label>\n\n          <select class=\"form-select\" data-input=\"font\" id=\"fontInput_${id}\">\n            <optgroup label=\"Web fonts\">\n              <option value=\"Impact\">Impact</option>\n              <option value=\"Arial\">Arial</option>\n              <option value=\"Arial Black\">Arial Black</option>\n              <option value=\"Helvetica\">Helvetica</option>\n              <option value=\"Comic Sans MS\">Comic Sans MS</option>\n              <option value=\"Times\">Times</option>\n              <option value=\"Times New Roman\">Times New Roman</option>\n              <option value=\"Courier New\">Courier New</option>\n              <option value=\"Verdana\">Verdana</option>\n              <option value=\"Georgia\">Georgia</option>\n              <option value=\"Palatino\">Palatino</option>\n              <option value=\"Garamond\">Garamond</option>\n              <option value=\"Bookman\">Bookman</option>\n              <option value=\"Trebuchet MS\">Trebuchet MS</option>\n            </optgroup>\n            <optgroup label=\"Google fonts\">\n              ${(0, $055531bbd0af154c$export$6874249d87f2602a).map(({ name: name, label: label })=>`<option value=\"${name}\">${label}</option>`)}\n            </optgroup>\n          </select>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontSizeInput_${id}\" class=\"mb-1 d-block text-truncate\">Size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"1\" value=\"${fontSize}\" data-input=\"fontSize\" id=\"fontSizeInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontWeightInput_${id}\" class=\"mb-1 d-block text-truncate\">Weight:</label>\n          <select class=\"form-select\" data-input=\"fontWeight\" id=\"fontWeightInput_${id}\">\n            <option value=\"normal\">Normal</option>\n            <option value=\"bold\">Bold</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"shadowWidthInput_${id}\" class=\"mb-1 d-block text-truncate\">Shadow size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${(0, $33dea9d9a6da4c9a$export$62045be72fe457b4)}\" value=\"${shadowBlur}\" data-input=\"shadowBlur\" id=\"shadowWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"strokeWidthInput_${id}\">Outline size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${(0, $33dea9d9a6da4c9a$export$8f089f0a062560ff)}\" step=\"0.5\" value=\"${strokeWidth}\" data-input=\"strokeWidth\" id=\"strokeWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"textAlignInput_${id}\" class=\"mb-1 d-block text-truncate\">Text align:</label>\n          <select class=\"form-select\" data-input=\"textAlign\" id=\"textAlignInput_${id}\" value=\"right\">\n            <option value=\"left\">Left</option>\n            <option value=\"center\">Center</option>\n            <option value=\"right\">Right</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetYInput_${id}\">Vertical offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetY}\" data-input=\"offsetY\" id=\"offsetYInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetXInput_${id}\">Horizontal offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetX}\" data-input=\"offsetX\" id=\"offsetXInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"textRotateInput_${id}\">Rotate:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${rotate}\" data-input=\"rotate\" id=\"textRotateInput_${id}\" min=\"-360\" max=\"${(0, $33dea9d9a6da4c9a$export$d3f4819a57998cf7)}\">\n        </div>\n\n        <div class=\"col-12\">\n          <div class=\"move-text-actions mb-3\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Up\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Right\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Down\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Left\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-lg-12\">\n          <div class=\"form-check\">\n            <input type=\"checkbox\" class=\"form-check-input\" id=\"allCapsCheckbox_${id}\" data-input=\"allCaps\">\n            <label class=\"form-check-label\" for=\"allCapsCheckbox_${id}\">ALL CAPS</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n        const fragment = document.createDocumentFragment();\n        const div = document.createElement(\"div\");\n        div.setAttribute(\"id\", id);\n        div.setAttribute(\"data-section\", \"textbox\");\n        div.className = \"bg-light border shadow-sm mb-3 rounded\";\n        div.innerHTML = template;\n        div.querySelectorAll(\"select\").forEach((el)=>el.value = data[el.dataset.input]);\n        div.querySelectorAll('input[type=\"checkbox\"]').forEach((el)=>el.checked = data[el.dataset.input]);\n        const textboxEl = fragment.appendChild(div);\n        if (autoFocus) setTimeout(()=>textboxEl.querySelector('[data-input=\"text\"]').focus(), 0);\n        return textboxEl;\n    }\n}\n\n\n\n\nclass $68e654e91d7a7392$export$8d01c972ee8b14a9 {\n    #canvas = null;\n    #ctx = null;\n    constructor(canvasEl){\n        this.#canvas = canvasEl;\n        this.#ctx = this.#canvas.getContext(\"2d\");\n    }\n    get width() {\n        return this.#canvas.width;\n    }\n    set width(value) {\n        this.#canvas.width = value;\n    }\n    get height() {\n        return this.#canvas.height;\n    }\n    set height(value) {\n        this.#canvas.height = value;\n    }\n    getDimensions() {\n        return {\n            width: this.width,\n            height: this.height\n        };\n    }\n    setDimensions({ width: width, height: height }) {\n        this.width = width;\n        this.height = height;\n        return this;\n    }\n    toDataURL() {\n        return this.#canvas.toDataURL();\n    }\n    draw(image, textboxes = new Map()) {\n        if (image == null) return;\n        const canvas = this.#canvas;\n        const ctx = this.#ctx;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        if ((0, $fbb55a96d78c7ba0$export$de75f46579dcf24)(image)) {\n            ctx.fillStyle = image;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        } else ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        let multiplier = 0;\n        textboxes.forEach((textbox)=>{\n            const { data: data } = textbox;\n            multiplier += 1;\n            ctx.save();\n            ctx.font = `${data.fontWeight} ${data.fontSize * canvas.width / 1000}px ${data.font}`;\n            ctx.fillStyle = data.fillColor;\n            ctx.textAlign = data.textAlign;\n            ctx.strokeStyle = data.strokeColor;\n            const lineHeight = ctx.measureText(\"M\").width + data.fontSize / 2;\n            const xPos = canvas.width / 2;\n            const shadowBlur = data.shadowBlur;\n            const text = data.allCaps === true ? data.text.toUpperCase() : data.text;\n            const textLines = text.split(\"\\n\");\n            if (shadowBlur !== 0) {\n                ctx.shadowOffsetX = 0;\n                ctx.shadowOffsetY = 0;\n                ctx.shadowBlur = Math.min(shadowBlur, (0, $33dea9d9a6da4c9a$export$62045be72fe457b4));\n                ctx.shadowColor = data.strokeColor;\n            }\n            ctx.translate(xPos + data.offsetX, lineHeight * multiplier + data.offsetY);\n            ctx.rotate(Math.min(data.rotate, (0, $33dea9d9a6da4c9a$export$d3f4819a57998cf7)) * Math.PI / 180);\n            // First draw each line with shadow.\n            textLines.forEach((text, index)=>ctx.fillText(text, 0, index * lineHeight));\n            // Since shadows of multiline text may be drawn over letters of neighbour lines\n            // (when shadow blur is big enough), re-draw text without shadows.\n            if (shadowBlur !== 0) {\n                ctx.shadowBlur = 0;\n                textLines.forEach((text, index)=>ctx.fillText(text, 0, index * lineHeight));\n            }\n            if (data.strokeWidth > 0) {\n                ctx.lineWidth = Math.min(data.strokeWidth, (0, $33dea9d9a6da4c9a$export$8f089f0a062560ff));\n                textLines.forEach((text, index)=>ctx.strokeText(text, 0, index * lineHeight));\n            }\n            ctx.restore();\n        });\n        return this;\n    }\n    clear() {\n        this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n        return this;\n    }\n    show() {\n        this.#canvas.hidden = false;\n        return this;\n    }\n    hide() {\n        this.#canvas.hidden = true;\n        return this;\n    }\n    static createInstance(canvasEl) {\n        return new $68e654e91d7a7392$export$8d01c972ee8b14a9(canvasEl);\n    }\n}\n\n\nconst $44ae6d9db4eaca0f$var$canvas = (0, $68e654e91d7a7392$export$8d01c972ee8b14a9).createInstance(document.getElementById(\"canvas\"));\nconst $44ae6d9db4eaca0f$var$videoModal = document.getElementById(\"videoModal\");\nconst $44ae6d9db4eaca0f$var$downloadModal = document.getElementById(\"downloadModal\");\nconst $44ae6d9db4eaca0f$var$dropzoneEl = document.querySelector(\"files-dropzone\");\nconst $44ae6d9db4eaca0f$var$instructionsEl = document.getElementById(\"instructions\");\nconst $44ae6d9db4eaca0f$var$imageUploadMethodSelect = document.getElementById(\"imageUploadMethodSelect\");\nconst $44ae6d9db4eaca0f$var$fileSelectBtn = document.getElementById(\"fileSelectBtn\");\nconst $44ae6d9db4eaca0f$var$imageUrlForm = document.getElementById(\"imageUrlForm\");\nconst $44ae6d9db4eaca0f$var$addTextboxBtn = document.getElementById(\"addTextboxBtn\");\nconst $44ae6d9db4eaca0f$var$textboxesContainer = document.getElementById(\"textboxesContainer\");\nconst $44ae6d9db4eaca0f$var$generateMemeBtn = document.getElementById(\"generateMemeBtn\");\nconst $44ae6d9db4eaca0f$var$openVideoModalBtn = document.getElementById(\"openVideoModalBtn\");\nconst $44ae6d9db4eaca0f$var$downloadMemeBtn = document.getElementById(\"downloadMemeBtn\");\nconst $44ae6d9db4eaca0f$var$downloadMemePreview = document.getElementById(\"downloadMemePreview\");\nconst $44ae6d9db4eaca0f$var$webShareComponent = document.querySelector(\"web-share\");\nconst $44ae6d9db4eaca0f$var$galleryEl = document.getElementById(\"gallery\");\nconst $44ae6d9db4eaca0f$var$gallerySearchEl = document.getElementById(\"gallerySearch\");\nconst $44ae6d9db4eaca0f$var$galleryNoResultsEl = $44ae6d9db4eaca0f$var$galleryEl.querySelector(\".gallery__no-results\");\nconst $44ae6d9db4eaca0f$var$solidColorForm = document.getElementById(\"solidColorForm\");\nconst $44ae6d9db4eaca0f$var$uploadMethodEls = document.querySelectorAll(\".upload-method\");\nconst $44ae6d9db4eaca0f$var$removeConfirmationModal = document.getElementById(\"removeConfirmationModal\");\nconst $44ae6d9db4eaca0f$var$removeTextForm = document.getElementById(\"removeTextForm\");\nconst $44ae6d9db4eaca0f$var$maxImageDimensionsForm = document.getElementById(\"maxImageDimensionsForm\");\nconst $44ae6d9db4eaca0f$var$maxImageDimensionsSelect = $44ae6d9db4eaca0f$var$maxImageDimensionsForm[\"maxImageDimensions\"];\nconst $44ae6d9db4eaca0f$var$clearCanvasBtn = document.getElementById(\"clearCanvasBtn\");\nconst $44ae6d9db4eaca0f$var$maxImageDimensionsFromStorage = (0, $f0a2ccd611c71db8$export$ddcffe0146c8f882).get(\"maxImageDimensions\");\nlet $44ae6d9db4eaca0f$var$shouldFocusOnTextboxCreate = false;\nlet $44ae6d9db4eaca0f$var$selectedImage = null;\nlet $44ae6d9db4eaca0f$var$reqAnimFrame = null;\nconst $44ae6d9db4eaca0f$var$generateMeme = async ()=>{\n    const dataUrl = $44ae6d9db4eaca0f$var$canvas.toDataURL(\"image/png\");\n    const filename = `${(0, $21c3f3a8dccfa4fd$export$e2a22331486dcca0)(\"meme\")}.png`;\n    // Prepare download link\n    const downloadLink = dataUrl.replace(\"image/png\", \"image/octet-stream\");\n    $44ae6d9db4eaca0f$var$downloadMemeBtn.download = filename;\n    $44ae6d9db4eaca0f$var$downloadMemeBtn.href = downloadLink;\n    $44ae6d9db4eaca0f$var$downloadMemePreview.width = $44ae6d9db4eaca0f$var$canvas.getDimensions().width;\n    $44ae6d9db4eaca0f$var$downloadMemePreview.height = $44ae6d9db4eaca0f$var$canvas.getDimensions().height;\n    $44ae6d9db4eaca0f$var$downloadMemePreview.src = downloadLink;\n    // Prepare for sharing file\n    if ((0, $94933cc6427541bd$export$c37129e465f64ef0)()) try {\n        const file = await (0, $c3d7e05a1ce34ed5$export$6539e087749cf9d3)({\n            url: dataUrl,\n            filename: filename,\n            mimeType: \"image/png\"\n        }).catch((err)=>(0, $166cfb2484b08c80$export$af04143326425dbd)(err.message, \"danger\"));\n        if (file && (0, $94933cc6427541bd$export$c37129e465f64ef0)({\n            files: [\n                file\n            ]\n        })) {\n            $44ae6d9db4eaca0f$var$webShareComponent.shareFiles = [\n                file\n            ];\n            $44ae6d9db4eaca0f$var$webShareComponent.hidden = false;\n        }\n    } catch (error) {\n        console.error(error);\n    }\n    window.requestAnimationFrame(()=>{\n        $44ae6d9db4eaca0f$var$downloadModal.open = true;\n    });\n};\nconst $44ae6d9db4eaca0f$var$setImageMaxDimensions = (image)=>{\n    const maxImageDimensionsSelect = $44ae6d9db4eaca0f$var$maxImageDimensionsForm[\"maxImageDimensions\"];\n    const [maxWidthValue, maxHeightValue] = maxImageDimensionsSelect.value.split(\"x\");\n    const MAX_WIDTH = Number(maxWidthValue) || 800;\n    const MAX_HEIGHT = Number(maxHeightValue) || 600;\n    let width = image.width;\n    let height = image.height;\n    if (width > height) {\n        if (width > MAX_WIDTH) {\n            height *= MAX_WIDTH / width;\n            width = MAX_WIDTH;\n        }\n    } else if (height > MAX_HEIGHT) {\n        width *= MAX_HEIGHT / height;\n        height = MAX_HEIGHT;\n    }\n    $44ae6d9db4eaca0f$var$canvas.setDimensions({\n        width: width,\n        height: height\n    });\n};\nconst $44ae6d9db4eaca0f$var$afterImageSelect = ()=>{\n    $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll()).show();\n    $44ae6d9db4eaca0f$var$dropzoneEl.classList.add(\"dropzone--accepted\");\n    $44ae6d9db4eaca0f$var$dropzoneEl.disabled = true;\n    $44ae6d9db4eaca0f$var$generateMemeBtn.disabled = false;\n    $44ae6d9db4eaca0f$var$instructionsEl.hidden = true;\n    $44ae6d9db4eaca0f$var$clearCanvasBtn.hidden = false;\n};\nconst $44ae6d9db4eaca0f$var$handleImageLoad = (evt)=>{\n    $44ae6d9db4eaca0f$var$selectedImage = evt.target;\n    $44ae6d9db4eaca0f$var$setImageMaxDimensions($44ae6d9db4eaca0f$var$selectedImage);\n    $44ae6d9db4eaca0f$var$afterImageSelect();\n};\nconst $44ae6d9db4eaca0f$var$handleSolidColorFormInput = (evt)=>{\n    const DEFAULT_WIDTH = 800;\n    const DEFAULT_HEIGHT = 600;\n    if (evt.target === $44ae6d9db4eaca0f$var$solidColorForm[\"canvasColor\"]) $44ae6d9db4eaca0f$var$selectedImage = evt.target.value;\n    if ((0, $fbb55a96d78c7ba0$export$de75f46579dcf24)($44ae6d9db4eaca0f$var$selectedImage)) {\n        $44ae6d9db4eaca0f$var$canvas.setDimensions({\n            width: Number($44ae6d9db4eaca0f$var$solidColorForm[\"canvasWidth\"].value) || DEFAULT_WIDTH,\n            height: Number($44ae6d9db4eaca0f$var$solidColorForm[\"canvasHeight\"].value) || DEFAULT_HEIGHT\n        });\n        $44ae6d9db4eaca0f$var$afterImageSelect();\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleFileSelect = (file)=>{\n    if (!file) return;\n    const image = new Image();\n    const reader = new FileReader();\n    reader.addEventListener(\"load\", function(evt) {\n        const data = evt.target.result;\n        image.addEventListener(\"load\", $44ae6d9db4eaca0f$var$handleImageLoad);\n        image.src = data;\n    });\n    reader.readAsDataURL(file);\n};\nconst $44ae6d9db4eaca0f$var$handleOpenVideoModalButtonClick = ()=>{\n    $44ae6d9db4eaca0f$var$videoModal.open = true;\n};\nconst $44ae6d9db4eaca0f$var$handleTextPropChange = (element, textboxId, prop)=>{\n    const textboxData = (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getById(textboxId).getData();\n    switch(element.type){\n        case \"checkbox\":\n            textboxData[prop] = element.checked;\n            break;\n        case \"number\":\n            textboxData[prop] = Number(element.value);\n            break;\n        default:\n            textboxData[prop] = element.value;\n    }\n    $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll());\n};\nconst $44ae6d9db4eaca0f$var$handleAddTextboxBtnClick = ()=>(0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).create();\nconst $44ae6d9db4eaca0f$var$handleImageUploadFromURL = async (evt)=>{\n    evt.preventDefault();\n    const form = evt.target;\n    const submitButton = form.querySelector('button[type=\"submit\"]');\n    const imageUrl = form[\"imageUrl\"].value;\n    if (!imageUrl.trim()) return;\n    submitButton.disabled = true;\n    submitButton.querySelector(\".spinner\").hidden = false;\n    submitButton.querySelector(\".label\").hidden = true;\n    try {\n        const file = await (0, $c3d7e05a1ce34ed5$export$6539e087749cf9d3)({\n            url: imageUrl\n        }).catch((err)=>(0, $166cfb2484b08c80$export$af04143326425dbd)(err.message, \"danger\"));\n        if (file) $44ae6d9db4eaca0f$var$handleFileSelect(file);\n    } catch  {\n        (0, $166cfb2484b08c80$export$af04143326425dbd)(`Failed to load image from \"${imageUrl}\".`, \"danger\");\n    } finally{\n        submitButton.disabled = false;\n        submitButton.querySelector(\".spinner\").hidden = true;\n        submitButton.querySelector(\".label\").hidden = false;\n    }\n};\nconst $44ae6d9db4eaca0f$var$moveTextUsingArrowbuttons = (textboxId, direction)=>()=>{\n        const textboxEl = document.getElementById(textboxId);\n        const offsetYInput = textboxEl.querySelector('[data-input=\"offsetY\"]');\n        const offsetXInput = textboxEl.querySelector('[data-input=\"offsetX\"]');\n        const textbox = (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getById(textboxId);\n        if (!textbox) return;\n        const textboxData = textbox.getData();\n        direction = direction.toLowerCase();\n        switch(direction){\n            case \"up\":\n                textboxData.offsetY -= 1;\n                offsetYInput.value = textboxData.offsetY;\n                break;\n            case \"down\":\n                textboxData.offsetY += 1;\n                offsetYInput.value = textboxData.offsetY;\n                break;\n            case \"left\":\n                textboxData.offsetX -= 1;\n                offsetXInput.value = textboxData.offsetX;\n                break;\n            case \"right\":\n                textboxData.offsetX += 1;\n                offsetXInput.value = textboxData.offsetX;\n                break;\n        }\n        $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll());\n        $44ae6d9db4eaca0f$var$reqAnimFrame = requestAnimationFrame($44ae6d9db4eaca0f$var$moveTextUsingArrowbuttons(textboxId, direction));\n    };\nconst $44ae6d9db4eaca0f$var$handleUploadMethodChange = (evt)=>{\n    $44ae6d9db4eaca0f$var$uploadMethodEls.forEach((el)=>el.hidden = el.id !== evt.target.value);\n    $44ae6d9db4eaca0f$var$maxImageDimensionsForm.hidden = evt.target.value === \"solidColorForm\";\n};\nconst $44ae6d9db4eaca0f$var$handleFileSelectClick = ()=>{\n    if (typeof $44ae6d9db4eaca0f$var$dropzoneEl.openFileDialog === \"function\") $44ae6d9db4eaca0f$var$dropzoneEl.openFileDialog();\n};\nconst $44ae6d9db4eaca0f$var$handleDropFilesAccepted = (evt)=>{\n    const [file] = evt.detail.acceptedFiles;\n    if (file) $44ae6d9db4eaca0f$var$handleFileSelect(file);\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerInput = (evt)=>{\n    const element = evt.target;\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    let prop;\n    if (element.matches('[data-input=\"text\"]')) prop = \"text\";\n    else if (element.matches('[data-input=\"fillColor\"]')) prop = \"fillColor\";\n    else if (element.matches('[data-input=\"strokeColor\"]')) prop = \"strokeColor\";\n    else if (element.matches('[data-input=\"font\"]')) prop = \"font\";\n    else if (element.matches('[data-input=\"fontSize\"]')) prop = \"fontSize\";\n    else if (element.matches('[data-input=\"fontWeight\"]')) prop = \"fontWeight\";\n    else if (element.matches('[data-input=\"textAlign\"]')) prop = \"textAlign\";\n    else if (element.matches('[data-input=\"shadowBlur\"]')) prop = \"shadowBlur\";\n    else if (element.matches('[data-input=\"offsetY\"]')) prop = \"offsetY\";\n    else if (element.matches('[data-input=\"offsetX\"]')) prop = \"offsetX\";\n    else if (element.matches('[data-input=\"rotate\"]')) prop = \"rotate\";\n    else if (element.matches('[data-input=\"strokeWidth\"]')) prop = \"strokeWidth\";\n    if (prop) $44ae6d9db4eaca0f$var$handleTextPropChange(element, textboxId, prop);\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerChange = (evt)=>{\n    const element = evt.target;\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    let prop;\n    if (element.matches('[data-input=\"allCaps\"]')) prop = \"allCaps\";\n    if (prop) $44ae6d9db4eaca0f$var$handleTextPropChange(element, textboxId, prop);\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerClick = (evt)=>{\n    const element = evt.target;\n    if (element.matches('[data-button=\"settings\"]')) {\n        const textboxEl = element.closest('[data-section=\"textbox\"]');\n        const textboxSettingsEl = textboxEl?.querySelector('[data-section=\"settings\"]');\n        if (textboxSettingsEl) textboxSettingsEl.hidden = !textboxSettingsEl.hidden;\n    }\n    if (element.matches('[data-button=\"duplicate-text-box\"')) {\n        const currentTextboxEl = element.closest('[data-section=\"textbox\"]');\n        const currentTextboxData = (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getById(currentTextboxEl.id);\n        (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).create({\n            ...currentTextboxData.data\n        });\n    }\n    if (element.matches('[data-button=\"delete-text-box\"]')) {\n        const textboxId = element.closest('[data-section=\"textbox\"]').id;\n        const textboxToDelete = (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getById(textboxId);\n        if (textboxToDelete && textboxToDelete.data.text.trim()) {\n            const textboxIdInput = $44ae6d9db4eaca0f$var$removeTextForm[\"textbox-id\"];\n            if (textboxIdInput) {\n                textboxIdInput.value = textboxId;\n                $44ae6d9db4eaca0f$var$removeConfirmationModal.open = true;\n            }\n        } else (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).remove(textboxId);\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleTextRemoveFormSubmit = (evt)=>{\n    evt.preventDefault();\n    const textboxId = evt.target[\"textbox-id\"].value;\n    if (textboxId) {\n        (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).remove(textboxId);\n        $44ae6d9db4eaca0f$var$removeConfirmationModal.open = false;\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerdown = (evt)=>{\n    const element = evt.target;\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    if (!textboxEl) return;\n    if (element.matches('[data-action=\"move-text\"]')) $44ae6d9db4eaca0f$var$reqAnimFrame = requestAnimationFrame($44ae6d9db4eaca0f$var$moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute(\"aria-label\")));\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerup = (evt)=>{\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        cancelAnimationFrame && cancelAnimationFrame($44ae6d9db4eaca0f$var$reqAnimFrame);\n        $44ae6d9db4eaca0f$var$reqAnimFrame = null;\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerout = (evt)=>{\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        cancelAnimationFrame && cancelAnimationFrame($44ae6d9db4eaca0f$var$reqAnimFrame);\n        $44ae6d9db4eaca0f$var$reqAnimFrame = null;\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerKeyDown = (evt)=>{\n    const element = evt.target;\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    if (element.matches('[data-action=\"move-text\"]')) {\n        if (evt.key === \" \" || evt.key === \"Enter\") {\n            $44ae6d9db4eaca0f$var$reqAnimFrame && cancelAnimationFrame($44ae6d9db4eaca0f$var$reqAnimFrame);\n            $44ae6d9db4eaca0f$var$reqAnimFrame = requestAnimationFrame($44ae6d9db4eaca0f$var$moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute(\"aria-label\")));\n        }\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxesContainerKeyUp = (evt)=>{\n    const element = evt.target;\n    if (element.matches('[data-action=\"move-text\"]')) {\n        if (evt.key === \" \" || evt.key === \"Enter\") {\n            $44ae6d9db4eaca0f$var$reqAnimFrame && cancelAnimationFrame($44ae6d9db4eaca0f$var$reqAnimFrame);\n            $44ae6d9db4eaca0f$var$reqAnimFrame = null;\n        }\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleGalleryClick = async (evt)=>{\n    const button = evt.target.closest(\"button\");\n    if (!button) return;\n    const img = button.querySelector(\"img\");\n    try {\n        const file = await (0, $c3d7e05a1ce34ed5$export$6539e087749cf9d3)({\n            url: img.src\n        }).catch((err)=>(0, $166cfb2484b08c80$export$af04143326425dbd)(err.message, \"danger\"));\n        if (file) $44ae6d9db4eaca0f$var$handleFileSelect(file);\n    } catch  {\n        (0, $166cfb2484b08c80$export$af04143326425dbd)(`Failed to load image: \"${img.alt}\".`, \"danger\");\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleGallerySearchInput = (evt)=>{\n    const query = evt.target.value.toLowerCase().trim();\n    const galleryItems = $44ae6d9db4eaca0f$var$galleryEl.querySelectorAll(\"button\");\n    galleryItems.forEach((item)=>{\n        const alt = (item.querySelector(\"img\").getAttribute(\"alt\") || \"\").toLowerCase();\n        item.hidden = !alt.includes(query);\n    });\n    $44ae6d9db4eaca0f$var$galleryNoResultsEl.hidden = !!$44ae6d9db4eaca0f$var$galleryEl.querySelector(\"button:not([hidden])\");\n};\nconst $44ae6d9db4eaca0f$var$handleWebShareError = ()=>{\n    $44ae6d9db4eaca0f$var$downloadModal.open = false;\n    (0, $166cfb2484b08c80$export$af04143326425dbd)(\"There was an error while trying to share your meme.\", \"danger\");\n};\nconst $44ae6d9db4eaca0f$var$handleCapturePhotoError = (evt)=>{\n    const error = evt.detail.error;\n    let errorMessage = \"An error occurred while trying to capture photo.\";\n    if (error instanceof Error && (error.name === \"NotAllowedError\" || error.name === \"NotFoundError\")) errorMessage += \" Make sure you have a camera connected and you have granted the appropriate permissions.\";\n    (0, $166cfb2484b08c80$export$af04143326425dbd)(errorMessage, \"danger\");\n    $44ae6d9db4eaca0f$var$videoModal.open = false;\n    console.error(error);\n};\nconst $44ae6d9db4eaca0f$var$handleCapturePhotoSuccess = (evt)=>{\n    $44ae6d9db4eaca0f$var$videoModal.open = false;\n    const image = new Image();\n    image.addEventListener(\"load\", $44ae6d9db4eaca0f$var$handleImageLoad);\n    image.src = evt.detail.dataURI;\n};\nconst $44ae6d9db4eaca0f$var$handleModalOpen = (evt)=>{\n    if (evt.target.id === \"videoModal\") {\n        const capturePhotoComponent = $44ae6d9db4eaca0f$var$videoModal.querySelector(\"capture-photo\");\n        if (capturePhotoComponent && typeof capturePhotoComponent.startVideoStream === \"function\") capturePhotoComponent.startVideoStream();\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleModalClose = (evt)=>{\n    if (evt.target.id === \"videoModal\") {\n        const capturePhotoComponent = $44ae6d9db4eaca0f$var$videoModal.querySelector(\"capture-photo\");\n        if (capturePhotoComponent && typeof capturePhotoComponent.stopVideoStream === \"function\") capturePhotoComponent.stopVideoStream();\n    }\n    if (evt.target.id === \"removeConfirmationModal\") $44ae6d9db4eaca0f$var$removeTextForm.reset();\n};\nconst $44ae6d9db4eaca0f$var$handleEmojiPickerSelection = (evt)=>{\n    const textboxEl = evt.target.closest('[data-section=\"textbox\"]');\n    if (textboxEl) {\n        const input = textboxEl.querySelector('[data-input=\"text\"]');\n        const emoji = evt.detail.unicode;\n        if (input) (0, $dec5faeb65064cfd$export$2e2bcd8739ae039)(input, emoji);\n    }\n};\nconst $44ae6d9db4eaca0f$var$handleMaxImageDimensionsFormChange = (evt)=>{\n    if (evt.target.matches('[name=\"maxImageDimensions\"]')) (0, $f0a2ccd611c71db8$export$ddcffe0146c8f882).set(\"maxImageDimensions\", evt.target.value);\n    if (!$44ae6d9db4eaca0f$var$selectedImage || (0, $fbb55a96d78c7ba0$export$de75f46579dcf24)($44ae6d9db4eaca0f$var$selectedImage)) return;\n    $44ae6d9db4eaca0f$var$setImageMaxDimensions($44ae6d9db4eaca0f$var$selectedImage);\n    $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll());\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxCreate = (evt)=>{\n    const textbox = evt.detail.textbox;\n    const textboxEl = (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).createElement(textbox, $44ae6d9db4eaca0f$var$shouldFocusOnTextboxCreate);\n    $44ae6d9db4eaca0f$var$shouldFocusOnTextboxCreate = true;\n    $44ae6d9db4eaca0f$var$textboxesContainer.appendChild(textboxEl);\n    if (textbox.getData().text) $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll());\n};\nconst $44ae6d9db4eaca0f$var$handleTextboxDelete = (evt)=>{\n    const textboxEl = document.getElementById(evt.detail.id);\n    textboxEl && textboxEl.remove();\n    $44ae6d9db4eaca0f$var$textboxesContainer.querySelectorAll('[data-section=\"textbox\"]').forEach((el, idx)=>{\n        el.querySelector('[data-input=\"text\"]').setAttribute(\"placeholder\", `Text #${idx + 1}`);\n    });\n    $44ae6d9db4eaca0f$var$canvas.draw($44ae6d9db4eaca0f$var$selectedImage, (0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).getAll());\n};\nconst $44ae6d9db4eaca0f$var$handleClearCanvas = (evt)=>{\n    if (!$44ae6d9db4eaca0f$var$selectedImage) return;\n    evt.stopPropagation();\n    $44ae6d9db4eaca0f$var$selectedImage = null;\n    $44ae6d9db4eaca0f$var$dropzoneEl.classList.remove(\"dropzone--accepted\");\n    $44ae6d9db4eaca0f$var$generateMemeBtn.disabled = true;\n    $44ae6d9db4eaca0f$var$instructionsEl.hidden = false;\n    $44ae6d9db4eaca0f$var$clearCanvasBtn.hidden = true;\n    $44ae6d9db4eaca0f$var$dropzoneEl.disabled = false;\n    $44ae6d9db4eaca0f$var$canvas.clear().hide();\n};\n$44ae6d9db4eaca0f$var$fileSelectBtn.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleFileSelectClick);\n$44ae6d9db4eaca0f$var$openVideoModalBtn.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleOpenVideoModalButtonClick);\n$44ae6d9db4eaca0f$var$addTextboxBtn.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleAddTextboxBtnClick);\n$44ae6d9db4eaca0f$var$generateMemeBtn.addEventListener(\"click\", $44ae6d9db4eaca0f$var$generateMeme);\n$44ae6d9db4eaca0f$var$downloadMemeBtn.addEventListener(\"click\", ()=>$44ae6d9db4eaca0f$var$downloadModal.open = false);\n$44ae6d9db4eaca0f$var$imageUrlForm.addEventListener(\"submit\", $44ae6d9db4eaca0f$var$handleImageUploadFromURL);\n$44ae6d9db4eaca0f$var$dropzoneEl.addEventListener(\"files-dropzone-drop-accepted\", $44ae6d9db4eaca0f$var$handleDropFilesAccepted);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"input\", $44ae6d9db4eaca0f$var$handleTextboxesContainerInput);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"change\", $44ae6d9db4eaca0f$var$handleTextboxesContainerChange);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleTextboxesContainerClick);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"pointerdown\", $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerdown);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"pointerup\", $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerup);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"pointerout\", $44ae6d9db4eaca0f$var$handleTextboxesContainerPointerout);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"keydown\", $44ae6d9db4eaca0f$var$handleTextboxesContainerKeyDown);\n$44ae6d9db4eaca0f$var$textboxesContainer.addEventListener(\"keyup\", $44ae6d9db4eaca0f$var$handleTextboxesContainerKeyUp);\n$44ae6d9db4eaca0f$var$imageUploadMethodSelect.addEventListener(\"change\", $44ae6d9db4eaca0f$var$handleUploadMethodChange);\n$44ae6d9db4eaca0f$var$galleryEl.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleGalleryClick);\n$44ae6d9db4eaca0f$var$gallerySearchEl.addEventListener(\"input\", $44ae6d9db4eaca0f$var$handleGallerySearchInput);\n$44ae6d9db4eaca0f$var$solidColorForm.addEventListener(\"input\", $44ae6d9db4eaca0f$var$handleSolidColorFormInput);\ndocument.addEventListener(\"web-share:error\", $44ae6d9db4eaca0f$var$handleWebShareError);\ndocument.addEventListener(\"capture-photo:error\", $44ae6d9db4eaca0f$var$handleCapturePhotoError);\ndocument.addEventListener(\"capture-photo:success\", $44ae6d9db4eaca0f$var$handleCapturePhotoSuccess);\ndocument.addEventListener(\"me-open\", $44ae6d9db4eaca0f$var$handleModalOpen);\ndocument.addEventListener(\"me-close\", $44ae6d9db4eaca0f$var$handleModalClose);\ndocument.addEventListener(\"emoji-click\", $44ae6d9db4eaca0f$var$handleEmojiPickerSelection);\ndocument.addEventListener(\"textbox-create\", $44ae6d9db4eaca0f$var$handleTextboxCreate);\ndocument.addEventListener(\"textbox-remove\", $44ae6d9db4eaca0f$var$handleTextboxDelete);\n$44ae6d9db4eaca0f$var$removeTextForm.addEventListener(\"submit\", $44ae6d9db4eaca0f$var$handleTextRemoveFormSubmit);\n$44ae6d9db4eaca0f$var$maxImageDimensionsForm.addEventListener(\"change\", $44ae6d9db4eaca0f$var$handleMaxImageDimensionsFormChange);\n$44ae6d9db4eaca0f$var$clearCanvasBtn.addEventListener(\"click\", $44ae6d9db4eaca0f$var$handleClearCanvas);\n$44ae6d9db4eaca0f$var$galleryEl.querySelectorAll(\"button > img\")?.forEach((image)=>{\n    image.setAttribute(\"title\", image.getAttribute(\"alt\"));\n});\n(0, $f0ee20a32c2bc385$export$8e3dca5fa4d5f04b).create();\n$44ae6d9db4eaca0f$var$dropzoneEl.accept = (0, $33dea9d9a6da4c9a$export$63e7bed68b07a85c);\n(0, $055531bbd0af154c$export$6874249d87f2602a).forEach(({ name: name, path: path, style: style, weight: weight })=>{\n    (0, $055531bbd0af154c$export$59eceaef0c7797b2)(name, path, {\n        style: style,\n        weight: weight\n    });\n});\nif ($44ae6d9db4eaca0f$var$maxImageDimensionsFromStorage) $44ae6d9db4eaca0f$var$maxImageDimensionsSelect.value = $44ae6d9db4eaca0f$var$maxImageDimensionsFromStorage;\n$44ae6d9db4eaca0f$var$maxImageDimensionsSelect.disabled = false;\n\n})();\n//# sourceMappingURL=index.598aa9dd.js.map\n","import 'emoji-picker-element';\nimport insertTextAtCursor from 'insert-text-at-cursor';\nimport { isWebShareSupported } from '@georapbox/web-share-element/dist/is-web-share-supported.js';\nimport '@georapbox/web-share-element/dist/web-share-defined.js';\nimport '@georapbox/capture-photo-element/dist/capture-photo-defined.js';\nimport '@georapbox/modal-element/dist/modal-element-defined.js';\nimport '@georapbox/files-dropzone-element/dist/files-dropzone-defined.js';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '../css/main.css';\nimport { ACCEPTED_MIME_TYPES } from './constants.js';\nimport { uid } from './utils/uid.js';\nimport { fileFromUrl } from './utils/file-from-url.js';\nimport { storage } from './utils/storage.js';\nimport { isSolidColorSelected } from './utils/is-solid-color-selected.js';\nimport { customFonts, loadCustomFont } from './custom-fonts.js';\nimport { toastAlert } from './toast-alert.js';\nimport { Textbox } from './textbox.js';\nimport { Canvas } from './canvas.js';\n\nconst canvas = Canvas.createInstance(document.getElementById('canvas'));\nconst videoModal = document.getElementById('videoModal');\nconst downloadModal = document.getElementById('downloadModal');\nconst dropzoneEl = document.querySelector('files-dropzone');\nconst instructionsEl = document.getElementById('instructions');\nconst imageUploadMethodSelect = document.getElementById('imageUploadMethodSelect');\nconst fileSelectBtn = document.getElementById('fileSelectBtn');\nconst imageUrlForm = document.getElementById('imageUrlForm');\nconst addTextboxBtn = document.getElementById('addTextboxBtn');\nconst textboxesContainer = document.getElementById('textboxesContainer');\nconst generateMemeBtn = document.getElementById('generateMemeBtn');\nconst openVideoModalBtn = document.getElementById('openVideoModalBtn');\nconst downloadMemeBtn = document.getElementById('downloadMemeBtn');\nconst downloadMemePreview = document.getElementById('downloadMemePreview');\nconst webShareComponent = document.querySelector('web-share');\nconst galleryEl = document.getElementById('gallery');\nconst gallerySearchEl = document.getElementById('gallerySearch');\nconst galleryNoResultsEl = galleryEl.querySelector('.gallery__no-results');\nconst solidColorForm = document.getElementById('solidColorForm');\nconst uploadMethodEls = document.querySelectorAll('.upload-method');\nconst removeConfirmationModal = document.getElementById('removeConfirmationModal');\nconst removeTextForm = document.getElementById('removeTextForm');\nconst maxImageDimensionsForm = document.getElementById('maxImageDimensionsForm');\nconst maxImageDimensionsSelect = maxImageDimensionsForm['maxImageDimensions'];\nconst clearCanvasBtn = document.getElementById('clearCanvasBtn');\nconst maxImageDimensionsFromStorage = storage.get('maxImageDimensions');\nlet shouldFocusOnTextboxCreate = false;\nlet selectedImage = null;\nlet reqAnimFrame = null;\n\nconst generateMeme = async () => {\n  const dataUrl = canvas.toDataURL('image/png');\n  const filename = `${uid('meme')}.png`;\n\n  // Prepare download link\n  const downloadLink = dataUrl.replace('image/png', 'image/octet-stream');\n  downloadMemeBtn.download = filename;\n  downloadMemeBtn.href = downloadLink;\n  downloadMemePreview.width = canvas.getDimensions().width;\n  downloadMemePreview.height = canvas.getDimensions().height;\n  downloadMemePreview.src = downloadLink;\n\n  // Prepare for sharing file\n  if (isWebShareSupported()) {\n    try {\n      const file = await fileFromUrl({\n        url: dataUrl,\n        filename,\n        mimeType: 'image/png'\n      }).catch(err => toastAlert(err.message, 'danger'));\n\n      if (file && isWebShareSupported({ files: [file] })) {\n        webShareComponent.shareFiles = [file];\n        webShareComponent.hidden = false;\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  window.requestAnimationFrame(() => {\n    downloadModal.open = true;\n  });\n};\n\nconst setImageMaxDimensions = image => {\n  const maxImageDimensionsSelect = maxImageDimensionsForm['maxImageDimensions'];\n  const [maxWidthValue, maxHeightValue] = maxImageDimensionsSelect.value.split('x');\n  const MAX_WIDTH = Number(maxWidthValue) || 800;\n  const MAX_HEIGHT = Number(maxHeightValue) || 600;\n  let width = image.width;\n  let height = image.height;\n\n  if (width > height) {\n    if (width > MAX_WIDTH) {\n      height *= MAX_WIDTH / width;\n      width = MAX_WIDTH;\n    }\n  } else {\n    if (height > MAX_HEIGHT) {\n      width *= MAX_HEIGHT / height;\n      height = MAX_HEIGHT;\n    }\n  }\n\n  canvas.setDimensions({ width, height });\n};\n\nconst afterImageSelect = () => {\n  canvas.draw(selectedImage, Textbox.getAll()).show();\n  dropzoneEl.classList.add('dropzone--accepted');\n  dropzoneEl.disabled = true;\n  generateMemeBtn.disabled = false;\n  instructionsEl.hidden = true;\n  clearCanvasBtn.hidden = false;\n};\n\nconst handleImageLoad = evt => {\n  selectedImage = evt.target;\n  setImageMaxDimensions(selectedImage);\n  afterImageSelect();\n};\n\nconst handleSolidColorFormInput = evt => {\n  const DEFAULT_WIDTH = 800;\n  const DEFAULT_HEIGHT = 600;\n\n  if (evt.target === solidColorForm['canvasColor']) {\n    selectedImage = evt.target.value;\n  }\n\n  if (isSolidColorSelected(selectedImage)) {\n    canvas.setDimensions({\n      width: Number(solidColorForm['canvasWidth'].value) || DEFAULT_WIDTH,\n      height: Number(solidColorForm['canvasHeight'].value) || DEFAULT_HEIGHT\n    });\n\n    afterImageSelect();\n  }\n};\n\nconst handleFileSelect = file => {\n  if (!file) {\n    return;\n  }\n\n  const image = new Image();\n  const reader = new FileReader();\n\n  reader.addEventListener('load', function (evt) {\n    const data = evt.target.result;\n    image.addEventListener('load', handleImageLoad);\n    image.src = data;\n  });\n\n  reader.readAsDataURL(file);\n};\n\nconst handleOpenVideoModalButtonClick = () => {\n  videoModal.open = true;\n};\n\nconst handleTextPropChange = (element, textboxId, prop) => {\n  const textboxData = Textbox.getById(textboxId).getData();\n\n  switch (element.type) {\n    case 'checkbox':\n      textboxData[prop] = element.checked;\n      break;\n    case 'number':\n      textboxData[prop] = Number(element.value);\n      break;\n    default:\n      textboxData[prop] = element.value;\n  }\n\n  canvas.draw(selectedImage, Textbox.getAll());\n};\n\nconst handleAddTextboxBtnClick = () => Textbox.create();\n\nconst handleImageUploadFromURL = async evt => {\n  evt.preventDefault();\n\n  const form = evt.target;\n  const submitButton = form.querySelector('button[type=\"submit\"]');\n  const imageUrl = form['imageUrl'].value;\n\n  if (!imageUrl.trim()) {\n    return;\n  }\n\n  submitButton.disabled = true;\n  submitButton.querySelector('.spinner').hidden = false;\n  submitButton.querySelector('.label').hidden = true;\n\n  try {\n    const file = await fileFromUrl({\n      url: imageUrl\n    }).catch(err => toastAlert(err.message, 'danger'));\n\n    if (file) {\n      handleFileSelect(file);\n    }\n  } catch {\n    toastAlert(`Failed to load image from \"${imageUrl}\".`, 'danger');\n  } finally {\n    submitButton.disabled = false;\n    submitButton.querySelector('.spinner').hidden = true;\n    submitButton.querySelector('.label').hidden = false;\n  }\n};\n\nconst moveTextUsingArrowbuttons = (textboxId, direction) => () => {\n  const textboxEl = document.getElementById(textboxId);\n  const offsetYInput = textboxEl.querySelector('[data-input=\"offsetY\"]');\n  const offsetXInput = textboxEl.querySelector('[data-input=\"offsetX\"]');\n  const textbox = Textbox.getById(textboxId);\n\n  if (!textbox) {\n    return;\n  }\n\n  const textboxData = textbox.getData();\n\n  direction = direction.toLowerCase();\n\n  switch (direction) {\n    case 'up':\n      textboxData.offsetY -= 1;\n      offsetYInput.value = textboxData.offsetY;\n      break;\n    case 'down':\n      textboxData.offsetY += 1;\n      offsetYInput.value = textboxData.offsetY;\n      break;\n    case 'left':\n      textboxData.offsetX -= 1;\n      offsetXInput.value = textboxData.offsetX;\n      break;\n    case 'right':\n      textboxData.offsetX += 1;\n      offsetXInput.value = textboxData.offsetX;\n      break;\n  }\n\n  canvas.draw(selectedImage, Textbox.getAll());\n\n  reqAnimFrame = requestAnimationFrame(moveTextUsingArrowbuttons(textboxId, direction));\n};\n\nconst handleUploadMethodChange = evt => {\n  uploadMethodEls.forEach(el => (el.hidden = el.id !== evt.target.value));\n  maxImageDimensionsForm.hidden = evt.target.value === 'solidColorForm';\n};\n\nconst handleFileSelectClick = () => {\n  if (typeof dropzoneEl.openFileDialog === 'function') {\n    dropzoneEl.openFileDialog();\n  }\n};\n\nconst handleDropFilesAccepted = evt => {\n  const [file] = evt.detail.acceptedFiles;\n\n  if (file) {\n    handleFileSelect(file);\n  }\n};\n\nconst handleTextboxesContainerInput = evt => {\n  const element = evt.target;\n  const textboxId = element.closest('[data-section=\"textbox\"]').id;\n  let prop;\n\n  if (element.matches('[data-input=\"text\"]')) {\n    prop = 'text';\n  } else if (element.matches('[data-input=\"fillColor\"]')) {\n    prop = 'fillColor';\n  } else if (element.matches('[data-input=\"strokeColor\"]')) {\n    prop = 'strokeColor';\n  } else if (element.matches('[data-input=\"font\"]')) {\n    prop = 'font';\n  } else if (element.matches('[data-input=\"fontSize\"]')) {\n    prop = 'fontSize';\n  } else if (element.matches('[data-input=\"fontWeight\"]')) {\n    prop = 'fontWeight';\n  } else if (element.matches('[data-input=\"textAlign\"]')) {\n    prop = 'textAlign';\n  } else if (element.matches('[data-input=\"shadowBlur\"]')) {\n    prop = 'shadowBlur';\n  } else if (element.matches('[data-input=\"offsetY\"]')) {\n    prop = 'offsetY';\n  } else if (element.matches('[data-input=\"offsetX\"]')) {\n    prop = 'offsetX';\n  } else if (element.matches('[data-input=\"rotate\"]')) {\n    prop = 'rotate';\n  } else if (element.matches('[data-input=\"strokeWidth\"]')) {\n    prop = 'strokeWidth';\n  }\n\n  if (prop) {\n    handleTextPropChange(element, textboxId, prop);\n  }\n};\n\nconst handleTextboxesContainerChange = evt => {\n  const element = evt.target;\n  const textboxId = element.closest('[data-section=\"textbox\"]').id;\n  let prop;\n\n  if (element.matches('[data-input=\"allCaps\"]')) {\n    prop = 'allCaps';\n  }\n\n  if (prop) {\n    handleTextPropChange(element, textboxId, prop);\n  }\n};\n\nconst handleTextboxesContainerClick = evt => {\n  const element = evt.target;\n\n  if (element.matches('[data-button=\"settings\"]')) {\n    const textboxEl = element.closest('[data-section=\"textbox\"]');\n    const textboxSettingsEl = textboxEl?.querySelector('[data-section=\"settings\"]');\n\n    if (textboxSettingsEl) {\n      textboxSettingsEl.hidden = !textboxSettingsEl.hidden;\n    }\n  }\n\n  if (element.matches('[data-button=\"duplicate-text-box\"')) {\n    const currentTextboxEl = element.closest('[data-section=\"textbox\"]');\n    const currentTextboxData = Textbox.getById(currentTextboxEl.id);\n    Textbox.create({ ...currentTextboxData.data });\n  }\n\n  if (element.matches('[data-button=\"delete-text-box\"]')) {\n    const textboxId = element.closest('[data-section=\"textbox\"]').id;\n    const textboxToDelete = Textbox.getById(textboxId);\n\n    if (textboxToDelete && textboxToDelete.data.text.trim()) {\n      const textboxIdInput = removeTextForm['textbox-id'];\n\n      if (textboxIdInput) {\n        textboxIdInput.value = textboxId;\n        removeConfirmationModal.open = true;\n      }\n    } else {\n      Textbox.remove(textboxId);\n    }\n  }\n};\n\nconst handleTextRemoveFormSubmit = evt => {\n  evt.preventDefault();\n  const textboxId = evt.target['textbox-id'].value;\n\n  if (textboxId) {\n    Textbox.remove(textboxId);\n    removeConfirmationModal.open = false;\n  }\n};\n\nconst handleTextboxesContainerPointerdown = evt => {\n  const element = evt.target;\n  const textboxEl = element.closest('[data-section=\"textbox\"]');\n\n  if (!textboxEl) {\n    return;\n  }\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    reqAnimFrame = requestAnimationFrame(\n      moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label'))\n    );\n  }\n};\n\nconst handleTextboxesContainerPointerup = evt => {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    cancelAnimationFrame && cancelAnimationFrame(reqAnimFrame);\n    reqAnimFrame = null;\n  }\n};\n\nconst handleTextboxesContainerPointerout = evt => {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    cancelAnimationFrame && cancelAnimationFrame(reqAnimFrame);\n    reqAnimFrame = null;\n  }\n};\n\nconst handleTextboxesContainerKeyDown = evt => {\n  const element = evt.target;\n  const textboxEl = element.closest('[data-section=\"textbox\"]');\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      reqAnimFrame && cancelAnimationFrame(reqAnimFrame);\n      reqAnimFrame = requestAnimationFrame(\n        moveTextUsingArrowbuttons(textboxEl.id, element.getAttribute('aria-label'))\n      );\n    }\n  }\n};\n\nconst handleTextboxesContainerKeyUp = evt => {\n  const element = evt.target;\n\n  if (element.matches('[data-action=\"move-text\"]')) {\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      reqAnimFrame && cancelAnimationFrame(reqAnimFrame);\n      reqAnimFrame = null;\n    }\n  }\n};\n\nconst handleGalleryClick = async evt => {\n  const button = evt.target.closest('button');\n\n  if (!button) {\n    return;\n  }\n\n  const img = button.querySelector('img');\n\n  try {\n    const file = await fileFromUrl({\n      url: img.src\n    }).catch(err => toastAlert(err.message, 'danger'));\n\n    if (file) {\n      handleFileSelect(file);\n    }\n  } catch {\n    toastAlert(`Failed to load image: \"${img.alt}\".`, 'danger');\n  }\n};\n\nconst handleGallerySearchInput = evt => {\n  const query = evt.target.value.toLowerCase().trim();\n  const galleryItems = galleryEl.querySelectorAll('button');\n\n  galleryItems.forEach(item => {\n    const alt = (item.querySelector('img').getAttribute('alt') || '').toLowerCase();\n    item.hidden = !alt.includes(query);\n  });\n\n  galleryNoResultsEl.hidden = !!galleryEl.querySelector('button:not([hidden])');\n};\n\nconst handleWebShareError = () => {\n  downloadModal.open = false;\n  toastAlert('There was an error while trying to share your meme.', 'danger');\n};\n\nconst handleCapturePhotoError = evt => {\n  const error = evt.detail.error;\n  let errorMessage = 'An error occurred while trying to capture photo.';\n\n  if (\n    error instanceof Error &&\n    (error.name === 'NotAllowedError' || error.name === 'NotFoundError')\n  ) {\n    errorMessage +=\n      ' Make sure you have a camera connected and you have granted the appropriate permissions.';\n  }\n\n  toastAlert(errorMessage, 'danger');\n  videoModal.open = false;\n  console.error(error);\n};\n\nconst handleCapturePhotoSuccess = evt => {\n  videoModal.open = false;\n  const image = new Image();\n  image.addEventListener('load', handleImageLoad);\n  image.src = evt.detail.dataURI;\n};\n\nconst handleModalOpen = evt => {\n  if (evt.target.id === 'videoModal') {\n    const capturePhotoComponent = videoModal.querySelector('capture-photo');\n\n    if (capturePhotoComponent && typeof capturePhotoComponent.startVideoStream === 'function') {\n      capturePhotoComponent.startVideoStream();\n    }\n  }\n};\n\nconst handleModalClose = evt => {\n  if (evt.target.id === 'videoModal') {\n    const capturePhotoComponent = videoModal.querySelector('capture-photo');\n\n    if (capturePhotoComponent && typeof capturePhotoComponent.stopVideoStream === 'function') {\n      capturePhotoComponent.stopVideoStream();\n    }\n  }\n\n  if (evt.target.id === 'removeConfirmationModal') {\n    removeTextForm.reset();\n  }\n};\n\nconst handleEmojiPickerSelection = evt => {\n  const textboxEl = evt.target.closest('[data-section=\"textbox\"]');\n\n  if (textboxEl) {\n    const input = textboxEl.querySelector('[data-input=\"text\"]');\n    const emoji = evt.detail.unicode;\n\n    if (input) {\n      insertTextAtCursor(input, emoji);\n    }\n  }\n};\n\nconst handleMaxImageDimensionsFormChange = evt => {\n  if (evt.target.matches('[name=\"maxImageDimensions\"]')) {\n    storage.set('maxImageDimensions', evt.target.value);\n  }\n\n  if (!selectedImage || isSolidColorSelected(selectedImage)) {\n    return;\n  }\n\n  setImageMaxDimensions(selectedImage);\n  canvas.draw(selectedImage, Textbox.getAll());\n};\n\nconst handleTextboxCreate = evt => {\n  const textbox = evt.detail.textbox;\n  const textboxEl = Textbox.createElement(textbox, shouldFocusOnTextboxCreate);\n\n  shouldFocusOnTextboxCreate = true;\n  textboxesContainer.appendChild(textboxEl);\n\n  if (textbox.getData().text) {\n    canvas.draw(selectedImage, Textbox.getAll());\n  }\n};\n\nconst handleTextboxDelete = evt => {\n  const textboxEl = document.getElementById(evt.detail.id);\n  textboxEl && textboxEl.remove();\n\n  textboxesContainer.querySelectorAll('[data-section=\"textbox\"]').forEach((el, idx) => {\n    el.querySelector('[data-input=\"text\"]').setAttribute('placeholder', `Text #${idx + 1}`);\n  });\n\n  canvas.draw(selectedImage, Textbox.getAll());\n};\n\nconst handleClearCanvas = evt => {\n  if (!selectedImage) {\n    return;\n  }\n\n  evt.stopPropagation();\n  selectedImage = null;\n  dropzoneEl.classList.remove('dropzone--accepted');\n  generateMemeBtn.disabled = true;\n  instructionsEl.hidden = false;\n  clearCanvasBtn.hidden = true;\n  dropzoneEl.disabled = false;\n  canvas.clear().hide();\n};\n\nfileSelectBtn.addEventListener('click', handleFileSelectClick);\nopenVideoModalBtn.addEventListener('click', handleOpenVideoModalButtonClick);\naddTextboxBtn.addEventListener('click', handleAddTextboxBtnClick);\ngenerateMemeBtn.addEventListener('click', generateMeme);\ndownloadMemeBtn.addEventListener('click', () => (downloadModal.open = false));\nimageUrlForm.addEventListener('submit', handleImageUploadFromURL);\ndropzoneEl.addEventListener('files-dropzone-drop-accepted', handleDropFilesAccepted);\ntextboxesContainer.addEventListener('input', handleTextboxesContainerInput);\ntextboxesContainer.addEventListener('change', handleTextboxesContainerChange);\ntextboxesContainer.addEventListener('click', handleTextboxesContainerClick);\ntextboxesContainer.addEventListener('pointerdown', handleTextboxesContainerPointerdown);\ntextboxesContainer.addEventListener('pointerup', handleTextboxesContainerPointerup);\ntextboxesContainer.addEventListener('pointerout', handleTextboxesContainerPointerout);\ntextboxesContainer.addEventListener('keydown', handleTextboxesContainerKeyDown);\ntextboxesContainer.addEventListener('keyup', handleTextboxesContainerKeyUp);\nimageUploadMethodSelect.addEventListener('change', handleUploadMethodChange);\ngalleryEl.addEventListener('click', handleGalleryClick);\ngallerySearchEl.addEventListener('input', handleGallerySearchInput);\nsolidColorForm.addEventListener('input', handleSolidColorFormInput);\ndocument.addEventListener('web-share:error', handleWebShareError);\ndocument.addEventListener('capture-photo:error', handleCapturePhotoError);\ndocument.addEventListener('capture-photo:success', handleCapturePhotoSuccess);\ndocument.addEventListener('me-open', handleModalOpen);\ndocument.addEventListener('me-close', handleModalClose);\ndocument.addEventListener('emoji-click', handleEmojiPickerSelection);\ndocument.addEventListener('textbox-create', handleTextboxCreate);\ndocument.addEventListener('textbox-remove', handleTextboxDelete);\nremoveTextForm.addEventListener('submit', handleTextRemoveFormSubmit);\nmaxImageDimensionsForm.addEventListener('change', handleMaxImageDimensionsFormChange);\nclearCanvasBtn.addEventListener('click', handleClearCanvas);\n\ngalleryEl.querySelectorAll('button > img')?.forEach(image => {\n  image.setAttribute('title', image.getAttribute('alt'));\n});\n\nTextbox.create();\n\ndropzoneEl.accept = ACCEPTED_MIME_TYPES;\n\ncustomFonts.forEach(({ name, path, style, weight }) => {\n  loadCustomFont(name, path, { style, weight });\n});\n\nif (maxImageDimensionsFromStorage) {\n  maxImageDimensionsSelect.value = maxImageDimensionsFromStorage;\n}\n\nmaxImageDimensionsSelect.disabled = false;\n","import Picker from './picker.js'\nimport Database from './database.js'\nexport { Picker, Database }\n","import Database from './database.js';\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [\n  [-1, '', 'custom'],\n  [0, '', 'smileys-emotion'],\n  [1, '', 'people-body'],\n  [3, '', 'animals-nature'],\n  [4, '', 'food-drink'],\n  [5, '', 'travel-places'],\n  [6, '', 'activities'],\n  [7, '', 'objects'],\n  [8, '', 'symbols'],\n  [9, '', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '': 15.1, // shaking head, technically from v15 but see note above\n  '': 14,\n  '': 13.1, // smiling face with tear, technically from v13 but see note above\n  '': 12.1, // sari, technically from v12 but see note above\n  '': 11,\n  '': 5,\n  '': 4,\n  '': 3,\n  '': 2,\n  '': 1,\n  '': 0.7,\n  '': 0.6\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  '',\n  ''\n];\n\n// It's important to list Twemoji Mozilla before everything else, because Mozilla bundles their\n// own font on some platforms (notably Windows and Linux as of this writing). Typically, Mozilla\n// updates faster than the underlying OS, and we don't want to render older emoji in one font and\n// newer emoji in another font:\n// https://github.com/nolanlawson/emoji-picker-element/pull/268#issuecomment-1073347283\nconst FONT_FAMILY = '\"Twemoji Mozilla\",\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n// See https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n// and https://www.npmjs.com/package/if-emoji for inspiration\n// This implementation is largely borrowed from if-emoji, adding the font-family\n\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n\n  const ctx = canvas.getContext('2d');\n  ctx.textBaseline = 'top';\n  ctx.font = `100px ${FONT_FAMILY}`;\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n\n  return ctx.getImageData(0, 0, 1, 1).data\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n// different emoji releases to determine what the font supports\n\nfunction determineEmojiSupportLevel () {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version\n      }\n    }\n  } catch (e) { // canvas error\n  } finally {\n  }\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1] // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nlet promise;\nconst detectEmojiSupportLevel = () => {\n  if (!promise) {\n    // Delay so it can run while the IDB database is being created by the browser (on another thread).\n    // This helps especially with first load  we want to start pre-populating the database on the main thread,\n    // and then wait for IDB to commit everything, and while waiting we run this check.\n    promise = new Promise(resolve => (\n      rIC(() => (\n        resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n      ))\n    ));\n  }\n  return promise\n};\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category, annotation }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    annotation,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins)\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// Svelte action to calculate the width of an element and auto-update\n// using ResizeObserver. If ResizeObserver is unsupported, we just use rAF once\n// and don't bother to update.\n\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction calculateWidth (node, abortSignal, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => (\n      onUpdate(entries[0].contentRect.width)\n    ));\n    resizeObserver.observe(node);\n  } else { // just set the width once, don't bother trying to track it\n    rAF(() => (\n      onUpdate(node.getBoundingClientRect().width)\n    ));\n  }\n\n  // cleanup function (called on destroy)\n  abortSignal.addEventListener('abort', () => {\n    if (resizeObserver) {\n      resizeObserver.disconnect();\n    }\n  });\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n  }\n}\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n// Note we put this in its own function outside Picker.js to avoid Svelte doing an invalidation on the \"setter\" here.\n// At best the invalidation is useless, at worst it can cause infinite loops:\n// https://github.com/nolanlawson/emoji-picker-element/pull/180\n// https://github.com/sveltejs/svelte/issues/6521\n// Also note tabpanelElement can be null if the element is disconnected immediately after connected\nfunction resetScrollTopIfPossible (element) {\n  /* istanbul ignore else */\n  if (element) { // Makes me nervous not to have this `if` guard\n    element.scrollTop = 0;\n  }\n}\n\nfunction getFromMap (cache, key, func) {\n  let cached = cache.get(key);\n  if (!cached) {\n    cached = func();\n    cache.set(key, cached);\n  }\n  return cached\n}\n\nfunction toString (value) {\n  return '' + value\n}\n\nfunction parseTemplate (htmlString) {\n  const template = document.createElement('template');\n  template.innerHTML = htmlString;\n  return template\n}\n\nconst parseCache = new WeakMap();\nconst domInstancesCache = new WeakMap();\n// This needs to be a symbol because it needs to be different from any possible output of a key function\nconst unkeyedSymbol = Symbol('un-keyed');\n\n// Not supported in Safari <=13\nconst hasReplaceChildren = 'replaceChildren' in Element.prototype;\nfunction replaceChildren (parentNode, newChildren) {\n  /* istanbul ignore else */\n  if (hasReplaceChildren) {\n    parentNode.replaceChildren(...newChildren);\n  } else { // minimal polyfill for Element.prototype.replaceChildren\n    parentNode.innerHTML = '';\n    parentNode.append(...newChildren);\n  }\n}\n\nfunction doChildrenNeedRerender (parentNode, newChildren) {\n  let oldChild = parentNode.firstChild;\n  let oldChildrenCount = 0;\n  // iterate using firstChild/nextSibling because browsers use a linked list under the hood\n  while (oldChild) {\n    const newChild = newChildren[oldChildrenCount];\n    // check if the old child and new child are the same\n    if (newChild !== oldChild) {\n      return true\n    }\n    oldChild = oldChild.nextSibling;\n    oldChildrenCount++;\n  }\n  // if new children length is different from old, we must re-render\n  return oldChildrenCount !== newChildren.length\n}\n\nfunction patchChildren (newChildren, instanceBinding) {\n  const { targetNode } = instanceBinding;\n  let { targetParentNode } = instanceBinding;\n\n  let needsRerender = false;\n\n  if (targetParentNode) { // already rendered once\n    needsRerender = doChildrenNeedRerender(targetParentNode, newChildren);\n  } else { // first render of list\n    needsRerender = true;\n    instanceBinding.targetNode = undefined; // placeholder node not needed anymore, free memory\n    instanceBinding.targetParentNode = targetParentNode = targetNode.parentNode;\n  }\n  // avoid re-rendering list if the dom nodes are exactly the same before and after\n  if (needsRerender) {\n    replaceChildren(targetParentNode, newChildren);\n  }\n}\n\nfunction patch (expressions, instanceBindings) {\n  for (const instanceBinding of instanceBindings) {\n    const {\n      targetNode,\n      currentExpression,\n      binding: {\n        expressionIndex,\n        attributeName,\n        attributeValuePre,\n        attributeValuePost\n      }\n    } = instanceBinding;\n\n    const expression = expressions[expressionIndex];\n\n    if (currentExpression === expression) {\n      // no need to update, same as before\n      continue\n    }\n\n    instanceBinding.currentExpression = expression;\n\n    if (attributeName) { // attribute replacement\n      targetNode.setAttribute(attributeName, attributeValuePre + toString(expression) + attributeValuePost);\n    } else { // text node / child element / children replacement\n      let newNode;\n      if (Array.isArray(expression)) { // array of DOM elements produced by tag template literals\n        patchChildren(expression, instanceBinding);\n      } else if (expression instanceof Element) { // html tag template returning a DOM element\n        newNode = expression;\n        targetNode.replaceWith(newNode);\n      } else { // primitive - string, number, etc\n        // nodeValue is faster than textContent supposedly https://www.youtube.com/watch?v=LY6y3HbDVmg\n        // note we may be replacing the value in a placeholder text node\n        targetNode.nodeValue = toString(expression);\n      }\n      if (newNode) {\n        instanceBinding.targetNode = newNode;\n      }\n    }\n  }\n}\n\nfunction parse (tokens) {\n  let htmlString = '';\n\n  let withinTag = false;\n  let withinAttribute = false;\n  let elementIndexCounter = -1; // depth-first traversal order\n\n  const elementsToBindings = new Map();\n  const elementIndexes = [];\n\n  for (let i = 0, len = tokens.length; i < len; i++) {\n    const token = tokens[i];\n    htmlString += token;\n\n    if (i === len - 1) {\n      break // no need to process characters - no more expressions to be found\n    }\n\n    for (let j = 0; j < token.length; j++) {\n      const char = token.charAt(j);\n      switch (char) {\n        case '<': {\n          const nextChar = token.charAt(j + 1);\n          if (nextChar === '/') { // closing tag\n            // leaving an element\n            elementIndexes.pop();\n          } else { // not a closing tag\n            withinTag = true;\n            elementIndexes.push(++elementIndexCounter);\n          }\n          break\n        }\n        case '>': {\n          withinTag = false;\n          withinAttribute = false;\n          break\n        }\n        case '=': {\n          withinAttribute = true;\n          break\n        }\n      }\n    }\n\n    const elementIndex = elementIndexes[elementIndexes.length - 1];\n    const bindings = getFromMap(elementsToBindings, elementIndex, () => []);\n\n    let attributeName;\n    let attributeValuePre;\n    let attributeValuePost;\n    if (withinAttribute) {\n      // I never use single-quotes for attribute values in HTML, so just support double-quotes or no-quotes\n      const match = /(\\S+)=\"?([^\"=]*)$/.exec(token);\n      attributeName = match[1];\n      attributeValuePre = match[2];\n      attributeValuePost = /^[^\">]*/.exec(tokens[i + 1])[0];\n    }\n\n    const binding = {\n      attributeName,\n      attributeValuePre,\n      attributeValuePost,\n      expressionIndex: i\n    };\n\n    bindings.push(binding);\n\n    if (!withinTag && !withinAttribute) {\n      // Add a placeholder text node, so we can find it later. Note we only support one dynamic child text node\n      htmlString += ' ';\n    }\n  }\n\n  const template = parseTemplate(htmlString);\n\n  return {\n    template,\n    elementsToBindings\n  }\n}\n\nfunction traverseAndSetupBindings (dom, elementsToBindings) {\n  const instanceBindings = [];\n  // traverse dom\n  const treeWalker = document.createTreeWalker(dom, NodeFilter.SHOW_ELEMENT);\n\n  let element = dom;\n  let elementIndex = -1;\n  do {\n    const bindings = elementsToBindings.get(++elementIndex);\n    if (bindings) {\n      for (let i = 0; i < bindings.length; i++) {\n        const binding = bindings[i];\n\n        const targetNode = binding.attributeName\n          ? element // attribute binding, just use the element itself\n          : element.firstChild; // not an attribute binding, so has a placeholder text node\n\n        const instanceBinding = {\n          binding,\n          targetNode,\n          targetParentNode: undefined,\n          currentExpression: undefined\n        };\n\n        instanceBindings.push(instanceBinding);\n      }\n    }\n  } while ((element = treeWalker.nextNode()))\n\n  return instanceBindings\n}\n\nfunction parseHtml (tokens) {\n  // All templates and bound expressions are unique per tokens array\n  const { template, elementsToBindings } = getFromMap(parseCache, tokens, () => parse(tokens));\n\n  // When we parseHtml, we always return a fresh DOM instance ready to be updated\n  const dom = template.cloneNode(true).content.firstElementChild;\n  const instanceBindings = traverseAndSetupBindings(dom, elementsToBindings);\n\n  return function updateDomInstance (expressions) {\n    patch(expressions, instanceBindings);\n    return dom\n  }\n}\n\nfunction createFramework (state) {\n  const domInstances = getFromMap(domInstancesCache, state, () => new Map());\n  let domInstanceCacheKey = unkeyedSymbol;\n\n  function html (tokens, ...expressions) {\n    // Each unique lexical usage of map() is considered unique due to the html`` tagged template call it makes,\n    // which has lexically unique tokens. The unkeyed symbol is just used for html`` usage outside of a map().\n    const domInstancesForTokens = getFromMap(domInstances, tokens, () => new Map());\n    const updateDomInstance = getFromMap(domInstancesForTokens, domInstanceCacheKey, () => parseHtml(tokens));\n\n    return updateDomInstance(expressions) // update with expressions\n  }\n\n  function map (array, callback, keyFunction) {\n    return array.map((item, index) => {\n      const originalCacheKey = domInstanceCacheKey;\n      domInstanceCacheKey = keyFunction(item);\n      try {\n        return callback(item, index)\n      } finally {\n        domInstanceCacheKey = originalCacheKey;\n      }\n    })\n  }\n\n  return { map, html }\n}\n\nfunction render (container, state, helpers, events, actions, refs, abortSignal, firstRender) {\n  const { labelWithSkin, titleForEmoji, unicodeWithSkin } = helpers;\n  const { html, map } = createFramework(state);\n\n  function emojiList (emojis, searchMode, prefix) {\n    return map(emojis, (emoji, i) => {\n      return html`<button role=\"${searchMode ? 'option' : 'menuitem'}\" aria-selected=\"${state.searchMode ? i === state.activeSearchItem : ''}\" aria-label=\"${labelWithSkin(emoji, state.currentSkinTone)}\" title=\"${titleForEmoji(emoji)}\" class=\"emoji ${searchMode && i === state.activeSearchItem ? 'active' : ''}\" id=\"${`${prefix}-${emoji.id}`}\">${\n        emoji.unicode\n          ? unicodeWithSkin(emoji, state.currentSkinTone)\n          : html`<img class=\"custom-emoji\" src=\"${emoji.url}\" alt=\"\" loading=\"lazy\">`\n      }</button>`\n      // It's important for the cache key to be unique based on the prefix, because the framework caches based on the\n      // unique tokens + cache key, and the same emoji may be used in the tab as well as in the fav bar\n    }, emoji => `${prefix}-${emoji.id}`)\n  }\n\n  const section = () => {\n    return html`<section data-ref=\"rootElement\" class=\"picker\" aria-label=\"${state.i18n.regionLabel}\" style=\"${state.pickerStyle}\"><div class=\"pad-top\"></div><div class=\"search-row\"><div class=\"search-wrapper\"><input id=\"search\" class=\"search\" type=\"search\" role=\"combobox\" enterkeyhint=\"search\" placeholder=\"${state.i18n.searchLabel}\" autocapitalize=\"none\" autocomplete=\"off\" spellcheck=\"true\" aria-expanded=\"${!!(state.searchMode && state.currentEmojis.length)}\" aria-controls=\"search-results\" aria-describedby=\"search-description\" aria-autocomplete=\"list\" aria-activedescendant=\"${state.activeSearchItemId ? `emo-${state.activeSearchItemId}` : ''}\" data-ref=\"searchElement\" data-on-input=\"onSearchInput\" data-on-keydown=\"onSearchKeydown\"><label class=\"sr-only\" for=\"search\">${state.i18n.searchLabel}</label> <span id=\"search-description\" class=\"sr-only\">${state.i18n.searchDescription}</span></div><div class=\"skintone-button-wrapper ${state.skinTonePickerExpandedAfterAnimation ? 'expanded' : ''}\"><button id=\"skintone-button\" class=\"emoji ${state.skinTonePickerExpanded ? 'hide-focus' : ''}\" aria-label=\"${state.skinToneButtonLabel}\" title=\"${state.skinToneButtonLabel}\" aria-describedby=\"skintone-description\" aria-haspopup=\"listbox\" aria-expanded=\"${state.skinTonePickerExpanded}\" aria-controls=\"skintone-list\" data-on-click=\"onClickSkinToneButton\">${state.skinToneButtonText}</button></div><span id=\"skintone-description\" class=\"sr-only\">${state.i18n.skinToneDescription}</span><div data-ref=\"skinToneDropdown\" id=\"skintone-list\" class=\"skintone-list hide-focus ${state.skinTonePickerExpanded ? '' : 'hidden no-animate'}\" style=\"transform:translateY(${state.skinTonePickerExpanded ? 0 : 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))'})\" role=\"listbox\" aria-label=\"${state.i18n.skinTonesLabel}\" aria-activedescendant=\"skintone-${state.activeSkinTone}\" aria-hidden=\"${!state.skinTonePickerExpanded}\" tabIndex=\"-1\" data-on-focusout=\"onSkinToneOptionsFocusOut\" data-on-click=\"onSkinToneOptionsClick\" data-on-keydown=\"onSkinToneOptionsKeydown\" data-on-keyup=\"onSkinToneOptionsKeyup\">${\n    map(state.skinTones, (skinTone, i) => {\n    return html`<div id=\"skintone-${i}\" class=\"emoji ${i === state.activeSkinTone ? 'active' : ''}\" aria-selected=\"${i === state.activeSkinTone}\" role=\"option\" title=\"${state.i18n.skinTones[i]}\" aria-label=\"${state.i18n.skinTones[i]}\">${skinTone}</div>`\n    }, skinTone => skinTone)\n        }</div></div><div class=\"nav\" role=\"tablist\" style=\"grid-template-columns:repeat(${state.groups.length},1fr)\" aria-label=\"${state.i18n.categoriesLabel}\" data-on-keydown=\"onNavKeydown\" data-on-click=\"onNavClick\">${\n            map(state.groups, (group) => {\n              return html`<button role=\"tab\" class=\"nav-button\" aria-controls=\"tab-${group.id}\" aria-label=\"${state.i18n.categories[group.name]}\" aria-selected=\"${!state.searchMode && state.currentGroup.id === group.id}\" title=\"${state.i18n.categories[group.name]}\" data-group-id=\"${group.id}\"><div class=\"nav-emoji emoji\">${group.emoji}</div></button>`\n            }, group => group.id)\n          }</div><div class=\"indicator-wrapper\"><div class=\"indicator\" style=\"transform:translateX(${(/* istanbul ignore next */ (state.isRtl ? -1 : 1)) * state.currentGroupIndex * 100}%)\"></div></div><div class=\"message ${state.message ? '' : 'gone'}\" role=\"alert\" aria-live=\"polite\">${state.message}</div><div data-ref=\"tabpanelElement\" class=\"tabpanel ${(!state.databaseLoaded || state.message) ? 'gone' : ''}\" role=\"${state.searchMode ? 'region' : 'tabpanel'}\" aria-label=\"${state.searchMode ? state.i18n.searchResultsLabel : state.i18n.categories[state.currentGroup.name]}\" id=\"${state.searchMode ? '' : `tab-${state.currentGroup.id}`}\" tabIndex=\"0\" data-on-click=\"onEmojiClick\"><div data-action=\"calculateEmojiGridStyle\">${\n              map(state.currentEmojisWithCategories, (emojiWithCategory, i) => {\n                return html`<div><div id=\"menu-label-${i}\" class=\"category ${state.currentEmojisWithCategories.length === 1 && state.currentEmojisWithCategories[0].category === '' ? 'gone' : ''}\" aria-hidden=\"true\">${\n                  state.searchMode\n                    ? state.i18n.searchResultsLabel\n                    : (\n                      emojiWithCategory.category\n                        ? emojiWithCategory.category\n                        : (\n                          state.currentEmojisWithCategories.length > 1\n                            ? state.i18n.categories.custom\n                            : state.i18n.categories[state.currentGroup.name]\n                        )\n                    )\n                }</div><div class=\"emoji-menu\" role=\"${state.searchMode ? 'listbox' : 'menu'}\" aria-labelledby=\"menu-label-${i}\" id=\"${state.searchMode ? 'search-results' : ''}\">${\n              emojiList(emojiWithCategory.emojis, state.searchMode, /* prefix */ 'emo')\n            }</div></div>`\n              }, emojiWithCategory => emojiWithCategory.category)\n            }</div></div><div class=\"favorites emoji-menu ${state.message ? 'gone' : ''}\" role=\"menu\" aria-label=\"${state.i18n.favoritesLabel}\" style=\"padding-inline-end:${`${state.scrollbarWidth}px`}\" data-on-click=\"onEmojiClick\">${\n            emojiList(state.currentFavorites, /* searchMode */ false, /* prefix */ 'fav')\n          }</div><button data-ref=\"baselineEmoji\" aria-hidden=\"true\" tabindex=\"-1\" class=\"abs-pos hidden emoji baseline-emoji\"></button></section>`\n  };\n\n  const rootDom = section();\n\n  if (firstRender) { // not a re-render\n    container.appendChild(rootDom);\n\n    // we only bind events/refs/actions once - there is no need to find them again given this component structure\n\n    // helper for traversing the dom, finding elements by an attribute, and getting the attribute value\n    const forElementWithAttribute = (attributeName, callback) => {\n      for (const element of container.querySelectorAll(`[${attributeName}]`)) {\n        callback(element, element.getAttribute(attributeName));\n      }\n    };\n\n    // bind events\n    for (const eventName of ['click', 'focusout', 'input', 'keydown', 'keyup']) {\n      forElementWithAttribute(`data-on-${eventName}`, (element, listenerName) => {\n        element.addEventListener(eventName, events[listenerName]);\n      });\n    }\n\n    // find refs\n    forElementWithAttribute('data-ref', (element, ref) => {\n      refs[ref] = element;\n    });\n\n    // set up actions\n    forElementWithAttribute('data-action', (element, action) => {\n      actions[action](element);\n    });\n\n    // destroy/abort logic\n    abortSignal.addEventListener('abort', () => {\n      container.removeChild(rootDom);\n    });\n  }\n}\n\n/* istanbul ignore next */\nconst qM = typeof queueMicrotask === 'function' ? queueMicrotask : callback => Promise.resolve().then(callback);\n\nfunction createState (abortSignal) {\n  let destroyed = false;\n  let currentObserver;\n\n  const propsToObservers = new Map();\n  const dirtyObservers = new Set();\n\n  let queued;\n\n  const flush = () => {\n    if (destroyed) {\n      return\n    }\n    const observersToRun = [...dirtyObservers];\n    dirtyObservers.clear(); // clear before running to force any new updates to run in another tick of the loop\n    try {\n      for (const observer of observersToRun) {\n        observer();\n      }\n    } finally {\n      queued = false;\n      if (dirtyObservers.size) { // new updates, queue another one\n        queued = true;\n        qM(flush);\n      }\n    }\n  };\n\n  const state = new Proxy({}, {\n    get (target, prop) {\n      if (currentObserver) {\n        let observers = propsToObservers.get(prop);\n        if (!observers) {\n          observers = new Set();\n          propsToObservers.set(prop, observers);\n        }\n        observers.add(currentObserver);\n      }\n      return target[prop]\n    },\n    set (target, prop, newValue) {\n      target[prop] = newValue;\n      const observers = propsToObservers.get(prop);\n      if (observers) {\n        for (const observer of observers) {\n          dirtyObservers.add(observer);\n        }\n        if (!queued) {\n          queued = true;\n          qM(flush);\n        }\n      }\n      return true\n    }\n  });\n\n  const createEffect = (callback) => {\n    const runnable = () => {\n      const oldObserver = currentObserver;\n      currentObserver = runnable;\n      try {\n        return callback()\n      } finally {\n        currentObserver = oldObserver;\n      }\n    };\n    return runnable()\n  };\n\n  // destroy logic\n  abortSignal.addEventListener('abort', () => {\n    destroyed = true;\n  });\n\n  return {\n    state,\n    createEffect\n  }\n}\n\n// Compare two arrays, with a function called on each item in the two arrays that returns true if the items are equal\nfunction arraysAreEqualByFunction (left, right, areEqualFunc) {\n  if (left.length !== right.length) {\n    return false\n  }\n  for (let i = 0; i < left.length; i++) {\n    if (!areEqualFunc(left[i], right[i])) {\n      return false\n    }\n  }\n  return true\n}\n\n/* eslint-disable prefer-const,no-labels,no-inner-declarations */\n\n// constants\nconst EMPTY_ARRAY = [];\n\nconst { assign } = Object;\n\nfunction createRoot (shadowRoot, props) {\n  const refs = {};\n  const abortController = new AbortController();\n  const abortSignal = abortController.signal;\n  const { state, createEffect } = createState(abortSignal);\n\n  // initial state\n  assign(state, {\n    skinToneEmoji: undefined,\n    i18n: undefined,\n    database: undefined,\n    customEmoji: undefined,\n    customCategorySorting: undefined,\n    emojiVersion: undefined\n  });\n\n  // public props\n  assign(state, props);\n\n  // private props\n  assign(state, {\n    initialLoad: true,\n    currentEmojis: [],\n    currentEmojisWithCategories: [],\n    rawSearchText: '',\n    searchText: '',\n    searchMode: false,\n    activeSearchItem: -1,\n    message: undefined,\n    skinTonePickerExpanded: false,\n    skinTonePickerExpandedAfterAnimation: false,\n    currentSkinTone: 0,\n    activeSkinTone: 0,\n    skinToneButtonText: undefined,\n    pickerStyle: undefined,\n    skinToneButtonLabel: '',\n    skinTones: [],\n    currentFavorites: [],\n    defaultFavoriteEmojis: undefined,\n    numColumns: DEFAULT_NUM_COLUMNS,\n    isRtl: false,\n    scrollbarWidth: 0,\n    currentGroupIndex: 0,\n    groups: groups,\n    databaseLoaded: false,\n    activeSearchItemId: undefined\n  });\n\n  //\n  // Update the current group based on the currentGroupIndex\n  //\n  createEffect(() => {\n    if (state.currentGroup !== state.groups[state.currentGroupIndex]) {\n      state.currentGroup = state.groups[state.currentGroupIndex];\n    }\n  });\n\n  //\n  // Utils/helpers\n  //\n\n  const focus = id => {\n    shadowRoot.getElementById(id).focus();\n  };\n\n  const emojiToDomNode = emoji => shadowRoot.getElementById(`emo-${emoji.id}`);\n\n  // fire a custom event that crosses the shadow boundary\n  const fireEvent = (name, detail) => {\n    refs.rootElement.dispatchEvent(new CustomEvent(name, {\n      detail,\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  //\n  // Comparison utils\n  //\n\n  const compareEmojiArrays = (a, b) => a.id === b.id;\n\n  const compareCurrentEmojisWithCategories = (a, b) => {\n    const { category: aCategory, emojis: aEmojis } = a;\n    const { category: bCategory, emojis: bEmojis } = b;\n\n    if (aCategory !== bCategory) {\n      return false\n    }\n\n    return arraysAreEqualByFunction(aEmojis, bEmojis, compareEmojiArrays)\n  };\n\n  //\n  // Update utils to avoid excessive re-renders\n  //\n\n  // avoid excessive re-renders by checking the value before setting\n  const updateCurrentEmojis = (newEmojis) => {\n    if (!arraysAreEqualByFunction(state.currentEmojis, newEmojis, compareEmojiArrays)) {\n      state.currentEmojis = newEmojis;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateSearchMode = (newSearchMode) => {\n    if (state.searchMode !== newSearchMode) {\n      state.searchMode = newSearchMode;\n    }\n  };\n\n  // avoid excessive re-renders\n  const updateCurrentEmojisWithCategories = (newEmojisWithCategories) => {\n    if (!arraysAreEqualByFunction(state.currentEmojisWithCategories, newEmojisWithCategories, compareCurrentEmojisWithCategories)) {\n      state.currentEmojisWithCategories = newEmojisWithCategories;\n    }\n  };\n\n  // Helpers used by PickerTemplate\n\n  const unicodeWithSkin = (emoji, currentSkinTone) => (\n    (currentSkinTone && emoji.skins && emoji.skins[currentSkinTone]) || emoji.unicode\n  );\n\n  const labelWithSkin = (emoji, currentSkinTone) => (\n    uniq([\n      (emoji.name || unicodeWithSkin(emoji, currentSkinTone)),\n      emoji.annotation,\n      ...(emoji.shortcodes || EMPTY_ARRAY)\n    ].filter(Boolean)).join(', ')\n  );\n\n  const titleForEmoji = (emoji) => (\n    emoji.annotation || (emoji.shortcodes || EMPTY_ARRAY).join(', ')\n  );\n\n  const helpers = {\n    labelWithSkin, titleForEmoji, unicodeWithSkin\n  };\n  const events = {\n    onClickSkinToneButton,\n    onEmojiClick,\n    onNavClick,\n    onNavKeydown,\n    onSearchKeydown,\n    onSkinToneOptionsClick,\n    onSkinToneOptionsFocusOut,\n    onSkinToneOptionsKeydown,\n    onSkinToneOptionsKeyup,\n    onSearchInput\n  };\n  const actions = {\n    calculateEmojiGridStyle\n  };\n\n  let firstRender = true;\n  createEffect(() => {\n    render(shadowRoot, state, helpers, events, actions, refs, abortSignal, firstRender);\n    firstRender = false;\n  });\n\n  //\n  // Determine the emoji support level (in requestIdleCallback)\n  //\n\n  // mount logic\n  if (!state.emojiVersion) {\n    detectEmojiSupportLevel().then(level => {\n      // Can't actually test emoji support in Jest/Vitest/JSDom, emoji never render in color in Cairo\n      /* istanbul ignore next */\n      if (!level) {\n        state.message = state.i18n.emojiUnsupportedMessage;\n      }\n    });\n  }\n\n  //\n  // Set or update the database object\n  //\n\n  createEffect(() => {\n    // show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n    async function handleDatabaseLoading () {\n      let showingLoadingMessage = false;\n      const timeoutHandle = setTimeout(() => {\n        showingLoadingMessage = true;\n        state.message = state.i18n.loadingMessage;\n      }, TIMEOUT_BEFORE_LOADING_MESSAGE);\n      try {\n        await state.database.ready();\n        state.databaseLoaded = true; // eslint-disable-line no-unused-vars\n      } catch (err) {\n        console.error(err);\n        state.message = state.i18n.networkErrorMessage;\n      } finally {\n        clearTimeout(timeoutHandle);\n        if (showingLoadingMessage) { // Seems safer than checking the i18n string, which may change\n          showingLoadingMessage = false;\n          state.message = ''; // eslint-disable-line no-unused-vars\n        }\n      }\n    }\n\n    if (state.database) {\n      /* no await */\n      handleDatabaseLoading();\n    }\n  });\n\n  //\n  // Global styles for the entire picker\n  //\n\n  createEffect(() => {\n    state.pickerStyle = `\n      --num-groups: ${state.groups.length}; \n      --indicator-opacity: ${state.searchMode ? 0 : 1}; \n      --num-skintones: ${NUM_SKIN_TONES};`;\n  });\n\n  //\n  // Set or update the customEmoji\n  //\n\n  createEffect(() => {\n    if (state.customEmoji && state.database) {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n    }\n  });\n\n  createEffect(() => {\n    if (state.customEmoji && state.customEmoji.length) {\n      if (state.groups !== allGroups) { // don't update unnecessarily\n        state.groups = allGroups;\n      }\n    } else if (state.groups !== groups) {\n      if (state.currentGroupIndex) {\n        // If the current group is anything other than \"custom\" (which is first), decrement.\n        // This fixes the odd case where you set customEmoji, then pick a category, then unset customEmoji\n        state.currentGroupIndex--;\n      }\n      state.groups = groups;\n    }\n  });\n\n  //\n  // Set or update the preferred skin tone\n  //\n\n  createEffect(() => {\n    async function updatePreferredSkinTone () {\n      if (state.databaseLoaded) {\n        state.currentSkinTone = await state.database.getPreferredSkinTone();\n      }\n    }\n\n    /* no await */ updatePreferredSkinTone();\n  });\n\n  createEffect(() => {\n    state.skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(state.skinToneEmoji, i));\n  });\n\n  createEffect(() => {\n    state.skinToneButtonText = state.skinTones[state.currentSkinTone];\n  });\n\n  createEffect(() => {\n    state.skinToneButtonLabel = state.i18n.skinToneLabel.replace('{skinTone}', state.i18n.skinTones[state.currentSkinTone]);\n  });\n\n  //\n  // Set or update the favorites emojis\n  //\n\n  createEffect(() => {\n    async function updateDefaultFavoriteEmojis () {\n      const { database } = state;\n      const favs = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => (\n        database.getEmojiByUnicodeOrName(unicode)\n      )))).filter(Boolean); // filter because in Jest/Vitest tests we don't have all the emoji in the DB\n      state.defaultFavoriteEmojis = favs;\n    }\n\n    if (state.databaseLoaded) {\n      /* no await */ updateDefaultFavoriteEmojis();\n    }\n  });\n\n  function updateCustomEmoji () {\n    // Certain effects have an implicit dependency on customEmoji since it affects the database\n    // Getting it here on the state ensures this effect re-runs when customEmoji change.\n    // Setting it on the database is pointless but prevents this code from being removed by a minifier.\n    state.database.customEmoji = state.customEmoji || EMPTY_ARRAY;\n  }\n\n  createEffect(() => {\n    async function updateFavorites () {\n      updateCustomEmoji(); // re-run whenever customEmoji change\n      const { database, defaultFavoriteEmojis, numColumns } = state;\n      const dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n      const favorites = await summarizeEmojis(uniqBy([\n        ...dbFavorites,\n        ...defaultFavoriteEmojis\n      ], _ => (_.unicode || _.name)).slice(0, numColumns));\n      state.currentFavorites = favorites;\n    }\n\n    if (state.databaseLoaded && state.defaultFavoriteEmojis) {\n      /* no await */ updateFavorites();\n    }\n  });\n\n  //\n  // Calculate the width of the emoji grid. This serves two purposes:\n  // 1) Re-calculate the --num-columns var because it may have changed\n  // 2) Re-calculate the scrollbar width because it may have changed\n  //   (i.e. because the number of items changed)\n  // 3) Re-calculate whether we're in RTL mode or not.\n  //\n  // The benefit of doing this in one place is to align with rAF/ResizeObserver\n  // and do all the calculations in one go. RTL vs LTR is not strictly width-related,\n  // but since we're already reading the style here, and since it's already aligned with\n  // the rAF loop, this is the most appropriate place to do it perf-wise.\n  //\n\n  function calculateEmojiGridStyle (node) {\n    calculateWidth(node, abortSignal, width => {\n      /* istanbul ignore next */\n      { // jsdom throws errors for this kind of fancy stuff\n        // read all the style/layout calculations we need to make\n        const style = getComputedStyle(refs.rootElement);\n        const newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n        const newIsRtl = style.getPropertyValue('direction') === 'rtl';\n        const parentWidth = node.parentElement.getBoundingClientRect().width;\n        const newScrollbarWidth = parentWidth - width;\n\n        // write to state variables\n        state.numColumns = newNumColumns;\n        state.scrollbarWidth = newScrollbarWidth; // eslint-disable-line no-unused-vars\n        state.isRtl = newIsRtl; // eslint-disable-line no-unused-vars\n      }\n    });\n  }\n\n  //\n  // Set or update the currentEmojis. Check for invalid ZWJ renderings\n  // (i.e. double emoji).\n  //\n\n  createEffect(() => {\n    async function updateEmojis () {\n      const { searchText, currentGroup, databaseLoaded, customEmoji } = state;\n      if (!databaseLoaded) {\n        state.currentEmojis = [];\n        state.searchMode = false;\n      } else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n        const newEmojis = await getEmojisBySearchQuery(searchText);\n        if (state.searchText === searchText) { // if the situation changes asynchronously, do not update\n          updateCurrentEmojis(newEmojis);\n          updateSearchMode(true);\n        }\n      } else { // database is loaded and we're not in search mode, so we're in normal category mode\n        const { id: currentGroupId } = currentGroup;\n        // avoid race condition where currentGroupId is -1 and customEmoji is undefined/empty\n        if (currentGroupId !== -1 || (customEmoji && customEmoji.length)) {\n          const newEmojis = await getEmojisByGroup(currentGroupId);\n          if (state.currentGroup.id === currentGroupId) { // if the situation changes asynchronously, do not update\n            updateCurrentEmojis(newEmojis);\n            updateSearchMode(false);\n          }\n        }\n      }\n    }\n\n    /* no await */ updateEmojis();\n  });\n\n  // Some emojis have their ligatures rendered as two or more consecutive emojis\n  // We want to treat these the same as unsupported emojis, so we compare their\n  // widths against the baseline widths and remove them as necessary\n  createEffect(() => {\n    const { currentEmojis, emojiVersion } = state;\n    const zwjEmojisToCheck = currentEmojis\n      .filter(emoji => emoji.unicode) // filter custom emoji\n      .filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode));\n    if (!emojiVersion && zwjEmojisToCheck.length) {\n      // render now, check their length later\n      updateCurrentEmojis(currentEmojis);\n      rAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n    } else {\n      const newEmojis = emojiVersion ? currentEmojis : currentEmojis.filter(isZwjSupported);\n      updateCurrentEmojis(newEmojis);\n      // Reset scroll top to 0 when emojis change\n      rAF(() => resetScrollTopIfPossible(refs.tabpanelElement));\n    }\n  });\n\n  function checkZwjSupportAndUpdate (zwjEmojisToCheck) {\n    checkZwjSupport(zwjEmojisToCheck, refs.baselineEmoji, emojiToDomNode);\n    // force update\n    // eslint-disable-next-line no-self-assign\n    state.currentEmojis = state.currentEmojis;\n  }\n\n  function isZwjSupported (emoji) {\n    return !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode)\n  }\n\n  async function filterEmojisByVersion (emojis) {\n    const emojiSupportLevel = state.emojiVersion || await detectEmojiSupportLevel();\n    // !version corresponds to custom emoji\n    return emojis.filter(({ version }) => !version || version <= emojiSupportLevel)\n  }\n\n  async function summarizeEmojis (emojis) {\n    return summarizeEmojisForUI(emojis, state.emojiVersion || await detectEmojiSupportLevel())\n  }\n\n  async function getEmojisByGroup (group) {\n    // -1 is custom emoji\n    const emoji = group === -1 ? state.customEmoji : await state.database.getEmojiByGroup(group);\n    return summarizeEmojis(await filterEmojisByVersion(emoji))\n  }\n\n  async function getEmojisBySearchQuery (query) {\n    return summarizeEmojis(await filterEmojisByVersion(await state.database.getEmojiBySearchQuery(query)))\n  }\n\n  createEffect(() => {\n  });\n\n  //\n  // Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n  // are no categories, because it's just easier to code the HTML this way.\n  //\n\n  createEffect(() => {\n    function calculateCurrentEmojisWithCategories () {\n      const { searchMode, currentEmojis } = state;\n      if (searchMode) {\n        return [\n          {\n            category: '',\n            emojis: currentEmojis\n          }\n        ]\n      }\n      const categoriesToEmoji = new Map();\n      for (const emoji of currentEmojis) {\n        const category = emoji.category || '';\n        let emojis = categoriesToEmoji.get(category);\n        if (!emojis) {\n          emojis = [];\n          categoriesToEmoji.set(category, emojis);\n        }\n        emojis.push(emoji);\n      }\n      return [...categoriesToEmoji.entries()]\n        .map(([category, emojis]) => ({ category, emojis }))\n        .sort((a, b) => state.customCategorySorting(a.category, b.category))\n    }\n\n    const newEmojisWithCategories = calculateCurrentEmojisWithCategories();\n    updateCurrentEmojisWithCategories(newEmojisWithCategories);\n  });\n\n  //\n  // Handle active search item (i.e. pressing up or down while searching)\n  //\n\n  createEffect(() => {\n    state.activeSearchItemId = state.activeSearchItem !== -1 && state.currentEmojis[state.activeSearchItem].id;\n  });\n\n  //\n  // Handle user input on the search input\n  //\n\n  createEffect(() => {\n    const { rawSearchText } = state;\n    rIC(() => {\n      state.searchText = (rawSearchText || '').trim(); // defer to avoid input delays, plus we can trim here\n      state.activeSearchItem = -1;\n    });\n  });\n\n  function onSearchKeydown (event) {\n    if (!state.searchMode || !state.currentEmojis.length) {\n      return\n    }\n\n    const goToNextOrPrevious = (previous) => {\n      halt(event);\n      state.activeSearchItem = incrementOrDecrement(previous, state.activeSearchItem, state.currentEmojis);\n    };\n\n    switch (event.key) {\n      case 'ArrowDown':\n        return goToNextOrPrevious(false)\n      case 'ArrowUp':\n        return goToNextOrPrevious(true)\n      case 'Enter':\n        if (state.activeSearchItem === -1) {\n          // focus the first option in the list since the list must be non-empty at this point (it's verified above)\n          state.activeSearchItem = 0;\n        } else { // there is already an active search item\n          halt(event);\n          return clickEmoji(state.currentEmojis[state.activeSearchItem].id)\n        }\n    }\n  }\n\n  //\n  // Handle user input on nav\n  //\n\n  function onNavClick (event) {\n    const { target } = event;\n    const closestTarget = target.closest('.nav-button');\n    /* istanbul ignore if */\n    if (!closestTarget) {\n      return // This should never happen, but makes me nervous not to have it\n    }\n    const groupId = parseInt(closestTarget.dataset.groupId, 10);\n    refs.searchElement.value = ''; // clear search box input\n    state.rawSearchText = '';\n    state.searchText = '';\n    state.activeSearchItem = -1;\n    state.currentGroupIndex = state.groups.findIndex(_ => _.id === groupId);\n  }\n\n  function onNavKeydown (event) {\n    const { target, key } = event;\n\n    const doFocus = el => {\n      if (el) {\n        halt(event);\n        el.focus();\n      }\n    };\n\n    switch (key) {\n      case 'ArrowLeft':\n        return doFocus(target.previousElementSibling)\n      case 'ArrowRight':\n        return doFocus(target.nextElementSibling)\n      case 'Home':\n        return doFocus(target.parentElement.firstElementChild)\n      case 'End':\n        return doFocus(target.parentElement.lastElementChild)\n    }\n  }\n\n  //\n  // Handle user input on an emoji\n  //\n\n  async function clickEmoji (unicodeOrName) {\n    const emoji = await state.database.getEmojiByUnicodeOrName(unicodeOrName);\n    const emojiSummary = [...state.currentEmojis, ...state.currentFavorites]\n      .find(_ => (_.id === unicodeOrName));\n    const skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, state.currentSkinTone);\n    await state.database.incrementFavoriteEmojiCount(unicodeOrName);\n    fireEvent('emoji-click', {\n      emoji,\n      skinTone: state.currentSkinTone,\n      ...(skinTonedUnicode && { unicode: skinTonedUnicode }),\n      ...(emojiSummary.name && { name: emojiSummary.name })\n    });\n  }\n\n  async function onEmojiClick (event) {\n    const { target } = event;\n    /* istanbul ignore if */\n    if (!target.classList.contains('emoji')) {\n      // This should never happen, but makes me nervous not to have it\n      return\n    }\n    halt(event);\n    const id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n    /* no await */ clickEmoji(id);\n  }\n\n  //\n  // Handle user input on the skintone picker\n  //\n\n  function changeSkinTone (skinTone) {\n    state.currentSkinTone = skinTone;\n    state.skinTonePickerExpanded = false;\n    focus('skintone-button');\n    fireEvent('skin-tone-change', { skinTone });\n    /* no await */ state.database.setPreferredSkinTone(skinTone);\n  }\n\n  function onSkinToneOptionsClick (event) {\n    const { target: { id } } = event;\n    const match = id && id.match(/^skintone-(\\d)/); // skintone option format\n    /* istanbul ignore if */\n    if (!match) { // not a skintone option\n      return // This should never happen, but makes me nervous not to have it\n    }\n    halt(event);\n    const skinTone = parseInt(match[1], 10); // remove 'skintone-' prefix\n    changeSkinTone(skinTone);\n  }\n\n  function onClickSkinToneButton (event) {\n    state.skinTonePickerExpanded = !state.skinTonePickerExpanded;\n    state.activeSkinTone = state.currentSkinTone;\n    // this should always be true, since the button is obscured by the listbox, so this `if` is just to be sure\n    if (state.skinTonePickerExpanded) {\n      halt(event);\n      rAF(() => focus('skintone-list'));\n    }\n  }\n\n  // To make the animation nicer, change the z-index of the skintone picker button\n  // *after* the animation has played. This makes it appear that the picker box\n  // is expanding \"below\" the button\n  createEffect(() => {\n    if (state.skinTonePickerExpanded) {\n      refs.skinToneDropdown.addEventListener('transitionend', () => {\n        state.skinTonePickerExpandedAfterAnimation = true; // eslint-disable-line no-unused-vars\n      }, { once: true });\n    } else {\n      state.skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n    }\n  });\n\n  function onSkinToneOptionsKeydown (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    const changeActiveSkinTone = async nextSkinTone => {\n      halt(event);\n      state.activeSkinTone = nextSkinTone;\n    };\n\n    switch (event.key) {\n      case 'ArrowUp':\n        return changeActiveSkinTone(incrementOrDecrement(true, state.activeSkinTone, state.skinTones))\n      case 'ArrowDown':\n        return changeActiveSkinTone(incrementOrDecrement(false, state.activeSkinTone, state.skinTones))\n      case 'Home':\n        return changeActiveSkinTone(0)\n      case 'End':\n        return changeActiveSkinTone(state.skinTones.length - 1)\n      case 'Enter':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n      case 'Escape':\n        halt(event);\n        state.skinTonePickerExpanded = false;\n        return focus('skintone-button')\n    }\n  }\n\n  function onSkinToneOptionsKeyup (event) {\n    // this should never happen, but makes me nervous not to have it\n    /* istanbul ignore if */\n    if (!state.skinTonePickerExpanded) {\n      return\n    }\n    switch (event.key) {\n      case ' ':\n        // enter on keydown, space on keyup. this is just how browsers work for buttons\n        // https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n        halt(event);\n        return changeSkinTone(state.activeSkinTone)\n    }\n  }\n\n  async function onSkinToneOptionsFocusOut (event) {\n    // On blur outside of the skintone listbox, collapse the skintone picker.\n    const { relatedTarget } = event;\n    // The `else` should never happen, but makes me nervous not to have it\n    /* istanbul ignore else */\n    if (!relatedTarget || relatedTarget.id !== 'skintone-list') {\n      state.skinTonePickerExpanded = false;\n    }\n  }\n\n  function onSearchInput (event) {\n    state.rawSearchText = event.target.value;\n  }\n\n  return {\n    $set (newState) {\n      assign(state, newState);\n    },\n    $destroy () {\n      abortController.abort();\n    }\n  }\n}\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\nvar baseStyles = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){color-scheme:light;--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{color-scheme:dark;--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--emoji-font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n\nconst PROPS = [\n  'customEmoji',\n  'customCategorySorting',\n  'database',\n  'dataSource',\n  'i18n',\n  'locale',\n  'skinToneEmoji',\n  'emojiVersion'\n];\n\n// Styles injected ourselves, so we can declare the FONT_FAMILY variable in one place\nconst EXTRA_STYLES = `:host{--emoji-font-family:${FONT_FAMILY}}`;\n\nclass PickerElement extends HTMLElement {\n  constructor (props) {\n    super();\n    this.attachShadow({ mode: 'open' });\n    const style = document.createElement('style');\n    style.textContent = baseStyles + EXTRA_STYLES;\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      emojiVersion: null,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n\n  connectedCallback () {\n    // The _cmp may be defined if the component was immediately disconnected and then reconnected. In that case,\n    // do nothing (preserve the state)\n    if (!this._cmp) {\n      this._cmp = createRoot(this.shadowRoot, this._ctx);\n    }\n  }\n\n  disconnectedCallback () {\n    // Check in a microtask if the element is still connected. If so, treat this as a \"move\" rather than a disconnect\n    // Inspired by Vue: https://vuejs.org/guide/extras/web-components.html#building-custom-elements-with-vue\n    qM(() => {\n      // this._cmp may be defined if connect-disconnect-connect-disconnect occurs synchronously\n      if (!this.isConnected && this._cmp) {\n        this._cmp.$destroy();\n        this._cmp = undefined;\n\n        const { database } = this._ctx;\n        database.close()\n          // only happens if the database failed to load in the first place, so we don't care\n          .catch(err => console.error(err));\n      }\n    });\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji', 'emoji-version'] // complex objects aren't supported, also use kebab-case\n  }\n\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    this._set(\n      // convert from kebab-case to camelcase\n      // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      // convert string attribute to float if necessary\n      attrName === 'emoji-version' ? parseFloat(newValue) : newValue\n    );\n  }\n\n  _set (prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({ [prop]: newValue });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n\n  _dbCreate () {\n    const { locale, dataSource, database } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({ locale, dataSource }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush () {\n    qM(() => (\n      this._dbCreate()\n    ));\n  }\n}\n\nconst definitions = {};\n\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get () {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop]\n    },\n    set (val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only')\n      }\n      this._set(prop, val);\n    }\n  };\n}\n\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\n\nexport { PickerElement as default };\n","function assertNonEmptyString (str) {\n  if (typeof str !== 'string' || !str) {\n    throw new Error('expected a non-empty string, got: ' + str)\n  }\n}\n\nfunction assertNumber (number) {\n  if (typeof number !== 'number') {\n    throw new Error('expected a number, got: ' + number)\n  }\n}\n\nconst DB_VERSION_CURRENT = 1;\nconst DB_VERSION_INITIAL = 1;\nconst STORE_EMOJI = 'emoji';\nconst STORE_KEYVALUE = 'keyvalue';\nconst STORE_FAVORITES = 'favorites';\nconst FIELD_TOKENS = 'tokens';\nconst INDEX_TOKENS = 'tokens';\nconst FIELD_UNICODE = 'unicode';\nconst INDEX_COUNT = 'count';\nconst FIELD_GROUP = 'group';\nconst FIELD_ORDER = 'order';\nconst INDEX_GROUP_AND_ORDER = 'group-order';\nconst KEY_ETAG = 'eTag';\nconst KEY_URL = 'url';\nconst KEY_PREFERRED_SKINTONE = 'skinTone';\nconst MODE_READONLY = 'readonly';\nconst MODE_READWRITE = 'readwrite';\nconst INDEX_SKIN_UNICODE = 'skinUnicodes';\nconst FIELD_SKIN_UNICODE = 'skinUnicodes';\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\nfunction uniqEmoji (emojis) {\n  return uniqBy(emojis, _ => _.unicode)\n}\n\nfunction initialMigration (db) {\n  function createObjectStore (name, keyPath, indexes) {\n    const store = keyPath\n      ? db.createObjectStore(name, { keyPath })\n      : db.createObjectStore(name);\n    if (indexes) {\n      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {\n        store.createIndex(indexName, keyPath, { multiEntry });\n      }\n    }\n    return store\n  }\n\n  createObjectStore(STORE_KEYVALUE);\n  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {\n    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],\n    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],\n    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]\n  });\n  createObjectStore(STORE_FAVORITES, undefined, {\n    [INDEX_COUNT]: ['']\n  });\n}\n\nconst openIndexedDBRequests = {};\nconst databaseCache = {};\nconst onCloseListeners = {};\n\nfunction handleOpenOrDeleteReq (resolve, reject, req) {\n  // These things are almost impossible to test with fakeIndexedDB sadly\n  /* istanbul ignore next */\n  req.onerror = () => reject(req.error);\n  /* istanbul ignore next */\n  req.onblocked = () => reject(new Error('IDB blocked'));\n  req.onsuccess = () => resolve(req.result);\n}\n\nasync function createDatabase (dbName) {\n  const db = await new Promise((resolve, reject) => {\n    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);\n    openIndexedDBRequests[dbName] = req;\n    req.onupgradeneeded = e => {\n      // Technically there is only one version, so we don't need this `if` check\n      // But if an old version of the JS is in another browser tab\n      // and it gets upgraded in the future and we have a new DB version, well...\n      // better safe than sorry.\n      /* istanbul ignore else */\n      if (e.oldVersion < DB_VERSION_INITIAL) {\n        initialMigration(req.result);\n      }\n    };\n    handleOpenOrDeleteReq(resolve, reject, req);\n  });\n  // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n  // No need for removeEventListener, because once the DB can no longer\n  // fire \"close\" events, it will auto-GC.\n  // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50\n  /* istanbul ignore next */\n  db.onclose = () => closeDatabase(dbName);\n  return db\n}\n\nfunction openDatabase (dbName) {\n  if (!databaseCache[dbName]) {\n    databaseCache[dbName] = createDatabase(dbName);\n  }\n  return databaseCache[dbName]\n}\n\nfunction dbPromise (db, storeName, readOnlyOrReadWrite, cb) {\n  return new Promise((resolve, reject) => {\n    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n    // are really irreplaceable data. IndexedDB is just a cache in this case.\n    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });\n    const store = typeof storeName === 'string'\n      ? txn.objectStore(storeName)\n      : storeName.map(name => txn.objectStore(name));\n    let res;\n    cb(store, txn, (result) => {\n      res = result;\n    });\n\n    txn.oncomplete = () => resolve(res);\n    /* istanbul ignore next */\n    txn.onerror = () => reject(txn.error);\n  })\n}\n\nfunction closeDatabase (dbName) {\n  // close any open requests\n  const req = openIndexedDBRequests[dbName];\n  const db = req && req.result;\n  if (db) {\n    db.close();\n    const listeners = onCloseListeners[dbName];\n    /* istanbul ignore else */\n    if (listeners) {\n      for (const listener of listeners) {\n        listener();\n      }\n    }\n  }\n  delete openIndexedDBRequests[dbName];\n  delete databaseCache[dbName];\n  delete onCloseListeners[dbName];\n}\n\nfunction deleteDatabase (dbName) {\n  return new Promise((resolve, reject) => {\n    // close any open requests\n    closeDatabase(dbName);\n    const req = indexedDB.deleteDatabase(dbName);\n    handleOpenOrDeleteReq(resolve, reject, req);\n  })\n}\n\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction addOnCloseListener (dbName, listener) {\n  let listeners = onCloseListeners[dbName];\n  if (!listeners) {\n    listeners = onCloseListeners[dbName] = [];\n  }\n  listeners.push(listener);\n}\n\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst irregularEmoticons = new Set([\n  ':D', 'XD', \":'D\", 'O:)',\n  ':X', ':P', ';P', 'XP',\n  ':L', ':Z', ':j', '8D',\n  'XO', '8)', ':B', ':O',\n  ':S', \":'o\", 'Dx', 'X(',\n  'D:', ':C', '>0)', ':3',\n  '</3', '<3', '\\\\M/', ':E',\n  '8#'\n]);\n\nfunction extractTokens (str) {\n  return str\n    .split(/[\\s_]+/)\n    .map(word => {\n      if (!word.match(/\\w/) || irregularEmoticons.has(word)) {\n        // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase()\n      }\n\n      return word\n        .replace(/[)(:,]/g, '')\n        .replace(//g, \"'\")\n        .toLowerCase()\n    }).filter(Boolean)\n}\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\n\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction normalizeTokens (str) {\n  return str\n    .filter(Boolean)\n    .map(_ => _.toLowerCase())\n    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)\n}\n\n// Transform emoji data for storage in IDB\nfunction transformEmojiData (emojiData) {\n  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {\n    const tokens = [...new Set(\n      normalizeTokens([\n        ...(shortcodes || []).map(extractTokens).flat(),\n        ...tags.map(extractTokens).flat(),\n        ...extractTokens(annotation),\n        emoticon\n      ])\n    )].sort();\n    const res = {\n      annotation,\n      group,\n      order,\n      tags,\n      tokens,\n      unicode: emoji,\n      version\n    };\n    if (emoticon) {\n      res.emoticon = emoticon;\n    }\n    if (shortcodes) {\n      res.shortcodes = shortcodes;\n    }\n    if (skins) {\n      res.skinTones = [];\n      res.skinUnicodes = [];\n      res.skinVersions = [];\n      for (const { tone, emoji, version } of skins) {\n        res.skinTones.push(tone);\n        res.skinUnicodes.push(emoji);\n        res.skinVersions.push(version);\n      }\n    }\n    return res\n  });\n  return res\n}\n\n// helper functions that help compress the code better\n\nfunction callStore (store, method, key, cb) {\n  store[method](key).onsuccess = e => (cb && cb(e.target.result));\n}\n\nfunction getIDB (store, key, cb) {\n  callStore(store, 'get', key, cb);\n}\n\nfunction getAllIDB (store, key, cb) {\n  callStore(store, 'getAll', key, cb);\n}\n\nfunction commit (txn) {\n  /* istanbul ignore else */\n  if (txn.commit) {\n    txn.commit();\n  }\n}\n\n// like lodash's minBy\nfunction minBy (array, func) {\n  let minItem = array[0];\n  for (let i = 1; i < array.length; i++) {\n    const item = array[i];\n    if (func(minItem) > func(item)) {\n      minItem = item;\n    }\n  }\n  return minItem\n}\n\n// return an array of results representing all items that are found in each one of the arrays\n//\n\nfunction findCommonMembers (arrays, uniqByFunc) {\n  const shortestArray = minBy(arrays, _ => _.length);\n  const results = [];\n  for (const item of shortestArray) {\n    // if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {\n      results.push(item);\n    }\n  }\n  return results\n}\n\nasync function isEmpty (db) {\n  return !(await get(db, STORE_KEYVALUE, KEY_URL))\n}\n\nasync function hasData (db, url, eTag) {\n  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]\n    .map(key => get(db, STORE_KEYVALUE, key)));\n  return (oldETag === eTag && oldUrl === url)\n}\n\nasync function doFullDatabaseScanForSingleResult (db, predicate) {\n  // This batching algorithm is just a perf improvement over a basic\n  // cursor. The BATCH_SIZE is an estimate of what would give the best\n  // perf for doing a full DB scan (worst case).\n  //\n  // Mini-benchmark for determining the best batch size:\n  //\n  // PERF=1 pnpm build:rollup && pnpm test:adhoc\n  //\n  // (async () => {\n  //   performance.mark('start')\n  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n  //   performance.measure('total', 'start')\n  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n  // })()\n  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    let lastKey;\n\n    const processNextBatch = () => {\n      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {\n        const results = e.target.result;\n        for (const result of results) {\n          lastKey = result.unicode;\n          if (predicate(result)) {\n            return cb(result)\n          }\n        }\n        if (results.length < BATCH_SIZE) {\n          return cb()\n        }\n        processNextBatch();\n      };\n    };\n    processNextBatch();\n  })\n}\n\nasync function loadData (db, emojiData, url, eTag) {\n  try {\n    const transformedData = transformEmojiData(emojiData);\n    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {\n      let oldETag;\n      let oldUrl;\n      let todo = 0;\n\n      function checkFetched () {\n        if (++todo === 2) { // 2 requests made\n          onFetched();\n        }\n      }\n\n      function onFetched () {\n        if (oldETag === eTag && oldUrl === url) {\n          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n          return\n        }\n        // delete old data\n        emojiStore.clear();\n        // insert new data\n        for (const data of transformedData) {\n          emojiStore.put(data);\n        }\n        metaStore.put(eTag, KEY_ETAG);\n        metaStore.put(url, KEY_URL);\n        commit(txn);\n      }\n\n      getIDB(metaStore, KEY_ETAG, result => {\n        oldETag = result;\n        checkFetched();\n      });\n\n      getIDB(metaStore, KEY_URL, result => {\n        oldUrl = result;\n        checkFetched();\n      });\n    });\n  } finally {\n  }\n}\n\nasync function getEmojiByGroup (db, group) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);\n    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);\n  })\n}\n\nasync function getEmojiBySearchQuery (db, query) {\n  const tokens = normalizeTokens(extractTokens(query));\n\n  if (!tokens.length) {\n    return []\n  }\n\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    // get all results that contain all tokens (i.e. an AND query)\n    const intermediateResults = [];\n\n    const checkDone = () => {\n      if (intermediateResults.length === tokens.length) {\n        onDone();\n      }\n    };\n\n    const onDone = () => {\n      const results = findCommonMembers(intermediateResults, _ => _.unicode);\n      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));\n    };\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      const range = i === tokens.length - 1\n        ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\n        : IDBKeyRange.only(token); // treat all other tokens as an exact match\n      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {\n        intermediateResults.push(result);\n        checkDone();\n      });\n    }\n  })\n}\n\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function getEmojiByShortcode (db, shortcode) {\n  const emojis = await getEmojiBySearchQuery(db, shortcode);\n\n  // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n  // index on shortcodes.\n\n  if (!emojis.length) {\n    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));\n    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null\n  }\n\n  return emojis.filter(_ => {\n    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());\n    return lowerShortcodes.includes(shortcode.toLowerCase())\n  })[0] || null\n}\n\nasync function getEmojiByUnicode (db, unicode) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (\n    getIDB(emojiStore, unicode, result => {\n      if (result) {\n        return cb(result)\n      }\n      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));\n    })\n  ))\n}\n\nfunction get (db, storeName, key) {\n  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (\n    getIDB(store, key, cb)\n  ))\n}\n\nfunction set (db, storeName, key, value) {\n  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {\n    store.put(value, key);\n    commit(txn);\n  })\n}\n\nfunction incrementFavoriteEmojiCount (db, unicode) {\n  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (\n    getIDB(store, unicode, result => {\n      store.put((result || 0) + 1, unicode);\n      commit(txn);\n    })\n  ))\n}\n\nfunction getTopFavoriteEmoji (db, customEmojiIndex, limit) {\n  if (limit === 0) {\n    return []\n  }\n  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {\n    const results = [];\n    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {\n      const cursor = e.target.result;\n      if (!cursor) { // no more results\n        return cb(results)\n      }\n\n      function addResult (result) {\n        results.push(result);\n        if (results.length === limit) {\n          return cb(results) // done, reached the limit\n        }\n        cursor.continue();\n      }\n\n      const unicodeOrName = cursor.primaryKey;\n      const custom = customEmojiIndex.byName(unicodeOrName);\n      if (custom) {\n        return addResult(custom)\n      }\n      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n      // but my testing suggests it's not actually faster.\n      getIDB(emojiStore, unicodeOrName, emoji => {\n        if (emoji) {\n          return addResult(emoji)\n        }\n        // emoji not found somehow, ignore (may happen if custom emoji change)\n        cursor.continue();\n      });\n    };\n  })\n}\n\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\n\nconst CODA_MARKER = ''; // marks the end of the string\n\nfunction trie (arr, itemToTokens) {\n  const map = new Map();\n  for (const item of arr) {\n    const tokens = itemToTokens(item);\n    for (const token of tokens) {\n      let currentMap = map;\n      for (let i = 0; i < token.length; i++) {\n        const char = token.charAt(i);\n        let nextMap = currentMap.get(char);\n        if (!nextMap) {\n          nextMap = new Map();\n          currentMap.set(char, nextMap);\n        }\n        currentMap = nextMap;\n      }\n      let valuesAtCoda = currentMap.get(CODA_MARKER);\n      if (!valuesAtCoda) {\n        valuesAtCoda = [];\n        currentMap.set(CODA_MARKER, valuesAtCoda);\n      }\n      valuesAtCoda.push(item);\n    }\n  }\n\n  const search = (query, exact) => {\n    let currentMap = map;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charAt(i);\n      const nextMap = currentMap.get(char);\n      if (nextMap) {\n        currentMap = nextMap;\n      } else {\n        return []\n      }\n    }\n\n    if (exact) {\n      const results = currentMap.get(CODA_MARKER);\n      return results || []\n    }\n\n    const results = [];\n    // traverse\n    const queue = [currentMap];\n    while (queue.length) {\n      const currentMap = queue.shift();\n      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);\n      for (const [key, value] of entriesSortedByKey) {\n        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string\n          results.push(...value);\n        } else {\n          queue.push(value);\n        }\n      }\n    }\n    return results\n  };\n\n  return search\n}\n\nconst requiredKeys$1 = [\n  'name',\n  'url'\n];\n\nfunction assertCustomEmojis (customEmojis) {\n  const isArray = customEmojis && Array.isArray(customEmojis);\n  const firstItemIsFaulty = isArray &&\n    customEmojis.length &&\n    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));\n  if (!isArray || firstItemIsFaulty) {\n    throw new Error('Custom emojis are in the wrong format')\n  }\n}\n\nfunction customEmojiIndex (customEmojis) {\n  assertCustomEmojis(customEmojis);\n\n  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n\n  //\n  // all()\n  //\n  const all = customEmojis.sort(sortByName);\n\n  //\n  // search()\n  //\n  const emojiToTokens = emoji => (\n    [...new Set((emoji.shortcodes || []).map(shortcode => extractTokens(shortcode)).flat())]\n  );\n  const searchTrie = trie(customEmojis, emojiToTokens);\n  const searchByExactMatch = _ => searchTrie(_, true);\n  const searchByPrefix = _ => searchTrie(_, false);\n\n  // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n  // is treated as a prefix search, but every other one is treated as an exact match.\n  // Then we AND the results together\n  const search = query => {\n    const tokens = extractTokens(query);\n    const intermediateResults = tokens.map((token, i) => (\n      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)\n    ));\n    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)\n  };\n\n  //\n  // byShortcode, byName\n  //\n  const shortcodeToEmoji = new Map();\n  const nameToEmoji = new Map();\n  for (const customEmoji of customEmojis) {\n    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n    for (const shortcode of (customEmoji.shortcodes || [])) {\n      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n  }\n\n  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());\n  const byName = name => nameToEmoji.get(name.toLowerCase());\n\n  return {\n    all,\n    search,\n    byShortcode,\n    byName\n  }\n}\n\nconst isFirefoxContentScript = typeof wrappedJSObject !== 'undefined';\n\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction cleanEmoji (emoji) {\n  if (!emoji) {\n    return emoji\n  }\n  // if inside a Firefox content script, need to clone the emoji object to prevent Firefox from complaining about\n  // cross-origin object. See: https://github.com/nolanlawson/emoji-picker-element/issues/356\n  /* istanbul ignore if */\n  if (isFirefoxContentScript) {\n    emoji = structuredClone(emoji);\n  }\n  delete emoji.tokens;\n  if (emoji.skinTones) {\n    const len = emoji.skinTones.length;\n    emoji.skins = Array(len);\n    for (let i = 0; i < len; i++) {\n      emoji.skins[i] = {\n        tone: emoji.skinTones[i],\n        unicode: emoji.skinUnicodes[i],\n        version: emoji.skinVersions[i]\n      };\n    }\n    delete emoji.skinTones;\n    delete emoji.skinUnicodes;\n    delete emoji.skinVersions;\n  }\n  return emoji\n}\n\nfunction warnETag (eTag) {\n  if (!eTag) {\n    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\n  }\n}\n\nconst requiredKeys = [\n  'annotation',\n  'emoji',\n  'group',\n  'order',\n  'tags',\n  'version'\n];\n\nfunction assertEmojiData (emojiData) {\n  if (!emojiData ||\n    !Array.isArray(emojiData) ||\n    !emojiData[0] ||\n    (typeof emojiData[0] !== 'object') ||\n    requiredKeys.some(key => (!(key in emojiData[0])))) {\n    throw new Error('Emoji data is in the wrong format')\n  }\n}\n\nfunction assertStatus (response, dataSource) {\n  if (Math.floor(response.status / 100) !== 2) {\n    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)\n  }\n}\n\nasync function getETag (dataSource) {\n  const response = await fetch(dataSource, { method: 'HEAD' });\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  return eTag\n}\n\nasync function getETagAndData (dataSource) {\n  const response = await fetch(dataSource);\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  const emojiData = await response.json();\n  assertEmojiData(emojiData);\n  return [eTag, emojiData]\n}\n\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate \\_()_/\n/** @private */\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\n// generate a checksum based on the stringified JSON\nasync function jsonChecksum (object) {\n  const inString = JSON.stringify(object);\n  let inBuffer = binaryStringToArrayBuffer(inString);\n\n  // this does not need to be cryptographically secure, SHA-1 is fine\n  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\n  const outBinString = arrayBufferToBinaryString(outBuffer);\n  const res = btoa(outBinString);\n  return res\n}\n\nasync function checkForUpdates (db, dataSource) {\n  // just do a simple HEAD request first to see if the eTags match\n  let emojiData;\n  let eTag = await getETag(dataSource);\n  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers\n    const eTagAndData = await getETagAndData(dataSource);\n    eTag = eTagAndData[0];\n    emojiData = eTagAndData[1];\n    if (!eTag) {\n      eTag = await jsonChecksum(emojiData);\n    }\n  }\n  if (await hasData(db, dataSource, eTag)) ; else {\n    if (!emojiData) {\n      const eTagAndData = await getETagAndData(dataSource);\n      emojiData = eTagAndData[1];\n    }\n    await loadData(db, emojiData, dataSource, eTag);\n  }\n}\n\nasync function loadDataForFirstTime (db, dataSource) {\n  let [eTag, emojiData] = await getETagAndData(dataSource);\n  if (!eTag) {\n    // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await jsonChecksum(emojiData);\n  }\n\n  await loadData(db, emojiData, dataSource, eTag);\n}\n\nclass Database {\n  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {\n    this.dataSource = dataSource;\n    this.locale = locale;\n    this._dbName = `emoji-picker-element-${this.locale}`;\n    this._db = undefined;\n    this._lazyUpdate = undefined;\n    this._custom = customEmojiIndex(customEmoji);\n\n    this._clear = this._clear.bind(this);\n    this._ready = this._init();\n  }\n\n  async _init () {\n    const db = this._db = await openDatabase(this._dbName);\n\n    addOnCloseListener(this._dbName, this._clear);\n    const dataSource = this.dataSource;\n    const empty = await isEmpty(db);\n\n    if (empty) {\n      await loadDataForFirstTime(db, dataSource);\n    } else { // offline-first - do an update asynchronously\n      this._lazyUpdate = checkForUpdates(db, dataSource);\n    }\n  }\n\n  async ready () {\n    const checkReady = async () => {\n      if (!this._ready) {\n        this._ready = this._init();\n      }\n      return this._ready\n    };\n    await checkReady();\n    // There's a possibility of a race condition where the element gets added, removed, and then added again\n    // with a particular timing, which would set the _db to undefined.\n    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n    if (!this._db) {\n      await checkReady();\n    }\n  }\n\n  async getEmojiByGroup (group) {\n    assertNumber(group);\n    await this.ready();\n    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)\n  }\n\n  async getEmojiBySearchQuery (query) {\n    assertNonEmptyString(query);\n    await this.ready();\n    const customs = this._custom.search(query);\n    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);\n    return [\n      ...customs,\n      ...natives\n    ]\n  }\n\n  async getEmojiByShortcode (shortcode) {\n    assertNonEmptyString(shortcode);\n    await this.ready();\n    const custom = this._custom.byShortcode(shortcode);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))\n  }\n\n  async getEmojiByUnicodeOrName (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    const custom = this._custom.byName(unicodeOrName);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))\n  }\n\n  async getPreferredSkinTone () {\n    await this.ready();\n    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0\n  }\n\n  async setPreferredSkinTone (skinTone) {\n    assertNumber(skinTone);\n    await this.ready();\n    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)\n  }\n\n  async incrementFavoriteEmojiCount (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    return incrementFavoriteEmojiCount(this._db, unicodeOrName)\n  }\n\n  async getTopFavoriteEmoji (limit) {\n    assertNumber(limit);\n    await this.ready();\n    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)\n  }\n\n  set customEmoji (customEmojis) {\n    this._custom = customEmojiIndex(customEmojis);\n  }\n\n  get customEmoji () {\n    return this._custom.all\n  }\n\n  async _shutdown () {\n    await this.ready(); // reopen if we've already been closed/deleted\n    try {\n      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n    } catch (err) { /* ignore network errors (offline-first) */ }\n  }\n\n  // clear references to IDB, e.g. during a close event\n  _clear () {\n    // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n    // The memory leak tests prove this is unnecessary. It's because:\n    // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n    // 2) we clear the manual close listeners in databaseLifecycle.js.\n    this._db = this._ready = this._lazyUpdate = undefined;\n  }\n\n  async close () {\n    await this._shutdown();\n    await closeDatabase(this._dbName);\n  }\n\n  async delete () {\n    await this._shutdown();\n    await deleteDatabase(this._dbName);\n  }\n}\n\nexport { Database as default };\n","var browserSupportsTextareaTextNodes;\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */\n\nfunction canManipulateViaTextNodes(input) {\n  if (input.nodeName !== \"TEXTAREA\") {\n    return false;\n  }\n\n  if (typeof browserSupportsTextareaTextNodes === \"undefined\") {\n    var textarea = document.createElement(\"textarea\");\n    textarea.value = 1;\n    browserSupportsTextareaTextNodes = !!textarea.firstChild;\n  }\n\n  return browserSupportsTextareaTextNodes;\n}\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */\n\n\nfunction index (input, text) {\n  // Most of the used APIs only work with the field selected\n  input.focus(); // IE 8-10\n\n  if (document.selection) {\n    var ieRange = document.selection.createRange();\n    ieRange.text = text; // Move cursor after the inserted text\n\n    ieRange.collapse(false\n    /* to the end */\n    );\n    ieRange.select();\n    return;\n  } // Webkit + Edge\n\n\n  var isSuccess = document.execCommand(\"insertText\", false, text);\n\n  if (!isSuccess) {\n    var start = input.selectionStart;\n    var end = input.selectionEnd; // Firefox (non-standard method)\n\n    if (typeof input.setRangeText === \"function\") {\n      input.setRangeText(text);\n    } else {\n      // To make a change we just need a Range, not a Selection\n      var range = document.createRange();\n      var textNode = document.createTextNode(text);\n\n      if (canManipulateViaTextNodes(input)) {\n        var node = input.firstChild; // If textarea is empty, just insert the text\n\n        if (!node) {\n          input.appendChild(textNode);\n        } else {\n          // Otherwise we need to find a nodes for start and end\n          var offset = 0;\n          var startNode = null;\n          var endNode = null;\n\n          while (node && (startNode === null || endNode === null)) {\n            var nodeLength = node.nodeValue.length; // if start of the selection falls into current node\n\n            if (start >= offset && start <= offset + nodeLength) {\n              range.setStart(startNode = node, start - offset);\n            } // if end of the selection falls into current node\n\n\n            if (end >= offset && end <= offset + nodeLength) {\n              range.setEnd(endNode = node, end - offset);\n            }\n\n            offset += nodeLength;\n            node = node.nextSibling;\n          } // If there is some text selected, remove it as we should replace it\n\n\n          if (start !== end) {\n            range.deleteContents();\n          }\n        }\n      } // If the node is a textarea and the range doesn't span outside the element\n      //\n      // Get the commonAncestorContainer of the selected range and test its type\n      // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n      // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n\n\n      if (canManipulateViaTextNodes(input) && range.commonAncestorContainer.nodeName === \"#text\") {\n        // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n        range.insertNode(textNode);\n      } else {\n        // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n        var value = input.value;\n        input.value = value.slice(0, start) + text + value.slice(end);\n      }\n    } // Correct the cursor position to be at the end of the insertion\n\n\n    input.setSelectionRange(start + text.length, start + text.length); // Notify any possible listeners of the change\n\n    var e = document.createEvent(\"UIEvent\");\n    e.initEvent(\"input\", true, false);\n    input.dispatchEvent(e);\n  }\n}\n\nexport default index;\n//# sourceMappingURL=index.esm.js.map\n","let browserSupportsTextareaTextNodes;\n\n/**\n * @param {HTMLElement} input\n * @return {boolean}\n */\nfunction canManipulateViaTextNodes(input) {\n  if (input.nodeName !== \"TEXTAREA\") {\n    return false;\n  }\n  if (typeof browserSupportsTextareaTextNodes === \"undefined\") {\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = 1;\n    browserSupportsTextareaTextNodes = !!textarea.firstChild;\n  }\n  return browserSupportsTextareaTextNodes;\n}\n\n/**\n * @param {HTMLTextAreaElement|HTMLInputElement} input\n * @param {string} text\n * @returns {void}\n */\nexport default function(input, text) {\n  // Most of the used APIs only work with the field selected\n  input.focus();\n\n  // IE 8-10\n  if (document.selection) {\n    const ieRange = document.selection.createRange();\n    ieRange.text = text;\n\n    // Move cursor after the inserted text\n    ieRange.collapse(false /* to the end */);\n    ieRange.select();\n\n    return;\n  }\n\n  // Webkit + Edge\n  const isSuccess = document.execCommand(\"insertText\", false, text);\n  if (!isSuccess) {\n    const start = input.selectionStart;\n    const end = input.selectionEnd;\n    // Firefox (non-standard method)\n    if (typeof input.setRangeText === \"function\") {\n      input.setRangeText(text);\n    } else {\n      // To make a change we just need a Range, not a Selection\n      const range = document.createRange();\n      const textNode = document.createTextNode(text);\n\n      if (canManipulateViaTextNodes(input)) {\n        let node = input.firstChild;\n\n        // If textarea is empty, just insert the text\n        if (!node) {\n          input.appendChild(textNode);\n        } else {\n          // Otherwise we need to find a nodes for start and end\n          let offset = 0;\n          let startNode = null;\n          let endNode = null;\n\n          while (node && (startNode === null || endNode === null)) {\n            const nodeLength = node.nodeValue.length;\n\n            // if start of the selection falls into current node\n            if (start >= offset && start <= offset + nodeLength) {\n              range.setStart((startNode = node), start - offset);\n            }\n\n            // if end of the selection falls into current node\n            if (end >= offset && end <= offset + nodeLength) {\n              range.setEnd((endNode = node), end - offset);\n            }\n\n            offset += nodeLength;\n            node = node.nextSibling;\n          }\n\n          // If there is some text selected, remove it as we should replace it\n          if (start !== end) {\n            range.deleteContents();\n          }\n        }\n      }\n\n      // If the node is a textarea and the range doesn't span outside the element\n      //\n      // Get the commonAncestorContainer of the selected range and test its type\n      // If the node is of type `#text` it means that we're still working with text nodes within our textarea element\n      // otherwise, if it's of type `#document` for example it means our selection spans outside the textarea.\n      if (\n        canManipulateViaTextNodes(input) &&\n        range.commonAncestorContainer.nodeName === \"#text\"\n      ) {\n        // Finally insert a new node. The browser will automatically split start and end nodes into two if necessary\n        range.insertNode(textNode);\n      } else {\n        // If the node is not a textarea or the range spans outside a textarea the only way is to replace the whole value\n        const value = input.value;\n        input.value = value.slice(0, start) + text + value.slice(end);\n      }\n    }\n\n    // Correct the cursor position to be at the end of the insertion\n    input.setSelectionRange(start + text.length, start + text.length);\n\n    // Notify any possible listeners of the change\n    const e = document.createEvent(\"UIEvent\");\n    e.initEvent(\"input\", true, false);\n    input.dispatchEvent(e);\n  }\n}\n","function a(a){return null!==a&&\"object\"==typeof a?\"share\"in navigator&&\"canShare\"in navigator&&navigator.canShare(a):\"share\"in navigator}export{a as isWebShareSupported};\n//# sourceMappingURL=is-web-share-supported.js.map\n","function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $e179325634270afd$exports = {};\n\n$parcel$export($e179325634270afd$exports, \"WebShare\", function () { return $e179325634270afd$export$30b344bef3e55b67; });\n// @ts-check\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */ /**\n * Represents the data to share.\n *\n * @typedef {Object} ShareData\n * @property {string} [url] - The URL to share.\n * @property {string} [title] - The title to share.\n * @property {string} [text] - The text to share.\n * @property {File[]} [files] - The files to share.\n */ const $e179325634270afd$var$styles = /* css */ `\n  :host {\n    display: inline-block;\n  }\n`;\nconst $e179325634270afd$var$template = document.createElement(\"template\");\n$e179325634270afd$var$template.innerHTML = /* html */ `\n  <style>${$e179325634270afd$var$styles}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;\n/**\n * @summary A custom element that provides a button to share content.\n * @documentation https://github.com/georapbox/web-share-element\n *\n * @tagname web-share - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {boolean} disabled - Indicates whether the button is disabled.\n * @property {string} shareUrl - The URL to share.\n * @property {string} shareTitle - The title to share.\n * @property {string} shareText - The text to share.\n * @property {File[]} shareFiles - The files to share.\n *\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {string} share-url - Reflects the shareUrl property.\n * @attribute {string} share-title - Reflects the shareTitle property.\n * @attribute {string} share-text - Reflects the shareText property.\n *\n * @slot button - The button to share content.\n * @slot button-content - The content of the button to share content.\n *\n * @csspart button - The button to share content.\n * @csspart button--disabled - The button to share content when disabled.\n *\n * @event web-share:success - Fired when the share operation is successful.\n * @event web-share:abort - Fired when the share operation is aborted.\n * @event web-share:error - Fired when the share operation fails.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method share - Instance method. Shares the shareable data taken from the element's properties.\n */ class $e179325634270afd$export$30b344bef3e55b67 extends HTMLElement {\n    /** @type {Nullable<HTMLSlotElement>} */ #buttonSlot;\n    /** @type {Nullable<Element>} */ #buttonEl;\n    /** @type {File[]} */ #files = [];\n    constructor(){\n        super();\n        if (!this.shadowRoot) {\n            const shadowRoot = this.attachShadow({\n                mode: \"open\",\n                delegatesFocus: true\n            });\n            shadowRoot.appendChild($e179325634270afd$var$template.content.cloneNode(true));\n        }\n        this.#buttonSlot = this.shadowRoot?.querySelector('slot[name=\"button\"]') || null;\n        this.#buttonEl = this.#getButton();\n    }\n    static get observedAttributes() {\n        return [\n            \"disabled\"\n        ];\n    }\n    /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */ attributeChangedCallback(name, oldValue, newValue) {\n        if (name === \"disabled\" && oldValue !== newValue && this.#buttonEl) {\n            this.#buttonEl.toggleAttribute(\"disabled\", this.disabled);\n            this.#buttonEl.setAttribute(\"aria-disabled\", this.disabled.toString());\n            if (this.#buttonEl.part && this.#buttonEl.part.contains(\"button\")) this.#buttonEl.part.toggle(\"button--disabled\", this.disabled);\n        }\n    }\n    /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */ connectedCallback() {\n        this.#upgradeProperty(\"shareUrl\");\n        this.#upgradeProperty(\"shareTitle\");\n        this.#upgradeProperty(\"shareText\");\n        this.#upgradeProperty(\"shareFiles\");\n        this.#upgradeProperty(\"disabled\");\n        this.#buttonSlot?.addEventListener(\"slotchange\", this.#handleSlotChange);\n        this.#buttonEl?.addEventListener(\"click\", this.#handleClick);\n    }\n    /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */ disconnectedCallback() {\n        this.#buttonSlot?.removeEventListener(\"slotchange\", this.#handleSlotChange);\n        this.#buttonEl?.removeEventListener(\"click\", this.#handleClick);\n    }\n    /**\n   * @type {boolean} - Indicates whether the button is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */ get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(value) {\n        this.toggleAttribute(\"disabled\", !!value);\n    }\n    /**\n   * @type {string} - The URL to share.\n   * @attribute share-url - Reflects the shareUrl property.\n   */ get shareUrl() {\n        return this.getAttribute(\"share-url\") || \"\";\n    }\n    set shareUrl(value) {\n        this.setAttribute(\"share-url\", value);\n    }\n    /**\n   * @type {string} - The title to share.\n   * @attribute share-title - Reflects the shareTitle property.\n   */ get shareTitle() {\n        return this.getAttribute(\"share-title\") || \"\";\n    }\n    set shareTitle(value) {\n        this.setAttribute(\"share-title\", value);\n    }\n    /**\n   * @type {string} - The text to share.\n   * @attribute share-text - Reflects the shareText property.\n   */ get shareText() {\n        return this.getAttribute(\"share-text\") || \"\";\n    }\n    set shareText(value) {\n        this.setAttribute(\"share-text\", value);\n    }\n    /**\n   * @type {File[]} - The files to share.\n   */ get shareFiles() {\n        return this.#files;\n    }\n    set shareFiles(value) {\n        if (Array.isArray(value) && value.length > 0) this.#files = value;\n    }\n    /**\n   * Shares the shareable data taken from the element's properties.\n   *\n   * @returns {Promise<void>} - A promise that resolves when the share operation is complete.\n   */ async share() {\n        if (this.disabled) return;\n        try {\n            /** @type {ShareData} */ const shareData = {};\n            if (this.shareUrl) shareData.url = this.shareUrl;\n            if (this.shareTitle) shareData.title = this.shareTitle;\n            if (this.shareText) shareData.text = this.shareText;\n            if (Array.isArray(this.shareFiles) && this.shareFiles.length > 0 && navigator.canShare && navigator.canShare({\n                files: this.shareFiles\n            })) shareData.files = this.shareFiles;\n            await navigator.share(shareData);\n            this.dispatchEvent(new CustomEvent(\"web-share:success\", {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    shareData: shareData\n                }\n            }));\n        } catch (error) {\n            if (error instanceof Error && error.name === \"AbortError\") {\n                this.dispatchEvent(new CustomEvent(\"web-share:abort\", {\n                    bubbles: true,\n                    composed: true,\n                    detail: {\n                        error: error\n                    }\n                }));\n                return;\n            }\n            this.dispatchEvent(new CustomEvent(\"web-share:error\", {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        }\n    }\n    /**\n   * Handles the click event on the button.\n   *\n   * @param {any} evt - The event object.\n   */ #handleClick = (evt)=>{\n        evt.preventDefault();\n        if (this.disabled) return;\n        this.share();\n    };\n    /**\n   * Handles the slotchange event on the button slot.\n   *\n   * @param {any} evt - The event object.\n   */ #handleSlotChange = (evt)=>{\n        if (evt.target && evt.target.name === \"button\") {\n            this.#buttonEl?.removeEventListener(\"click\", this.#handleClick);\n            this.#buttonEl = this.#getButton();\n            if (this.#buttonEl) {\n                this.#buttonEl.addEventListener(\"click\", this.#handleClick);\n                if (this.#buttonEl.nodeName !== \"BUTTON\" && !this.#buttonEl.hasAttribute(\"role\")) this.#buttonEl.setAttribute(\"role\", \"button\");\n            }\n        }\n    };\n    /**\n   * Returns the button element from the button slot.\n   *\n   * @returns {Nullable<Element>} - The button element.\n   */ #getButton() {\n        if (!this.#buttonSlot) return null;\n        return this.#buttonSlot.assignedElements({\n            flatten: true\n        }).find((el)=>{\n            return el.nodeName === \"BUTTON\" || el.getAttribute(\"slot\") === \"button\";\n        }) || null;\n    }\n    /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'shareUrl' | 'shareTitle' | 'shareText' | 'shareFiles' | 'disabled'} prop - The property name to upgrade.\n   */ #upgradeProperty(prop) {\n        /** @type {any} */ const instance = this;\n        if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n            const value = instance[prop];\n            delete instance[prop];\n            instance[prop] = value;\n        }\n    }\n    static defineCustomElement(elementName = \"web-share\") {\n        if (typeof window !== \"undefined\" && !window.customElements.get(elementName)) window.customElements.define(elementName, $e179325634270afd$export$30b344bef3e55b67);\n    }\n}\n\n\n(0, $e179325634270afd$export$30b344bef3e55b67).defineCustomElement();\n\n\nexport {$e179325634270afd$export$30b344bef3e55b67 as WebShare};\n//# sourceMappingURL=web-share-defined.js.map\n","// @ts-check\n\n/**\n * Check if Web Share API is supported by the platform.\n *\n * @param {import('./web-share').ShareData} [options]\n * @returns {boolean} Returns `true` if Web Share API is supported; otherwise `false`.\n */\nfunction isWebShareSupported(options) {\n  if (options !== null && typeof options === 'object') {\n    return 'share' in navigator && 'canShare' in navigator && navigator.canShare(options);\n  }\n\n  return 'share' in navigator;\n}\n\nexport { isWebShareSupported };\n","Object.defineProperty({},\"WebShare\",{get:function(){return s},set:void 0,enumerable:!0,configurable:!0});let t=`\n  :host {\n    display: inline-block;\n  }\n`,e=document.createElement(\"template\");e.innerHTML=`\n  <style>${t}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;class s extends HTMLElement{#t;#e;#s=[];constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\",delegatesFocus:!0}).appendChild(e.content.cloneNode(!0)),this.#t=this.shadowRoot?.querySelector('slot[name=\"button\"]')||null,this.#e=this.#i()}static get observedAttributes(){return[\"disabled\"]}attributeChangedCallback(t,e,s){\"disabled\"===t&&e!==s&&this.#e&&(this.#e.toggleAttribute(\"disabled\",this.disabled),this.#e.setAttribute(\"aria-disabled\",this.disabled.toString()),this.#e.part&&this.#e.part.contains(\"button\")&&this.#e.part.toggle(\"button--disabled\",this.disabled))}connectedCallback(){this.#r(\"shareUrl\"),this.#r(\"shareTitle\"),this.#r(\"shareText\"),this.#r(\"shareFiles\"),this.#r(\"disabled\"),this.#t?.addEventListener(\"slotchange\",this.#a),this.#e?.addEventListener(\"click\",this.#n)}disconnectedCallback(){this.#t?.removeEventListener(\"slotchange\",this.#a),this.#e?.removeEventListener(\"click\",this.#n)}get disabled(){return this.hasAttribute(\"disabled\")}set disabled(t){this.toggleAttribute(\"disabled\",!!t)}get shareUrl(){return this.getAttribute(\"share-url\")||\"\"}set shareUrl(t){this.setAttribute(\"share-url\",t)}get shareTitle(){return this.getAttribute(\"share-title\")||\"\"}set shareTitle(t){this.setAttribute(\"share-title\",t)}get shareText(){return this.getAttribute(\"share-text\")||\"\"}set shareText(t){this.setAttribute(\"share-text\",t)}get shareFiles(){return this.#s}set shareFiles(t){Array.isArray(t)&&t.length>0&&(this.#s=t)}async share(){if(!this.disabled)try{let t={};this.shareUrl&&(t.url=this.shareUrl),this.shareTitle&&(t.title=this.shareTitle),this.shareText&&(t.text=this.shareText),Array.isArray(this.shareFiles)&&this.shareFiles.length>0&&navigator.canShare&&navigator.canShare({files:this.shareFiles})&&(t.files=this.shareFiles),await navigator.share(t),this.dispatchEvent(new CustomEvent(\"web-share:success\",{bubbles:!0,composed:!0,detail:{shareData:t}}))}catch(t){if(t instanceof Error&&\"AbortError\"===t.name){this.dispatchEvent(new CustomEvent(\"web-share:abort\",{bubbles:!0,composed:!0,detail:{error:t}}));return}this.dispatchEvent(new CustomEvent(\"web-share:error\",{bubbles:!0,composed:!0,detail:{error:t}}))}}#n=t=>{t.preventDefault(),this.disabled||this.share()};#a=t=>{t.target&&\"button\"===t.target.name&&(this.#e?.removeEventListener(\"click\",this.#n),this.#e=this.#i(),this.#e&&(this.#e.addEventListener(\"click\",this.#n),\"BUTTON\"===this.#e.nodeName||this.#e.hasAttribute(\"role\")||this.#e.setAttribute(\"role\",\"button\")))};#i(){return this.#t&&this.#t.assignedElements({flatten:!0}).find(t=>\"BUTTON\"===t.nodeName||\"button\"===t.getAttribute(\"slot\"))||null}#r(t){if(Object.prototype.hasOwnProperty.call(this,t)){let e=this[t];delete this[t],this[t]=e}}static defineCustomElement(t=\"web-share\"){\"undefined\"==typeof window||window.customElements.get(t)||window.customElements.define(t,s)}}s.defineCustomElement();export{s as WebShare};\n//# sourceMappingURL=web-share-defined.js.map\n","import { WebShare } from './web-share.js';\n\nWebShare.defineCustomElement();\n\nexport { WebShare };\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * Represents the data to share.\n *\n * @typedef {Object} ShareData\n * @property {string} [url] - The URL to share.\n * @property {string} [title] - The title to share.\n * @property {string} [text] - The text to share.\n * @property {File[]} [files] - The files to share.\n */\n\nconst styles = /* css */`\n  :host {\n    display: inline-block;\n  }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */ `\n  <style>${styles}</style>\n  <slot name=\"button\"><button type=\"button\" part=\"button\"><slot name=\"button-content\">Share</slot></button></slot>\n`;\n\n/**\n * @summary A custom element that provides a button to share content.\n * @documentation https://github.com/georapbox/web-share-element\n *\n * @tagname web-share - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {boolean} disabled - Indicates whether the button is disabled.\n * @property {string} shareUrl - The URL to share.\n * @property {string} shareTitle - The title to share.\n * @property {string} shareText - The text to share.\n * @property {File[]} shareFiles - The files to share.\n *\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {string} share-url - Reflects the shareUrl property.\n * @attribute {string} share-title - Reflects the shareTitle property.\n * @attribute {string} share-text - Reflects the shareText property.\n *\n * @slot button - The button to share content.\n * @slot button-content - The content of the button to share content.\n *\n * @csspart button - The button to share content.\n * @csspart button--disabled - The button to share content when disabled.\n *\n * @event web-share:success - Fired when the share operation is successful.\n * @event web-share:abort - Fired when the share operation is aborted.\n * @event web-share:error - Fired when the share operation fails.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method share - Instance method. Shares the shareable data taken from the element's properties.\n */\nclass WebShare extends HTMLElement {\n  /** @type {Nullable<HTMLSlotElement>} */\n  #buttonSlot;\n\n  /** @type {Nullable<Element>} */\n  #buttonEl;\n\n  /** @type {File[]} */\n  #files = [];\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open', delegatesFocus: true });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    this.#buttonSlot = this.shadowRoot?.querySelector('slot[name=\"button\"]') || null;\n    this.#buttonEl = this.#getButton();\n  }\n\n  static get observedAttributes() {\n    return ['disabled'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'disabled' && oldValue !== newValue && this.#buttonEl) {\n      this.#buttonEl.toggleAttribute('disabled', this.disabled);\n      this.#buttonEl.setAttribute('aria-disabled', this.disabled.toString());\n\n      if (this.#buttonEl.part && this.#buttonEl.part.contains('button')) {\n        this.#buttonEl.part.toggle('button--disabled', this.disabled);\n      }\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('shareUrl');\n    this.#upgradeProperty('shareTitle');\n    this.#upgradeProperty('shareText');\n    this.#upgradeProperty('shareFiles');\n    this.#upgradeProperty('disabled');\n\n    this.#buttonSlot?.addEventListener('slotchange', this.#handleSlotChange);\n    this.#buttonEl?.addEventListener('click', this.#handleClick);\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#buttonSlot?.removeEventListener('slotchange', this.#handleSlotChange);\n    this.#buttonEl?.removeEventListener('click', this.#handleClick);\n  }\n\n  /**\n   * @type {boolean} - Indicates whether the button is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', !!value);\n  }\n\n  /**\n   * @type {string} - The URL to share.\n   * @attribute share-url - Reflects the shareUrl property.\n   */\n  get shareUrl() {\n    return this.getAttribute('share-url') || '';\n  }\n\n  set shareUrl(value) {\n    this.setAttribute('share-url', value);\n  }\n\n  /**\n   * @type {string} - The title to share.\n   * @attribute share-title - Reflects the shareTitle property.\n   */\n  get shareTitle() {\n    return this.getAttribute('share-title') || '';\n  }\n\n  set shareTitle(value) {\n    this.setAttribute('share-title', value);\n  }\n\n  /**\n   * @type {string} - The text to share.\n   * @attribute share-text - Reflects the shareText property.\n   */\n  get shareText() {\n    return this.getAttribute('share-text') || '';\n  }\n\n  set shareText(value) {\n    this.setAttribute('share-text', value);\n  }\n\n  /**\n   * @type {File[]} - The files to share.\n   */\n  get shareFiles() {\n    return this.#files;\n  }\n\n  set shareFiles(value) {\n    if (Array.isArray(value) && value.length > 0) {\n      this.#files = value;\n    }\n  }\n\n  /**\n   * Shares the shareable data taken from the element's properties.\n   *\n   * @returns {Promise<void>} - A promise that resolves when the share operation is complete.\n   */\n  async share() {\n    if (this.disabled) {\n      return;\n    }\n\n    try {\n      /** @type {ShareData} */\n      const shareData = {};\n\n      if (this.shareUrl) {\n        shareData.url = this.shareUrl;\n      }\n\n      if (this.shareTitle) {\n        shareData.title = this.shareTitle;\n      }\n\n      if (this.shareText) {\n        shareData.text = this.shareText;\n      }\n\n      if (\n        Array.isArray(this.shareFiles)\n        && this.shareFiles.length > 0\n        && navigator.canShare\n        && navigator.canShare({ files: this.shareFiles })\n      ) {\n        shareData.files = this.shareFiles;\n      }\n\n      await navigator.share(shareData);\n\n      this.dispatchEvent(new CustomEvent('web-share:success', {\n        bubbles: true,\n        composed: true,\n        detail: { shareData }\n      }));\n    } catch (error) {\n      if (error instanceof Error && error.name === 'AbortError') {\n        this.dispatchEvent(new CustomEvent('web-share:abort', {\n          bubbles: true,\n          composed: true,\n          detail: { error }\n        }));\n\n        return;\n      }\n\n      this.dispatchEvent(new CustomEvent('web-share:error', {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    }\n  }\n\n  /**\n   * Handles the click event on the button.\n   *\n   * @param {any} evt - The event object.\n   */\n  #handleClick = evt => {\n    evt.preventDefault();\n\n    if (this.disabled) {\n      return;\n    }\n\n    this.share();\n  };\n\n  /**\n   * Handles the slotchange event on the button slot.\n   *\n   * @param {any} evt - The event object.\n   */\n  #handleSlotChange = evt => {\n    if (evt.target && evt.target.name === 'button') {\n      this.#buttonEl?.removeEventListener('click', this.#handleClick);\n      this.#buttonEl = this.#getButton();\n\n      if (this.#buttonEl) {\n        this.#buttonEl.addEventListener('click', this.#handleClick);\n\n        if (this.#buttonEl.nodeName !== 'BUTTON' && !this.#buttonEl.hasAttribute('role')) {\n          this.#buttonEl.setAttribute('role', 'button');\n        }\n      }\n    }\n  };\n\n  /**\n   * Returns the button element from the button slot.\n   *\n   * @returns {Nullable<Element>} - The button element.\n   */\n  #getButton() {\n    if (!this.#buttonSlot) {\n      return null;\n    }\n\n    return this.#buttonSlot.assignedElements({ flatten: true }).find(el => {\n      return el.nodeName === 'BUTTON' || el.getAttribute('slot') === 'button';\n    }) || null;\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'shareUrl' | 'shareTitle' | 'shareText' | 'shareFiles' | 'disabled'} prop - The property name to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  static defineCustomElement(elementName = 'web-share') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, WebShare);\n    }\n  }\n}\n\nexport { WebShare };\n","Object.defineProperty({},\"CapturePhoto\",{get:function(){return n},set:void 0,enumerable:!0,configurable:!0});let t=(t,e,i)=>(Number.isNaN(e)&&(e=0),Number.isNaN(i)&&(i=0),Math.min(Math.max(t,Math.min(e,i)),Math.max(e,i))),e=\"capture-photo\",i=`\n  :host {\n    display: block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden],\n  ::slotted([hidden]) {\n    display: none;\n  }\n\n  video {\n    display: block;\n  }\n\n  #output:empty {\n    display: none;\n  }\n`,o=document.createElement(\"template\");o.innerHTML=`\n  <style>${i}</style>\n\n  <video part=\"video\" playsinline></video>\n\n  <canvas hidden></canvas>\n\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n\n    <slot name=\"facing-mode-button\" hidden>\n      <button part=\"facing-mode-button\" type=\"button\">\n        <slot name=\"facing-mode-button-content\">Toggle facing mode</slot>\n      </button>\n    </slot>\n\n    <slot name=\"actions\"></slot>\n  </div>\n\n  <slot></slot>\n\n  <div part=\"output-container\" id=\"output\"></div>\n`;class n extends HTMLElement{#t={};#e=null;#i=null;#o=null;#n=null;#a=null;#s=null;#r=null;#l=null;constructor(){super(),this.#t=this.getSupportedConstraints(),this.shadowRoot||this.attachShadow({mode:\"open\"}).appendChild(o.content.cloneNode(!0))}static get observedAttributes(){return[\"no-image\",\"facing-mode\",\"camera-resolution\",\"pan\",\"tilt\",\"zoom\"]}attributeChangedCallback(t,e,i){if(!this.isConnected)return;let o=this.getTrackCapabilities(),n=this.getTrackSettings();if(\"no-image\"===t&&e!==i&&this.#u(),\"facing-mode\"===t&&e!==i&&\"facingMode\"in this.#t){let t=[\"user\",\"environment\"].includes(this.facingMode||\"\");\"facingMode\"in n&&t&&(this.stopVideoStream(),this.startVideoStream())}if(\"camera-resolution\"===t&&e!==i&&\"string\"==typeof this.cameraResolution&&this.cameraResolution.trim().length>0){let[t=0,e=0]=this.cameraResolution.split(\"x\").map(t=>Number(t));if(t>0&&e>0&&\"width\"in o&&\"height\"in o){let i=!!(o.width?.min&&o.width?.max)&&t>=o?.width?.min&&t<=o?.width?.max,a=!!(o.height?.min&&o.height?.max)&&e>=o?.height?.min&&e<=o?.height?.max;\"width\"in n&&\"height\"in n&&i&&a&&(this.stopVideoStream(),this.startVideoStream())}}if(\"pan\"===t&&e!==i&&\"pan\"in this.#t){let t=!!(\"pan\"in o&&o.pan?.min&&o.pan?.max)&&this.pan>=o.pan.min&&this.pan<=o.pan.max;\"pan\"in n&&\"number\"==typeof this.pan&&t&&this.#h(\"pan\",this.pan)}if(\"tilt\"===t&&e!==i&&\"tilt\"in this.#t){let t=!!(\"tilt\"in o&&o.tilt?.min&&o.tilt?.max)&&this.tilt>=o.tilt.min&&this.tilt<=o.tilt.max;\"tilt\"in n&&\"number\"==typeof this.tilt&&t&&this.#h(\"tilt\",this.tilt)}if(\"zoom\"===t&&e!==i&&\"zoom\"in this.#t){let t=!!(\"zoom\"in o&&o.zoom?.min&&o.zoom?.max)&&this.zoom>=o.zoom.min&&this.zoom<=o.zoom.max;\"zoom\"in n&&\"number\"==typeof this.zoom&&t&&this.#h(\"zoom\",this.zoom)}}connectedCallback(){if(this.#d(\"autpoPlay\"),this.#d(\"noImage\"),this.#d(\"facingMode\"),this.#d(\"cameraResolution\"),this.#d(\"pan\"),this.#d(\"tilt\"),this.#d(\"zoom\"),this.#d(\"calculateFileSize\"),this.#i=this.shadowRoot?.querySelector(\"canvas\")||null,this.#o=this.shadowRoot?.getElementById(\"output\")||null,this.#n=this.shadowRoot?.querySelector(\"video\")||null,this.#a=this.shadowRoot?.querySelector('slot[name=\"capture-button\"]')||null,this.#s=this.#c(),this.#r=this.shadowRoot?.querySelector('slot[name=\"facing-mode-button\"]')||null,this.#l=this.#m(),this.#n?.addEventListener(\"loadedmetadata\",this.#p),this.#a?.addEventListener(\"slotchange\",this.#g),this.#s?.addEventListener(\"click\",this.#b),this.#r?.addEventListener(\"slotchange\",this.#f),this.#l?.addEventListener(\"click\",this.#v),!n.isSupported())return this.dispatchEvent(new CustomEvent(`${e}:error`,{bubbles:!0,composed:!0,detail:{error:{name:\"NotSupportedError\",message:\"Not supported\"}}}));this.autoPlay&&this.startVideoStream()}disconnectedCallback(){this.stopVideoStream(),this.#l?.removeEventListener(\"click\",this.#v),this.#s?.removeEventListener(\"click\",this.#b),this.#n?.removeEventListener(\"canplay\",this.#p),this.#a?.removeEventListener(\"slotchange\",this.#g),this.#r?.removeEventListener(\"slotchange\",this.#f)}get autoPlay(){return this.hasAttribute(\"auto-play\")}set autoPlay(t){this.toggleAttribute(\"auto-play\",!!t)}get noImage(){return this.hasAttribute(\"no-image\")}set noImage(t){this.toggleAttribute(\"no-image\",!!t)}get facingMode(){return this.getAttribute(\"facing-mode\")||\"user\"}set facingMode(t){this.setAttribute(\"facing-mode\",t)}get cameraResolution(){return this.getAttribute(\"camera-resolution\")||\"\"}set cameraResolution(t){this.setAttribute(\"camera-resolution\",t)}get pan(){return Number(this.getAttribute(\"pan\"))||0}set pan(t){this.setAttribute(\"pan\",null!=t?t.toString():t)}get tilt(){return Number(this.getAttribute(\"tilt\"))||0}set tilt(t){this.setAttribute(\"tilt\",null!=t?t.toString():t)}get zoom(){return Number(this.getAttribute(\"zoom\"))||1}set zoom(t){this.setAttribute(\"zoom\",null!=t?t.toString():t)}get loading(){return this.hasAttribute(\"loading\")}get calculateFileSize(){return this.hasAttribute(\"calculate-file-size\")}set calculateFileSize(t){this.toggleAttribute(\"calculate-file-size\",!!t)}#v=t=>{t.preventDefault(),this.loading||(this.facingMode=\"user\"!==this.facingMode&&this.facingMode?\"user\":\"environment\")};#b=t=>{t.preventDefault(),this.capture()};#p=t=>{let i=t.target;i.play().then(()=>{this.dispatchEvent(new CustomEvent(`${e}:video-play`,{bubbles:!0,composed:!0,detail:{video:i}}))}).catch(t=>{this.dispatchEvent(new CustomEvent(`${e}:error`,{bubbles:!0,composed:!0,detail:{error:t}}))}).finally(()=>{this.removeAttribute(\"loading\")})};#u(){this.#o&&Array.from(this.#o.childNodes).forEach(t=>t.remove())}#h(e,i){if(!this.#e||!e||!i)return;let[o]=this.#e.getVideoTracks(),n=this.getTrackCapabilities();e in this.getTrackSettings()&&o.applyConstraints({advanced:[{[e]:t(Number(i),n[e]?.min||1,n[e]?.max||1)}]})}#g=t=>{t.target?.name===\"capture-button\"&&(this.#s?.removeEventListener(\"click\",this.#b),this.#s=this.#c(),this.#s&&(this.#s.addEventListener(\"click\",this.#b),\"BUTTON\"===this.#s.nodeName||this.#s.hasAttribute(\"role\")||this.#s.setAttribute(\"role\",\"button\")))};#f=t=>{t.target?.name===\"facing-mode-button\"&&(this.#l?.removeEventListener(\"click\",this.#v),this.#l=this.#m(),this.#l&&(this.#l.addEventListener(\"click\",this.#v),\"BUTTON\"===this.#l.nodeName||this.#l.hasAttribute(\"role\")||this.#l.setAttribute(\"role\",\"button\")))};#m(){return this.#r&&this.#r.assignedElements({flatten:!0}).find(t=>\"BUTTON\"===t.nodeName||\"facing-mode-button\"===t.getAttribute(\"slot\"))||null}#c(){return this.#a&&this.#a.assignedElements({flatten:!0}).find(t=>\"BUTTON\"===t.nodeName||\"capture-button\"===t.getAttribute(\"slot\"))||null}#d(t){if(Object.prototype.hasOwnProperty.call(this,t)){let e=this[t];delete this[t],this[t]=e}}async startVideoStream(){if(!n.isSupported()||this.#e)return;this.setAttribute(\"loading\",\"\");let t={video:{facingMode:{ideal:this.facingMode||\"user\"},pan:!0,tilt:!0,zoom:!0},audio:!1};if(\"string\"==typeof this.cameraResolution&&this.cameraResolution.trim().length>0){let[e=0,i=0]=this.cameraResolution.split(\"x\").map(t=>Number(t));e>0&&i>0&&(t.video.width=e,t.video.height=i)}try{this.#e=await navigator.mediaDevices.getUserMedia(t),this.#n&&(this.#n.srcObject=this.#e),this.#h(\"pan\",this.pan),this.#h(\"tilt\",this.tilt),this.#h(\"zoom\",this.zoom);let e=this.getTrackSettings();\"facingMode\"in e&&this.#r&&(this.#r.hidden=!1)}catch(t){this.dispatchEvent(new CustomEvent(`${e}:error`,{bubbles:!0,composed:!0,detail:{error:t}}))}finally{this.removeAttribute(\"loading\")}}stopVideoStream(){if(!this.#n||!this.#e)return;let[t]=this.#e.getVideoTracks();t?.stop(),this.#n.srcObject=null,this.#e=null}async capture(){if(!this.loading&&this.#i&&this.#n)try{let t=this.#i.getContext(\"2d\"),i=this.#n.videoWidth,o=this.#n.videoHeight;this.#i.width=i,this.#i.height=o,t?.drawImage(this.#n,0,0,i,o);let n=this.#i.toDataURL(\"image/png\");if(\"string\"==typeof n&&n.includes(\"data:image\")){if(!this.noImage){let t=new Image;t.src=n,t.width=i,t.height=o,t.setAttribute(\"part\",\"output-image\"),this.#u(),this.#o?.appendChild(t)}let t={dataURI:n,width:i,height:o};if(this.calculateFileSize)try{let e=await fetch(n),i=(await e.blob()).size;i&&(t.size=i)}catch(t){}this.dispatchEvent(new CustomEvent(`${e}:success`,{bubbles:!0,composed:!0,detail:t}))}}catch(t){this.dispatchEvent(new CustomEvent(`${e}:error`,{bubbles:!0,composed:!0,detail:{error:t}}))}}getSupportedConstraints(){return n.isSupported()&&navigator.mediaDevices.getSupportedConstraints()||{}}getTrackCapabilities(){if(!this.#e)return{};let[t]=this.#e.getVideoTracks();return t&&\"function\"==typeof t.getCapabilities&&t.getCapabilities()||{}}getTrackSettings(){if(!this.#e)return{};let[t]=this.#e.getVideoTracks();return t&&\"function\"==typeof t.getSettings&&t.getSettings()||{}}static isSupported(){return!!navigator.mediaDevices?.getUserMedia}static defineCustomElement(t=e){\"undefined\"==typeof window||window.customElements.get(t)||window.customElements.define(t,n)}}n.defineCustomElement();export{n as CapturePhoto};\n//# sourceMappingURL=capture-photo-defined.js.map\n","function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $c290816263f90981$exports = {};\n\n$parcel$export($c290816263f90981$exports, \"CapturePhoto\", function () { return $c290816263f90981$export$cc30a98fe3890794; });\n// @ts-check\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */ /**\n * @typedef {Object} ExtendedMediaTrackCapabilities\n * @property {ULongRange} [width] - The width of the video track.\n * @property {ULongRange} [height] - The height of the video track.\n * @property {ULongRange} [pan] - The pan level of the camera.\n * @property {ULongRange} [tilt] - The tilt level of the camera.\n * @property {ULongRange} [zoom] - The zoom level of the camera.\n * @property {MediaTrackCapabilities} [nativeMediaTrackCapabilities] - The native track capabilities.\n */ /**\n * @typedef {Object} ExtendedMediaTrackConstraints\n * @property {MediaTrackConstraints & {pan: boolean, tilt: boolean, zoom: boolean}} video - The video constraints.\n * @property {MediaTrackConstraints | boolean} audio - The audio constraints.\n */ // @ts-check\n/**\n * Clamps number within the inclusive `min` and `max` bounds,\n * making sure it does not go beyond them on either side.\n * If `min` is greater than `max` the parameters are swapped to support inverted ranges.\n *\n * @param {number} value - The number to clamp.\n * @param {number} lower - The lower bound.\n * @param {number} upper - The upper bound.\n * @throws {TypeError} - If one or more of the arguments passed is not a number.\n * @returns {number} - The clamped number.\n * @example\n *\n * clamp(10, -5, 5);\n * // => 5\n *\n * clamp(-10, -5, 5);\n * // => -5\n *\n * clamp(-15, 0, 100);\n * // => 0\n *\n * clamp(120, 0, 100);\n * // => 100\n *\n * clamp(-5, NaN, 5); // If any of lower or upper bound are `NaN`, they will be converted to `0`.\n * // => 0\n *\n * clamp(120, 100, 0); // The order of lower and upper bounds is reversed (100 > 0)\n * // => 100\n */ const $02ad8beec419df62$export$7d15b64cf5a3a4c4 = (value, lower, upper)=>{\n    if (Number.isNaN(lower)) lower = 0;\n    if (Number.isNaN(upper)) upper = 0;\n    return Math.min(Math.max(value, Math.min(lower, upper)), Math.max(lower, upper));\n};\n\n\nconst $c290816263f90981$var$COMPONENT_NAME = \"capture-photo\";\nconst $c290816263f90981$var$styles = /* css */ `\n  :host {\n    display: block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden],\n  ::slotted([hidden]) {\n    display: none;\n  }\n\n  video {\n    display: block;\n  }\n\n  #output:empty {\n    display: none;\n  }\n`;\nconst $c290816263f90981$var$template = document.createElement(\"template\");\n$c290816263f90981$var$template.innerHTML = /* html */ `\n  <style>${$c290816263f90981$var$styles}</style>\n\n  <video part=\"video\" playsinline></video>\n\n  <canvas hidden></canvas>\n\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n\n    <slot name=\"facing-mode-button\" hidden>\n      <button part=\"facing-mode-button\" type=\"button\">\n        <slot name=\"facing-mode-button-content\">Toggle facing mode</slot>\n      </button>\n    </slot>\n\n    <slot name=\"actions\"></slot>\n  </div>\n\n  <slot></slot>\n\n  <div part=\"output-container\" id=\"output\"></div>\n`;\n/**\n * @summary A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n * @documentation https://github.com/georapbox/capture-photo-element\n *\n * @tagname capture-photo This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} autoPlay - Whether or not to start the video stream automatically.\n * @property {boolean} noImage - Whether or not to show the captured image.\n * @property {string} facingMode - The facing mode of the camera.\n * @property {string} cameraResolution - The resolution of the camera.\n * @property {number} pan - The pan value of the camera.\n * @property {number} tilt - The tilt value of the camera.\n * @property {number} zoom - The zoom value of the camera.\n * @property {boolean} loading - Whether or not the video stream is loading.\n * @property {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n *\n * @atttribute {boolean} auto-play - Reflects the autoPlay property.\n * @atttribute {boolean} no-image - Reflects the noImage property.\n * @atttribute {string} facing-mode - Reflects the facingMode property.\n * @atttribute {string} camera-resolution - Reflects the cameraResolution property.\n * @atttribute {number} pan - Reflects the pan property.\n * @atttribute {number} tilt - Reflects the tilt property.\n * @atttribute {number} zoom - Reflects the zoom property.\n * @atttribute {boolean} loading - Reflects the loading property.\n * @atttribute {boolean} calculate-file-size - Reflects the calculateFileSize property.\n *\n * @slot capture-button - The capture button.\n * @slot capture-button-content - The capture button content.\n * @slot facing-mode-button - The facing mode button.\n * @slot facing-mode-button-content - The facing mode button content.\n * @slot actions - The actions container.\n * @slot - A default un-named slot to add content inside the component.\n *\n * @csspart video - The video element.\n * @csspart actions-container - The actions container.\n * @csspart capture-button - The capture button.\n * @csspart facing-mode-button - The facing mode button.\n * @csspart output-container - The output container.\n * @csspart output-image - The output image.\n *\n * @event capture-photo:video-play - Fires when the video stream is successfully playing.\n * @event capture-photo:success - Fires when the photo is successfully captured.\n * @event capture-photo:error - Fires when an error occurs.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method isSupported - Static method. Checks if the MediaDevices.getUserMedia() method is supported.\n * @method startVideoStream - Instance method. Starts the video stream.\n * @method stopVideoStream - Instance method. Stops the video stream.\n * @method capture - Instance method. Captures a photo.\n * @method getSupportedConstraints - Instance method. Gets the supported constraints.\n * @method getTrackCapabilities - Instance method. Gets the track capabilities.\n * @method getTrackSettings - Instance method. Gets the track settings.\n */ class $c290816263f90981$export$cc30a98fe3890794 extends HTMLElement {\n    /** @type {MediaTrackSupportedConstraints | {}}*/ #supportedConstraints = {};\n    /** @type {Nullable<MediaStream>} */ #stream = null;\n    /** @type {Nullable<HTMLCanvasElement>} */ #canvasElement = null;\n    /** @type {Nullable<HTMLElement>} */ #outputElement = null;\n    /** @type {Nullable<HTMLVideoElement>} */ #videoElement = null;\n    /** @type {Nullable<HTMLSlotElement>} */ #captureButtonSlot = null;\n    /** @type {Nullable<HTMLButtonElement | Element>} */ #captureButton = null;\n    /** @type {Nullable<HTMLSlotElement>} */ #facingModeButtonSlot = null;\n    /** @type {Nullable<HTMLButtonElement | Element>} */ #facingModeButton = null;\n    constructor(){\n        super();\n        this.#supportedConstraints = this.getSupportedConstraints();\n        if (!this.shadowRoot) {\n            const shadowRoot = this.attachShadow({\n                mode: \"open\"\n            });\n            shadowRoot.appendChild($c290816263f90981$var$template.content.cloneNode(true));\n        }\n    }\n    static get observedAttributes() {\n        return [\n            \"no-image\",\n            \"facing-mode\",\n            \"camera-resolution\",\n            \"pan\",\n            \"tilt\",\n            \"zoom\"\n        ];\n    }\n    /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */ attributeChangedCallback(name, oldValue, newValue) {\n        if (!this.isConnected) return;\n        /** @type {ExtendedMediaTrackCapabilities} */ const trackCapabilities = this.getTrackCapabilities();\n        const trackSettings = this.getTrackSettings();\n        if (name === \"no-image\" && oldValue !== newValue) this.#emptyOutputElement();\n        if (name === \"facing-mode\" && oldValue !== newValue && \"facingMode\" in this.#supportedConstraints) {\n            const isValidFacingMode = [\n                \"user\",\n                \"environment\"\n            ].includes(this.facingMode || \"\");\n            if (\"facingMode\" in trackSettings && isValidFacingMode) {\n                this.stopVideoStream();\n                this.startVideoStream();\n            }\n        }\n        if (name === \"camera-resolution\" && oldValue !== newValue) {\n            if (typeof this.cameraResolution === \"string\" && this.cameraResolution.trim().length > 0) {\n                const [width = 0, height = 0] = this.cameraResolution.split(\"x\").map((x)=>Number(x));\n                if (width > 0 && height > 0 && \"width\" in trackCapabilities && \"height\" in trackCapabilities) {\n                    const widthInAllowedRange = trackCapabilities.width?.min && trackCapabilities.width?.max ? width >= trackCapabilities?.width?.min && width <= trackCapabilities?.width?.max : false;\n                    const heightInAllowedRange = trackCapabilities.height?.min && trackCapabilities.height?.max ? height >= trackCapabilities?.height?.min && height <= trackCapabilities?.height?.max : false;\n                    if (\"width\" in trackSettings && \"height\" in trackSettings && widthInAllowedRange && heightInAllowedRange) {\n                        this.stopVideoStream();\n                        this.startVideoStream();\n                    }\n                }\n            }\n        }\n        if (name === \"pan\" && oldValue !== newValue && \"pan\" in this.#supportedConstraints) {\n            const panInAllowedRange = \"pan\" in trackCapabilities && trackCapabilities.pan?.min && trackCapabilities.pan?.max ? this.pan >= trackCapabilities.pan.min && this.pan <= trackCapabilities.pan.max : false;\n            if (\"pan\" in trackSettings && typeof this.pan === \"number\" && panInAllowedRange) this.#applyPTZ(\"pan\", this.pan);\n        }\n        if (name === \"tilt\" && oldValue !== newValue && \"tilt\" in this.#supportedConstraints) {\n            const tiltInAllowedRange = \"tilt\" in trackCapabilities && trackCapabilities.tilt?.min && trackCapabilities.tilt?.max ? this.tilt >= trackCapabilities.tilt.min && this.tilt <= trackCapabilities.tilt.max : false;\n            if (\"tilt\" in trackSettings && typeof this.tilt === \"number\" && tiltInAllowedRange) this.#applyPTZ(\"tilt\", this.tilt);\n        }\n        if (name === \"zoom\" && oldValue !== newValue && \"zoom\" in this.#supportedConstraints) {\n            const zoomInAllowedRange = \"zoom\" in trackCapabilities && trackCapabilities.zoom?.min && trackCapabilities.zoom?.max ? this.zoom >= trackCapabilities.zoom.min && this.zoom <= trackCapabilities.zoom.max : false;\n            if (\"zoom\" in trackSettings && typeof this.zoom === \"number\" && zoomInAllowedRange) this.#applyPTZ(\"zoom\", this.zoom);\n        }\n    }\n    /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */ connectedCallback() {\n        this.#upgradeProperty(\"autpoPlay\");\n        this.#upgradeProperty(\"noImage\");\n        this.#upgradeProperty(\"facingMode\");\n        this.#upgradeProperty(\"cameraResolution\");\n        this.#upgradeProperty(\"pan\");\n        this.#upgradeProperty(\"tilt\");\n        this.#upgradeProperty(\"zoom\");\n        this.#upgradeProperty(\"calculateFileSize\");\n        this.#canvasElement = this.shadowRoot?.querySelector(\"canvas\") || null;\n        this.#outputElement = this.shadowRoot?.getElementById(\"output\") || null;\n        this.#videoElement = this.shadowRoot?.querySelector(\"video\") || null;\n        this.#captureButtonSlot = this.shadowRoot?.querySelector('slot[name=\"capture-button\"]') || null;\n        this.#captureButton = this.#getCaptureButton();\n        this.#facingModeButtonSlot = this.shadowRoot?.querySelector('slot[name=\"facing-mode-button\"]') || null;\n        this.#facingModeButton = this.#getFacingModeButton();\n        this.#videoElement?.addEventListener(\"loadedmetadata\", this.#onVideoLoadedMetaData);\n        this.#captureButtonSlot?.addEventListener(\"slotchange\", this.#onCaptureButtonSlotChange);\n        this.#captureButton?.addEventListener(\"click\", this.#onCapturePhotoButtonClick);\n        this.#facingModeButtonSlot?.addEventListener(\"slotchange\", this.#onFacingModeButtonSlotChange);\n        this.#facingModeButton?.addEventListener(\"click\", this.#onFacingModeButtonClick);\n        if (!$c290816263f90981$export$cc30a98fe3890794.isSupported()) return this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:error`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                error: {\n                    name: \"NotSupportedError\",\n                    message: \"Not supported\"\n                }\n            }\n        }));\n        if (this.autoPlay) this.startVideoStream();\n    }\n    /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */ disconnectedCallback() {\n        this.stopVideoStream();\n        this.#facingModeButton?.removeEventListener(\"click\", this.#onFacingModeButtonClick);\n        this.#captureButton?.removeEventListener(\"click\", this.#onCapturePhotoButtonClick);\n        this.#videoElement?.removeEventListener(\"canplay\", this.#onVideoLoadedMetaData);\n        this.#captureButtonSlot?.removeEventListener(\"slotchange\", this.#onCaptureButtonSlotChange);\n        this.#facingModeButtonSlot?.removeEventListener(\"slotchange\", this.#onFacingModeButtonSlotChange);\n    }\n    /**\n   * @type {boolean} autoPlay - Whether or not to start the video stream automatically.\n   * @attribute auto-play - Reflects the autoPlay attribute.\n   */ get autoPlay() {\n        return this.hasAttribute(\"auto-play\");\n    }\n    set autoPlay(value) {\n        this.toggleAttribute(\"auto-play\", !!value);\n    }\n    /**\n   * @type {boolean} noImage - Whether or not to show the captured image.\n   * @attribute no-image - Reflects the noImage attribute.\n   */ get noImage() {\n        return this.hasAttribute(\"no-image\");\n    }\n    set noImage(value) {\n        this.toggleAttribute(\"no-image\", !!value);\n    }\n    /**\n   * @type {string} facingMode - The facing mode of the camera.\n   * @attribute facing-mode - Reflects the facingMode attribute.\n   */ get facingMode() {\n        return this.getAttribute(\"facing-mode\") || \"user\";\n    }\n    set facingMode(value) {\n        this.setAttribute(\"facing-mode\", value);\n    }\n    /**\n   * @type {string} cameraResolution - The resolution of the camera.\n   * @attribute camera-resolution - Reflects the cameraResolution attribute.\n   */ get cameraResolution() {\n        return this.getAttribute(\"camera-resolution\") || \"\";\n    }\n    set cameraResolution(value) {\n        this.setAttribute(\"camera-resolution\", value);\n    }\n    /**\n   * @type {number} pan - The pan value of the camera.\n   * @attribute pan - Reflects the pan attribute.\n   */ get pan() {\n        return Number(this.getAttribute(\"pan\")) || 0;\n    }\n    set pan(value) {\n        this.setAttribute(\"pan\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {number} tilt - The tilt value of the camera.\n   * @attribute tilt - Reflects the tilt attribute.\n   */ get tilt() {\n        return Number(this.getAttribute(\"tilt\")) || 0;\n    }\n    set tilt(value) {\n        this.setAttribute(\"tilt\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {number} zoom - The zoom value of the camera.\n   * @attribute zoom - Reflects the zoom attribute.\n   */ get zoom() {\n        return Number(this.getAttribute(\"zoom\")) || 1;\n    }\n    set zoom(value) {\n        this.setAttribute(\"zoom\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {boolean} loading - Whether or not the video stream is loading.\n   * @attribute loading - Reflects the loading attribute.\n   */ get loading() {\n        return this.hasAttribute(\"loading\");\n    }\n    /**\n   * @type {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n   * @attribute calculate-file-size - Reflects the calculateFileSize attribute.\n   */ get calculateFileSize() {\n        return this.hasAttribute(\"calculate-file-size\");\n    }\n    set calculateFileSize(value) {\n        this.toggleAttribute(\"calculate-file-size\", !!value);\n    }\n    /**\n   * Handles the click event of the facing mode button.\n   *\n   * @param {*} evt - The click event.\n   */ #onFacingModeButtonClick = (evt)=>{\n        evt.preventDefault();\n        if (this.loading) return;\n        this.facingMode = this.facingMode === \"user\" || !this.facingMode ? \"environment\" : \"user\";\n    };\n    /**\n   * Handles the click event of the capture button.\n   *\n   * @param {*} evt - The click event.\n   */ #onCapturePhotoButtonClick = (evt)=>{\n        evt.preventDefault();\n        this.capture();\n    };\n    /**\n   * Handles the loadedmetadata event of the video element.\n   *\n   * @param {*} evt - The loadedmetadata event.\n   */ #onVideoLoadedMetaData = (evt)=>{\n        const video = evt.target;\n        video.play().then(()=>{\n            this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:video-play`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    video: video\n                }\n            }));\n        }).catch(/** @param {Error} error */ (error)=>{\n            this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:error`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        }).finally(()=>{\n            this.removeAttribute(\"loading\");\n        });\n    };\n    /**\n   * Removes all child nodes from the output element.\n   */ #emptyOutputElement() {\n        if (!this.#outputElement) return;\n        Array.from(this.#outputElement.childNodes).forEach((node)=>node.remove());\n    }\n    /**\n   * Applies the pan, tilt or zoom constraint.\n   *\n   * @param {'pan' | 'tilt' | 'zoom'} constraintName - The name of the constraint.\n   * @param {number} constraintValue - The value of the constraint.\n   */ #applyPTZ(constraintName, constraintValue) {\n        if (!this.#stream || !constraintName || !constraintValue) return;\n        const [track] = this.#stream.getVideoTracks();\n        /** @type {ExtendedMediaTrackCapabilities} */ const trackCapabilities = this.getTrackCapabilities();\n        const trackSettings = this.getTrackSettings();\n        if (constraintName in trackSettings) track.applyConstraints({\n            advanced: [\n                {\n                    [constraintName]: (0, $02ad8beec419df62$export$7d15b64cf5a3a4c4)(Number(constraintValue), trackCapabilities[constraintName]?.min || 1, trackCapabilities[constraintName]?.max || 1)\n                }\n            ]\n        });\n    }\n    /**\n   * Handles the slotchange event of the capture button slot.\n   *\n   * @param {*} evt - The slotchange event.\n   */ #onCaptureButtonSlotChange = (evt)=>{\n        if (evt.target?.name === \"capture-button\") {\n            this.#captureButton?.removeEventListener(\"click\", this.#onCapturePhotoButtonClick);\n            this.#captureButton = this.#getCaptureButton();\n            if (this.#captureButton) {\n                this.#captureButton.addEventListener(\"click\", this.#onCapturePhotoButtonClick);\n                if (this.#captureButton.nodeName !== \"BUTTON\" && !this.#captureButton.hasAttribute(\"role\")) this.#captureButton.setAttribute(\"role\", \"button\");\n            }\n        }\n    };\n    /**\n   * Handles the slotchange event of the facing mode button slot.\n   *\n   * @param {*} evt - The slotchange event.\n   */ #onFacingModeButtonSlotChange = (evt)=>{\n        if (evt.target?.name === \"facing-mode-button\") {\n            this.#facingModeButton?.removeEventListener(\"click\", this.#onFacingModeButtonClick);\n            this.#facingModeButton = this.#getFacingModeButton();\n            if (this.#facingModeButton) {\n                this.#facingModeButton.addEventListener(\"click\", this.#onFacingModeButtonClick);\n                if (this.#facingModeButton.nodeName !== \"BUTTON\" && !this.#facingModeButton.hasAttribute(\"role\")) this.#facingModeButton.setAttribute(\"role\", \"button\");\n            }\n        }\n    };\n    /**\n   * Returns the facing mode button.\n   *\n   * @returns {Nullable<HTMLButtonElement | Element>}\n   */ #getFacingModeButton() {\n        if (!this.#facingModeButtonSlot) return null;\n        return this.#facingModeButtonSlot.assignedElements({\n            flatten: true\n        }).find((el)=>{\n            return el.nodeName === \"BUTTON\" || el.getAttribute(\"slot\") === \"facing-mode-button\";\n        }) || null;\n    }\n    /**\n   * Returns the capture button.\n   *\n   * @returns {Nullable<HTMLButtonElement | Element>}\n   */ #getCaptureButton() {\n        if (!this.#captureButtonSlot) return null;\n        return this.#captureButtonSlot.assignedElements({\n            flatten: true\n        }).find((el)=>{\n            return el.nodeName === \"BUTTON\" || el.getAttribute(\"slot\") === \"capture-button\";\n        }) || null;\n    }\n    /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'autpoPlay' | 'noImage' | 'facingMode' | 'cameraResolution' | 'pan' | 'tilt' | 'zoom' | 'calculateFileSize'} prop\n   */ #upgradeProperty(prop) {\n        /** @type {any} */ const instance = this;\n        if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n            const value = instance[prop];\n            delete instance[prop];\n            instance[prop] = value;\n        }\n    }\n    /**\n   * Starts the video stream.\n   *\n   * @returns Promise<void>\n   */ async startVideoStream() {\n        if (!$c290816263f90981$export$cc30a98fe3890794.isSupported() || this.#stream) return;\n        this.setAttribute(\"loading\", \"\");\n        /** @type {ExtendedMediaTrackConstraints} */ const constraints = {\n            video: {\n                facingMode: {\n                    ideal: this.facingMode || \"user\"\n                },\n                pan: true,\n                tilt: true,\n                zoom: true\n            },\n            audio: false\n        };\n        if (typeof this.cameraResolution === \"string\" && this.cameraResolution.trim().length > 0) {\n            const [width = 0, height = 0] = this.cameraResolution.split(\"x\").map((x)=>Number(x));\n            if (width > 0 && height > 0) {\n                constraints.video.width = width;\n                constraints.video.height = height;\n            }\n        }\n        try {\n            this.#stream = await navigator.mediaDevices.getUserMedia(constraints);\n            if (this.#videoElement) this.#videoElement.srcObject = this.#stream;\n            this.#applyPTZ(\"pan\", this.pan);\n            this.#applyPTZ(\"tilt\", this.tilt);\n            this.#applyPTZ(\"zoom\", this.zoom);\n            const trackSettings = this.getTrackSettings();\n            if (\"facingMode\" in trackSettings && this.#facingModeButtonSlot) this.#facingModeButtonSlot.hidden = false;\n        } catch (error) {\n            this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:error`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        } finally{\n            this.removeAttribute(\"loading\");\n        }\n    }\n    /**\n   * Stops the video stream.\n   */ stopVideoStream() {\n        if (!this.#videoElement || !this.#stream) return;\n        const [track] = this.#stream.getVideoTracks();\n        track?.stop();\n        this.#videoElement.srcObject = null;\n        this.#stream = null;\n    }\n    /**\n   * Captures a photo using the element's properties.\n   *\n   * @returns Promise<void>\n   */ async capture() {\n        if (this.loading || !this.#canvasElement || !this.#videoElement) return;\n        try {\n            const ctx = this.#canvasElement.getContext(\"2d\");\n            const width = this.#videoElement.videoWidth;\n            const height = this.#videoElement.videoHeight;\n            this.#canvasElement.width = width;\n            this.#canvasElement.height = height;\n            ctx?.drawImage(this.#videoElement, 0, 0, width, height);\n            const dataURI = this.#canvasElement.toDataURL(\"image/png\");\n            if (typeof dataURI === \"string\" && dataURI.includes(\"data:image\")) {\n                if (!this.noImage) {\n                    const image = new Image();\n                    image.src = dataURI;\n                    image.width = width;\n                    image.height = height;\n                    image.setAttribute(\"part\", \"output-image\");\n                    this.#emptyOutputElement();\n                    this.#outputElement?.appendChild(image);\n                }\n                /** @type {{ dataURI: string, width: number, height: number, size?: number }} */ const eventDetail = {\n                    dataURI: dataURI,\n                    width: width,\n                    height: height\n                };\n                if (this.calculateFileSize) try {\n                    const file = await fetch(dataURI);\n                    const blob = await file.blob();\n                    const size = blob.size;\n                    if (size) eventDetail.size = size;\n                } catch (err) {\n                // Fail silently...\n                }\n                this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:success`, {\n                    bubbles: true,\n                    composed: true,\n                    detail: eventDetail\n                }));\n            }\n        } catch (error) {\n            this.dispatchEvent(new CustomEvent(`${$c290816263f90981$var$COMPONENT_NAME}:error`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        }\n    }\n    /**\n   * Returns an object based on the `MediaTrackSupportedConstraints` dictionary,\n   * whose member fields each specify one ofthe constrainable properties the user agent understands.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaDevices/getSupportedConstraints\n   * @returns {MediaTrackSupportedConstraints | {}}\n   */ getSupportedConstraints() {\n        if (!$c290816263f90981$export$cc30a98fe3890794.isSupported()) return {};\n        return navigator.mediaDevices.getSupportedConstraints() || {};\n    }\n    /**\n   * Returns a `MediaTrackCapabilities` object which specifies the values or range of values\n   * which each constrainable property, based upon the platform and user agent.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getCapabilities\n   * @returns {MediaTrackCapabilities | {}}\n   */ getTrackCapabilities() {\n        if (!this.#stream) return {};\n        const [track] = this.#stream.getVideoTracks();\n        if (track && typeof track.getCapabilities === \"function\") return track.getCapabilities() || {};\n        return {};\n    }\n    /**\n   * Returns a `MediaTrackSettings` object containing the current values of each of\n   * the constrainable properties for the current MediaStreamTrack.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getSettings\n   * @returns {MediaTrackSettings | {}}\n   */ getTrackSettings() {\n        if (!this.#stream) return {};\n        const [track] = this.#stream.getVideoTracks();\n        if (track && typeof track.getSettings === \"function\") return track.getSettings() || {};\n        return {};\n    }\n    /**\n   * Checks if the `MediaDevices.getUserMedia()` method is supported.\n   *\n   * @returns {boolean}\n   */ static isSupported() {\n        return Boolean(navigator.mediaDevices?.getUserMedia);\n    }\n    /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='capture-photo'] - The name of the custom element.\n   * @example\n   *\n   * CapturePhoto.defineCustomElement('my-capture-photo');\n   */ static defineCustomElement(elementName = $c290816263f90981$var$COMPONENT_NAME) {\n        if (typeof window !== \"undefined\" && !window.customElements.get(elementName)) window.customElements.define(elementName, $c290816263f90981$export$cc30a98fe3890794);\n    }\n}\n\n\n(0, $c290816263f90981$export$cc30a98fe3890794).defineCustomElement();\n\n\nexport {$c290816263f90981$export$cc30a98fe3890794 as CapturePhoto};\n//# sourceMappingURL=capture-photo-defined.js.map\n","import { CapturePhoto } from './capture-photo.js';\n\nCapturePhoto.defineCustomElement();\n\nexport { CapturePhoto };\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * @typedef {Object} ExtendedMediaTrackCapabilities\n * @property {ULongRange} [width] - The width of the video track.\n * @property {ULongRange} [height] - The height of the video track.\n * @property {ULongRange} [pan] - The pan level of the camera.\n * @property {ULongRange} [tilt] - The tilt level of the camera.\n * @property {ULongRange} [zoom] - The zoom level of the camera.\n * @property {MediaTrackCapabilities} [nativeMediaTrackCapabilities] - The native track capabilities.\n */\n\n/**\n * @typedef {Object} ExtendedMediaTrackConstraints\n * @property {MediaTrackConstraints & {pan: boolean, tilt: boolean, zoom: boolean}} video - The video constraints.\n * @property {MediaTrackConstraints | boolean} audio - The audio constraints.\n */\n\nimport { clamp } from './utils/clamp.js';\n\nconst COMPONENT_NAME = 'capture-photo';\n\nconst styles = /* css */`\n  :host {\n    display: block;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *::before,\n  :host *::after {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden],\n  ::slotted([hidden]) {\n    display: none;\n  }\n\n  video {\n    display: block;\n  }\n\n  #output:empty {\n    display: none;\n  }\n`;\n\nconst template = document.createElement('template');\n\ntemplate.innerHTML = /* html */`\n  <style>${styles}</style>\n\n  <video part=\"video\" playsinline></video>\n\n  <canvas hidden></canvas>\n\n  <div part=\"actions-container\">\n    <slot name=\"capture-button\">\n      <button part=\"capture-button\" type=\"button\">\n        <slot name=\"capture-button-content\">Capture photo</slot>\n      </button>\n    </slot>\n\n    <slot name=\"facing-mode-button\" hidden>\n      <button part=\"facing-mode-button\" type=\"button\">\n        <slot name=\"facing-mode-button-content\">Toggle facing mode</slot>\n      </button>\n    </slot>\n\n    <slot name=\"actions\"></slot>\n  </div>\n\n  <slot></slot>\n\n  <div part=\"output-container\" id=\"output\"></div>\n`;\n\n/**\n * @summary A custom element that implements the MediaDevices.getUserMedia() method of the MediaDevices interface to capture a photo in the browser.\n * @documentation https://github.com/georapbox/capture-photo-element\n *\n * @tagname capture-photo This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} autoPlay - Whether or not to start the video stream automatically.\n * @property {boolean} noImage - Whether or not to show the captured image.\n * @property {string} facingMode - The facing mode of the camera.\n * @property {string} cameraResolution - The resolution of the camera.\n * @property {number} pan - The pan value of the camera.\n * @property {number} tilt - The tilt value of the camera.\n * @property {number} zoom - The zoom value of the camera.\n * @property {boolean} loading - Whether or not the video stream is loading.\n * @property {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n *\n * @atttribute {boolean} auto-play - Reflects the autoPlay property.\n * @atttribute {boolean} no-image - Reflects the noImage property.\n * @atttribute {string} facing-mode - Reflects the facingMode property.\n * @atttribute {string} camera-resolution - Reflects the cameraResolution property.\n * @atttribute {number} pan - Reflects the pan property.\n * @atttribute {number} tilt - Reflects the tilt property.\n * @atttribute {number} zoom - Reflects the zoom property.\n * @atttribute {boolean} loading - Reflects the loading property.\n * @atttribute {boolean} calculate-file-size - Reflects the calculateFileSize property.\n *\n * @slot capture-button - The capture button.\n * @slot capture-button-content - The capture button content.\n * @slot facing-mode-button - The facing mode button.\n * @slot facing-mode-button-content - The facing mode button content.\n * @slot actions - The actions container.\n * @slot - A default un-named slot to add content inside the component.\n *\n * @csspart video - The video element.\n * @csspart actions-container - The actions container.\n * @csspart capture-button - The capture button.\n * @csspart facing-mode-button - The facing mode button.\n * @csspart output-container - The output container.\n * @csspart output-image - The output image.\n *\n * @event capture-photo:video-play - Fires when the video stream is successfully playing.\n * @event capture-photo:success - Fires when the photo is successfully captured.\n * @event capture-photo:error - Fires when an error occurs.\n *\n * @method defineCustomElement - Static method. Defines the custom element with the given name.\n * @method isSupported - Static method. Checks if the MediaDevices.getUserMedia() method is supported.\n * @method startVideoStream - Instance method. Starts the video stream.\n * @method stopVideoStream - Instance method. Stops the video stream.\n * @method capture - Instance method. Captures a photo.\n * @method getSupportedConstraints - Instance method. Gets the supported constraints.\n * @method getTrackCapabilities - Instance method. Gets the track capabilities.\n * @method getTrackSettings - Instance method. Gets the track settings.\n */\nclass CapturePhoto extends HTMLElement {\n  /** @type {MediaTrackSupportedConstraints | {}}*/\n  #supportedConstraints = {};\n\n  /** @type {Nullable<MediaStream>} */\n  #stream = null;\n\n  /** @type {Nullable<HTMLCanvasElement>} */\n  #canvasElement = null;\n\n  /** @type {Nullable<HTMLElement>} */\n  #outputElement = null;\n\n  /** @type {Nullable<HTMLVideoElement>} */\n  #videoElement = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #captureButtonSlot = null;\n\n  /** @type {Nullable<HTMLButtonElement | Element>} */\n  #captureButton = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #facingModeButtonSlot = null;\n\n  /** @type {Nullable<HTMLButtonElement | Element>} */\n  #facingModeButton = null;\n\n  constructor() {\n    super();\n\n    this.#supportedConstraints = this.getSupportedConstraints();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n  }\n\n  static get observedAttributes() {\n    return ['no-image', 'facing-mode', 'camera-resolution', 'pan', 'tilt', 'zoom'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (!this.isConnected) {\n      return;\n    }\n\n    /** @type {ExtendedMediaTrackCapabilities} */\n    const trackCapabilities = this.getTrackCapabilities();\n    const trackSettings = this.getTrackSettings();\n\n    if (name === 'no-image' && oldValue !== newValue) {\n      this.#emptyOutputElement();\n    }\n\n    if (name === 'facing-mode' && oldValue !== newValue && 'facingMode' in this.#supportedConstraints) {\n      const isValidFacingMode = ['user', 'environment'].includes(this.facingMode || '');\n\n      if ('facingMode' in trackSettings && isValidFacingMode) {\n        this.stopVideoStream();\n        this.startVideoStream();\n      }\n    }\n\n    if (name === 'camera-resolution' && oldValue !== newValue) {\n      if (typeof this.cameraResolution === 'string' && this.cameraResolution.trim().length > 0) {\n        const [width = 0, height = 0] = this.cameraResolution.split('x').map(x => Number(x));\n\n        if (width > 0 && height > 0 && 'width' in trackCapabilities && 'height' in trackCapabilities) {\n          const widthInAllowedRange = trackCapabilities.width?.min && trackCapabilities.width?.max\n            ? width >= trackCapabilities?.width?.min && width <= trackCapabilities?.width?.max\n            : false;\n\n          const heightInAllowedRange = trackCapabilities.height?.min && trackCapabilities.height?.max\n            ? height >= trackCapabilities?.height?.min && height <= trackCapabilities?.height?.max\n            : false;\n\n          if ('width' in trackSettings && 'height' in trackSettings && widthInAllowedRange && heightInAllowedRange) {\n            this.stopVideoStream();\n            this.startVideoStream();\n          }\n        }\n      }\n    }\n\n    if (name === 'pan' && oldValue !== newValue && 'pan' in this.#supportedConstraints) {\n      const panInAllowedRange = 'pan' in trackCapabilities && trackCapabilities.pan?.min && trackCapabilities.pan?.max\n        ? this.pan >= trackCapabilities.pan.min && this.pan <= trackCapabilities.pan.max\n        : false;\n\n      if ('pan' in trackSettings && typeof this.pan === 'number' && panInAllowedRange) {\n        this.#applyPTZ('pan', this.pan);\n      }\n    }\n\n    if (name === 'tilt' && oldValue !== newValue && 'tilt' in this.#supportedConstraints) {\n      const tiltInAllowedRange = 'tilt' in trackCapabilities && trackCapabilities.tilt?.min && trackCapabilities.tilt?.max\n        ? this.tilt >= trackCapabilities.tilt.min && this.tilt <= trackCapabilities.tilt.max\n        : false;\n\n      if ('tilt' in trackSettings && typeof this.tilt === 'number' && tiltInAllowedRange) {\n        this.#applyPTZ('tilt', this.tilt);\n      }\n    }\n\n    if (name === 'zoom' && oldValue !== newValue && 'zoom' in this.#supportedConstraints) {\n      const zoomInAllowedRange = 'zoom' in trackCapabilities && trackCapabilities.zoom?.min && trackCapabilities.zoom?.max\n        ? this.zoom >= trackCapabilities.zoom.min && this.zoom <= trackCapabilities.zoom.max\n        : false;\n\n      if ('zoom' in trackSettings && typeof this.zoom === 'number' && zoomInAllowedRange) {\n        this.#applyPTZ('zoom', this.zoom);\n      }\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('autpoPlay');\n    this.#upgradeProperty('noImage');\n    this.#upgradeProperty('facingMode');\n    this.#upgradeProperty('cameraResolution');\n    this.#upgradeProperty('pan');\n    this.#upgradeProperty('tilt');\n    this.#upgradeProperty('zoom');\n    this.#upgradeProperty('calculateFileSize');\n\n    this.#canvasElement = this.shadowRoot?.querySelector('canvas') || null;\n    this.#outputElement = this.shadowRoot?.getElementById('output') || null;\n    this.#videoElement = this.shadowRoot?.querySelector('video') || null;\n    this.#captureButtonSlot = this.shadowRoot?.querySelector('slot[name=\"capture-button\"]') || null;\n    this.#captureButton = this.#getCaptureButton();\n    this.#facingModeButtonSlot = this.shadowRoot?.querySelector('slot[name=\"facing-mode-button\"]') || null;\n    this.#facingModeButton = this.#getFacingModeButton();\n\n    this.#videoElement?.addEventListener('loadedmetadata', this.#onVideoLoadedMetaData);\n    this.#captureButtonSlot?.addEventListener('slotchange', this.#onCaptureButtonSlotChange);\n    this.#captureButton?.addEventListener('click', this.#onCapturePhotoButtonClick);\n    this.#facingModeButtonSlot?.addEventListener('slotchange', this.#onFacingModeButtonSlotChange);\n    this.#facingModeButton?.addEventListener('click', this.#onFacingModeButtonClick);\n\n    if (!CapturePhoto.isSupported()) {\n      return this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:error`, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          error: {\n            name: 'NotSupportedError',\n            message: 'Not supported'\n          }\n        }\n      }));\n    }\n\n    if (this.autoPlay) {\n      this.startVideoStream();\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.stopVideoStream();\n    this.#facingModeButton?.removeEventListener('click', this.#onFacingModeButtonClick);\n    this.#captureButton?.removeEventListener('click', this.#onCapturePhotoButtonClick);\n    this.#videoElement?.removeEventListener('canplay', this.#onVideoLoadedMetaData);\n    this.#captureButtonSlot?.removeEventListener('slotchange', this.#onCaptureButtonSlotChange);\n    this.#facingModeButtonSlot?.removeEventListener('slotchange', this.#onFacingModeButtonSlotChange);\n  }\n\n  /**\n   * @type {boolean} autoPlay - Whether or not to start the video stream automatically.\n   * @attribute auto-play - Reflects the autoPlay attribute.\n   */\n  get autoPlay() {\n    return this.hasAttribute('auto-play');\n  }\n\n  set autoPlay(value) {\n    this.toggleAttribute('auto-play', !!value);\n  }\n\n  /**\n   * @type {boolean} noImage - Whether or not to show the captured image.\n   * @attribute no-image - Reflects the noImage attribute.\n   */\n  get noImage() {\n    return this.hasAttribute('no-image');\n  }\n\n  set noImage(value) {\n    this.toggleAttribute('no-image', !!value);\n  }\n\n  /**\n   * @type {string} facingMode - The facing mode of the camera.\n   * @attribute facing-mode - Reflects the facingMode attribute.\n   */\n  get facingMode() {\n    return this.getAttribute('facing-mode') || 'user';\n  }\n\n  set facingMode(value) {\n    this.setAttribute('facing-mode', value);\n  }\n\n  /**\n   * @type {string} cameraResolution - The resolution of the camera.\n   * @attribute camera-resolution - Reflects the cameraResolution attribute.\n   */\n  get cameraResolution() {\n    return this.getAttribute('camera-resolution') || '';\n  }\n\n  set cameraResolution(value) {\n    this.setAttribute('camera-resolution', value);\n  }\n\n  /**\n   * @type {number} pan - The pan value of the camera.\n   * @attribute pan - Reflects the pan attribute.\n   */\n  get pan() {\n    return Number(this.getAttribute('pan')) || 0;\n  }\n\n  set pan(value) {\n    this.setAttribute('pan', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} tilt - The tilt value of the camera.\n   * @attribute tilt - Reflects the tilt attribute.\n   */\n  get tilt() {\n    return Number(this.getAttribute('tilt')) || 0;\n  }\n\n  set tilt(value) {\n    this.setAttribute('tilt', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} zoom - The zoom value of the camera.\n   * @attribute zoom - Reflects the zoom attribute.\n   */\n  get zoom() {\n    return Number(this.getAttribute('zoom')) || 1;\n  }\n\n  set zoom(value) {\n    this.setAttribute('zoom', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} loading - Whether or not the video stream is loading.\n   * @attribute loading - Reflects the loading attribute.\n   */\n  get loading() {\n    return this.hasAttribute('loading');\n  }\n\n  /**\n   * @type {boolean} calculateFileSize - Whether or not to calculate the file size of the captured image.\n   * @attribute calculate-file-size - Reflects the calculateFileSize attribute.\n   */\n  get calculateFileSize() {\n    return this.hasAttribute('calculate-file-size');\n  }\n\n  set calculateFileSize(value) {\n    this.toggleAttribute('calculate-file-size', !!value);\n  }\n\n  /**\n   * Handles the click event of the facing mode button.\n   *\n   * @param {*} evt - The click event.\n   */\n  #onFacingModeButtonClick = evt => {\n    evt.preventDefault();\n\n    if (this.loading) {\n      return;\n    }\n\n    this.facingMode = this.facingMode === 'user' || !this.facingMode ? 'environment' : 'user';\n  };\n\n  /**\n   * Handles the click event of the capture button.\n   *\n   * @param {*} evt - The click event.\n   */\n  #onCapturePhotoButtonClick = evt => {\n    evt.preventDefault();\n    this.capture();\n  };\n\n  /**\n   * Handles the loadedmetadata event of the video element.\n   *\n   * @param {*} evt - The loadedmetadata event.\n   */\n  #onVideoLoadedMetaData = evt => {\n    const video = evt.target;\n\n    video.play().then(() => {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:video-play`, {\n        bubbles: true,\n        composed: true,\n        detail: { video }\n      }));\n    }).catch(/** @param {Error} error */error => {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:error`, {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    }).finally(() => {\n      this.removeAttribute('loading');\n    });\n  };\n\n  /**\n   * Removes all child nodes from the output element.\n   */\n  #emptyOutputElement() {\n    if (!this.#outputElement) {\n      return;\n    }\n\n    Array.from(this.#outputElement.childNodes).forEach(node => node.remove());\n  }\n\n  /**\n   * Applies the pan, tilt or zoom constraint.\n   *\n   * @param {'pan' | 'tilt' | 'zoom'} constraintName - The name of the constraint.\n   * @param {number} constraintValue - The value of the constraint.\n   */\n  #applyPTZ(constraintName, constraintValue) {\n    if (!this.#stream || !constraintName || !constraintValue) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n    /** @type {ExtendedMediaTrackCapabilities} */\n    const trackCapabilities = this.getTrackCapabilities();\n    const trackSettings = this.getTrackSettings();\n\n    if (constraintName in trackSettings) {\n      track.applyConstraints({\n        advanced: [{\n          [constraintName]: clamp(Number(constraintValue), trackCapabilities[constraintName]?.min || 1, trackCapabilities[constraintName]?.max || 1)\n        }]\n      });\n    }\n  }\n\n  /**\n   * Handles the slotchange event of the capture button slot.\n   *\n   * @param {*} evt - The slotchange event.\n   */\n  #onCaptureButtonSlotChange = evt => {\n    if (evt.target?.name === 'capture-button') {\n      this.#captureButton?.removeEventListener('click', this.#onCapturePhotoButtonClick);\n      this.#captureButton = this.#getCaptureButton();\n\n      if (this.#captureButton) {\n        this.#captureButton.addEventListener('click', this.#onCapturePhotoButtonClick);\n\n        if (this.#captureButton.nodeName !== 'BUTTON' && !this.#captureButton.hasAttribute('role')) {\n          this.#captureButton.setAttribute('role', 'button');\n        }\n      }\n    }\n  };\n\n  /**\n   * Handles the slotchange event of the facing mode button slot.\n   *\n   * @param {*} evt - The slotchange event.\n   */\n  #onFacingModeButtonSlotChange = evt => {\n    if (evt.target?.name === 'facing-mode-button') {\n      this.#facingModeButton?.removeEventListener('click', this.#onFacingModeButtonClick);\n      this.#facingModeButton = this.#getFacingModeButton();\n\n      if (this.#facingModeButton) {\n        this.#facingModeButton.addEventListener('click', this.#onFacingModeButtonClick);\n\n        if (this.#facingModeButton.nodeName !== 'BUTTON' && !this.#facingModeButton.hasAttribute('role')) {\n          this.#facingModeButton.setAttribute('role', 'button');\n        }\n      }\n    }\n  };\n\n  /**\n   * Returns the facing mode button.\n   *\n   * @returns {Nullable<HTMLButtonElement | Element>}\n   */\n  #getFacingModeButton() {\n    if (!this.#facingModeButtonSlot) {\n      return null;\n    }\n\n    return this.#facingModeButtonSlot.assignedElements({ flatten: true }).find(el => {\n      return el.nodeName === 'BUTTON' || el.getAttribute('slot') === 'facing-mode-button';\n    }) || null;\n  }\n\n  /**\n   * Returns the capture button.\n   *\n   * @returns {Nullable<HTMLButtonElement | Element>}\n   */\n  #getCaptureButton() {\n    if (!this.#captureButtonSlot) {\n      return null;\n    }\n\n    return this.#captureButtonSlot.assignedElements({ flatten: true }).find(el => {\n      return el.nodeName === 'BUTTON' || el.getAttribute('slot') === 'capture-button';\n    }) || null;\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and\n   * set a value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would\n   * miss that property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'autpoPlay' | 'noImage' | 'facingMode' | 'cameraResolution' | 'pan' | 'tilt' | 'zoom' | 'calculateFileSize'} prop\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Starts the video stream.\n   *\n   * @returns Promise<void>\n   */\n  async startVideoStream() {\n    if (!CapturePhoto.isSupported() || this.#stream) {\n      return;\n    }\n\n    this.setAttribute('loading', '');\n\n    /** @type {ExtendedMediaTrackConstraints} */\n    const constraints = {\n      video: {\n        facingMode: {\n          ideal: this.facingMode || 'user'\n        },\n        pan: true,\n        tilt: true,\n        zoom: true\n      },\n      audio: false\n    };\n\n    if (typeof this.cameraResolution === 'string' && this.cameraResolution.trim().length > 0) {\n      const [width = 0, height = 0] = this.cameraResolution.split('x').map(x => Number(x));\n\n      if (width > 0 && height > 0) {\n        constraints.video.width = width;\n        constraints.video.height = height;\n      }\n    }\n\n    try {\n      this.#stream = await navigator.mediaDevices.getUserMedia(constraints);\n\n      if (this.#videoElement) {\n        this.#videoElement.srcObject = this.#stream;\n      }\n\n      this.#applyPTZ('pan', this.pan);\n      this.#applyPTZ('tilt', this.tilt);\n      this.#applyPTZ('zoom', this.zoom);\n\n      const trackSettings = this.getTrackSettings();\n\n      if ('facingMode' in trackSettings && this.#facingModeButtonSlot) {\n        this.#facingModeButtonSlot.hidden = false;\n      }\n    } catch (error) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:error`, {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    } finally {\n      this.removeAttribute('loading');\n    }\n  }\n\n  /**\n   * Stops the video stream.\n   */\n  stopVideoStream() {\n    if (!this.#videoElement || !this.#stream) {\n      return;\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    track?.stop();\n    this.#videoElement.srcObject = null;\n    this.#stream = null;\n  }\n\n  /**\n   * Captures a photo using the element's properties.\n   *\n   * @returns Promise<void>\n   */\n  async capture() {\n    if (this.loading || !this.#canvasElement || !this.#videoElement) {\n      return;\n    }\n\n    try {\n      const ctx = this.#canvasElement.getContext('2d');\n      const width = this.#videoElement.videoWidth;\n      const height = this.#videoElement.videoHeight;\n      this.#canvasElement.width = width;\n      this.#canvasElement.height = height;\n      ctx?.drawImage(this.#videoElement, 0, 0, width, height);\n      const dataURI = this.#canvasElement.toDataURL('image/png');\n\n      if (typeof dataURI === 'string' && dataURI.includes('data:image')) {\n        if (!this.noImage) {\n          const image = new Image();\n          image.src = dataURI;\n          image.width = width;\n          image.height = height;\n          image.setAttribute('part', 'output-image');\n          this.#emptyOutputElement();\n          this.#outputElement?.appendChild(image);\n        }\n\n        /** @type {{ dataURI: string, width: number, height: number, size?: number }} */\n        const eventDetail = { dataURI, width, height };\n\n        if (this.calculateFileSize) {\n          try {\n            const file = await fetch(dataURI);\n            const blob = await file.blob();\n            const size = blob.size;\n\n            if (size) {\n              eventDetail.size = size;\n            }\n          } catch (err) {\n            // Fail silently...\n          }\n        }\n\n        this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:success`, {\n          bubbles: true,\n          composed: true,\n          detail: eventDetail\n        }));\n      }\n    } catch (error) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}:error`, {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    }\n  }\n\n  /**\n   * Returns an object based on the `MediaTrackSupportedConstraints` dictionary,\n   * whose member fields each specify one ofthe constrainable properties the user agent understands.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaDevices/getSupportedConstraints\n   * @returns {MediaTrackSupportedConstraints | {}}\n   */\n  getSupportedConstraints() {\n    if (!CapturePhoto.isSupported()) {\n      return {};\n    }\n\n    return navigator.mediaDevices.getSupportedConstraints() || {};\n  }\n\n  /**\n   * Returns a `MediaTrackCapabilities` object which specifies the values or range of values\n   * which each constrainable property, based upon the platform and user agent.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getCapabilities\n   * @returns {MediaTrackCapabilities | {}}\n   */\n  getTrackCapabilities() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getCapabilities === 'function') {\n      return track.getCapabilities() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Returns a `MediaTrackSettings` object containing the current values of each of\n   * the constrainable properties for the current MediaStreamTrack.\n   *\n   * @see https://developer.mozilla.org/docs/Web/API/MediaStreamTrack/getSettings\n   * @returns {MediaTrackSettings | {}}\n   */\n  getTrackSettings() {\n    if (!this.#stream) {\n      return {};\n    }\n\n    const [track] = this.#stream.getVideoTracks();\n\n    if (track && typeof track.getSettings === 'function') {\n      return track.getSettings() || {};\n    }\n\n    return {};\n  }\n\n  /**\n   * Checks if the `MediaDevices.getUserMedia()` method is supported.\n   *\n   * @returns {boolean}\n   */\n  static isSupported() {\n    return Boolean(navigator.mediaDevices?.getUserMedia);\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='capture-photo'] - The name of the custom element.\n   * @example\n   *\n   * CapturePhoto.defineCustomElement('my-capture-photo');\n   */\n  static defineCustomElement(elementName = COMPONENT_NAME) {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, CapturePhoto);\n    }\n  }\n}\n\nexport { CapturePhoto };\n","// @ts-check\n\n/**\n * Clamps number within the inclusive `min` and `max` bounds,\n * making sure it does not go beyond them on either side.\n * If `min` is greater than `max` the parameters are swapped to support inverted ranges.\n *\n * @param {number} value - The number to clamp.\n * @param {number} lower - The lower bound.\n * @param {number} upper - The upper bound.\n * @throws {TypeError} - If one or more of the arguments passed is not a number.\n * @returns {number} - The clamped number.\n * @example\n *\n * clamp(10, -5, 5);\n * // => 5\n *\n * clamp(-10, -5, 5);\n * // => -5\n *\n * clamp(-15, 0, 100);\n * // => 0\n *\n * clamp(120, 0, 100);\n * // => 100\n *\n * clamp(-5, NaN, 5); // If any of lower or upper bound are `NaN`, they will be converted to `0`.\n * // => 0\n *\n * clamp(120, 100, 0); // The order of lower and upper bounds is reversed (100 > 0)\n * // => 100\n */\nexport const clamp = (value, lower, upper) => {\n  if (Number.isNaN(lower)) {\n    lower = 0;\n  }\n\n  if (Number.isNaN(upper)) {\n    upper = 0;\n  }\n\n  return Math.min(Math.max(value, Math.min(lower, upper)), Math.max(lower, upper));\n};\n","Object.defineProperty({},\"ModalElement\",{get:function(){return o},set:void 0,enumerable:!0,configurable:!0});let e=document.createElement(\"template\"),t=/* css */`\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-header-spacing: 1rem;\n    --me-body-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-body-background-color: transparent;\n    --me-footer-background-color: transparent;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open] {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open] {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: 300ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0.4375rem;\n    border: none;\n    background-color: transparent;\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;e.innerHTML=/* html */`\n  <style>${t}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;/**\n * @summary A custom element that renders a modal dialog.\n * @documentation https://github.com/georapbox/modal-element\n *\n * @tagname modal-element - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} open - Determines whether the modal is open or not.\n * @property {boolean} staticBackdrop - Determines whether the modal should close when the backdrop is clicked.\n * @property {boolean} noHeader - Determines whether the modal should have a header or not.\n * @property {boolean} noAnimations - Determines whether the modal should have animations or not when opening and closing.\n * @property {boolean} noCloseButton - Determines whether the modal should have a default close button or not.\n * @property {boolean} fullscreen - Determines whether the modal should be fullscreen or not.\n * @property {boolean} preserveOverflow - Determines whether the overflow of the body should be preserved when the modal is open.\n * @property {string} placement - Determines the placement of the modal.\n * @property {string} closeLabel - The label of the default close button, used as the aria-label attribute of the close button.\n *\n * @attribute {boolean} open - Reflects the open property.\n * @attribute {boolean} static-backdrop - Reflects the staticBackdrop property.\n * @attribute {boolean} no-header - Reflects the noHeader property.\n * @attribute {boolean} no-animations - Reflects the noAnimations property.\n * @attribute {boolean} no-close-button - Reflects the noCloseButton property.\n * @attribute {boolean} fullscreen - Reflects the fullscreen property.\n * @attribute {boolean} preserve-overflow - Reflects the preserveOverflow property.\n * @attribute {string} placement - Reflects the placement property.\n * @attribute {string} close-label - Reflects the closeLabel property.\n *\n * @slot - The modal's main content (default/unnamed slot).\n * @slot header - The modal's header content, usually a title.\n * @slot footer - The modals' footer content. Usually used for buttons or other actions.\n * @slot close - The content of the close button that appears in the modal's header.\n *\n * @cssproperty --me-width - The width of the modal. Default is 32rem.\n * @cssproperty --me-height - The height of the modal. Default is fit-content.\n * @cssproperty --me-border-color - The border color of the modal. Default is initial.\n * @cssproperty --me-border-style - The border style of the modal. Default is solid.\n * @cssproperty --me-border-width - The border width of the modal. Default is initial.\n * @cssproperty --me-border-radius - The border radius of the modal. Default is 0.\n * @cssproperty --me-box-shadow - The box shadow of the modal. Default is none.\n * @cssproperty --me-background-color - The background color of the modal. Default is canvas.\n * @cssproperty --me-header-spacing - The spacing of the header. Default is 1rem.\n * @cssproperty --me-body-spacing - The spacing of the body. Default is 1rem.\n * @cssproperty --me-footer-spacing - The spacing of the footer. Default is 1rem.\n * @cssproperty --me-header-background-color - The background color of the header. Default is transparent.\n * @cssproperty --me-body-background-color - The background color of the body. Default is transparent.\n * @cssproperty --me-footer-background-color - The background color of the footer. Default is transparent.\n * @cssproperty --me-close-border-radius - The border radius of the close button. Default is 0.\n * @cssproperty --me-close-background-color - The background color of the close button. Default is transparent.\n * @cssproperty --me-backdrop-background - The background shorthand property of the backdrop. Default is rgba(0, 0, 0, 0.5).\n * @cssproperty --me-backdrop-filter - The backdrop filter property of the backdrop. Default is none.\n *\n * @csspart base - The base wrapper of the modal.\n * @csspart panel - The panel wrapper of the modal.\n * @csspart header - The header wrapper of the modal.\n * @csspart title - The title wrapper of the modal.\n * @csspart body - The body wrapper of the modal.\n * @csspart footer - The footer wrapper of the modal.\n * @csspart close - The close button of the modal.\n *\n * @fires me-open - Dispatched when the modal is opened.\n * @fires me-close - Dispatched when the modal is closed.\n * @fires me-request-close - Dispatched when the modal is about to close.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method show - Instance method. Opens the modal if it is closed, otherwise does nothing.\n * @method hide - Instance method. Closes the modal if it is open, otherwise does nothing.\n */class o extends HTMLElement{/** @type {Nullable<HTMLDialogElement>} */#e=null;/** @type {Nullable<HTMLSlotElement>} */#t=null;/** @type {Nullable<HTMLSlotElement>} */#o=null;/** @type {ReturnType<typeof setTimeout> | undefined} */#l=void 0;constructor(){if(super(),!this.shadowRoot){let t=this.attachShadow({mode:\"open\"});t.appendChild(e.content.cloneNode(!0))}this.shadowRoot&&(this.#e=this.shadowRoot.querySelector(\"dialog\"),this.#t=this.shadowRoot.querySelector('slot[name=\"footer\"]'),this.#o=this.shadowRoot.querySelector('slot[name=\"close\"]'))}static get observedAttributes(){return[\"open\",\"no-header\",\"no-animations\",\"no-close-button\",\"close-label\"]}/**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */attributeChangedCallback(e,t,o){if(null!==this.#e){if(\"open\"===e&&t!==o&&(this.open?(this.#e.showModal(),this.dispatchEvent(new CustomEvent(\"me-open\",{bubbles:!0,composed:!0,detail:{element:this}})),document.body&&!this.preserveOverflow&&(document.body.style.overflow=\"hidden\")):this.#e.close()),\"no-header\"===e&&t!==o){/** @type {Nullable<HTMLElement>} */let e=this.#e.querySelector(\".dialog__header\");null!==e&&(e.hidden=this.noHeader)}if(\"no-animations\"===e&&t!==o&&this.#e.classList.toggle(\"dialog--no-animations\",this.noAnimations),\"no-close-button\"===e&&t!==o){/** @type {Nullable<HTMLElement>} */let e=this.#e.querySelector(\".dialog__close\");null!==e&&(e.hidden=this.noCloseButton)}\"close-label\"===e&&t!==o&&this.#a()}}/**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */connectedCallback(){this.#i(\"open\"),this.#i(\"staticBackdrop\"),this.#i(\"noHeader\"),this.#i(\"noAnimations\"),this.#i(\"noCloseButton\"),this.#i(\"fullscreen\"),this.#i(\"preserveOverflow\"),this.#i(\"placement\"),this.#i(\"closeLabel\"),this.#e?.addEventListener(\"click\",this.#n),this.#e?.addEventListener(\"close\",this.#r),this.#e?.addEventListener(\"cancel\",this.#s),this.#e?.querySelector('form[method=\"dialog\"]')?.addEventListener(\"submit\",this.#d),this.#t?.addEventListener(\"slotchange\",this.#c),this.#o?.addEventListener(\"slotchange\",this.#h)}/**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */disconnectedCallback(){this.#l&&clearTimeout(this.#l),this.#e?.addEventListener(\"click\",this.#n),this.#e?.removeEventListener(\"close\",this.#r),this.#e?.removeEventListener(\"cancel\",this.#s),this.#e?.querySelector('form[method=\"dialog\"]')?.removeEventListener(\"submit\",this.#d),this.#t?.removeEventListener(\"slotchange\",this.#c),this.#o?.removeEventListener(\"slotchange\",this.#h)}/**\n   * Deternimes if the modal is open or not.\n   *\n   * @type {boolean} - True if the modal is open, otherwise false.\n   * @default false\n   * @attribute open - Reflects the open property.\n   */get open(){return this.hasAttribute(\"open\")}set open(e){this.toggleAttribute(\"open\",!!e)}/**\n   * Determines whether the modal should close when the backdrop is clicked.\n   *\n   * @type {boolean} - True if the modal should close when the backdrop is clicked, otherwise false.\n   * @default false\n   * @attribute static-backdrop - Reflects the staticBackdrop property.\n   */get staticBackdrop(){return this.hasAttribute(\"static-backdrop\")}set staticBackdrop(e){this.toggleAttribute(\"static-backdrop\",!!e)}/**\n   * Determines whether the modal should have a header or not.\n   *\n   * @type {boolean} - True if the modal should have a header, otherwise false.\n   * @default false\n   * @attribute no-header - Reflects the noHeader property.\n   */get noHeader(){return this.hasAttribute(\"no-header\")}set noHeader(e){this.toggleAttribute(\"no-header\",!!e)}/**\n   * Determines whether the modal should have animations or not when opening and closing.\n   *\n   * @type {boolean} - True if the modal should have animations, otherwise false.\n   * @default false\n   * @attribute no-animations - Reflects the noAnimations property.\n   */get noAnimations(){return this.hasAttribute(\"no-animations\")}set noAnimations(e){this.toggleAttribute(\"no-animations\",!!e)}/**\n   * Determines whether the modal should have a default close button or not.\n   *\n   * @type {boolean} - True if the modal should have a close button, otherwise false.\n   * @default false\n   * @attribute no-close-button - Reflects the noCloseButton property.\n   */get noCloseButton(){return this.hasAttribute(\"no-close-button\")}set noCloseButton(e){this.toggleAttribute(\"no-close-button\",!!e)}/**\n   * Determines whether the modal should be fullscreen or not.\n   *\n   * @type {boolean} - True if the modal should be fullscreen, otherwise false.\n   * @default false\n   * @attribute fullscreen - Reflects the fullscreen property.\n   */get fullscreen(){return this.hasAttribute(\"fullscreen\")}set fullscreen(e){this.toggleAttribute(\"fullscreen\",!!e)}/**\n   * Determines whether the overflow of the body should be preserved when the modal is open.\n   *\n   * @type {boolean} - True if the overflow of the body should be preserved, otherwise false.\n   * @default false\n   * @attribute preserve-overflow - Reflects the preserveOverflow property.\n   */get preserveOverflow(){return this.hasAttribute(\"preserve-overflow\")}set preserveOverflow(e){this.toggleAttribute(\"preserve-overflow\",!!e)}/**\n   * Determines the placement of the modal.\n   * Possible values are 'top-start', 'top-center', 'top-end', 'center-start', 'center', 'center-end', 'bottom-start', 'bottom-center', 'bottom-end'.\n   *\n   * @type {string}\n   * @default 'center'\n   * @attribute placement - Reflects the placement property.\n   */get placement(){return this.getAttribute(\"placement\")||\"center\"}set placement(e){this.setAttribute(\"placement\",null!=e?e.toString():e)}/**\n   * The label of the default close button, used as the aria-label attribute of the close button.\n   * If user provides text content for the close button using the `close` slot, this property is ignored and the aria-label attribute is removed.\n   *\n   * @type {string}\n   * @default 'Close'\n   * @attribute close-label - Reflects the closeLabel property.\n   */get closeLabel(){return this.getAttribute(\"close-label\")||\"Close\"}set closeLabel(e){this.setAttribute(\"close-label\",null!=e?e.toString():e)}/**\n   * Updates the aria-label attribute of the close button.\n   * If the slot for the close button has text content, the aria-label attribute is removed to allow the text content to be used as the label.\n   * Otherwise, the aria-label attribute is set to the `closeLabel` property.\n   *\n   * @returns\n   */#a(){if(null===this.#e)return;let e=this.#e.querySelector(\".dialog__close\");if(null===e)return;let t=this.#o?.assignedElements()||[],o=t?.some(e=>e.textContent?.replace(/\\s/g,\"\")!==\"\");o?e.removeAttribute(\"aria-label\"):e.setAttribute(\"aria-label\",this.closeLabel)}/**\n   * Applies a pulse effect on the dialog.\n   */#g(){this.#l||(this.#e?.classList.add(\"dialog--pulse\"),this.#l=setTimeout(()=>{this.#e?.classList.remove(\"dialog--pulse\"),clearTimeout(this.#l),this.#l=void 0},300))}/**\n   * Handles the close event of the dialog.\n   */#r=()=>{// This is required because the dialog element does not reset\n// the open property when the dialog is closed by the user.\nthis.open=!1,this.dispatchEvent(new CustomEvent(\"me-close\",{bubbles:!0,composed:!0,detail:{element:this}})),document.body&&!this.preserveOverflow&&(document.body.style.overflow=\"\")};/**\n   * Handles the cancel event of the dialog.\n   * This event is fired when the user presses the escape key.\n   *\n   * @param {Event} evt - The cancel event.\n   */#s=e=>{let t=this.#m(\"escape-key\");this.dispatchEvent(t),t.defaultPrevented&&(e.preventDefault(),this.noAnimations||this.#g())};/**\n   * Handles the click event of the close button.\n   *\n   * @param {Event} evt - The click event.\n   */#d=e=>{let t=this.#m(\"close-button\");this.dispatchEvent(t),t.defaultPrevented&&(e.preventDefault(),this.noAnimations||this.#g())};/**\n   * Handles the click event of the dialog.\n   *\n   * @param {MouseEvent} evt - The click event.\n   */#n=e=>{let t=e.target,o=e.currentTarget;// Close the dialog when the backdrop is clicked.\nif(t===o){let e=this.#m(\"backdrop-click\");this.dispatchEvent(e),e.defaultPrevented||this.staticBackdrop?this.noAnimations||this.#g():this.hide()}// Close the dialog when external invoker is clicked.\nif(t instanceof HTMLElement&&null!==t.closest(\"[data-me-close]\")){let e=this.#m(\"external-invoker\");this.dispatchEvent(e),e.defaultPrevented?this.noAnimations||this.#g():this.hide()}};/**\n   * Handles the slotchange event of the footer slot.\n   */#c=()=>{if(null===this.#e)return;/** @type {Nullable<HTMLElement>} */let e=this.#e.querySelector(\".dialog__footer\");if(null===e)return;let t=this.#t?.assignedNodes(),o=!!t&&t.length>0;e.hidden=!o};/**\n   * Handles the slotchange event of the close slot.\n   */#h=()=>{this.#a()};/**\n   * Creates a request close event.\n   *\n   * @param {CloseRequestReason} reason - The reason that the modal is about to close.\n   */#m(e){return new CustomEvent(\"me-request-close\",{bubbles:!0,composed:!0,cancelable:!0,detail:{reason:e,element:this}})}/**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'open' | 'staticBackdrop' | 'noHeader' | 'noAnimations' | 'noCloseButton' | 'fullscreen' | 'preserveOverflow' | 'placement' | 'closeLabel'} prop - The property to upgrade.\n   */#i(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}}/**\n   * Opens the modal if it is closed, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.show();\n   */show(){this.open||(this.open=!0)}/**\n   * Closes the modal if it is open, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.hide();\n   */hide(){this.open&&(this.open=!1)}/**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='modal-element']\n   * @example\n   * ModalElement.defineCustomElement('my-modal');\n   */static defineCustomElement(e=\"modal-element\"){\"undefined\"==typeof window||window.customElements.get(e)||window.customElements.define(e,o)}}o.defineCustomElement();export{o as ModalElement};//# sourceMappingURL=modal-element-defined.js.map\n\n//# sourceMappingURL=modal-element-defined.js.map\n","function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $180b6dcf923bafc7$exports = {};\n\n$parcel$export($180b6dcf923bafc7$exports, \"ModalElement\", function () { return $180b6dcf923bafc7$export$32589115725b904b; });\n// @ts-check\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */ /**\n * Available values for the request close reason.\n *\n * @typedef {'close-button' | 'escape-key' | 'backdrop-click' | 'external-invoker'} CloseRequestReason\n */ const $180b6dcf923bafc7$var$PULSE_ANIMATION_DURATION = 300; // milliseconds\nconst $180b6dcf923bafc7$var$template = document.createElement(\"template\");\nconst $180b6dcf923bafc7$var$styles = /* css */ `\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-header-spacing: 1rem;\n    --me-body-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-body-background-color: transparent;\n    --me-footer-background-color: transparent;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open] {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open] {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: ${$180b6dcf923bafc7$var$PULSE_ANIMATION_DURATION}ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0.4375rem;\n    border: none;\n    background-color: transparent;\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;\n$180b6dcf923bafc7$var$template.innerHTML = /* html */ `\n  <style>${$180b6dcf923bafc7$var$styles}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;\n/**\n * @summary A custom element that renders a modal dialog.\n * @documentation https://github.com/georapbox/modal-element\n *\n * @tagname modal-element - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} open - Determines whether the modal is open or not.\n * @property {boolean} staticBackdrop - Determines whether the modal should close when the backdrop is clicked.\n * @property {boolean} noHeader - Determines whether the modal should have a header or not.\n * @property {boolean} noAnimations - Determines whether the modal should have animations or not when opening and closing.\n * @property {boolean} noCloseButton - Determines whether the modal should have a default close button or not.\n * @property {boolean} fullscreen - Determines whether the modal should be fullscreen or not.\n * @property {boolean} preserveOverflow - Determines whether the overflow of the body should be preserved when the modal is open.\n * @property {string} placement - Determines the placement of the modal.\n * @property {string} closeLabel - The label of the default close button, used as the aria-label attribute of the close button.\n *\n * @attribute {boolean} open - Reflects the open property.\n * @attribute {boolean} static-backdrop - Reflects the staticBackdrop property.\n * @attribute {boolean} no-header - Reflects the noHeader property.\n * @attribute {boolean} no-animations - Reflects the noAnimations property.\n * @attribute {boolean} no-close-button - Reflects the noCloseButton property.\n * @attribute {boolean} fullscreen - Reflects the fullscreen property.\n * @attribute {boolean} preserve-overflow - Reflects the preserveOverflow property.\n * @attribute {string} placement - Reflects the placement property.\n * @attribute {string} close-label - Reflects the closeLabel property.\n *\n * @slot - The modal's main content (default/unnamed slot).\n * @slot header - The modal's header content, usually a title.\n * @slot footer - The modals' footer content. Usually used for buttons or other actions.\n * @slot close - The content of the close button that appears in the modal's header.\n *\n * @cssproperty --me-width - The width of the modal. Default is 32rem.\n * @cssproperty --me-height - The height of the modal. Default is fit-content.\n * @cssproperty --me-border-color - The border color of the modal. Default is initial.\n * @cssproperty --me-border-style - The border style of the modal. Default is solid.\n * @cssproperty --me-border-width - The border width of the modal. Default is initial.\n * @cssproperty --me-border-radius - The border radius of the modal. Default is 0.\n * @cssproperty --me-box-shadow - The box shadow of the modal. Default is none.\n * @cssproperty --me-background-color - The background color of the modal. Default is canvas.\n * @cssproperty --me-header-spacing - The spacing of the header. Default is 1rem.\n * @cssproperty --me-body-spacing - The spacing of the body. Default is 1rem.\n * @cssproperty --me-footer-spacing - The spacing of the footer. Default is 1rem.\n * @cssproperty --me-header-background-color - The background color of the header. Default is transparent.\n * @cssproperty --me-body-background-color - The background color of the body. Default is transparent.\n * @cssproperty --me-footer-background-color - The background color of the footer. Default is transparent.\n * @cssproperty --me-close-border-radius - The border radius of the close button. Default is 0.\n * @cssproperty --me-close-background-color - The background color of the close button. Default is transparent.\n * @cssproperty --me-backdrop-background - The background shorthand property of the backdrop. Default is rgba(0, 0, 0, 0.5).\n * @cssproperty --me-backdrop-filter - The backdrop filter property of the backdrop. Default is none.\n *\n * @csspart base - The base wrapper of the modal.\n * @csspart panel - The panel wrapper of the modal.\n * @csspart header - The header wrapper of the modal.\n * @csspart title - The title wrapper of the modal.\n * @csspart body - The body wrapper of the modal.\n * @csspart footer - The footer wrapper of the modal.\n * @csspart close - The close button of the modal.\n *\n * @fires me-open - Dispatched when the modal is opened.\n * @fires me-close - Dispatched when the modal is closed.\n * @fires me-request-close - Dispatched when the modal is about to close.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method show - Instance method. Opens the modal if it is closed, otherwise does nothing.\n * @method hide - Instance method. Closes the modal if it is open, otherwise does nothing.\n */ class $180b6dcf923bafc7$export$32589115725b904b extends HTMLElement {\n    /** @type {Nullable<HTMLDialogElement>} */ #dialogEl = null;\n    /** @type {Nullable<HTMLSlotElement>} */ #footerSlotEl = null;\n    /** @type {Nullable<HTMLSlotElement>} */ #closeSlotEl = null;\n    /** @type {ReturnType<typeof setTimeout> | undefined} */ #pulseAnimationTimeout = void 0;\n    constructor(){\n        super();\n        if (!this.shadowRoot) {\n            const shadowRoot = this.attachShadow({\n                mode: \"open\"\n            });\n            shadowRoot.appendChild($180b6dcf923bafc7$var$template.content.cloneNode(true));\n        }\n        if (this.shadowRoot) {\n            this.#dialogEl = this.shadowRoot.querySelector(\"dialog\");\n            this.#footerSlotEl = this.shadowRoot.querySelector('slot[name=\"footer\"]');\n            this.#closeSlotEl = this.shadowRoot.querySelector('slot[name=\"close\"]');\n        }\n    }\n    static get observedAttributes() {\n        return [\n            \"open\",\n            \"no-header\",\n            \"no-animations\",\n            \"no-close-button\",\n            \"close-label\"\n        ];\n    }\n    /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */ attributeChangedCallback(name, oldValue, newValue) {\n        if (this.#dialogEl === null) return;\n        if (name === \"open\" && oldValue !== newValue) {\n            if (this.open) {\n                this.#dialogEl.showModal();\n                this.dispatchEvent(new CustomEvent(\"me-open\", {\n                    bubbles: true,\n                    composed: true,\n                    detail: {\n                        element: this\n                    }\n                }));\n                if (document.body && !this.preserveOverflow) document.body.style.overflow = \"hidden\";\n            } else this.#dialogEl.close();\n        }\n        if (name === \"no-header\" && oldValue !== newValue) {\n            /** @type {Nullable<HTMLElement>} */ const headerEl = this.#dialogEl.querySelector(\".dialog__header\");\n            if (headerEl !== null) headerEl.hidden = this.noHeader;\n        }\n        if (name === \"no-animations\" && oldValue !== newValue) this.#dialogEl.classList.toggle(\"dialog--no-animations\", this.noAnimations);\n        if (name === \"no-close-button\" && oldValue !== newValue) {\n            /** @type {Nullable<HTMLElement>} */ const closeBtnEl = this.#dialogEl.querySelector(\".dialog__close\");\n            if (closeBtnEl !== null) closeBtnEl.hidden = this.noCloseButton;\n        }\n        if (name === \"close-label\" && oldValue !== newValue) this.#updateCloseLabel();\n    }\n    /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */ connectedCallback() {\n        this.#upgradeProperty(\"open\");\n        this.#upgradeProperty(\"staticBackdrop\");\n        this.#upgradeProperty(\"noHeader\");\n        this.#upgradeProperty(\"noAnimations\");\n        this.#upgradeProperty(\"noCloseButton\");\n        this.#upgradeProperty(\"fullscreen\");\n        this.#upgradeProperty(\"preserveOverflow\");\n        this.#upgradeProperty(\"placement\");\n        this.#upgradeProperty(\"closeLabel\");\n        this.#dialogEl?.addEventListener(\"click\", this.#handleDialogClick);\n        this.#dialogEl?.addEventListener(\"close\", this.#handleDialogClose);\n        this.#dialogEl?.addEventListener(\"cancel\", this.#handleDialogCancel);\n        this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.addEventListener(\"submit\", this.#handleCloseButtonClick);\n        this.#footerSlotEl?.addEventListener(\"slotchange\", this.#handleFooterSlotChange);\n        this.#closeSlotEl?.addEventListener(\"slotchange\", this.#handleCloseSlotChange);\n    }\n    /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */ disconnectedCallback() {\n        this.#pulseAnimationTimeout && clearTimeout(this.#pulseAnimationTimeout);\n        this.#dialogEl?.addEventListener(\"click\", this.#handleDialogClick);\n        this.#dialogEl?.removeEventListener(\"close\", this.#handleDialogClose);\n        this.#dialogEl?.removeEventListener(\"cancel\", this.#handleDialogCancel);\n        this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.removeEventListener(\"submit\", this.#handleCloseButtonClick);\n        this.#footerSlotEl?.removeEventListener(\"slotchange\", this.#handleFooterSlotChange);\n        this.#closeSlotEl?.removeEventListener(\"slotchange\", this.#handleCloseSlotChange);\n    }\n    /**\n   * Deternimes if the modal is open or not.\n   *\n   * @type {boolean} - True if the modal is open, otherwise false.\n   * @default false\n   * @attribute open - Reflects the open property.\n   */ get open() {\n        return this.hasAttribute(\"open\");\n    }\n    set open(value) {\n        this.toggleAttribute(\"open\", !!value);\n    }\n    /**\n   * Determines whether the modal should close when the backdrop is clicked.\n   *\n   * @type {boolean} - True if the modal should close when the backdrop is clicked, otherwise false.\n   * @default false\n   * @attribute static-backdrop - Reflects the staticBackdrop property.\n   */ get staticBackdrop() {\n        return this.hasAttribute(\"static-backdrop\");\n    }\n    set staticBackdrop(value) {\n        this.toggleAttribute(\"static-backdrop\", !!value);\n    }\n    /**\n   * Determines whether the modal should have a header or not.\n   *\n   * @type {boolean} - True if the modal should have a header, otherwise false.\n   * @default false\n   * @attribute no-header - Reflects the noHeader property.\n   */ get noHeader() {\n        return this.hasAttribute(\"no-header\");\n    }\n    set noHeader(value) {\n        this.toggleAttribute(\"no-header\", !!value);\n    }\n    /**\n   * Determines whether the modal should have animations or not when opening and closing.\n   *\n   * @type {boolean} - True if the modal should have animations, otherwise false.\n   * @default false\n   * @attribute no-animations - Reflects the noAnimations property.\n   */ get noAnimations() {\n        return this.hasAttribute(\"no-animations\");\n    }\n    set noAnimations(value) {\n        this.toggleAttribute(\"no-animations\", !!value);\n    }\n    /**\n   * Determines whether the modal should have a default close button or not.\n   *\n   * @type {boolean} - True if the modal should have a close button, otherwise false.\n   * @default false\n   * @attribute no-close-button - Reflects the noCloseButton property.\n   */ get noCloseButton() {\n        return this.hasAttribute(\"no-close-button\");\n    }\n    set noCloseButton(value) {\n        this.toggleAttribute(\"no-close-button\", !!value);\n    }\n    /**\n   * Determines whether the modal should be fullscreen or not.\n   *\n   * @type {boolean} - True if the modal should be fullscreen, otherwise false.\n   * @default false\n   * @attribute fullscreen - Reflects the fullscreen property.\n   */ get fullscreen() {\n        return this.hasAttribute(\"fullscreen\");\n    }\n    set fullscreen(value) {\n        this.toggleAttribute(\"fullscreen\", !!value);\n    }\n    /**\n   * Determines whether the overflow of the body should be preserved when the modal is open.\n   *\n   * @type {boolean} - True if the overflow of the body should be preserved, otherwise false.\n   * @default false\n   * @attribute preserve-overflow - Reflects the preserveOverflow property.\n   */ get preserveOverflow() {\n        return this.hasAttribute(\"preserve-overflow\");\n    }\n    set preserveOverflow(value) {\n        this.toggleAttribute(\"preserve-overflow\", !!value);\n    }\n    /**\n   * Determines the placement of the modal.\n   * Possible values are 'top-start', 'top-center', 'top-end', 'center-start', 'center', 'center-end', 'bottom-start', 'bottom-center', 'bottom-end'.\n   *\n   * @type {string}\n   * @default 'center'\n   * @attribute placement - Reflects the placement property.\n   */ get placement() {\n        return this.getAttribute(\"placement\") || \"center\";\n    }\n    set placement(value) {\n        this.setAttribute(\"placement\", value != null ? value.toString() : value);\n    }\n    /**\n   * The label of the default close button, used as the aria-label attribute of the close button.\n   * If user provides text content for the close button using the `close` slot, this property is ignored and the aria-label attribute is removed.\n   *\n   * @type {string}\n   * @default 'Close'\n   * @attribute close-label - Reflects the closeLabel property.\n   */ get closeLabel() {\n        return this.getAttribute(\"close-label\") || \"Close\";\n    }\n    set closeLabel(value) {\n        this.setAttribute(\"close-label\", value != null ? value.toString() : value);\n    }\n    /**\n   * Updates the aria-label attribute of the close button.\n   * If the slot for the close button has text content, the aria-label attribute is removed to allow the text content to be used as the label.\n   * Otherwise, the aria-label attribute is set to the `closeLabel` property.\n   *\n   * @returns\n   */ #updateCloseLabel() {\n        if (this.#dialogEl === null) return;\n        const closeButtonEl = this.#dialogEl.querySelector(\".dialog__close\");\n        if (closeButtonEl === null) return;\n        const assignedElements = this.#closeSlotEl?.assignedElements() || [];\n        const hasTextContent = assignedElements?.some((el)=>el.textContent?.replace(/\\s/g, \"\") !== \"\");\n        hasTextContent ? closeButtonEl.removeAttribute(\"aria-label\") : closeButtonEl.setAttribute(\"aria-label\", this.closeLabel);\n    }\n    /**\n   * Applies a pulse effect on the dialog.\n   */ #applyPulseEffectOnDialog() {\n        if (this.#pulseAnimationTimeout) return;\n        this.#dialogEl?.classList.add(\"dialog--pulse\");\n        this.#pulseAnimationTimeout = setTimeout(()=>{\n            this.#dialogEl?.classList.remove(\"dialog--pulse\");\n            clearTimeout(this.#pulseAnimationTimeout);\n            this.#pulseAnimationTimeout = void 0;\n        }, $180b6dcf923bafc7$var$PULSE_ANIMATION_DURATION);\n    }\n    /**\n   * Handles the close event of the dialog.\n   */ #handleDialogClose = ()=>{\n        // This is required because the dialog element does not reset\n        // the open property when the dialog is closed by the user.\n        this.open = false;\n        this.dispatchEvent(new CustomEvent(\"me-close\", {\n            bubbles: true,\n            composed: true,\n            detail: {\n                element: this\n            }\n        }));\n        if (document.body && !this.preserveOverflow) document.body.style.overflow = \"\";\n    };\n    /**\n   * Handles the cancel event of the dialog.\n   * This event is fired when the user presses the escape key.\n   *\n   * @param {Event} evt - The cancel event.\n   */ #handleDialogCancel = (evt)=>{\n        const requestCloseEvent = this.#createRequestCloseEvent(\"escape-key\");\n        this.dispatchEvent(requestCloseEvent);\n        if (requestCloseEvent.defaultPrevented) {\n            evt.preventDefault();\n            !this.noAnimations && this.#applyPulseEffectOnDialog();\n        }\n    };\n    /**\n   * Handles the click event of the close button.\n   *\n   * @param {Event} evt - The click event.\n   */ #handleCloseButtonClick = (evt)=>{\n        const requestCloseEvent = this.#createRequestCloseEvent(\"close-button\");\n        this.dispatchEvent(requestCloseEvent);\n        if (requestCloseEvent.defaultPrevented) {\n            evt.preventDefault();\n            !this.noAnimations && this.#applyPulseEffectOnDialog();\n        }\n    };\n    /**\n   * Handles the click event of the dialog.\n   *\n   * @param {MouseEvent} evt - The click event.\n   */ #handleDialogClick = (evt)=>{\n        const target = evt.target;\n        const currentTarget = evt.currentTarget;\n        // Close the dialog when the backdrop is clicked.\n        if (target === currentTarget) {\n            const requestCloseEvent = this.#createRequestCloseEvent(\"backdrop-click\");\n            this.dispatchEvent(requestCloseEvent);\n            if (requestCloseEvent.defaultPrevented || this.staticBackdrop) !this.noAnimations && this.#applyPulseEffectOnDialog();\n            else this.hide();\n        }\n        // Close the dialog when external invoker is clicked.\n        if (target instanceof HTMLElement && target.closest(\"[data-me-close]\") !== null) {\n            const requestCloseEvent = this.#createRequestCloseEvent(\"external-invoker\");\n            this.dispatchEvent(requestCloseEvent);\n            if (requestCloseEvent.defaultPrevented) !this.noAnimations && this.#applyPulseEffectOnDialog();\n            else this.hide();\n        }\n    };\n    /**\n   * Handles the slotchange event of the footer slot.\n   */ #handleFooterSlotChange = ()=>{\n        if (this.#dialogEl === null) return;\n        /** @type {Nullable<HTMLElement>} */ const footerEl = this.#dialogEl.querySelector(\".dialog__footer\");\n        if (footerEl === null) return;\n        const footerSlotNodes = this.#footerSlotEl?.assignedNodes();\n        const hasFooterSlotNodes = footerSlotNodes ? footerSlotNodes.length > 0 : false;\n        footerEl.hidden = !hasFooterSlotNodes;\n    };\n    /**\n   * Handles the slotchange event of the close slot.\n   */ #handleCloseSlotChange = ()=>{\n        this.#updateCloseLabel();\n    };\n    /**\n   * Creates a request close event.\n   *\n   * @param {CloseRequestReason} reason - The reason that the modal is about to close.\n   */ #createRequestCloseEvent(reason) {\n        return new CustomEvent(\"me-request-close\", {\n            bubbles: true,\n            composed: true,\n            cancelable: true,\n            detail: {\n                reason: reason,\n                element: this\n            }\n        });\n    }\n    /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'open' | 'staticBackdrop' | 'noHeader' | 'noAnimations' | 'noCloseButton' | 'fullscreen' | 'preserveOverflow' | 'placement' | 'closeLabel'} prop - The property to upgrade.\n   */ #upgradeProperty(prop) {\n        /** @type {any} */ const instance = this;\n        if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n            const value = instance[prop];\n            delete instance[prop];\n            instance[prop] = value;\n        }\n    }\n    /**\n   * Opens the modal if it is closed, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.show();\n   */ show() {\n        if (this.open) return;\n        this.open = true;\n    }\n    /**\n   * Closes the modal if it is open, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.hide();\n   */ hide() {\n        if (!this.open) return;\n        this.open = false;\n    }\n    /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='modal-element']\n   * @example\n   * ModalElement.defineCustomElement('my-modal');\n   */ static defineCustomElement(elementName = \"modal-element\") {\n        if (typeof window !== \"undefined\" && !window.customElements.get(elementName)) window.customElements.define(elementName, $180b6dcf923bafc7$export$32589115725b904b);\n    }\n}\n\n\n(0, $180b6dcf923bafc7$export$32589115725b904b).defineCustomElement();\n\n\nexport {$180b6dcf923bafc7$export$32589115725b904b as ModalElement};\n//# sourceMappingURL=modal-element-defined.js.map\n","import { ModalElement } from './modal-element.js';\n\nModalElement.defineCustomElement();\n\nexport { ModalElement };\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\n/**\n * Available values for the request close reason.\n *\n * @typedef {'close-button' | 'escape-key' | 'backdrop-click' | 'external-invoker'} CloseRequestReason\n */\n\nconst PULSE_ANIMATION_DURATION = 300; // milliseconds\nconst template = document.createElement('template');\n\nconst styles = /* css */`\n  :host {\n    --me-width: 32rem;\n    --me-height: fit-content;\n    --me-border-color: initial;\n    --me-border-style: solid;\n    --me-border-width: initial;\n    --me-border-radius: 0;\n    --me-box-shadow: none;\n    --me-background-color: canvas;\n    --me-header-spacing: 1rem;\n    --me-body-spacing: 1rem;\n    --me-footer-spacing: 1rem;\n    --me-header-background-color: transparent;\n    --me-body-background-color: transparent;\n    --me-footer-background-color: transparent;\n    --me-close-border-radius: 0;\n    --me-close-background-color: transparent;\n    --me-backdrop-background: rgba(0, 0, 0, 0.5);\n    --me-backdrop-filter: none;\n\n    display: contents;\n    box-sizing: border-box;\n  }\n\n  :host *,\n  :host *:after,\n  :host *:before {\n    box-sizing: inherit;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  /* Dialog */\n  .dialog {\n    --dialog-placement-margin: calc((2em + 6px) / 2);\n\n    width: var(--me-width);\n    height: var(--me-height);\n    padding: 0;\n    border-color: var(--me-border-color);\n    border-style: var(--me-border-style);\n    border-width: var(--me-border-width);\n    border-radius: var(--me-border-radius);\n    box-shadow: var(--me-box-shadow);\n    background-color: var(--me-background-color);\n  }\n\n  .dialog[open] {\n    display: flex;\n  }\n\n  :host([fullscreen]) .dialog {\n    max-width: 100%;\n    max-height: 100%;\n    width: 100%;\n    height: 100%;\n  }\n\n  .dialog::backdrop {\n    background: var(--me-backdrop-background, rgba(0, 0, 0, 0.5));\n    backdrop-filter: var(--me-backdrop-filter, none);\n    opacity: 0;\n  }\n\n  .dialog[open]::backdrop {\n    opacity: 1;\n  }\n\n  /* Dialog placement */\n  :host(:not([fullscreen])[placement=\"top-start\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-center\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"top-end\"]) .dialog {\n    margin-block-start: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center-start\"]) .dialog {\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"center\"]) .dialog {\n    margin: auto;\n  }\n\n  :host(:not([fullscreen])[placement=\"center-end\"]) .dialog {\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-start\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-start: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-center\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n  }\n\n  :host(:not([fullscreen])[placement=\"bottom-end\"]) .dialog {\n    margin-block-end: var(--dialog-placement-margin);\n    margin-inline-end: var(--dialog-placement-margin);\n  }\n\n  /* Dialog animations */\n  @media (prefers-reduced-motion: no-preference) {\n    .dialog:not(.dialog--no-animations),\n    .dialog:not(.dialog--no-animations)::backdrop {\n      transition: transform 0.3s, opacity 0.3s, display 0.3s allow-discrete, overlay 0.3s allow-discrete;\n    }\n\n    /* 1. IS-OPEN STATE */\n    .dialog[open] {\n      transform: scale(1);\n      opacity: 1;\n    }\n\n    /* 2. EXIT STATE */\n    .dialog {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    /* 0. BEFORE-OPEN STATE */\n    @starting-style {\n      .dialog[open] {\n        transform: scale(0.95);\n        opacity: 0;\n      }\n\n      .dialog[open]::backdrop {\n        opacity: 0;\n      }\n    }\n\n    .dialog--pulse:not(.dialog--no-animations) {\n      animation-name: pulse;\n      animation-duration: ${PULSE_ANIMATION_DURATION}ms;\n      animation-timing-function: cubic-bezier(0.2, 0, 0.38, 0.9);\n    }\n\n    @keyframes pulse {\n      0% { transform: scale(1); }\n      50% { transform: scale(1.02); }\n      100% { transform: scale(1); }\n    }\n  }\n\n  /* Dialog panel, header, body, footer */\n  .dialog__panel {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 auto;\n    width: 100%;\n  }\n\n  .dialog__header {\n    display: flex;\n    align-items: center;\n    padding: var(--me-header-spacing);\n    column-gap: 0.5rem;\n    background-color: var(--me-header-background-color);\n  }\n\n  :host([no-close-button]) .dialog__header {\n    column-gap: 0;\n  }\n\n  .dialog__title {\n    display: block;\n    flex: 1 1 auto;\n    padding: 0;\n    margin: 0;\n  }\n\n  .dialog__body {\n    display: block;\n    flex: 1 1 auto;\n    padding: var(--me-body-spacing);\n    overflow: auto;\n    background-color: var(--me-body-background-color);\n    overscroll-behavior: contain;\n  }\n\n  .dialog__footer {\n    flex: 0 0 auto;\n    text-align: end;\n\n    padding: var(--me-footer-spacing);\n    background-color: var(--me-footer-background-color);\n  }\n\n  .dialog__close {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0.4375rem;\n    border: none;\n    background-color: transparent;\n  }\n\n  .dialog__close:not(:disabled) {\n    cursor: pointer;\n  }\n\n  .dialog__close:disabled {\n    cursor: not-allowed;\n  }\n`;\n\ntemplate.innerHTML = /* html */`\n  <style>${styles}</style>\n\n  <dialog part=\"base\" class=\"dialog\">\n    <div part=\"panel\" class=\"dialog__panel\" aria-labelledby=\"title\">\n      <header part=\"header\" class=\"dialog__header\">\n        <slot name=\"header\" part=\"title\" class=\"dialog__title\" id=\"title\"></slot>\n\n        <form method=\"dialog\">\n          <button type=\"submit\" part=\"close\" class=\"dialog__close\" aria-label=\"Close\">\n            <slot name=\"close\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" fill=\"currentColor\" viewBox=\"0 0 16 16\" aria-hidden=\"true\">\n                <path d=\"M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z\"/>\n              </svg>\n            </slot>\n          </button>\n        </form>\n      </header>\n\n      <slot part=\"body\" class=\"dialog__body\"></slot>\n\n      <footer part=\"footer\" class=\"dialog__footer\" hidden>\n        <slot name=\"footer\"></slot>\n      </footer>\n    </div>\n  </dialog>\n`;\n\n/**\n * @summary A custom element that renders a modal dialog.\n * @documentation https://github.com/georapbox/modal-element\n *\n * @tagname modal-element - This is the default tag name, unless overridden by the `defineCustomElement` method.\n * @extends HTMLElement\n *\n * @property {boolean} open - Determines whether the modal is open or not.\n * @property {boolean} staticBackdrop - Determines whether the modal should close when the backdrop is clicked.\n * @property {boolean} noHeader - Determines whether the modal should have a header or not.\n * @property {boolean} noAnimations - Determines whether the modal should have animations or not when opening and closing.\n * @property {boolean} noCloseButton - Determines whether the modal should have a default close button or not.\n * @property {boolean} fullscreen - Determines whether the modal should be fullscreen or not.\n * @property {boolean} preserveOverflow - Determines whether the overflow of the body should be preserved when the modal is open.\n * @property {string} placement - Determines the placement of the modal.\n * @property {string} closeLabel - The label of the default close button, used as the aria-label attribute of the close button.\n *\n * @attribute {boolean} open - Reflects the open property.\n * @attribute {boolean} static-backdrop - Reflects the staticBackdrop property.\n * @attribute {boolean} no-header - Reflects the noHeader property.\n * @attribute {boolean} no-animations - Reflects the noAnimations property.\n * @attribute {boolean} no-close-button - Reflects the noCloseButton property.\n * @attribute {boolean} fullscreen - Reflects the fullscreen property.\n * @attribute {boolean} preserve-overflow - Reflects the preserveOverflow property.\n * @attribute {string} placement - Reflects the placement property.\n * @attribute {string} close-label - Reflects the closeLabel property.\n *\n * @slot - The modal's main content (default/unnamed slot).\n * @slot header - The modal's header content, usually a title.\n * @slot footer - The modals' footer content. Usually used for buttons or other actions.\n * @slot close - The content of the close button that appears in the modal's header.\n *\n * @cssproperty --me-width - The width of the modal. Default is 32rem.\n * @cssproperty --me-height - The height of the modal. Default is fit-content.\n * @cssproperty --me-border-color - The border color of the modal. Default is initial.\n * @cssproperty --me-border-style - The border style of the modal. Default is solid.\n * @cssproperty --me-border-width - The border width of the modal. Default is initial.\n * @cssproperty --me-border-radius - The border radius of the modal. Default is 0.\n * @cssproperty --me-box-shadow - The box shadow of the modal. Default is none.\n * @cssproperty --me-background-color - The background color of the modal. Default is canvas.\n * @cssproperty --me-header-spacing - The spacing of the header. Default is 1rem.\n * @cssproperty --me-body-spacing - The spacing of the body. Default is 1rem.\n * @cssproperty --me-footer-spacing - The spacing of the footer. Default is 1rem.\n * @cssproperty --me-header-background-color - The background color of the header. Default is transparent.\n * @cssproperty --me-body-background-color - The background color of the body. Default is transparent.\n * @cssproperty --me-footer-background-color - The background color of the footer. Default is transparent.\n * @cssproperty --me-close-border-radius - The border radius of the close button. Default is 0.\n * @cssproperty --me-close-background-color - The background color of the close button. Default is transparent.\n * @cssproperty --me-backdrop-background - The background shorthand property of the backdrop. Default is rgba(0, 0, 0, 0.5).\n * @cssproperty --me-backdrop-filter - The backdrop filter property of the backdrop. Default is none.\n *\n * @csspart base - The base wrapper of the modal.\n * @csspart panel - The panel wrapper of the modal.\n * @csspart header - The header wrapper of the modal.\n * @csspart title - The title wrapper of the modal.\n * @csspart body - The body wrapper of the modal.\n * @csspart footer - The footer wrapper of the modal.\n * @csspart close - The close button of the modal.\n *\n * @fires me-open - Dispatched when the modal is opened.\n * @fires me-close - Dispatched when the modal is closed.\n * @fires me-request-close - Dispatched when the modal is about to close.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method show - Instance method. Opens the modal if it is closed, otherwise does nothing.\n * @method hide - Instance method. Closes the modal if it is open, otherwise does nothing.\n */\nclass ModalElement extends HTMLElement {\n  /** @type {Nullable<HTMLDialogElement>} */\n  #dialogEl = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #footerSlotEl = null;\n\n  /** @type {Nullable<HTMLSlotElement>} */\n  #closeSlotEl = null;\n\n  /** @type {ReturnType<typeof setTimeout> | undefined} */\n  #pulseAnimationTimeout = void 0;\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open' });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    if (this.shadowRoot) {\n      this.#dialogEl = this.shadowRoot.querySelector('dialog');\n      this.#footerSlotEl = this.shadowRoot.querySelector('slot[name=\"footer\"]');\n      this.#closeSlotEl = this.shadowRoot.querySelector('slot[name=\"close\"]');\n    }\n  }\n\n  static get observedAttributes() {\n    return ['open', 'no-header', 'no-animations', 'no-close-button', 'close-label'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    if (name === 'open' && oldValue !== newValue) {\n      if (this.open) {\n        this.#dialogEl.showModal();\n\n        this.dispatchEvent(new CustomEvent('me-open', {\n          bubbles: true,\n          composed: true,\n          detail: { element: this }\n        }));\n\n        if (document.body && !this.preserveOverflow) {\n          document.body.style.overflow = 'hidden';\n        }\n      } else {\n        this.#dialogEl.close();\n      }\n    }\n\n    if (name === 'no-header' && oldValue !== newValue) {\n      /** @type {Nullable<HTMLElement>} */\n      const headerEl = this.#dialogEl.querySelector('.dialog__header');\n\n      if (headerEl !== null) {\n        headerEl.hidden = this.noHeader;\n      }\n    }\n\n    if (name === 'no-animations' && oldValue !== newValue) {\n      this.#dialogEl.classList.toggle('dialog--no-animations', this.noAnimations);\n    }\n\n    if (name === 'no-close-button' && oldValue !== newValue) {\n      /** @type {Nullable<HTMLElement>} */\n      const closeBtnEl = this.#dialogEl.querySelector('.dialog__close');\n\n      if (closeBtnEl !== null) {\n        closeBtnEl.hidden = this.noCloseButton;\n      }\n    }\n\n    if (name === 'close-label' && oldValue !== newValue) {\n      this.#updateCloseLabel();\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('open');\n    this.#upgradeProperty('staticBackdrop');\n    this.#upgradeProperty('noHeader');\n    this.#upgradeProperty('noAnimations');\n    this.#upgradeProperty('noCloseButton');\n    this.#upgradeProperty('fullscreen');\n    this.#upgradeProperty('preserveOverflow');\n    this.#upgradeProperty('placement');\n    this.#upgradeProperty('closeLabel');\n\n    this.#dialogEl?.addEventListener('click', this.#handleDialogClick);\n    this.#dialogEl?.addEventListener('close', this.#handleDialogClose);\n    this.#dialogEl?.addEventListener('cancel', this.#handleDialogCancel);\n    this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.addEventListener('submit', this.#handleCloseButtonClick);\n    this.#footerSlotEl?.addEventListener('slotchange', this.#handleFooterSlotChange);\n    this.#closeSlotEl?.addEventListener('slotchange', this.#handleCloseSlotChange);\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#pulseAnimationTimeout && clearTimeout(this.#pulseAnimationTimeout);\n    this.#dialogEl?.addEventListener('click', this.#handleDialogClick);\n    this.#dialogEl?.removeEventListener('close', this.#handleDialogClose);\n    this.#dialogEl?.removeEventListener('cancel', this.#handleDialogCancel);\n    this.#dialogEl?.querySelector('form[method=\"dialog\"]')?.removeEventListener('submit', this.#handleCloseButtonClick);\n    this.#footerSlotEl?.removeEventListener('slotchange', this.#handleFooterSlotChange);\n    this.#closeSlotEl?.removeEventListener('slotchange', this.#handleCloseSlotChange);\n  }\n\n  /**\n   * Deternimes if the modal is open or not.\n   *\n   * @type {boolean} - True if the modal is open, otherwise false.\n   * @default false\n   * @attribute open - Reflects the open property.\n   */\n  get open() {\n    return this.hasAttribute('open');\n  }\n\n  set open(value) {\n    this.toggleAttribute('open', !!value);\n  }\n\n  /**\n   * Determines whether the modal should close when the backdrop is clicked.\n   *\n   * @type {boolean} - True if the modal should close when the backdrop is clicked, otherwise false.\n   * @default false\n   * @attribute static-backdrop - Reflects the staticBackdrop property.\n   */\n  get staticBackdrop() {\n    return this.hasAttribute('static-backdrop');\n  }\n\n  set staticBackdrop(value) {\n    this.toggleAttribute('static-backdrop', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have a header or not.\n   *\n   * @type {boolean} - True if the modal should have a header, otherwise false.\n   * @default false\n   * @attribute no-header - Reflects the noHeader property.\n   */\n  get noHeader() {\n    return this.hasAttribute('no-header');\n  }\n\n  set noHeader(value) {\n    this.toggleAttribute('no-header', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have animations or not when opening and closing.\n   *\n   * @type {boolean} - True if the modal should have animations, otherwise false.\n   * @default false\n   * @attribute no-animations - Reflects the noAnimations property.\n   */\n  get noAnimations() {\n    return this.hasAttribute('no-animations');\n  }\n\n  set noAnimations(value) {\n    this.toggleAttribute('no-animations', !!value);\n  }\n\n  /**\n   * Determines whether the modal should have a default close button or not.\n   *\n   * @type {boolean} - True if the modal should have a close button, otherwise false.\n   * @default false\n   * @attribute no-close-button - Reflects the noCloseButton property.\n   */\n  get noCloseButton() {\n    return this.hasAttribute('no-close-button');\n  }\n\n  set noCloseButton(value) {\n    this.toggleAttribute('no-close-button', !!value);\n  }\n\n  /**\n   * Determines whether the modal should be fullscreen or not.\n   *\n   * @type {boolean} - True if the modal should be fullscreen, otherwise false.\n   * @default false\n   * @attribute fullscreen - Reflects the fullscreen property.\n   */\n  get fullscreen() {\n    return this.hasAttribute('fullscreen');\n  }\n\n  set fullscreen(value) {\n    this.toggleAttribute('fullscreen', !!value);\n  }\n\n  /**\n   * Determines whether the overflow of the body should be preserved when the modal is open.\n   *\n   * @type {boolean} - True if the overflow of the body should be preserved, otherwise false.\n   * @default false\n   * @attribute preserve-overflow - Reflects the preserveOverflow property.\n   */\n  get preserveOverflow() {\n    return this.hasAttribute('preserve-overflow');\n  }\n\n  set preserveOverflow(value) {\n    this.toggleAttribute('preserve-overflow', !!value);\n  }\n\n  /**\n   * Determines the placement of the modal.\n   * Possible values are 'top-start', 'top-center', 'top-end', 'center-start', 'center', 'center-end', 'bottom-start', 'bottom-center', 'bottom-end'.\n   *\n   * @type {string}\n   * @default 'center'\n   * @attribute placement - Reflects the placement property.\n   */\n  get placement() {\n    return this.getAttribute('placement') || 'center';\n  }\n\n  set placement(value) {\n    this.setAttribute('placement', value != null ? value.toString() : value);\n  }\n\n  /**\n   * The label of the default close button, used as the aria-label attribute of the close button.\n   * If user provides text content for the close button using the `close` slot, this property is ignored and the aria-label attribute is removed.\n   *\n   * @type {string}\n   * @default 'Close'\n   * @attribute close-label - Reflects the closeLabel property.\n   */\n  get closeLabel() {\n    return this.getAttribute('close-label') || 'Close';\n  }\n\n  set closeLabel(value) {\n    this.setAttribute('close-label', value != null ? value.toString() : value);\n  }\n\n  /**\n   * Updates the aria-label attribute of the close button.\n   * If the slot for the close button has text content, the aria-label attribute is removed to allow the text content to be used as the label.\n   * Otherwise, the aria-label attribute is set to the `closeLabel` property.\n   *\n   * @returns\n   */\n  #updateCloseLabel() {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    const closeButtonEl = this.#dialogEl.querySelector('.dialog__close');\n\n    if (closeButtonEl === null) {\n      return;\n    }\n\n    const assignedElements = this.#closeSlotEl?.assignedElements() || [];\n    const hasTextContent = assignedElements?.some(el => el.textContent?.replace(/\\s/g, '') !== '');\n\n    hasTextContent\n      ? closeButtonEl.removeAttribute('aria-label')\n      : closeButtonEl.setAttribute('aria-label', this.closeLabel);\n  }\n\n  /**\n   * Applies a pulse effect on the dialog.\n   */\n  #applyPulseEffectOnDialog() {\n    if (this.#pulseAnimationTimeout) {\n      return;\n    }\n\n    this.#dialogEl?.classList.add('dialog--pulse');\n\n    this.#pulseAnimationTimeout = setTimeout(() => {\n      this.#dialogEl?.classList.remove('dialog--pulse');\n      clearTimeout(this.#pulseAnimationTimeout);\n      this.#pulseAnimationTimeout = void 0;\n    }, PULSE_ANIMATION_DURATION);\n  }\n\n  /**\n   * Handles the close event of the dialog.\n   */\n  #handleDialogClose = () => {\n    // This is required because the dialog element does not reset\n    // the open property when the dialog is closed by the user.\n    this.open = false;\n\n    this.dispatchEvent(new CustomEvent('me-close', {\n      bubbles: true,\n      composed: true,\n      detail: { element: this }\n    }));\n\n    if (document.body && !this.preserveOverflow) {\n      document.body.style.overflow = '';\n    }\n  };\n\n  /**\n   * Handles the cancel event of the dialog.\n   * This event is fired when the user presses the escape key.\n   *\n   * @param {Event} evt - The cancel event.\n   */\n  #handleDialogCancel = evt => {\n    const requestCloseEvent = this.#createRequestCloseEvent('escape-key');\n\n    this.dispatchEvent(requestCloseEvent);\n\n    if (requestCloseEvent.defaultPrevented) {\n      evt.preventDefault();\n      !this.noAnimations && this.#applyPulseEffectOnDialog();\n    }\n  };\n\n  /**\n   * Handles the click event of the close button.\n   *\n   * @param {Event} evt - The click event.\n   */\n  #handleCloseButtonClick = evt => {\n    const requestCloseEvent = this.#createRequestCloseEvent('close-button');\n\n    this.dispatchEvent(requestCloseEvent);\n\n    if (requestCloseEvent.defaultPrevented) {\n      evt.preventDefault();\n      !this.noAnimations && this.#applyPulseEffectOnDialog();\n    }\n  };\n\n  /**\n   * Handles the click event of the dialog.\n   *\n   * @param {MouseEvent} evt - The click event.\n   */\n  #handleDialogClick = evt => {\n    const target = evt.target;\n    const currentTarget = evt.currentTarget;\n\n    // Close the dialog when the backdrop is clicked.\n    if (target === currentTarget) {\n      const requestCloseEvent = this.#createRequestCloseEvent('backdrop-click');\n\n      this.dispatchEvent(requestCloseEvent);\n\n      if (requestCloseEvent.defaultPrevented || this.staticBackdrop) {\n        !this.noAnimations && this.#applyPulseEffectOnDialog();\n      } else {\n        this.hide();\n      }\n    }\n\n    // Close the dialog when external invoker is clicked.\n    if (target instanceof HTMLElement && target.closest('[data-me-close]') !== null) {\n      const requestCloseEvent = this.#createRequestCloseEvent('external-invoker');\n\n      this.dispatchEvent(requestCloseEvent);\n\n      if (requestCloseEvent.defaultPrevented) {\n        !this.noAnimations && this.#applyPulseEffectOnDialog();\n      } else {\n        this.hide();\n      }\n    }\n  };\n\n  /**\n   * Handles the slotchange event of the footer slot.\n   */\n  #handleFooterSlotChange = () => {\n    if (this.#dialogEl === null) {\n      return;\n    }\n\n    /** @type {Nullable<HTMLElement>} */\n    const footerEl = this.#dialogEl.querySelector('.dialog__footer');\n\n    if (footerEl === null) {\n      return;\n    }\n\n    const footerSlotNodes = this.#footerSlotEl?.assignedNodes();\n    const hasFooterSlotNodes = footerSlotNodes ? footerSlotNodes.length > 0 : false;\n\n    footerEl.hidden = !hasFooterSlotNodes;\n  };\n\n  /**\n   * Handles the slotchange event of the close slot.\n   */\n  #handleCloseSlotChange = () => {\n    this.#updateCloseLabel();\n  };\n\n  /**\n   * Creates a request close event.\n   *\n   * @param {CloseRequestReason} reason - The reason that the modal is about to close.\n   */\n  #createRequestCloseEvent(reason) {\n    return new CustomEvent('me-request-close', {\n      bubbles: true,\n      composed: true,\n      cancelable: true,\n      detail: {\n        reason,\n        element: this\n      }\n    });\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'open' | 'staticBackdrop' | 'noHeader' | 'noAnimations' | 'noCloseButton' | 'fullscreen' | 'preserveOverflow' | 'placement' | 'closeLabel'} prop - The property to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Opens the modal if it is closed, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.show();\n   */\n  show() {\n    if (this.open) {\n      return;\n    }\n\n    this.open = true;\n  }\n\n  /**\n   * Closes the modal if it is open, otherwise does nothing.\n   * Make sure that the custom element is defined before calling this method.\n   *\n   * @example\n   * const modal = document.querySelector('modal-element');\n   * modal.hide();\n   */\n  hide() {\n    if (!this.open) {\n      return;\n    }\n\n    this.open = false;\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='modal-element']\n   * @example\n   * ModalElement.defineCustomElement('my-modal');\n   */\n  static defineCustomElement(elementName = 'modal-element') {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, ModalElement);\n    }\n  }\n}\n\nexport { ModalElement };\n","Object.defineProperty({},\"FilesDropzone\",{get:function(){return m},set:void 0,enumerable:!0,configurable:!0});let e=new Map([[\"aac\",\"audio/aac\"],[\"abw\",\"application/x-abiword\"],[\"arc\",\"application/x-freearc\"],[\"avif\",\"image/avif\"],[\"avi\",\"video/x-msvideo\"],[\"azw\",\"application/vnd.amazon.ebook\"],[\"bin\",\"application/octet-stream\"],[\"bmp\",\"image/bmp\"],[\"bz\",\"application/x-bzip\"],[\"bz2\",\"application/x-bzip2\"],[\"cda\",\"application/x-cdf\"],[\"csh\",\"application/x-csh\"],[\"css\",\"text/css\"],[\"csv\",\"text/csv\"],[\"doc\",\"application/msword\"],[\"docx\",\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"],[\"eot\",\"application/vnd.ms-fontobject\"],[\"epub\",\"application/epub+zip\"],[\"gz\",\"application/gzip\"],[\"gif\",\"image/gif\"],[\"heic\",\"image/heic\"],[\"heif\",\"image/heif\"],[\"htm\",\"text/html\"],[\"html\",\"text/html\"],[\"ico\",\"image/vnd.microsoft.icon\"],[\"ics\",\"text/calendar\"],[\"jar\",\"application/java-archive\"],[\"jpeg\",\"image/jpeg\"],[\"jpg\",\"image/jpeg\"],[\"jxl\",\"image/jxl\"],[\"js\",\"text/javascript\"],[\"json\",\"application/json\"],[\"jsonld\",\"application/ld+json\"],[\"markdown\",\"text/markdown\"],[\"md\",\"text/markdown\"],[\"mid\",\"audio/midi\"],[\"midi\",\"audio/midi\"],[\"mjs\",\"text/javascript\"],[\"mp3\",\"audio/mpeg\"],[\"mp4\",\"video/mp4\"],[\"mpeg\",\"video/mpeg\"],[\"mpkg\",\"application/vnd.apple.installer+xml\"],[\"odp\",\"application/vnd.oasis.opendocument.presentation\"],[\"ods\",\"application/vnd.oasis.opendocument.spreadsheet\"],[\"odt\",\"application/vnd.oasis.opendocument.text\"],[\"oga\",\"audio/ogg\"],[\"ogv\",\"video/ogg\"],[\"ogx\",\"application/ogg\"],[\"opus\",\"audio/opus\"],[\"otf\",\"font/otf\"],[\"png\",\"image/png\"],[\"pdf\",\"application/pdf\"],[\"php\",\"application/x-httpd-php\"],[\"ppt\",\"application/vnd.ms-powerpoint\"],[\"pptx\",\"application/vnd.openxmlformats-officedocument.presentationml.presentation\"],[\"rar\",\"application/vnd.rar\"],[\"rtf\",\"application/rtf\"],[\"sh\",\"application/x-sh\"],[\"svg\",\"image/svg+xml\"],[\"swf\",\"application/x-shockwave-flash\"],[\"tar\",\"application/x-tar\"],[\"tif\",\"image/tiff\"],[\"tiff\",\"image/tiff\"],[\"ts\",\"video/mp2t\"],[\"ttf\",\"font/ttf\"],[\"txt\",\"text/plain\"],[\"vsd\",\"application/vnd.visio\"],[\"wav\",\"audio/wav\"],[\"weba\",\"audio/webm\"],[\"webm\",\"video/webm\"],[\"webp\",\"image/webp\"],[\"woff\",\"font/woff\"],[\"woff2\",\"font/woff2\"],[\"xhtml\",\"application/xhtml+xml\"],[\"xls\",\"application/vnd.ms-excel\"],[\"xlsx\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"],[\"xml\",\"application/xml\"],[\"xul\",\"application/vnd.mozilla.xul+xml\"],[\"zip\",\"application/zip\"],[\"7z\",\"application/x-7z-compressed\"],[\"mkv\",\"video/x-matroska\"],[\"mov\",\"video/quicktime\"],[\"msg\",\"application/vnd.ms-outlook\"]]),t=[\".DS_Store\",\"Thumbs.db\"],o=t=>{let{name:o}=t;if(o&&-1!==o.lastIndexOf(\".\")&&!t.type){let i=(o.split(\".\").pop()||\"\").toLowerCase(),r=e.get(i);r&&Object.defineProperty(t,\"type\",{value:r,writable:!1,configurable:!1,enumerable:!0})}return t},i=(e,t)=>{let i=o(e);if(\"string\"!=typeof i.path){let{webkitRelativePath:o}=e;Object.defineProperty(i,\"path\",{value:\"string\"==typeof t?t:o||e.name,writable:!1,configurable:!1,enumerable:!0})}return i},r=async e=>await new Promise((t,o)=>{e.readEntries(t,o)}),a=async e=>{let t=[],o=await r(e);for(;o.length>0;)t.push(...o),o=await r(e);return t},n=e=>new Promise((t,o)=>{e.file(o=>t(i(o,e.fullPath)),o)}),s=async e=>{let o=[],i=[];for(let t of e){if(\"file\"!==t.kind)continue;let e=t.getAsEntry?t.getAsEntry():t.webkitGetAsEntry();i.push(e)}for(;i.length>0;){let e=i.shift();if(e){if(e.isFile){let i=await n(e);-1===t.indexOf(i.name)&&o.push(i)}else e.isDirectory&&i.push(...await a(e.createReader()))}}return o},d=async e=>{let o=[];for(let r of e)-1===t.indexOf(r.name)&&o.push(i(r));return o},l=async e=>e.dataTransfer?e.dataTransfer.items?await s(e.dataTransfer.items):await d(e.dataTransfer.files):await d(e.target.files),p=\"files-dropzone\",c=\"TOO_MANY_FILES\",h=document.createElement(\"template\"),u=`\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49,132,253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition: border var(--dropzone-transition-duration) ease-in-out, background-color var(--dropzone-transition-duration) ease-in-out, color var(--dropzone-transition-duration) ease-in-out, box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;h.innerHTML=`\n  <style>\n    ${u}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden>\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot>Drag 'n' drop files here, or click to select files</slot>\n  </div>\n`;class m extends HTMLElement{#e=null;#t=null;constructor(){super(),this.shadowRoot||this.attachShadow({mode:\"open\",delegatesFocus:!0}).appendChild(h.content.cloneNode(!0)),this.shadowRoot&&(this.#e=this.shadowRoot.getElementById(\"file-input\"),this.#t=this.shadowRoot.getElementById(\"dropzone\"))}static get observedAttributes(){return[\"accept\",\"disabled\",\"multiple\"]}attributeChangedCallback(e,t,o){\"accept\"===e&&t!==o&&this.#e&&(this.#e.accept=this.accept),\"disabled\"===e&&t!==o&&this.#e&&(this.#e.disabled=this.disabled,this.disabled?(this.#t?.removeAttribute(\"tabindex\"),this.#t?.setAttribute(\"aria-disabled\",\"true\")):(this.#t?.setAttribute(\"tabindex\",\"0\"),this.#t?.setAttribute(\"aria-disabled\",\"false\"))),\"multiple\"===e&&t!==o&&this.#e&&(this.#e.multiple=this.multiple)}connectedCallback(){this.#o(\"accept\"),this.#o(\"disabled\"),this.#o(\"maxFiles\"),this.#o(\"maxSize\"),this.#o(\"minSize\"),this.#o(\"multiple\"),this.#o(\"autoFocus\"),this.#o(\"noStyle\"),this.#e?.addEventListener(\"change\",this.#i),this.#t?.addEventListener(\"dragenter\",this.#r),this.#t?.addEventListener(\"dragover\",this.#a),this.#t?.addEventListener(\"dragleave\",this.#n),this.#t?.addEventListener(\"drop\",this.#s),this.#t?.addEventListener(\"click\",this.#d),this.#t?.addEventListener(\"keyup\",this.#l),this.autoFocus&&this.#t?.focus()}disconnectedCallback(){this.#e?.removeEventListener(\"change\",this.#i),this.#t?.removeEventListener(\"dragenter\",this.#r),this.#t?.removeEventListener(\"dragover\",this.#a),this.#t?.removeEventListener(\"dragleave\",this.#n),this.#t?.removeEventListener(\"drop\",this.#s),this.#t?.removeEventListener(\"click\",this.#d),this.#t?.removeEventListener(\"keyup\",this.#l)}get accept(){return this.getAttribute(\"accept\")||\"\"}set accept(e){this.setAttribute(\"accept\",null!=e?e.toString():e)}get disabled(){return this.hasAttribute(\"disabled\")}set disabled(e){this.toggleAttribute(\"disabled\",!!e)}get maxFiles(){let e=Number(this.getAttribute(\"max-files\"))||0;return e<=0?1/0:Math.floor(Math.abs(e))}set maxFiles(e){this.setAttribute(\"max-files\",null!=e?e.toString():e)}get maxSize(){let e=this.getAttribute(\"max-size\");if(null===e)return 1/0;let t=Number(e);return Number.isNaN(t)?1/0:t}set maxSize(e){this.setAttribute(\"max-size\",null!=e?e.toString():e)}get minSize(){let e=this.getAttribute(\"min-size\");if(null===e)return 0;let t=Number(e);return Number.isNaN(t)?0:t}set minSize(e){this.setAttribute(\"min-size\",null!=e?e.toString():e)}get multiple(){return this.hasAttribute(\"multiple\")}set multiple(e){this.toggleAttribute(\"multiple\",!!e)}get autoFocus(){return this.hasAttribute(\"auto-focus\")}set autoFocus(e){this.toggleAttribute(\"auto-focus\",!!e)}get noStyle(){return this.hasAttribute(\"no-style\")}set noStyle(e){this.toggleAttribute(\"no-style\",!!e)}#i=async e=>{try{this.#p(await l(e))}catch(e){this.dispatchEvent(new CustomEvent(`${p}-error`,{bubbles:!0,composed:!0,detail:{error:e}}))}};#r=()=>{this.disabled||this.dispatchEvent(new Event(`${p}-dragenter`,{bubbles:!0,composed:!0}))};#a=e=>{if(e.preventDefault(),this.disabled){e.dataTransfer.dropEffect=\"none\";return}e.dataTransfer.dropEffect=\"copy\",this.#t&&(this.#t.classList.add(\"dropzone--dragover\"),this.#t.part.add(\"dropzone--dragover\")),this.dispatchEvent(new Event(`${p}-dragover`,{bubbles:!0,composed:!0}))};#n=()=>{this.disabled||(this.#t&&(this.#t.classList.remove(\"dropzone--dragover\"),this.#t.part.remove(\"dropzone--dragover\")),this.dispatchEvent(new Event(`${p}-dragleave`,{bubbles:!0,composed:!0})))};#s=async e=>{if(!this.disabled){e.preventDefault(),this.#t&&(this.#t.classList.remove(\"dropzone--dragover\"),this.#t.part.remove(\"dropzone--dragover\"));try{this.#p(await l(e))}catch(e){this.dispatchEvent(new CustomEvent(`${p}-error`,{bubbles:!0,composed:!0,detail:{error:e}}))}}};#d=()=>{this.disabled||this.#e?.click()};#l=e=>{this.disabled||\" \"!==e.key&&\"Enter\"!==e.key||this.#e?.click()};#p(e){if(!Array.isArray(e)||!e.length)return;let t=[],o=[],i=e.length;if(!this.multiple&&i>1)for(let t of e)o.push({file:t,errors:[{code:c,message:\"Too many files selected. Only 1 file is allowed.\"}]});else if(this.multiple&&i>this.maxFiles)for(let t of e)o.push({file:t,errors:[{code:c,message:`Too many files selected. Only ${this.maxFiles} ${this.maxFiles>1?\"files are\":\"file is\"} allowed.`}]});else for(let i of e){let e=function(e,t=\"\"){if(!t)return!0;let o=[...new Set(t.split(\",\").map(e=>e.trim()).filter(Boolean))],i=e.type,r=i.replace(/\\/.*$/,\"\");for(let t of o)if(\".\"===t.charAt(0)){if(-1!==e.name.toLowerCase().indexOf(t.toLowerCase(),e.name.length-t.length))return!0}else if(/\\/\\*$/.test(t)){if(r===t.replace(/\\/.*$/,\"\"))return!0}else if(i===t)return!0;return!1}(i,this.accept),r=i.size>this.maxSize,a=i.size<this.minSize;if(!e||r||a){let t=[];e||t.push({code:\"INVALID_MIME_TYPE\",message:`File type \"${i.type}\" is not accepted.`}),r&&t.push({code:\"FILE_TOO_LARGE\",message:`File size ${i.size} exceeds the maximum size of ${this.maxSize}.`}),a&&t.push({code:\"FILE_TOO_SMALL\",message:`File size ${i.size} is smaller than the minimum size of ${this.minSize}.`}),o.push({file:i,errors:t})}else t.push(i)}this.dispatchEvent(new CustomEvent(`${p}-drop`,{bubbles:!0,composed:!0,detail:{acceptedFiles:t,rejectedFiles:o}})),t.length>0&&this.dispatchEvent(new CustomEvent(`${p}-drop-accepted`,{bubbles:!0,composed:!0,detail:{acceptedFiles:t}})),o.length>0&&this.dispatchEvent(new CustomEvent(`${p}-drop-rejected`,{bubbles:!0,composed:!0,detail:{rejectedFiles:o}})),this.#e&&(this.#e.value=this.#e.defaultValue)}openFileDialog(){this.disabled||this.#e?.click()}#o(e){if(Object.prototype.hasOwnProperty.call(this,e)){let t=this[e];delete this[e],this[e]=t}}static defineCustomElement(e=p){\"undefined\"==typeof window||window.customElements.get(e)||window.customElements.define(e,m)}}m.defineCustomElement();export{m as FilesDropzone};\n//# sourceMappingURL=files-dropzone-defined.js.map\n","function $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\nvar $862aa3736b0514bc$exports = {};\n\n$parcel$export($862aa3736b0514bc$exports, \"FilesDropzone\", function () { return $862aa3736b0514bc$export$6ccd1735166caad9; });\n// @ts-check\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */ // @ts-check\n/**\n * Checks if a file is valid based on the accepted file type specifiers.\n *\n * @param {File} file - The File object to validate.\n * @param {string} [acceptedTypeSpecifiers=''] - The accepted file type specifiers.\n * @returns {boolean} - True if the file is valid, false otherwise.\n */ function $38f222170fd4d21a$export$7c47054fed488f80(file, acceptedTypeSpecifiers = \"\") {\n    if (!acceptedTypeSpecifiers) return true;\n    const acceptedMimeTypesList = [\n        ...new Set(acceptedTypeSpecifiers.split(\",\").map((v)=>v.trim()).filter(Boolean))\n    ];\n    const fileMimeType = file.type;\n    const baseMimeType = fileMimeType.replace(/\\/.*$/, \"\");\n    for (const validType of acceptedMimeTypesList){\n        if (validType.charAt(0) === \".\") {\n            if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) return true;\n        } else if (/\\/\\*$/.test(validType)) {\n            // Check for mime type that looks like \"image/*\" or similar.\n            if (baseMimeType === validType.replace(/\\/.*$/, \"\")) return true;\n        } else {\n            if (fileMimeType === validType) return true;\n        }\n    }\n    return false;\n}\n\n\n// @ts-check\n/**\n * A map of common file extensions and their associated MIME types.\n */ const $f31161edf38949e9$var$COMMON_MIME_TYPES = new Map([\n    // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n    [\n        \"aac\",\n        \"audio/aac\"\n    ],\n    [\n        \"abw\",\n        \"application/x-abiword\"\n    ],\n    [\n        \"arc\",\n        \"application/x-freearc\"\n    ],\n    [\n        \"avif\",\n        \"image/avif\"\n    ],\n    [\n        \"avi\",\n        \"video/x-msvideo\"\n    ],\n    [\n        \"azw\",\n        \"application/vnd.amazon.ebook\"\n    ],\n    [\n        \"bin\",\n        \"application/octet-stream\"\n    ],\n    [\n        \"bmp\",\n        \"image/bmp\"\n    ],\n    [\n        \"bz\",\n        \"application/x-bzip\"\n    ],\n    [\n        \"bz2\",\n        \"application/x-bzip2\"\n    ],\n    [\n        \"cda\",\n        \"application/x-cdf\"\n    ],\n    [\n        \"csh\",\n        \"application/x-csh\"\n    ],\n    [\n        \"css\",\n        \"text/css\"\n    ],\n    [\n        \"csv\",\n        \"text/csv\"\n    ],\n    [\n        \"doc\",\n        \"application/msword\"\n    ],\n    [\n        \"docx\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"\n    ],\n    [\n        \"eot\",\n        \"application/vnd.ms-fontobject\"\n    ],\n    [\n        \"epub\",\n        \"application/epub+zip\"\n    ],\n    [\n        \"gz\",\n        \"application/gzip\"\n    ],\n    [\n        \"gif\",\n        \"image/gif\"\n    ],\n    [\n        \"heic\",\n        \"image/heic\"\n    ],\n    [\n        \"heif\",\n        \"image/heif\"\n    ],\n    [\n        \"htm\",\n        \"text/html\"\n    ],\n    [\n        \"html\",\n        \"text/html\"\n    ],\n    [\n        \"ico\",\n        \"image/vnd.microsoft.icon\"\n    ],\n    [\n        \"ics\",\n        \"text/calendar\"\n    ],\n    [\n        \"jar\",\n        \"application/java-archive\"\n    ],\n    [\n        \"jpeg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jpg\",\n        \"image/jpeg\"\n    ],\n    [\n        \"jxl\",\n        \"image/jxl\"\n    ],\n    [\n        \"js\",\n        \"text/javascript\"\n    ],\n    [\n        \"json\",\n        \"application/json\"\n    ],\n    [\n        \"jsonld\",\n        \"application/ld+json\"\n    ],\n    [\n        \"markdown\",\n        \"text/markdown\"\n    ],\n    [\n        \"md\",\n        \"text/markdown\"\n    ],\n    [\n        \"mid\",\n        \"audio/midi\"\n    ],\n    [\n        \"midi\",\n        \"audio/midi\"\n    ],\n    [\n        \"mjs\",\n        \"text/javascript\"\n    ],\n    [\n        \"mp3\",\n        \"audio/mpeg\"\n    ],\n    [\n        \"mp4\",\n        \"video/mp4\"\n    ],\n    [\n        \"mpeg\",\n        \"video/mpeg\"\n    ],\n    [\n        \"mpkg\",\n        \"application/vnd.apple.installer+xml\"\n    ],\n    [\n        \"odp\",\n        \"application/vnd.oasis.opendocument.presentation\"\n    ],\n    [\n        \"ods\",\n        \"application/vnd.oasis.opendocument.spreadsheet\"\n    ],\n    [\n        \"odt\",\n        \"application/vnd.oasis.opendocument.text\"\n    ],\n    [\n        \"oga\",\n        \"audio/ogg\"\n    ],\n    [\n        \"ogv\",\n        \"video/ogg\"\n    ],\n    [\n        \"ogx\",\n        \"application/ogg\"\n    ],\n    [\n        \"opus\",\n        \"audio/opus\"\n    ],\n    [\n        \"otf\",\n        \"font/otf\"\n    ],\n    [\n        \"png\",\n        \"image/png\"\n    ],\n    [\n        \"pdf\",\n        \"application/pdf\"\n    ],\n    [\n        \"php\",\n        \"application/x-httpd-php\"\n    ],\n    [\n        \"ppt\",\n        \"application/vnd.ms-powerpoint\"\n    ],\n    [\n        \"pptx\",\n        \"application/vnd.openxmlformats-officedocument.presentationml.presentation\"\n    ],\n    [\n        \"rar\",\n        \"application/vnd.rar\"\n    ],\n    [\n        \"rtf\",\n        \"application/rtf\"\n    ],\n    [\n        \"sh\",\n        \"application/x-sh\"\n    ],\n    [\n        \"svg\",\n        \"image/svg+xml\"\n    ],\n    [\n        \"swf\",\n        \"application/x-shockwave-flash\"\n    ],\n    [\n        \"tar\",\n        \"application/x-tar\"\n    ],\n    [\n        \"tif\",\n        \"image/tiff\"\n    ],\n    [\n        \"tiff\",\n        \"image/tiff\"\n    ],\n    [\n        \"ts\",\n        \"video/mp2t\"\n    ],\n    [\n        \"ttf\",\n        \"font/ttf\"\n    ],\n    [\n        \"txt\",\n        \"text/plain\"\n    ],\n    [\n        \"vsd\",\n        \"application/vnd.visio\"\n    ],\n    [\n        \"wav\",\n        \"audio/wav\"\n    ],\n    [\n        \"weba\",\n        \"audio/webm\"\n    ],\n    [\n        \"webm\",\n        \"video/webm\"\n    ],\n    [\n        \"webp\",\n        \"image/webp\"\n    ],\n    [\n        \"woff\",\n        \"font/woff\"\n    ],\n    [\n        \"woff2\",\n        \"font/woff2\"\n    ],\n    [\n        \"xhtml\",\n        \"application/xhtml+xml\"\n    ],\n    [\n        \"xls\",\n        \"application/vnd.ms-excel\"\n    ],\n    [\n        \"xlsx\",\n        \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\"\n    ],\n    [\n        \"xml\",\n        \"application/xml\"\n    ],\n    [\n        \"xul\",\n        \"application/vnd.mozilla.xul+xml\"\n    ],\n    [\n        \"zip\",\n        \"application/zip\"\n    ],\n    [\n        \"7z\",\n        \"application/x-7z-compressed\"\n    ],\n    // Others\n    [\n        \"mkv\",\n        \"video/x-matroska\"\n    ],\n    [\n        \"mov\",\n        \"video/quicktime\"\n    ],\n    [\n        \"msg\",\n        \"application/vnd.ms-outlook\"\n    ]\n]);\nconst $f31161edf38949e9$var$FILES_TO_IGNORE = [\n    // Thumbnail cache files for macOS and Windows\n    \".DS_Store\",\n    \"Thumbs.db\" // Windows\n];\n/**\n * Adds a `type` property to the file object if it doesn't have one and the file has an extension.\n * This is needed because Firefox doesn't add a type property to files dragged from the desktop.\n * @bug https://bugzilla.mozilla.org/show_bug.cgi?id=1424689\n *\n * @param {File} file - The file object to add the type property to.\n * @returns {File} - The file object with the type property added.\n */ const $f31161edf38949e9$var$toFileWithMimeType = (file)=>{\n    const { name: name } = file;\n    const hasExtension = name && name.lastIndexOf(\".\") !== -1;\n    if (hasExtension && !file.type) {\n        const extension = (name.split(\".\").pop() || \"\").toLowerCase();\n        const type = $f31161edf38949e9$var$COMMON_MIME_TYPES.get(extension);\n        if (type) Object.defineProperty(file, \"type\", {\n            value: type,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    return file;\n};\n/**\n * Adds a `path` property to the file object if it doesn't have one.\n * If `path` is not provided, the `webkitRelativePath` property of the file will be used\n * or the file's name if `webkitRelativePath` is not available.\n *\n * @param {File} file - The file object to add the path property to.\n * @param {string} [path] - The path to set on the file object.\n * @returns {File} - The file object with the path property added.\n */ const $f31161edf38949e9$var$toFileWithPath = (file, path)=>{\n    const fileWithMimeType = $f31161edf38949e9$var$toFileWithMimeType(file);\n    // @ts-ignore\n    if (typeof fileWithMimeType.path !== \"string\") {\n        const { webkitRelativePath: webkitRelativePath } = file;\n        Object.defineProperty(fileWithMimeType, \"path\", {\n            value: typeof path === \"string\" ? path : webkitRelativePath || file.name,\n            writable: false,\n            configurable: false,\n            enumerable: true\n        });\n    }\n    return fileWithMimeType;\n};\n/**\n * Wrap `FileSystemDirectoryReader.readEntries` in a promise to make working with read entries easier.\n * https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryReader/readEntries\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */ const $f31161edf38949e9$var$readEntriesPromise = async (directoryReader)=>{\n    return await new Promise((resolve, reject)=>{\n        directoryReader.readEntries(resolve, reject);\n    });\n};\n/**\n * Read all entries in a directory or sub-directory\n * by calling `readEntries` until it returns an empty array.\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */ const $f31161edf38949e9$var$readAllDirectoryEntries = async (directoryReader)=>{\n    const entries = [];\n    let readEntries = await $f31161edf38949e9$var$readEntriesPromise(directoryReader);\n    while(readEntries.length > 0){\n        entries.push(...readEntries);\n        readEntries = await $f31161edf38949e9$var$readEntriesPromise(directoryReader);\n    }\n    return entries;\n};\n/**\n * Get a `File` object from a `FileSystemFileEntry` object.\n *\n * @param {FileSystemFileEntry} fileEntry - The file entry to get a `File` object from.\n * @returns {Promise<File>} - A promise that resolves with a `File` object.\n */ const $f31161edf38949e9$var$getFileFromFileEntry = (fileEntry)=>{\n    return new Promise((resolve, reject)=>{\n        fileEntry.file((file)=>resolve($f31161edf38949e9$var$toFileWithPath(file, fileEntry.fullPath)), reject);\n    });\n};\n/**\n * Get an array of `File` objects from a `DataTransferItemList` object.\n *\n * @param {DataTransferItemList} dataTransferItemList - The item list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */ const $f31161edf38949e9$var$getFilesFromDataTransferItemList = async (dataTransferItemList)=>{\n    const files = [];\n    // Chromium browsers read only 100 files at a time as per the spec, so we need to use\n    // BFS (Breadth-first search) to traverse the entire directory/file structure.\n    // https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry#javascript_content\n    const queue = [];\n    for (const item of dataTransferItemList){\n        if (item.kind !== \"file\") continue;\n        // https://developer.mozilla.org/docs/Web/API/DataTransferItem/webkitGetAsEntry\n        // This function is implemented as `webkitGetAsEntry()` in non-WebKit browsers\n        // including Firefox at this time but it may be renamed to `getAsEntry()` in the future.\n        // @ts-ignore\n        const entry = item.getAsEntry ? item.getAsEntry() : item.webkitGetAsEntry();\n        queue.push(entry);\n    }\n    while(queue.length > 0){\n        const entry = queue.shift();\n        if (!entry) continue;\n        else if (entry.isFile) {\n            const file = await $f31161edf38949e9$var$getFileFromFileEntry(entry);\n            if ($f31161edf38949e9$var$FILES_TO_IGNORE.indexOf(file.name) === -1) files.push(file);\n        } else if (entry.isDirectory) queue.push(...await $f31161edf38949e9$var$readAllDirectoryEntries(entry.createReader()));\n    }\n    return files;\n};\n/**\n * Get an array of `File` objects from a `FileList` object.\n *\n * @param {FileList} fileList - The file list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */ const $f31161edf38949e9$var$getFilesFromFileList = async (fileList)=>{\n    const files = [];\n    for (const file of fileList)if ($f31161edf38949e9$var$FILES_TO_IGNORE.indexOf(file.name) === -1) files.push($f31161edf38949e9$var$toFileWithPath(file));\n    return files;\n};\nconst $f31161edf38949e9$export$6d52664cd15c442 = async (evt)=>{\n    if (evt.dataTransfer) return evt.dataTransfer.items ? await $f31161edf38949e9$var$getFilesFromDataTransferItemList(evt.dataTransfer.items) : await $f31161edf38949e9$var$getFilesFromFileList(evt.dataTransfer.files);\n    return await $f31161edf38949e9$var$getFilesFromFileList(evt.target.files);\n};\n\n\nconst $862aa3736b0514bc$var$COMPONENT_NAME = \"files-dropzone\";\nconst $862aa3736b0514bc$var$TOO_MANY_FILES = \"TOO_MANY_FILES\";\nconst $862aa3736b0514bc$var$FILE_TOO_LARGE = \"FILE_TOO_LARGE\";\nconst $862aa3736b0514bc$var$FILE_TOO_SMALL = \"FILE_TOO_SMALL\";\nconst $862aa3736b0514bc$var$INVALID_MIME_TYPE = \"INVALID_MIME_TYPE\";\nconst $862aa3736b0514bc$var$template = document.createElement(\"template\");\nconst $862aa3736b0514bc$var$styles = /* css */ `\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49,132,253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition: border var(--dropzone-transition-duration) ease-in-out, background-color var(--dropzone-transition-duration) ease-in-out, color var(--dropzone-transition-duration) ease-in-out, box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;\n$862aa3736b0514bc$var$template.innerHTML = /* html */ `\n  <style>\n    ${$862aa3736b0514bc$var$styles}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden>\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot>Drag 'n' drop files here, or click to select files</slot>\n  </div>\n`;\n/**\n * @summary A custom element that allows users to drag and drop files into it.\n * @documentation https://github.com/georapbox/files-dropzone-element\n *\n * @tagname files-dropzone - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {string} accept - A comma-separated list of unique file type specifiers describing file types to allow.\n * @property {boolean} disabled - Determines whether the dropzone is disabled.\n * @property {number} maxFiles - The maximum number of files allowed to be dropped.\n * @property {number} maxSize - The maximum file size allowed in bytes.\n * @property {number} minSize - The minimum file size allowed in bytes.\n * @property {boolean} multiple - Allows multiple files to be dropped.\n * @property {boolean} autoFocus - Automatically focuses the dropzone when it's connected to the DOM.\n * @property {boolean} noStyle - Prevents the dropzone from applying any styling.\n *\n * @attribute {string} accept - Reflects the accept property.\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {number} max-files - Reflects the maxFiles property.\n * @attribute {number} max-size - Reflects the maxSize property.\n * @attribute {number} min-size - Reflects the minSize property.\n * @attribute {boolean} multiple - Reflects the multiple property.\n * @attribute {boolean} auto-focus - Reflects the autoFocus property.\n * @attribute {boolean} no-style - Reflects the noStyle property.\n *\n * @slot - The default slot content of the dropzone.\n *\n * @csspart dropzone - The dropzone element.\n * @csspart dropzone--dragover - The state of the dropzone when dragging over it.\n *\n * @cssproperty --dropzone-border-width - The border width of the dropzone.\n * @cssproperty --dropzone-border-style - The border style of the dropzone.\n * @cssproperty --dropzone-border-radius - The border radius of the dropzone.\n * @cssproperty --dropzone-border-color - The border color of the dropzone.\n * @cssproperty --dropzone-border-color-dragover - The border color of the dropzone when dragging over it.\n * @cssproperty --dropzone-border-color-hover - The border color of the dropzone when hovering over it.\n * @cssproperty --dropzone-background-color - The background color of the dropzone.\n * @cssproperty --dropzone-background-color-dragover - The background color of the dropzone when dragging over it.\n * @cssproperty --dropzone-background-color-hover - The background color of the dropzone when hovering over it.\n * @cssproperty --dropzone-body-color - The text color of the dropzone.\n * @cssproperty --dropzone-body-color-dragover - The text color of the dropzone when dragging over it.\n * @cssproperty --dropzone-body-color-hover - The text color of the dropzone when hovering over it.\n * @cssproperty --dropzone-focus-shadow-rgb - The RGB value of the dropzone's focus shadow.\n * @cssproperty --dropzone-focus-box-shadow - The box shadow of the dropzone when focused.\n * @cssproperty --dropzone-transition-duration - The transition's duration for the dropzone area.\n *\n * @event files-dropzone-drop - Fired when files are dropped.\n * @event files-dropzone-drop-accepted - Fired when files dropped files are accepted.\n * @event files-dropzone-drop-rejected - Fired when files dropped files are rejected.\n * @event files-dropzone-dragenter - Fired when files are dragged into the dropzone.\n * @event files-dropzone-dragover - Fired when files are dragged over the dropzone.\n * @event files-dropzone-dragleave - Fired when files are dragged out of the dropzone.\n * @event files-dropzone-error - Fired when there is any error in the process of reading dropped files or directories.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method openFileDialog - Instance method. Opens the file dialog programmatically.\n */ class $862aa3736b0514bc$export$6ccd1735166caad9 extends HTMLElement {\n    /** @type {Nullable<HTMLInputElement>} */ #fileInput = null;\n    /** @type {Nullable<HTMLElement>} */ #dropzoneEl = null;\n    constructor(){\n        super();\n        if (!this.shadowRoot) {\n            const shadowRoot = this.attachShadow({\n                mode: \"open\",\n                delegatesFocus: true\n            });\n            shadowRoot.appendChild($862aa3736b0514bc$var$template.content.cloneNode(true));\n        }\n        if (this.shadowRoot) {\n            this.#fileInput = /** @type {Nullable<HTMLInputElement>} */ this.shadowRoot.getElementById(\"file-input\");\n            this.#dropzoneEl = this.shadowRoot.getElementById(\"dropzone\");\n        }\n    }\n    static get observedAttributes() {\n        return [\n            \"accept\",\n            \"disabled\",\n            \"multiple\"\n        ];\n    }\n    /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */ attributeChangedCallback(name, oldValue, newValue) {\n        if (name === \"accept\" && oldValue !== newValue && this.#fileInput) this.#fileInput.accept = this.accept;\n        if (name === \"disabled\" && oldValue !== newValue && this.#fileInput) {\n            this.#fileInput.disabled = this.disabled;\n            if (this.disabled) {\n                this.#dropzoneEl?.removeAttribute(\"tabindex\");\n                this.#dropzoneEl?.setAttribute(\"aria-disabled\", \"true\");\n            } else {\n                this.#dropzoneEl?.setAttribute(\"tabindex\", \"0\");\n                this.#dropzoneEl?.setAttribute(\"aria-disabled\", \"false\");\n            }\n        }\n        if (name === \"multiple\" && oldValue !== newValue && this.#fileInput) this.#fileInput.multiple = this.multiple;\n    }\n    /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */ connectedCallback() {\n        this.#upgradeProperty(\"accept\");\n        this.#upgradeProperty(\"disabled\");\n        this.#upgradeProperty(\"maxFiles\");\n        this.#upgradeProperty(\"maxSize\");\n        this.#upgradeProperty(\"minSize\");\n        this.#upgradeProperty(\"multiple\");\n        this.#upgradeProperty(\"autoFocus\");\n        this.#upgradeProperty(\"noStyle\");\n        this.#fileInput?.addEventListener(\"change\", this.#handleFileInputChange);\n        this.#dropzoneEl?.addEventListener(\"dragenter\", this.#handleDragEnter);\n        this.#dropzoneEl?.addEventListener(\"dragover\", this.#handleDragOver);\n        this.#dropzoneEl?.addEventListener(\"dragleave\", this.#handleDragLeave);\n        this.#dropzoneEl?.addEventListener(\"drop\", this.#handleDrop);\n        this.#dropzoneEl?.addEventListener(\"click\", this.#handleClick);\n        this.#dropzoneEl?.addEventListener(\"keyup\", this.#handleKeyUp);\n        this.autoFocus && this.#dropzoneEl?.focus();\n    }\n    /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */ disconnectedCallback() {\n        this.#fileInput?.removeEventListener(\"change\", this.#handleFileInputChange);\n        this.#dropzoneEl?.removeEventListener(\"dragenter\", this.#handleDragEnter);\n        this.#dropzoneEl?.removeEventListener(\"dragover\", this.#handleDragOver);\n        this.#dropzoneEl?.removeEventListener(\"dragleave\", this.#handleDragLeave);\n        this.#dropzoneEl?.removeEventListener(\"drop\", this.#handleDrop);\n        this.#dropzoneEl?.removeEventListener(\"click\", this.#handleClick);\n        this.#dropzoneEl?.removeEventListener(\"keyup\", this.#handleKeyUp);\n    }\n    /**\n   * @type {string} - A comma-separated list of unique file type specifiers describing file types to allow.\n   * @attribute accept - Reflects the accept property.\n   */ get accept() {\n        return this.getAttribute(\"accept\") || \"\";\n    }\n    set accept(value) {\n        this.setAttribute(\"accept\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {boolean} - Determines whether the dropzone is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */ get disabled() {\n        return this.hasAttribute(\"disabled\");\n    }\n    set disabled(value) {\n        this.toggleAttribute(\"disabled\", !!value);\n    }\n    /**\n   * @type {number} - The maximum number of files allowed to be dropped.\n   * @default Infinity\n   * @attribute max-files - Reflects the maxFiles property.\n   */ get maxFiles() {\n        const num = Number(this.getAttribute(\"max-files\")) || 0;\n        if (num <= 0) return Infinity;\n        return Math.floor(Math.abs(num));\n    }\n    set maxFiles(value) {\n        this.setAttribute(\"max-files\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {number} - The maximum file size allowed in bytes.\n   * @default Infinity\n   * @attribute max-size - Reflects the maxSize property.\n   */ get maxSize() {\n        const value = this.getAttribute(\"max-size\");\n        if (value === null) return Infinity;\n        const num = Number(value);\n        return Number.isNaN(num) ? Infinity : num;\n    }\n    set maxSize(value) {\n        this.setAttribute(\"max-size\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {number} - The minimum file size allowed in bytes.\n   * @default 0\n   * @attribute min-size - Reflects the minSize property.\n   */ get minSize() {\n        const value = this.getAttribute(\"min-size\");\n        if (value === null) return 0;\n        const num = Number(value);\n        return Number.isNaN(num) ? 0 : num;\n    }\n    set minSize(value) {\n        this.setAttribute(\"min-size\", value != null ? value.toString() : value);\n    }\n    /**\n   * @type {boolean} - Allows multiple files to be dropped.\n   * @default false\n   * @attribute multiple - Reflects the multiple property.\n   */ get multiple() {\n        return this.hasAttribute(\"multiple\");\n    }\n    set multiple(value) {\n        this.toggleAttribute(\"multiple\", !!value);\n    }\n    /**\n   * @type {boolean} - Automatically focuses the dropzone when it's connected to the DOM.\n   * @default false\n   * @attribute auto-focus - Reflects the autoFocus property.\n   */ get autoFocus() {\n        return this.hasAttribute(\"auto-focus\");\n    }\n    set autoFocus(value) {\n        this.toggleAttribute(\"auto-focus\", !!value);\n    }\n    /**\n   * @type {boolean} - Prevents the dropzone from applying any styling.\n   * @default false\n   * @attribute no-style - Reflects the noStyle property.\n   */ get noStyle() {\n        return this.hasAttribute(\"no-style\");\n    }\n    set noStyle(value) {\n        this.toggleAttribute(\"no-style\", !!value);\n    }\n    /**\n   * Handles the change event of the file input.\n   *\n   * @param {*} evt - The event object.\n   */ #handleFileInputChange = async (evt)=>{\n        try {\n            this.#handleFilesSelect(await (0, $f31161edf38949e9$export$6d52664cd15c442)(evt));\n        } catch (error) {\n            this.dispatchEvent(new CustomEvent(`${$862aa3736b0514bc$var$COMPONENT_NAME}-error`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        }\n    };\n    /**\n   * Handles the dragenter event of the dropzone.\n   */ #handleDragEnter = ()=>{\n        if (this.disabled) return;\n        this.dispatchEvent(new Event(`${$862aa3736b0514bc$var$COMPONENT_NAME}-dragenter`, {\n            bubbles: true,\n            composed: true\n        }));\n    };\n    /**\n   * Handles the dragover event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */ #handleDragOver = (evt)=>{\n        evt.preventDefault();\n        if (this.disabled) {\n            evt.dataTransfer.dropEffect = \"none\";\n            return;\n        }\n        evt.dataTransfer.dropEffect = \"copy\";\n        if (this.#dropzoneEl) {\n            this.#dropzoneEl.classList.add(\"dropzone--dragover\");\n            this.#dropzoneEl.part.add(\"dropzone--dragover\");\n        }\n        this.dispatchEvent(new Event(`${$862aa3736b0514bc$var$COMPONENT_NAME}-dragover`, {\n            bubbles: true,\n            composed: true\n        }));\n    };\n    /**\n   * Handles the dragleave event of the dropzone.\n   */ #handleDragLeave = ()=>{\n        if (this.disabled) return;\n        if (this.#dropzoneEl) {\n            this.#dropzoneEl.classList.remove(\"dropzone--dragover\");\n            this.#dropzoneEl.part.remove(\"dropzone--dragover\");\n        }\n        this.dispatchEvent(new Event(`${$862aa3736b0514bc$var$COMPONENT_NAME}-dragleave`, {\n            bubbles: true,\n            composed: true\n        }));\n    };\n    /**\n   * Handles the drop event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */ #handleDrop = async (evt)=>{\n        if (this.disabled) return;\n        evt.preventDefault();\n        if (this.#dropzoneEl) {\n            this.#dropzoneEl.classList.remove(\"dropzone--dragover\");\n            this.#dropzoneEl.part.remove(\"dropzone--dragover\");\n        }\n        try {\n            this.#handleFilesSelect(await (0, $f31161edf38949e9$export$6d52664cd15c442)(evt));\n        } catch (error) {\n            this.dispatchEvent(new CustomEvent(`${$862aa3736b0514bc$var$COMPONENT_NAME}-error`, {\n                bubbles: true,\n                composed: true,\n                detail: {\n                    error: error\n                }\n            }));\n        }\n    };\n    /**\n   * Handles the click event of the dropzone.\n   */ #handleClick = ()=>{\n        if (this.disabled) return;\n        this.#fileInput?.click();\n    };\n    /**\n   * Handles the keyup event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */ #handleKeyUp = (evt)=>{\n        if (this.disabled) return;\n        if (evt.key === \" \" || evt.key === \"Enter\") this.#fileInput?.click();\n    };\n    /**\n   * Handles the selection of files.\n   *\n   * @param {File[]} files - The files to handle.\n   */ #handleFilesSelect(files) {\n        if (!Array.isArray(files) || !files.length) return;\n        const acceptedFiles = [];\n        const rejectedFiles = [];\n        const filesLength = files.length;\n        // If the component is not in multiple mode, reject all files.\n        if (!this.multiple && filesLength > 1) for (const file of files)rejectedFiles.push({\n            file: file,\n            errors: [\n                {\n                    code: $862aa3736b0514bc$var$TOO_MANY_FILES,\n                    message: `Too many files selected. Only 1 file is allowed.`\n                }\n            ]\n        });\n        else if (this.multiple && filesLength > this.maxFiles) // If the component is in multiple mode, but the number of files exceeds\n        // the maxFiles attribute, reject all files.\n        for (const file of files)rejectedFiles.push({\n            file: file,\n            errors: [\n                {\n                    code: $862aa3736b0514bc$var$TOO_MANY_FILES,\n                    message: `Too many files selected. Only ${this.maxFiles} ${this.maxFiles > 1 ? \"files are\" : \"file is\"} allowed.`\n                }\n            ]\n        });\n        else // Validate each file. If it's valid, add it to the accepted files array,\n        // otherwise add it to the rejected files array.\n        for (const file of files){\n            const fileHasValidType = (0, $38f222170fd4d21a$export$7c47054fed488f80)(file, this.accept);\n            const fileExceedsMaxSize = file.size > this.maxSize;\n            const fileIsSmallerThanMinSize = file.size < this.minSize;\n            if (fileHasValidType && !fileExceedsMaxSize && !fileIsSmallerThanMinSize) acceptedFiles.push(file);\n            else {\n                const errors = [];\n                if (!fileHasValidType) errors.push({\n                    code: $862aa3736b0514bc$var$INVALID_MIME_TYPE,\n                    message: `File type \"${file.type}\" is not accepted.`\n                });\n                if (fileExceedsMaxSize) errors.push({\n                    code: $862aa3736b0514bc$var$FILE_TOO_LARGE,\n                    message: `File size ${file.size} exceeds the maximum size of ${this.maxSize}.`\n                });\n                if (fileIsSmallerThanMinSize) errors.push({\n                    code: $862aa3736b0514bc$var$FILE_TOO_SMALL,\n                    message: `File size ${file.size} is smaller than the minimum size of ${this.minSize}.`\n                });\n                rejectedFiles.push({\n                    file: file,\n                    errors: errors\n                });\n            }\n        }\n        this.dispatchEvent(new CustomEvent(`${$862aa3736b0514bc$var$COMPONENT_NAME}-drop`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                acceptedFiles: acceptedFiles,\n                rejectedFiles: rejectedFiles\n            }\n        }));\n        if (acceptedFiles.length > 0) this.dispatchEvent(new CustomEvent(`${$862aa3736b0514bc$var$COMPONENT_NAME}-drop-accepted`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                acceptedFiles: acceptedFiles\n            }\n        }));\n        if (rejectedFiles.length > 0) this.dispatchEvent(new CustomEvent(`${$862aa3736b0514bc$var$COMPONENT_NAME}-drop-rejected`, {\n            bubbles: true,\n            composed: true,\n            detail: {\n                rejectedFiles: rejectedFiles\n            }\n        }));\n        if (this.#fileInput) this.#fileInput.value = this.#fileInput.defaultValue;\n    }\n    /**\n   * Opens the file dialog programmatically.\n   */ openFileDialog() {\n        if (this.disabled) return;\n        this.#fileInput?.click();\n    }\n    /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'accept' | 'disabled' | 'maxFiles' | 'maxSize' | 'minSize' | 'multiple' | 'autoFocus' | 'noStyle'} prop - The property name to upgrade.\n   */ #upgradeProperty(prop) {\n        /** @type {any} */ const instance = this;\n        if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n            const value = instance[prop];\n            delete instance[prop];\n            instance[prop] = value;\n        }\n    }\n    /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='files-dropzone'] - The name of the custom element.\n   * @example\n   *\n   * FilesDropzone.defineCustomElement('my-dropzone');\n   */ static defineCustomElement(elementName = $862aa3736b0514bc$var$COMPONENT_NAME) {\n        if (typeof window !== \"undefined\" && !window.customElements.get(elementName)) window.customElements.define(elementName, $862aa3736b0514bc$export$6ccd1735166caad9);\n    }\n}\n\n\n(0, $862aa3736b0514bc$export$6ccd1735166caad9).defineCustomElement();\n\n\nexport {$862aa3736b0514bc$export$6ccd1735166caad9 as FilesDropzone};\n//# sourceMappingURL=files-dropzone-defined.js.map\n","import { FilesDropzone } from './files-dropzone.js';\n\nFilesDropzone.defineCustomElement();\n\nexport { FilesDropzone };\n","// @ts-check\n\n/**\n * Represents a value that may be of type T, or null.\n *\n * @template T\n * @typedef {T | null} Nullable\n */\n\nimport { isValidFile } from './utils/is-valid-file.js';\nimport { getFilesFromEvent } from './utils/files-selector.js';\n\nconst COMPONENT_NAME = 'files-dropzone';\nconst TOO_MANY_FILES = 'TOO_MANY_FILES';\nconst FILE_TOO_LARGE = 'FILE_TOO_LARGE';\nconst FILE_TOO_SMALL = 'FILE_TOO_SMALL';\nconst INVALID_MIME_TYPE = 'INVALID_MIME_TYPE';\nconst template = document.createElement('template');\n\nconst styles = /* css */`\n  *,\n  *::before,\n  *::after {\n    box-sizing: border-box;\n  }\n\n  :host([hidden]),\n  [hidden] {\n    display: none !important;\n  }\n\n  :host {\n    --dropzone-border-width: 2px;\n    --dropzone-border-style: dashed;\n    --dropzone-border-radius: 0.25rem;\n    --dropzone-border-color: #6c757d;\n    --dropzone-border-color-dragover: #0d6efd;\n    --dropzone-border-color-hover: var(--dropzone-border-color-dragover);\n    --dropzone-background-color: #ffffff;\n    --dropzone-background-color-dragover: #f4f4f5;\n    --dropzone-background-color-hover: var(--dropzone-background-color-dragover);\n    --dropzone-body-color: #3f3f46;\n    --dropzone-body-color-dragover: var(--dropzone-body-color);\n    --dropzone-body-color-hover: var(--dropzone-body-color-dragover);\n    --dropzone-focus-shadow-rgb: 49,132,253;\n    --dropzone-focus-box-shadow: 0 0 0 0.25rem rgba(var(--dropzone-focus-shadow-rgb), 0.5);\n    --transition-duration: 0.2s; /* for backwards compatibility */\n    --dropzone-transition-duration: var(--transition-duration);\n\n    display: block;\n  }\n\n  :host(:not([no-style])) .dropzone {\n    border: var(--dropzone-border-width) var(--dropzone-border-style) var(--dropzone-border-color);\n    border-radius: var(--dropzone-border-radius);\n    padding: 3rem 1rem;\n    overflow: hidden;\n    background-color: var(--dropzone-background-color);\n    color: var(--dropzone-body-color);\n    text-align: center;\n    cursor: pointer;\n    transition: border var(--dropzone-transition-duration) ease-in-out, background-color var(--dropzone-transition-duration) ease-in-out, color var(--dropzone-transition-duration) ease-in-out, box-shadow var(--dropzone-transition-duration) ease-in-out;\n  }\n\n  :host(:not([no-style])[disabled]) .dropzone {\n    opacity: 0.8;\n    cursor: not-allowed;\n    user-select: none;\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone--dragover {\n    border-color: var(--dropzone-border-color-dragover);\n    background-color: var(--dropzone-background-color-dragover);\n    color: var(--dropzone-body-color-dragover);\n  }\n\n  :host(:not([no-style]):not([disabled])) .dropzone:focus-visible {\n    outline: none;\n    box-shadow: var(--dropzone-focus-box-shadow);\n  }\n\n  @media (hover: hover) {\n    :host(:not([no-style]):not([disabled])) .dropzone:not(.dropzone--dragover):hover {\n      border-color: var(--dropzone-border-color-hover);\n      background-color: var(--dropzone-background-color-hover);\n      color: var(--dropzone-body-color-hover);\n    }\n  }\n`;\n\ntemplate.innerHTML = /* html */`\n  <style>\n    ${styles}\n  </style>\n\n  <input type=\"file\" id=\"file-input\" hidden>\n\n  <div part=\"dropzone\" class=\"dropzone\" id=\"dropzone\" tabindex=\"0\" role=\"button\" aria-disabled=\"false\">\n    <slot>Drag 'n' drop files here, or click to select files</slot>\n  </div>\n`;\n\n/**\n * @summary A custom element that allows users to drag and drop files into it.\n * @documentation https://github.com/georapbox/files-dropzone-element\n *\n * @tagname files-dropzone - This is the default tag name, unless overridden by the `defineCustomElement` method.\n *\n * @property {string} accept - A comma-separated list of unique file type specifiers describing file types to allow.\n * @property {boolean} disabled - Determines whether the dropzone is disabled.\n * @property {number} maxFiles - The maximum number of files allowed to be dropped.\n * @property {number} maxSize - The maximum file size allowed in bytes.\n * @property {number} minSize - The minimum file size allowed in bytes.\n * @property {boolean} multiple - Allows multiple files to be dropped.\n * @property {boolean} autoFocus - Automatically focuses the dropzone when it's connected to the DOM.\n * @property {boolean} noStyle - Prevents the dropzone from applying any styling.\n *\n * @attribute {string} accept - Reflects the accept property.\n * @attribute {boolean} disabled - Reflects the disabled property.\n * @attribute {number} max-files - Reflects the maxFiles property.\n * @attribute {number} max-size - Reflects the maxSize property.\n * @attribute {number} min-size - Reflects the minSize property.\n * @attribute {boolean} multiple - Reflects the multiple property.\n * @attribute {boolean} auto-focus - Reflects the autoFocus property.\n * @attribute {boolean} no-style - Reflects the noStyle property.\n *\n * @slot - The default slot content of the dropzone.\n *\n * @csspart dropzone - The dropzone element.\n * @csspart dropzone--dragover - The state of the dropzone when dragging over it.\n *\n * @cssproperty --dropzone-border-width - The border width of the dropzone.\n * @cssproperty --dropzone-border-style - The border style of the dropzone.\n * @cssproperty --dropzone-border-radius - The border radius of the dropzone.\n * @cssproperty --dropzone-border-color - The border color of the dropzone.\n * @cssproperty --dropzone-border-color-dragover - The border color of the dropzone when dragging over it.\n * @cssproperty --dropzone-border-color-hover - The border color of the dropzone when hovering over it.\n * @cssproperty --dropzone-background-color - The background color of the dropzone.\n * @cssproperty --dropzone-background-color-dragover - The background color of the dropzone when dragging over it.\n * @cssproperty --dropzone-background-color-hover - The background color of the dropzone when hovering over it.\n * @cssproperty --dropzone-body-color - The text color of the dropzone.\n * @cssproperty --dropzone-body-color-dragover - The text color of the dropzone when dragging over it.\n * @cssproperty --dropzone-body-color-hover - The text color of the dropzone when hovering over it.\n * @cssproperty --dropzone-focus-shadow-rgb - The RGB value of the dropzone's focus shadow.\n * @cssproperty --dropzone-focus-box-shadow - The box shadow of the dropzone when focused.\n * @cssproperty --dropzone-transition-duration - The transition's duration for the dropzone area.\n *\n * @event files-dropzone-drop - Fired when files are dropped.\n * @event files-dropzone-drop-accepted - Fired when files dropped files are accepted.\n * @event files-dropzone-drop-rejected - Fired when files dropped files are rejected.\n * @event files-dropzone-dragenter - Fired when files are dragged into the dropzone.\n * @event files-dropzone-dragover - Fired when files are dragged over the dropzone.\n * @event files-dropzone-dragleave - Fired when files are dragged out of the dropzone.\n * @event files-dropzone-error - Fired when there is any error in the process of reading dropped files or directories.\n *\n * @method defineCustomElement - Static method. Defines a custom element with the given name.\n * @method openFileDialog - Instance method. Opens the file dialog programmatically.\n */\nclass FilesDropzone extends HTMLElement {\n  /** @type {Nullable<HTMLInputElement>} */\n  #fileInput = null;\n\n  /** @type {Nullable<HTMLElement>} */\n  #dropzoneEl = null;\n\n  constructor() {\n    super();\n\n    if (!this.shadowRoot) {\n      const shadowRoot = this.attachShadow({ mode: 'open', delegatesFocus: true });\n      shadowRoot.appendChild(template.content.cloneNode(true));\n    }\n\n    if (this.shadowRoot) {\n      this.#fileInput = /** @type {Nullable<HTMLInputElement>} */(this.shadowRoot.getElementById('file-input'));\n      this.#dropzoneEl = this.shadowRoot.getElementById('dropzone');\n    }\n  }\n\n  static get observedAttributes() {\n    return ['accept', 'disabled', 'multiple'];\n  }\n\n  /**\n   * Lifecycle method that is called when attributes are changed, added, removed, or replaced.\n   *\n   * @param {string} name - The name of the attribute.\n   * @param {string} oldValue - The old value of the attribute.\n   * @param {string} newValue - The new value of the attribute.\n   */\n  attributeChangedCallback(name, oldValue, newValue) {\n    if (name === 'accept' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.accept = this.accept;\n    }\n\n    if (name === 'disabled' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.disabled = this.disabled;\n\n      if (this.disabled) {\n        this.#dropzoneEl?.removeAttribute('tabindex');\n        this.#dropzoneEl?.setAttribute('aria-disabled', 'true');\n      } else {\n        this.#dropzoneEl?.setAttribute('tabindex', '0');\n        this.#dropzoneEl?.setAttribute('aria-disabled', 'false');\n      }\n    }\n\n    if (name === 'multiple' && oldValue !== newValue && this.#fileInput) {\n      this.#fileInput.multiple = this.multiple;\n    }\n  }\n\n  /**\n   * Lifecycle method that is called when the element is added to the DOM.\n   */\n  connectedCallback() {\n    this.#upgradeProperty('accept');\n    this.#upgradeProperty('disabled');\n    this.#upgradeProperty('maxFiles');\n    this.#upgradeProperty('maxSize');\n    this.#upgradeProperty('minSize');\n    this.#upgradeProperty('multiple');\n    this.#upgradeProperty('autoFocus');\n    this.#upgradeProperty('noStyle');\n\n    this.#fileInput?.addEventListener('change', this.#handleFileInputChange);\n    this.#dropzoneEl?.addEventListener('dragenter', this.#handleDragEnter);\n    this.#dropzoneEl?.addEventListener('dragover', this.#handleDragOver);\n    this.#dropzoneEl?.addEventListener('dragleave', this.#handleDragLeave);\n    this.#dropzoneEl?.addEventListener('drop', this.#handleDrop);\n    this.#dropzoneEl?.addEventListener('click', this.#handleClick);\n    this.#dropzoneEl?.addEventListener('keyup', this.#handleKeyUp);\n\n    this.autoFocus && this.#dropzoneEl?.focus();\n  }\n\n  /**\n   * Lifecycle method that is called when the element is removed from the DOM.\n   */\n  disconnectedCallback() {\n    this.#fileInput?.removeEventListener('change', this.#handleFileInputChange);\n    this.#dropzoneEl?.removeEventListener('dragenter', this.#handleDragEnter);\n    this.#dropzoneEl?.removeEventListener('dragover', this.#handleDragOver);\n    this.#dropzoneEl?.removeEventListener('dragleave', this.#handleDragLeave);\n    this.#dropzoneEl?.removeEventListener('drop', this.#handleDrop);\n    this.#dropzoneEl?.removeEventListener('click', this.#handleClick);\n    this.#dropzoneEl?.removeEventListener('keyup', this.#handleKeyUp);\n  }\n\n  /**\n   * @type {string} - A comma-separated list of unique file type specifiers describing file types to allow.\n   * @attribute accept - Reflects the accept property.\n   */\n  get accept() {\n    return this.getAttribute('accept') || '';\n  }\n\n  set accept(value) {\n    this.setAttribute('accept', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} - Determines whether the dropzone is disabled.\n   * @default false\n   * @attribute disabled - Reflects the disabled property.\n   */\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  set disabled(value) {\n    this.toggleAttribute('disabled', !!value);\n  }\n\n  /**\n   * @type {number} - The maximum number of files allowed to be dropped.\n   * @default Infinity\n   * @attribute max-files - Reflects the maxFiles property.\n   */\n  get maxFiles() {\n    const num = Number(this.getAttribute('max-files')) || 0;\n\n    if (num <= 0) {\n      return Infinity;\n    }\n\n    return Math.floor(Math.abs(num));\n  }\n\n  set maxFiles(value) {\n    this.setAttribute('max-files', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} - The maximum file size allowed in bytes.\n   * @default Infinity\n   * @attribute max-size - Reflects the maxSize property.\n   */\n  get maxSize() {\n    const value = this.getAttribute('max-size');\n\n    if (value === null) {\n      return Infinity;\n    }\n\n    const num = Number(value);\n\n    return Number.isNaN(num) ? Infinity : num;\n  }\n\n  set maxSize(value) {\n    this.setAttribute('max-size', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {number} - The minimum file size allowed in bytes.\n   * @default 0\n   * @attribute min-size - Reflects the minSize property.\n   */\n  get minSize() {\n    const value = this.getAttribute('min-size');\n\n    if (value === null) {\n      return 0;\n    }\n\n    const num = Number(value);\n\n    return Number.isNaN(num) ? 0 : num;\n  }\n\n  set minSize(value) {\n    this.setAttribute('min-size', value != null ? value.toString() : value);\n  }\n\n  /**\n   * @type {boolean} - Allows multiple files to be dropped.\n   * @default false\n   * @attribute multiple - Reflects the multiple property.\n   */\n  get multiple() {\n    return this.hasAttribute('multiple');\n  }\n\n  set multiple(value) {\n    this.toggleAttribute('multiple', !!value);\n  }\n\n  /**\n   * @type {boolean} - Automatically focuses the dropzone when it's connected to the DOM.\n   * @default false\n   * @attribute auto-focus - Reflects the autoFocus property.\n   */\n  get autoFocus() {\n    return this.hasAttribute('auto-focus');\n  }\n\n  set autoFocus(value) {\n    this.toggleAttribute('auto-focus', !!value);\n  }\n\n  /**\n   * @type {boolean} - Prevents the dropzone from applying any styling.\n   * @default false\n   * @attribute no-style - Reflects the noStyle property.\n   */\n  get noStyle() {\n    return this.hasAttribute('no-style');\n  }\n\n  set noStyle(value) {\n    this.toggleAttribute('no-style', !!value);\n  }\n\n  /**\n   * Handles the change event of the file input.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleFileInputChange = async evt => {\n    try {\n      this.#handleFilesSelect(await getFilesFromEvent(evt));\n    } catch (error) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}-error`, {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    }\n  };\n\n  /**\n   * Handles the dragenter event of the dropzone.\n   */\n  #handleDragEnter = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.dispatchEvent(new Event(`${COMPONENT_NAME}-dragenter`, {\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  /**\n   * Handles the dragover event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleDragOver = evt => {\n    evt.preventDefault();\n\n    if (this.disabled) {\n      evt.dataTransfer.dropEffect = 'none';\n      return;\n    }\n\n    evt.dataTransfer.dropEffect = 'copy';\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.add('dropzone--dragover');\n      this.#dropzoneEl.part.add('dropzone--dragover');\n    }\n\n    this.dispatchEvent(new Event(`${COMPONENT_NAME}-dragover`, {\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  /**\n   * Handles the dragleave event of the dropzone.\n   */\n  #handleDragLeave = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.remove('dropzone--dragover');\n      this.#dropzoneEl.part.remove('dropzone--dragover');\n    }\n\n    this.dispatchEvent(new Event(`${COMPONENT_NAME}-dragleave`, {\n      bubbles: true,\n      composed: true\n    }));\n  };\n\n  /**\n   * Handles the drop event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleDrop = async evt => {\n    if (this.disabled) {\n      return;\n    }\n\n    evt.preventDefault();\n\n    if (this.#dropzoneEl) {\n      this.#dropzoneEl.classList.remove('dropzone--dragover');\n      this.#dropzoneEl.part.remove('dropzone--dragover');\n    }\n\n    try {\n      this.#handleFilesSelect(await getFilesFromEvent(evt));\n    } catch (error) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}-error`, {\n        bubbles: true,\n        composed: true,\n        detail: { error }\n      }));\n    }\n  };\n\n  /**\n   * Handles the click event of the dropzone.\n   */\n  #handleClick = () => {\n    if (this.disabled) {\n      return;\n    }\n\n    this.#fileInput?.click();\n  };\n\n  /**\n   * Handles the keyup event of the dropzone.\n   *\n   * @param {*} evt - The event object.\n   */\n  #handleKeyUp = evt => {\n    if (this.disabled) {\n      return;\n    }\n\n    if (evt.key === ' ' || evt.key === 'Enter') {\n      this.#fileInput?.click();\n    }\n  };\n\n  /**\n   * Handles the selection of files.\n   *\n   * @param {File[]} files - The files to handle.\n   */\n  #handleFilesSelect(files) {\n    if (!Array.isArray(files) || !files.length) {\n      return;\n    }\n\n    const acceptedFiles = [];\n    const rejectedFiles = [];\n    const filesLength = files.length;\n\n    // If the component is not in multiple mode, reject all files.\n    if (!this.multiple && filesLength > 1) {\n      for (const file of files) {\n        rejectedFiles.push({\n          file,\n          errors: [{\n            code: TOO_MANY_FILES,\n            message: `Too many files selected. Only 1 file is allowed.`\n          }]\n        });\n      }\n    } else if (this.multiple && filesLength > this.maxFiles) {\n      // If the component is in multiple mode, but the number of files exceeds\n      // the maxFiles attribute, reject all files.\n      for (const file of files) {\n        rejectedFiles.push({\n          file,\n          errors: [{\n            code: TOO_MANY_FILES,\n            message: `Too many files selected. Only ${this.maxFiles} ${this.maxFiles > 1 ? 'files are' : 'file is'} allowed.`\n          }]\n        });\n      }\n    } else {\n      // Validate each file. If it's valid, add it to the accepted files array,\n      // otherwise add it to the rejected files array.\n      for (const file of files) {\n        const fileHasValidType = isValidFile(file, this.accept);\n        const fileExceedsMaxSize = file.size > this.maxSize;\n        const fileIsSmallerThanMinSize = file.size < this.minSize;\n\n        if (fileHasValidType && !fileExceedsMaxSize && !fileIsSmallerThanMinSize) {\n          acceptedFiles.push(file);\n        } else {\n          const errors = [];\n\n          if (!fileHasValidType) {\n            errors.push({\n              code: INVALID_MIME_TYPE,\n              message: `File type \"${file.type}\" is not accepted.`\n            });\n          }\n\n          if (fileExceedsMaxSize) {\n            errors.push({\n              code: FILE_TOO_LARGE,\n              message: `File size ${file.size} exceeds the maximum size of ${this.maxSize}.`\n            });\n          }\n\n          if (fileIsSmallerThanMinSize) {\n            errors.push({\n              code: FILE_TOO_SMALL,\n              message: `File size ${file.size} is smaller than the minimum size of ${this.minSize}.`\n            });\n          }\n\n          rejectedFiles.push({ file, errors });\n        }\n      }\n    }\n\n    this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}-drop`, {\n      bubbles: true,\n      composed: true,\n      detail: {\n        acceptedFiles,\n        rejectedFiles\n      }\n    }));\n\n    if (acceptedFiles.length > 0) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}-drop-accepted`, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          acceptedFiles\n        }\n      }));\n    }\n\n    if (rejectedFiles.length > 0) {\n      this.dispatchEvent(new CustomEvent(`${COMPONENT_NAME}-drop-rejected`, {\n        bubbles: true,\n        composed: true,\n        detail: {\n          rejectedFiles\n        }\n      }));\n    }\n\n    if (this.#fileInput) {\n      this.#fileInput.value = this.#fileInput.defaultValue;\n    }\n  }\n\n  /**\n   * Opens the file dialog programmatically.\n   */\n  openFileDialog() {\n    if (this.disabled) {\n      return;\n    }\n\n    this.#fileInput?.click();\n  }\n\n  /**\n   * This is to safe guard against cases where, for instance, a framework may have added the element to the page and set a\n   * value on one of its properties, but lazy loaded its definition. Without this guard, the upgraded element would miss that\n   * property and the instance property would prevent the class property setter from ever being called.\n   *\n   * https://developers.google.com/web/fundamentals/web-components/best-practices#lazy-properties\n   *\n   * @param {'accept' | 'disabled' | 'maxFiles' | 'maxSize' | 'minSize' | 'multiple' | 'autoFocus' | 'noStyle'} prop - The property name to upgrade.\n   */\n  #upgradeProperty(prop) {\n    /** @type {any} */\n    const instance = this;\n\n    if (Object.prototype.hasOwnProperty.call(instance, prop)) {\n      const value = instance[prop];\n      delete instance[prop];\n      instance[prop] = value;\n    }\n  }\n\n  /**\n   * Defines a custom element with the given name.\n   * The name must contain a dash (-).\n   *\n   * @param {string} [elementName='files-dropzone'] - The name of the custom element.\n   * @example\n   *\n   * FilesDropzone.defineCustomElement('my-dropzone');\n   */\n  static defineCustomElement(elementName = COMPONENT_NAME) {\n    if (typeof window !== 'undefined' && !window.customElements.get(elementName)) {\n      window.customElements.define(elementName, FilesDropzone);\n    }\n  }\n}\n\nexport { FilesDropzone };\n","// @ts-check\n\n/**\n * Checks if a file is valid based on the accepted file type specifiers.\n *\n * @param {File} file - The File object to validate.\n * @param {string} [acceptedTypeSpecifiers=''] - The accepted file type specifiers.\n * @returns {boolean} - True if the file is valid, false otherwise.\n */\nexport function isValidFile(file, acceptedTypeSpecifiers = '') {\n  if (!acceptedTypeSpecifiers) {\n    return true;\n  }\n\n  const acceptedMimeTypesList = [\n    ...new Set(acceptedTypeSpecifiers.split(',').map(v => v.trim()).filter(Boolean))\n  ];\n\n  const fileMimeType = file.type;\n  const baseMimeType = fileMimeType.replace(/\\/.*$/, '');\n\n  for (const validType of acceptedMimeTypesList) {\n    if (validType.charAt(0) === '.') {\n      if (file.name.toLowerCase().indexOf(validType.toLowerCase(), file.name.length - validType.length) !== -1) {\n        return true;\n      }\n    } else if (/\\/\\*$/.test(validType)) {\n      // Check for mime type that looks like \"image/*\" or similar.\n      if (baseMimeType === validType.replace(/\\/.*$/, '')) {\n        return true;\n      }\n    } else {\n      if (fileMimeType === validType) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n","// @ts-check\n\n/**\n * A map of common file extensions and their associated MIME types.\n */\nconst COMMON_MIME_TYPES = new Map([\n  // https://developer.mozilla.org/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types\n  ['aac', 'audio/aac'],\n  ['abw', 'application/x-abiword'],\n  ['arc', 'application/x-freearc'],\n  ['avif', 'image/avif'],\n  ['avi', 'video/x-msvideo'],\n  ['azw', 'application/vnd.amazon.ebook'],\n  ['bin', 'application/octet-stream'],\n  ['bmp', 'image/bmp'],\n  ['bz', 'application/x-bzip'],\n  ['bz2', 'application/x-bzip2'],\n  ['cda', 'application/x-cdf'],\n  ['csh', 'application/x-csh'],\n  ['css', 'text/css'],\n  ['csv', 'text/csv'],\n  ['doc', 'application/msword'],\n  ['docx', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n  ['eot', 'application/vnd.ms-fontobject'],\n  ['epub', 'application/epub+zip'],\n  ['gz', 'application/gzip'],\n  ['gif', 'image/gif'],\n  ['heic', 'image/heic'],\n  ['heif', 'image/heif'],\n  ['htm', 'text/html'],\n  ['html', 'text/html'],\n  ['ico', 'image/vnd.microsoft.icon'],\n  ['ics', 'text/calendar'],\n  ['jar', 'application/java-archive'],\n  ['jpeg', 'image/jpeg'],\n  ['jpg', 'image/jpeg'],\n  ['jxl', 'image/jxl'],\n  ['js', 'text/javascript'],\n  ['json', 'application/json'],\n  ['jsonld', 'application/ld+json'],\n  ['markdown', 'text/markdown'],\n  ['md', 'text/markdown'],\n  ['mid', 'audio/midi'],\n  ['midi', 'audio/midi'],\n  ['mjs', 'text/javascript'],\n  ['mp3', 'audio/mpeg'],\n  ['mp4', 'video/mp4'],\n  ['mpeg', 'video/mpeg'],\n  ['mpkg', 'application/vnd.apple.installer+xml'],\n  ['odp', 'application/vnd.oasis.opendocument.presentation'],\n  ['ods', 'application/vnd.oasis.opendocument.spreadsheet'],\n  ['odt', 'application/vnd.oasis.opendocument.text'],\n  ['oga', 'audio/ogg'],\n  ['ogv', 'video/ogg'],\n  ['ogx', 'application/ogg'],\n  ['opus', 'audio/opus'],\n  ['otf', 'font/otf'],\n  ['png', 'image/png'],\n  ['pdf', 'application/pdf'],\n  ['php', 'application/x-httpd-php'],\n  ['ppt', 'application/vnd.ms-powerpoint'],\n  ['pptx', 'application/vnd.openxmlformats-officedocument.presentationml.presentation'],\n  ['rar', 'application/vnd.rar'],\n  ['rtf', 'application/rtf'],\n  ['sh', 'application/x-sh'],\n  ['svg', 'image/svg+xml'],\n  ['swf', 'application/x-shockwave-flash'],\n  ['tar', 'application/x-tar'],\n  ['tif', 'image/tiff'],\n  ['tiff', 'image/tiff'],\n  ['ts', 'video/mp2t'],\n  ['ttf', 'font/ttf'],\n  ['txt', 'text/plain'],\n  ['vsd', 'application/vnd.visio'],\n  ['wav', 'audio/wav'],\n  ['weba', 'audio/webm'],\n  ['webm', 'video/webm'],\n  ['webp', 'image/webp'],\n  ['woff', 'font/woff'],\n  ['woff2', 'font/woff2'],\n  ['xhtml', 'application/xhtml+xml'],\n  ['xls', 'application/vnd.ms-excel'],\n  ['xlsx', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'],\n  ['xml', 'application/xml'],\n  ['xul', 'application/vnd.mozilla.xul+xml'],\n  ['zip', 'application/zip'],\n  ['7z', 'application/x-7z-compressed'],\n\n  // Others\n  ['mkv', 'video/x-matroska'],\n  ['mov', 'video/quicktime'],\n  ['msg', 'application/vnd.ms-outlook']\n]);\n\nconst FILES_TO_IGNORE = [\n  // Thumbnail cache files for macOS and Windows\n  '.DS_Store', // macOs\n  'Thumbs.db' // Windows\n];\n\n/**\n * Adds a `type` property to the file object if it doesn't have one and the file has an extension.\n * This is needed because Firefox doesn't add a type property to files dragged from the desktop.\n * @bug https://bugzilla.mozilla.org/show_bug.cgi?id=1424689\n *\n * @param {File} file - The file object to add the type property to.\n * @returns {File} - The file object with the type property added.\n */\nconst toFileWithMimeType = file => {\n  const { name } = file;\n  const hasExtension = name && name.lastIndexOf('.') !== -1;\n\n  if (hasExtension && !file.type) {\n    const extension = (name.split('.').pop() || '').toLowerCase();\n    const type = COMMON_MIME_TYPES.get(extension);\n\n    if (type) {\n      Object.defineProperty(file, 'type', {\n        value: type,\n        writable: false,\n        configurable: false,\n        enumerable: true\n      });\n    }\n  }\n\n  return file;\n};\n\n/**\n * Adds a `path` property to the file object if it doesn't have one.\n * If `path` is not provided, the `webkitRelativePath` property of the file will be used\n * or the file's name if `webkitRelativePath` is not available.\n *\n * @param {File} file - The file object to add the path property to.\n * @param {string} [path] - The path to set on the file object.\n * @returns {File} - The file object with the path property added.\n */\nconst toFileWithPath = (file, path) => {\n  const fileWithMimeType = toFileWithMimeType(file);\n\n  // @ts-ignore\n  if (typeof fileWithMimeType.path !== 'string') {\n    const { webkitRelativePath } = file;\n\n    Object.defineProperty(fileWithMimeType, 'path', {\n      value: typeof path === 'string' ? path : webkitRelativePath || file.name,\n      writable: false,\n      configurable: false,\n      enumerable: true\n    });\n  }\n\n  return fileWithMimeType;\n};\n\n/**\n * Wrap `FileSystemDirectoryReader.readEntries` in a promise to make working with read entries easier.\n * https://developer.mozilla.org/docs/Web/API/FileSystemDirectoryReader/readEntries\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */\nconst readEntriesPromise = async directoryReader => {\n  return await new Promise((resolve, reject) => {\n    directoryReader.readEntries(resolve, reject);\n  });\n};\n\n/**\n * Read all entries in a directory or sub-directory\n * by calling `readEntries` until it returns an empty array.\n *\n * @param {FileSystemDirectoryReader} directoryReader - The directory reader to read entries from.\n * @returns {Promise<FileSystemEntry[]>} - A promise that resolves with an array of `FileSystemEntry` objects.\n */\nconst readAllDirectoryEntries = async directoryReader => {\n  const entries = [];\n  let readEntries = await readEntriesPromise(directoryReader);\n\n  while (readEntries.length > 0) {\n    entries.push(...readEntries);\n    readEntries = await readEntriesPromise(directoryReader);\n  }\n\n  return entries;\n};\n\n/**\n * Get a `File` object from a `FileSystemFileEntry` object.\n *\n * @param {FileSystemFileEntry} fileEntry - The file entry to get a `File` object from.\n * @returns {Promise<File>} - A promise that resolves with a `File` object.\n */\nconst getFileFromFileEntry = fileEntry => {\n  return new Promise((resolve, reject) => {\n    fileEntry.file(file => resolve(toFileWithPath(file, fileEntry.fullPath)), reject);\n  });\n};\n\n/**\n * Get an array of `File` objects from a `DataTransferItemList` object.\n *\n * @param {DataTransferItemList} dataTransferItemList - The item list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nconst getFilesFromDataTransferItemList = async dataTransferItemList => {\n  const files = [];\n\n  // Chromium browsers read only 100 files at a time as per the spec, so we need to use\n  // BFS (Breadth-first search) to traverse the entire directory/file structure.\n  // https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry#javascript_content\n  const queue = [];\n\n  for (const item of dataTransferItemList) {\n    if (item.kind !== 'file') {\n      // Ignore non-file items, such as links.\n      continue;\n    }\n\n    // https://developer.mozilla.org/docs/Web/API/DataTransferItem/webkitGetAsEntry\n    // This function is implemented as `webkitGetAsEntry()` in non-WebKit browsers\n    // including Firefox at this time but it may be renamed to `getAsEntry()` in the future.\n    // @ts-ignore\n    const entry = item.getAsEntry ? item.getAsEntry() : item.webkitGetAsEntry();\n\n    queue.push(entry);\n  }\n\n  while (queue.length > 0) {\n    const entry = queue.shift();\n\n    if (!entry) {\n      continue;\n    } else if (entry.isFile) {\n      const file = await getFileFromFileEntry(entry);\n\n      if (FILES_TO_IGNORE.indexOf(file.name) === -1) {\n        files.push(file);\n      }\n    } else if (entry.isDirectory) {\n      queue.push(...await readAllDirectoryEntries(entry.createReader()));\n    }\n  }\n\n  return files;\n};\n\n/**\n * Get an array of `File` objects from a `FileList` object.\n *\n * @param {FileList} fileList - The file list to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nconst getFilesFromFileList = async fileList => {\n  const files = [];\n\n  for (const file of fileList) {\n    if (FILES_TO_IGNORE.indexOf(file.name) === -1) {\n      files.push(toFileWithPath(file));\n    }\n  }\n\n  return files;\n};\n\n/**\n * Get an array of `File` objects from an event.\n * This function supports both `drop` and `change` events.\n *\n * @param {*} evt - The event to get an array of `File` objects from.\n * @returns {Promise<File[]>} - A promise that resolves with an array of `File` objects.\n */\nexport const getFilesFromEvent = async evt => {\n  if (evt.dataTransfer) {\n    return evt.dataTransfer.items\n      ? await getFilesFromDataTransferItemList(evt.dataTransfer.items)\n      : await getFilesFromFileList(evt.dataTransfer.files);\n  }\n\n  return await getFilesFromFileList(evt.target.files);\n};\n","export const ACCEPTED_MIME_TYPES = [\n  'image/jpg',\n  'image/jpeg',\n  'image/png',\n  'image/apng',\n  'image/gif',\n  'image/webp',\n  'image/avif'\n];\nexport const MAX_SHADOW_BLUR_SIZE = 20;\nexport const MAX_STROKE_WIDTH = 20;\nexport const MAX_ROTATE = 360;\n","/**\n * Generates a unique id of the form `${prefix}-${randomString}-${suffix}`.\n *\n * @param {string} [prefix=''] - The prefix to use for the id.\n * @param {string} [suffix=''] - The suffix to use for the id.\n * @returns {string} - The unique id.\n */\nconst uid = (prefix = '', suffix = '') => {\n  const prefixString = typeof prefix === 'string' && prefix !== '' ? prefix + '-' : '';\n  const suffixString = typeof suffix === 'string' && suffix !== '' ? '-' + suffix : '';\n  const randomString = Math.random().toString(36).substring(2, 8); // Pseudo-random string of six alphanumeric characters.\n\n  return `${prefixString}${randomString}${suffixString}`;\n};\n\nexport { uid };\n","import { ACCEPTED_MIME_TYPES } from '../constants.js';\n\n/**\n * Creates a file from a given URL.\n *\n * @param {{ url: string, filename: string, mimeType: string }} options\n * @param {string} options.url - The URL of the file to fetch.\n * @param {string} options.filename - The name of the file to create.\n * @param {string} options.mimeType - The MIME type of the file to create.\n * @returns {Promise<File>} - A promise that resolves to the file created from the given URL.\n */\nexport const fileFromUrl = async (options = {}) => {\n  const res = await fetch(options.url);\n  const blob = await res.blob();\n  const mimeType = options.mimeType || blob.type || '';\n\n  if (!ACCEPTED_MIME_TYPES.includes(mimeType)) {\n    throw new Error(\n      `This is not an accepted image format. Accepted MIME types are: ${ACCEPTED_MIME_TYPES.join(', ')}`\n    );\n  }\n\n  return new File([blob], options.filename || '', blob);\n};\n","/**\n * A class representing a storage utility for managing data in `localStorage` or `sessionStorage`.\n */\nclass Storage {\n  /**\n   * The prefix to be added to all keys.\n   *\n   * @type {string}\n   * @private\n   */\n  #keyPrefix = null;\n\n  /**\n   * The storage provider (`localStorage` or `sessionStorage`).\n   *\n   * @type {Storage}\n   * @private\n   */\n  #provider = null;\n\n  /**\n   * Creates an instance of Storage.\n   *\n   * @param {string} prefix - The prefix to be added to all keys when storing/retrieving data.\n   * @param {Storage} [provider=localStorage] - The storage provider (`localStorage` or `sessionStorage`).\n   * @throws {Error} If prefix is not provided or if the provider is not supported.\n   */\n  constructor(prefix, provider = localStorage) {\n    if (!prefix) {\n      throw new Error('Storage prefix is required');\n    }\n\n    if (provider !== localStorage && provider !== sessionStorage) {\n      throw new Error('Storage provider is not supported');\n    }\n\n    this.#keyPrefix = prefix;\n    this.#provider = provider;\n  }\n\n  /**\n   * Sets a key-value pair in the storage.\n   *\n   * @param {string} key - The key for the data.\n   * @param {*} value - The value to be stored (will be converted to JSON string).\n   */\n  set(key, value) {\n    try {\n      this.#provider.setItem(`${this.#keyPrefix}${key}`, JSON.stringify(value));\n    } catch (err) {\n      console.error('Error saving to storage', err);\n    }\n  }\n\n  /**\n   * Retrieves the value associated with the given key from the storage.\n   *\n   * @param {string} key - The key to retrieve the value for.\n   * @returns {*} The value associated with the key, or `null` if key is not found or an error occurs.\n   */\n  get(key) {\n    try {\n      const value = this.#provider.getItem(`${this.#keyPrefix}${key}`);\n      return value ? JSON.parse(value) : null;\n    } catch (err) {\n      console.error('Error getting from storage', err);\n      return null;\n    }\n  }\n}\n\nconst DEFAULT_STORAGE_PREFIX = 'meme-generator/';\nconst DEFAULT_STORAGE_PROVIDER = localStorage;\nconst storage = new Storage(DEFAULT_STORAGE_PREFIX, DEFAULT_STORAGE_PROVIDER);\n\nexport { Storage, storage };\n","export const isSolidColorSelected = selectedImage => {\n  return typeof selectedImage === 'string';\n};\n","import Pressuru from 'url:../assets/fonts/Pressuru/Pressuru.ttf';\nimport OswaldRegular from 'url:../assets/fonts/Oswald/Oswald-Regular.ttf';\nimport OswaldBold from 'url:../assets/fonts/Oswald/Oswald-Bold.ttf';\nimport RobotoRegular from 'url:../assets/fonts/Roboto/Roboto-Regular.ttf';\nimport RobotoBold from 'url:../assets/fonts/Roboto/Roboto-Bold.ttf';\nimport RobotoCondensedRegular from 'url:../assets/fonts/RobotoCondensed/RobotoCondensed-Regular.ttf';\nimport RobotoCondensedBold from 'url:../assets/fonts/RobotoCondensed/RobotoCondensed-Bold.ttf';\nimport CourierPrimeRegular from 'url:../assets/fonts/CourierPrime/CourierPrime-Regular.ttf';\nimport CourierPrimeBold from 'url:../assets/fonts/CourierPrime/CourierPrime-Bold.ttf';\nimport OpenSansRegular from 'url:../assets/fonts/OpenSans/OpenSans-Regular.ttf';\nimport OpenSansBold from 'url:../assets/fonts/OpenSans/OpenSans-Bold.ttf';\n\nexport const customFonts = [\n  { name: 'Pressuru', label: 'Pressuru', path: Pressuru, style: 'normal', weight: '400' },\n  { name: 'Oswald-Regular', label: 'Oswald', path: OswaldRegular, style: 'normal', weight: '400' },\n  { name: 'Oswald-Bold', label: 'Oswald Bold', path: OswaldBold, style: 'normal', weight: '700' },\n  { name: 'Roboto-Regular', label: 'Roboto', path: RobotoRegular, style: 'normal', weight: '400' },\n  { name: 'Roboto-Bold', label: 'Roboto Bold', path: RobotoBold, style: 'normal', weight: '700' },\n  {\n    name: 'RobotoCondensed-Regular',\n    label: 'Roboto Condensed',\n    path: RobotoCondensedRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'RobotoCondensed-Bold',\n    label: 'Roboto Condensed Bold',\n    path: RobotoCondensedBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'CourierPrime-Regular',\n    label: 'Courier Prime',\n    path: CourierPrimeRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'CourierPrime-Bold',\n    label: 'Courier Prime Bold',\n    path: CourierPrimeBold,\n    style: 'normal',\n    weight: '700'\n  },\n  {\n    name: 'OpenSans-Regular',\n    label: 'Open Sans',\n    path: OpenSansRegular,\n    style: 'normal',\n    weight: '400'\n  },\n  {\n    name: 'OpenSans-Bold',\n    label: 'Open Sans Bold',\n    path: OpenSansBold,\n    style: 'normal',\n    weight: '400'\n  }\n];\n\nexport const loadCustomFont = async (name, path, options = {}) => {\n  try {\n    const font = new FontFace(name, `url(${path})`, { ...options });\n    await font.load();\n    document.fonts.add(font);\n  } catch (err) {\n    console.error(err);\n  }\n};\n","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"Pressuru.684952ea.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"Oswald-Regular.89ec7d89.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"Oswald-Bold.0f6a7ca6.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"Roboto-Regular.ca197847.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"Roboto-Bold.fdb9b54a.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"RobotoCondensed-Regular.d585f5c7.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"RobotoCondensed-Bold.e1f96d4b.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"CourierPrime-Regular.3a25a501.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"CourierPrime-Bold.3d6bf689.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"OpenSans-Regular.edf9e01b.ttf\";","module.exports = require('./helpers/bundle-url').getBundleURL('9p9yL') + \"OpenSans-Bold.8fceb72b.ttf\";","const errorsContainer = document.getElementById('errorsContainer');\n\nconst hideError = evt => {\n  const target = evt.currentTarget;\n  target.removeEventListener('click', hideError);\n  errorsContainer.removeChild(target.parentNode);\n};\n\nexport const toastAlert = (message = '', type = 'info') => {\n  const types = ['info', 'warning', 'danger'];\n\n  if (!types.includes(type)) {\n    type = 'info';\n  }\n\n  const template = /* html */ `\n    ${message}\n    <button type=\"button\" class=\"btn-close\" data-dismiss=\"alert\" aria-label=\"Close\"></button>\n  `;\n\n  const div = document.createElement('div');\n  div.className = `alert alert-${type} alert-dismissible text-break mb-2 fade`;\n  div.innerHTML = template;\n  div.querySelector('button').addEventListener('click', hideError);\n  errorsContainer.appendChild(div);\n  setTimeout(() => div.classList.add('show'), 100);\n};\n","import { uid } from './utils/uid.js';\nimport { customFonts } from './custom-fonts.js';\nimport { MAX_SHADOW_BLUR_SIZE, MAX_STROKE_WIDTH, MAX_ROTATE } from './constants.js';\n\nconst defaultTextboxData = {\n  id: '',\n  text: '',\n  fillColor: '#ffffff',\n  strokeColor: '#000000',\n  font: 'Pressuru',\n  fontSize: 40,\n  fontWeight: 'normal',\n  textAlign: 'center',\n  shadowBlur: 0,\n  strokeWidth: 1.5,\n  offsetY: 0,\n  offsetX: 0,\n  rotate: 0,\n  allCaps: true\n};\n\nconst textboxes = new Map();\n\nclass Textbox {\n  constructor(data) {\n    const id = uid('textbox', Date.now().toString(36));\n\n    this.data = data ? { ...data, id } : { ...defaultTextboxData, id };\n\n    textboxes.set(id, this);\n\n    document.dispatchEvent(\n      new CustomEvent(`textbox-create`, {\n        bubbles: true,\n        composed: true,\n        detail: { textbox: this }\n      })\n    );\n  }\n\n  getData() {\n    return this.data;\n  }\n\n  static create(data) {\n    return new Textbox(data);\n  }\n\n  static getAll() {\n    return textboxes;\n  }\n\n  static getById(id) {\n    return textboxes.get(id);\n  }\n\n  static remove(id) {\n    textboxes.delete(id);\n\n    document.dispatchEvent(\n      new CustomEvent(`textbox-remove`, {\n        bubbles: true,\n        composed: true,\n        detail: { id }\n      })\n    );\n  }\n\n  static createElement(textbox, autoFocus = true) {\n    if (!(textbox instanceof Textbox)) {\n      return;\n    }\n\n    const data = textbox.getData();\n    const {\n      id,\n      text,\n      fillColor,\n      strokeColor,\n      fontSize,\n      shadowBlur,\n      strokeWidth,\n      offsetX,\n      offsetY,\n      rotate\n    } = data;\n\n    const template = /* html */ `\n    <div class=\"d-flex align-items-center\">\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"duplicate-text-box\" title=\"Duplicate text box\"></button>\n      <button type=\"button\" class=\"btn btn-link\" data-button=\"delete-text-box\" title=\"Remove text box\"></button>\n\n      <textarea class=\"form-control meme-text\" type=\"text\" data-input=\"text\" autocomplete=\"off\" rows=\"1\" placeholder=\"${`Text #${textboxes.size}`}\">${text}</textarea>\n\n      <div class=\"d-flex align-items-center pe-2\">\n        <label for=\"fillColorInput\" class=\"visually-hidden\">Fill color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${fillColor}\" id=\"fillColorInput\" data-input=\"fillColor\" title=\"Fill color\">\n\n        <label for=\"strokeColorInput\" class=\"visually-hidden\">Outline color</label>\n        <input class=\"form-control\" type=\"color\" value=\"${strokeColor}\" id=\"strokeColorInput\" data-input=\"strokeColor\" title=\"Outline color\">\n\n        <button type=\"button\" class=\"btn btn-secondary settings-button\" data-button=\"settings\" title=\"Settings\"></button>\n      </div>\n    </div>\n\n    <div class=\"p-2\" data-section=\"settings\" hidden>\n      <div class=\"row g-2\">\n        <div class=\"col-12\">\n          <details class=\"emoji-picker-details\">\n            <summary>Emoji picker</summary>\n            <emoji-picker class=\"light\"></emoji-picker>\n          </details>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontInput_${id}\" class=\"mb-1 d-block text-truncate\">Font: </label>\n\n          <select class=\"form-select\" data-input=\"font\" id=\"fontInput_${id}\">\n            <optgroup label=\"Web fonts\">\n              <option value=\"Impact\">Impact</option>\n              <option value=\"Arial\">Arial</option>\n              <option value=\"Arial Black\">Arial Black</option>\n              <option value=\"Helvetica\">Helvetica</option>\n              <option value=\"Comic Sans MS\">Comic Sans MS</option>\n              <option value=\"Times\">Times</option>\n              <option value=\"Times New Roman\">Times New Roman</option>\n              <option value=\"Courier New\">Courier New</option>\n              <option value=\"Verdana\">Verdana</option>\n              <option value=\"Georgia\">Georgia</option>\n              <option value=\"Palatino\">Palatino</option>\n              <option value=\"Garamond\">Garamond</option>\n              <option value=\"Bookman\">Bookman</option>\n              <option value=\"Trebuchet MS\">Trebuchet MS</option>\n            </optgroup>\n            <optgroup label=\"Google fonts\">\n              ${customFonts.map(({ name, label }) => `<option value=\"${name}\">${label}</option>`)}\n            </optgroup>\n          </select>\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontSizeInput_${id}\" class=\"mb-1 d-block text-truncate\">Size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"1\" value=\"${fontSize}\" data-input=\"fontSize\" id=\"fontSizeInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"fontWeightInput_${id}\" class=\"mb-1 d-block text-truncate\">Weight:</label>\n          <select class=\"form-select\" data-input=\"fontWeight\" id=\"fontWeightInput_${id}\">\n            <option value=\"normal\">Normal</option>\n            <option value=\"bold\">Bold</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label for=\"shadowWidthInput_${id}\" class=\"mb-1 d-block text-truncate\">Shadow size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${MAX_SHADOW_BLUR_SIZE}\" value=\"${shadowBlur}\" data-input=\"shadowBlur\" id=\"shadowWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"strokeWidthInput_${id}\">Outline size:</label>\n          <input class=\"form-control\" type=\"number\" min=\"0\" max=\"${MAX_STROKE_WIDTH}\" step=\"0.5\" value=\"${strokeWidth}\" data-input=\"strokeWidth\" id=\"strokeWidthInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label for=\"textAlignInput_${id}\" class=\"mb-1 d-block text-truncate\">Text align:</label>\n          <select class=\"form-select\" data-input=\"textAlign\" id=\"textAlignInput_${id}\" value=\"right\">\n            <option value=\"left\">Left</option>\n            <option value=\"center\">Center</option>\n            <option value=\"right\">Right</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetYInput_${id}\">Vertical offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetY}\" data-input=\"offsetY\" id=\"offsetYInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"offsetXInput_${id}\">Horizontal offset:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${offsetX}\" data-input=\"offsetX\" id=\"offsetXInput_${id}\">\n        </div>\n\n        <div class=\"col-4 mb-3\">\n          <label class=\"mb-1 d-block text-truncate\" for=\"textRotateInput_${id}\">Rotate:</label>\n          <input class=\"form-control\" type=\"number\" value=\"${rotate}\" data-input=\"rotate\" id=\"textRotateInput_${id}\" min=\"-360\" max=\"${MAX_ROTATE}\">\n        </div>\n\n        <div class=\"col-12\">\n          <div class=\"move-text-actions mb-3\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Up\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Right\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Down\"></button>\n            <button type=\"button\" class=\"btn btn-secondary\" data-action=\"move-text\" aria-label=\"Left\"></button>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row g-2\">\n        <div class=\"col-lg-12\">\n          <div class=\"form-check\">\n            <input type=\"checkbox\" class=\"form-check-input\" id=\"allCapsCheckbox_${id}\" data-input=\"allCaps\">\n            <label class=\"form-check-label\" for=\"allCapsCheckbox_${id}\">ALL CAPS</label>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n\n    const fragment = document.createDocumentFragment();\n    const div = document.createElement('div');\n\n    div.setAttribute('id', id);\n    div.setAttribute('data-section', 'textbox');\n    div.className = 'bg-light border shadow-sm mb-3 rounded';\n    div.innerHTML = template;\n    div.querySelectorAll('select').forEach(el => (el.value = data[el.dataset.input]));\n    div\n      .querySelectorAll('input[type=\"checkbox\"]')\n      .forEach(el => (el.checked = data[el.dataset.input]));\n\n    const textboxEl = fragment.appendChild(div);\n\n    if (autoFocus) {\n      setTimeout(() => textboxEl.querySelector('[data-input=\"text\"]').focus(), 0);\n    }\n\n    return textboxEl;\n  }\n}\n\nexport { Textbox };\n","import { isSolidColorSelected } from './utils/is-solid-color-selected.js';\nimport { MAX_SHADOW_BLUR_SIZE, MAX_STROKE_WIDTH, MAX_ROTATE } from './constants.js';\n\nexport class Canvas {\n  #canvas = null;\n  #ctx = null;\n\n  constructor(canvasEl) {\n    this.#canvas = canvasEl;\n    this.#ctx = this.#canvas.getContext('2d');\n  }\n\n  get width() {\n    return this.#canvas.width;\n  }\n\n  set width(value) {\n    this.#canvas.width = value;\n  }\n\n  get height() {\n    return this.#canvas.height;\n  }\n\n  set height(value) {\n    this.#canvas.height = value;\n  }\n\n  getDimensions() {\n    return {\n      width: this.width,\n      height: this.height\n    };\n  }\n\n  setDimensions({ width, height }) {\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n\n  toDataURL() {\n    return this.#canvas.toDataURL();\n  }\n\n  draw(image, textboxes = new Map()) {\n    if (image == null) {\n      return;\n    }\n\n    const canvas = this.#canvas;\n    const ctx = this.#ctx;\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    if (isSolidColorSelected(image)) {\n      ctx.fillStyle = image;\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n    } else {\n      ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n    }\n\n    let multiplier = 0;\n\n    textboxes.forEach(textbox => {\n      const { data } = textbox;\n\n      multiplier += 1;\n\n      ctx.save();\n\n      ctx.font = `${data.fontWeight} ${(data.fontSize * canvas.width) / 1000}px ${data.font}`;\n      ctx.fillStyle = data.fillColor;\n      ctx.textAlign = data.textAlign;\n      ctx.strokeStyle = data.strokeColor;\n\n      const lineHeight = ctx.measureText('M').width + data.fontSize / 2;\n      const xPos = canvas.width / 2;\n      const shadowBlur = data.shadowBlur;\n      const text = data.allCaps === true ? data.text.toUpperCase() : data.text;\n      const textLines = text.split('\\n');\n\n      if (shadowBlur !== 0) {\n        ctx.shadowOffsetX = 0;\n        ctx.shadowOffsetY = 0;\n        ctx.shadowBlur = Math.min(shadowBlur, MAX_SHADOW_BLUR_SIZE);\n        ctx.shadowColor = data.strokeColor;\n      }\n\n      ctx.translate(xPos + data.offsetX, lineHeight * multiplier + data.offsetY);\n      ctx.rotate((Math.min(data.rotate, MAX_ROTATE) * Math.PI) / 180);\n\n      // First draw each line with shadow.\n      textLines.forEach((text, index) => ctx.fillText(text, 0, index * lineHeight));\n\n      // Since shadows of multiline text may be drawn over letters of neighbour lines\n      // (when shadow blur is big enough), re-draw text without shadows.\n      if (shadowBlur !== 0) {\n        ctx.shadowBlur = 0;\n        textLines.forEach((text, index) => ctx.fillText(text, 0, index * lineHeight));\n      }\n\n      if (data.strokeWidth > 0) {\n        ctx.lineWidth = Math.min(data.strokeWidth, MAX_STROKE_WIDTH);\n        textLines.forEach((text, index) => ctx.strokeText(text, 0, index * lineHeight));\n      }\n\n      ctx.restore();\n    });\n\n    return this;\n  }\n\n  clear() {\n    this.#ctx.clearRect(0, 0, this.#canvas.width, this.#canvas.height);\n    return this;\n  }\n\n  show() {\n    this.#canvas.hidden = false;\n    return this;\n  }\n\n  hide() {\n    this.#canvas.hidden = true;\n    return this;\n  }\n\n  static createInstance(canvasEl) {\n    return new Canvas(canvasEl);\n  }\n}\n"],"names":["$1e5dc5e467331cb9$var$promise","$1e5dc5e467331cb9$var$baselineEmojiWidth","$parcel$interopDefault","a","__esModule","default","$dec5faeb65064cfd$var$browserSupportsTextareaTextNodes","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","$d1f26ac162b12b4a$var$assertNonEmptyString","str","Error","$d1f26ac162b12b4a$var$assertNumber","number","id","exports","init","module","call","err","code","register","$d1f26ac162b12b4a$var$STORE_EMOJI","$d1f26ac162b12b4a$var$STORE_KEYVALUE","$d1f26ac162b12b4a$var$STORE_FAVORITES","$d1f26ac162b12b4a$var$INDEX_TOKENS","$d1f26ac162b12b4a$var$INDEX_COUNT","$d1f26ac162b12b4a$var$INDEX_GROUP_AND_ORDER","$d1f26ac162b12b4a$var$KEY_ETAG","$d1f26ac162b12b4a$var$KEY_PREFERRED_SKINTONE","$d1f26ac162b12b4a$var$MODE_READONLY","$d1f26ac162b12b4a$var$MODE_READWRITE","$d1f26ac162b12b4a$var$INDEX_SKIN_UNICODE","$d1f26ac162b12b4a$var$uniqEmoji","emojis","$d1f26ac162b12b4a$var$uniqBy","arr","func","set","Set","res","item","key","has","add","push","_","unicode","$d1f26ac162b12b4a$var$openIndexedDBRequests","$d1f26ac162b12b4a$var$databaseCache","$d1f26ac162b12b4a$var$onCloseListeners","$d1f26ac162b12b4a$var$handleOpenOrDeleteReq","resolve","reject","req","onerror","error","onblocked","onsuccess","result","$d1f26ac162b12b4a$var$createDatabase","dbName","db","Promise","indexedDB","open","onupgradeneeded","e","oldVersion","$d1f26ac162b12b4a$var$initialMigration","createObjectStore","name","keyPath","indexes","store","indexName","multiEntry","Object","entries","createIndex","undefined","onclose","$d1f26ac162b12b4a$var$closeDatabase","$d1f26ac162b12b4a$var$dbPromise","storeName","readOnlyOrReadWrite","cb","txn","transaction","durability","objectStore","map","oncomplete","close","listeners","listener","$d1f26ac162b12b4a$var$irregularEmoticons","$d1f26ac162b12b4a$var$extractTokens","split","word","match","toLowerCase","replace","filter","Boolean","$d1f26ac162b12b4a$var$normalizeTokens","length","$d1f26ac162b12b4a$var$callStore","method","target","$d1f26ac162b12b4a$var$getIDB","$d1f26ac162b12b4a$var$getAllIDB","$d1f26ac162b12b4a$var$commit","commit","$d1f26ac162b12b4a$var$findCommonMembers","arrays","uniqByFunc","shortestArray","$d1f26ac162b12b4a$var$minBy","array","minItem","i","results","some","findIndex","$d1f26ac162b12b4a$var$isEmpty","$d1f26ac162b12b4a$var$get","$d1f26ac162b12b4a$var$hasData","url","eTag","oldETag","oldUrl","all","$d1f26ac162b12b4a$var$doFullDatabaseScanForSingleResult","predicate","emojiStore","lastKey","processNextBatch","getAll","IDBKeyRange","lowerBound","$d1f26ac162b12b4a$var$loadData","emojiData","transformedData","annotation","emoticon","group","order","shortcodes","skins","tags","emoji","version","tokens","flat","sort","tone","skinTones","skinUnicodes","skinVersions","metaStore","todo","checkFetched","onFetched","data","clear","put","$d1f26ac162b12b4a$var$getEmojiByGroup","range","bound","index","$d1f26ac162b12b4a$var$getEmojiBySearchQuery","query","intermediateResults","checkDone","onDone","b","token","only","$d1f26ac162b12b4a$var$getEmojiByShortcode","shortcode","lowerShortcodes","includes","$d1f26ac162b12b4a$var$getEmojiByUnicode","$d1f26ac162b12b4a$var$requiredKeys$1","$d1f26ac162b12b4a$var$customEmojiIndex","customEmojis","$d1f26ac162b12b4a$var$assertCustomEmojis","isArray","Array","firstItemIsFaulty","sortByName","searchTrie","$d1f26ac162b12b4a$var$trie","itemToTokens","Map","currentMap","char","charAt","nextMap","get","valuesAtCoda","exact","queue","value","shift","searchByExactMatch","searchByPrefix","shortcodeToEmoji","nameToEmoji","customEmoji","search","byShortcode","byName","$d1f26ac162b12b4a$var$isFirefoxContentScript","wrappedJSObject","$d1f26ac162b12b4a$var$cleanEmoji","structuredClone","len","$d1f26ac162b12b4a$var$warnETag","console","warn","$d1f26ac162b12b4a$var$requiredKeys","$d1f26ac162b12b4a$var$assertStatus","response","dataSource","Math","floor","status","$d1f26ac162b12b4a$var$getETag","fetch","headers","$d1f26ac162b12b4a$var$getETagAndData","json","$d1f26ac162b12b4a$var$assertEmojiData","$d1f26ac162b12b4a$var$jsonChecksum","object","inBuffer","$d1f26ac162b12b4a$var$binaryStringToArrayBuffer","binary","buf","ArrayBuffer","Uint8Array","charCodeAt","JSON","stringify","btoa","$d1f26ac162b12b4a$var$arrayBufferToBinaryString","buffer","bytes","byteLength","String","fromCharCode","crypto","subtle","digest","$d1f26ac162b12b4a$var$checkForUpdates","eTagAndData","$d1f26ac162b12b4a$var$loadDataForFirstTime","$d1f26ac162b12b4a$export$2e2bcd8739ae039","constructor","locale","_dbName","_db","_lazyUpdate","_custom","_clear","bind","_ready","_init","ready","checkReady","getEmojiByGroup","getEmojiBySearchQuery","getEmojiByShortcode","getEmojiByUnicodeOrName","unicodeOrName","getPreferredSkinTone","setPreferredSkinTone","skinTone","incrementFavoriteEmojiCount","getTopFavoriteEmoji","limit","customEmojiIndex","favoritesStore","openCursor","cursor","addResult","continue","primaryKey","custom","_shutdown","delete","deleteDatabase","$1e5dc5e467331cb9$var$allGroups","$1e5dc5e467331cb9$var$groups","slice","$1e5dc5e467331cb9$var$rIC","requestIdleCallback","setTimeout","$1e5dc5e467331cb9$var$hasZwj","$1e5dc5e467331cb9$var$versionsAndTestEmoji","$1e5dc5e467331cb9$var$MOST_COMMONLY_USED_EMOJI","$1e5dc5e467331cb9$var$FONT_FAMILY","$1e5dc5e467331cb9$var$DEFAULT_CATEGORY_SORTING","$1e5dc5e467331cb9$var$getTextFeature","text","color","canvas","document","createElement","width","height","ctx","getContext","textBaseline","font","fillStyle","scale","fillText","getImageData","$1e5dc5e467331cb9$var$compareFeatures","feature1","feature2","feature1Str","join","startsWith","$1e5dc5e467331cb9$var$detectEmojiSupportLevel","$1e5dc5e467331cb9$var$determineEmojiSupportLevel","$1e5dc5e467331cb9$var$testColorEmojiSupported","$1e5dc5e467331cb9$var$supportedZwjEmojis","$1e5dc5e467331cb9$var$halt","event","preventDefault","stopPropagation","$1e5dc5e467331cb9$var$incrementOrDecrement","decrement","val","$1e5dc5e467331cb9$var$uniqBy","$1e5dc5e467331cb9$var$rAF","requestAnimationFrame","$1e5dc5e467331cb9$var$resizeObserverSupported","ResizeObserver","$1e5dc5e467331cb9$var$calculateTextWidth","node","createRange","selectNode","firstChild","getBoundingClientRect","$1e5dc5e467331cb9$var$getFromMap","cache","cached","$1e5dc5e467331cb9$var$parseCache","WeakMap","$1e5dc5e467331cb9$var$domInstancesCache","$1e5dc5e467331cb9$var$unkeyedSymbol","Symbol","$1e5dc5e467331cb9$var$hasReplaceChildren","Element","prototype","$1e5dc5e467331cb9$var$qM","queueMicrotask","callback","then","$1e5dc5e467331cb9$var$arraysAreEqualByFunction","left","right","areEqualFunc","$1e5dc5e467331cb9$var$EMPTY_ARRAY","assign","$1e5dc5e467331cb9$var$assign","$1e5dc5e467331cb9$var$enI18n","categoriesLabel","emojiUnsupportedMessage","favoritesLabel","loadingMessage","networkErrorMessage","regionLabel","searchDescription","searchLabel","searchResultsLabel","skinToneDescription","skinToneLabel","skinTonesLabel","categories","activities","objects","symbols","flags","$1e5dc5e467331cb9$var$PROPS","$1e5dc5e467331cb9$var$EXTRA_STYLES","$1e5dc5e467331cb9$export$2e2bcd8739ae039","HTMLElement","props","attachShadow","mode","style","prop","textContent","$1e5dc5e467331cb9$var$baseStyles","shadowRoot","appendChild","_ctx","skinToneEmoji","customCategorySorting","i18n","emojiVersion","hasOwnProperty","_dbFlush","connectedCallback","_cmp","$1e5dc5e467331cb9$var$createRoot","refs","abortController","AbortController","abortSignal","signal","state","createEffect","$1e5dc5e467331cb9$var$createState","currentObserver","queued","destroyed","propsToObservers","dirtyObservers","flush","observersToRun","observer","size","Proxy","observers","newValue","addEventListener","runnable","oldObserver","database","initialLoad","currentEmojis","currentEmojisWithCategories","rawSearchText","searchText","searchMode","activeSearchItem","message","skinTonePickerExpanded","skinTonePickerExpandedAfterAnimation","currentSkinTone","activeSkinTone","skinToneButtonText","pickerStyle","skinToneButtonLabel","currentFavorites","defaultFavoriteEmojis","numColumns","isRtl","scrollbarWidth","currentGroupIndex","groups","databaseLoaded","activeSearchItemId","currentGroup","focus","getElementById","emojiToDomNode","fireEvent","detail","rootElement","dispatchEvent","CustomEvent","bubbles","composed","compareEmojiArrays","compareCurrentEmojisWithCategories","category","aCategory","aEmojis","bCategory","bEmojis","updateCurrentEmojis","newEmojis","updateSearchMode","newSearchMode","updateCurrentEmojisWithCategories","newEmojisWithCategories","unicodeWithSkin","helpers","labelWithSkin","$1e5dc5e467331cb9$var$uniq","titleForEmoji","events","onClickSkinToneButton","onEmojiClick","onNavClick","closestTarget","closest","groupId","parseInt","dataset","searchElement","onNavKeydown","doFocus","el","previousElementSibling","nextElementSibling","parentElement","firstElementChild","lastElementChild","onSearchKeydown","goToNextOrPrevious","previous","clickEmoji","onSkinToneOptionsClick","changeSkinTone","onSkinToneOptionsFocusOut","onSkinToneOptionsKeydown","changeActiveSkinTone","nextSkinTone","onSkinToneOptionsKeyup","onSearchInput","actions","calculateEmojiGridStyle","onUpdate","resizeObserver","getComputedStyle","newNumColumns","getPropertyValue","newIsRtl","parentWidth","contentRect","observe","disconnect","firstRender","updateCustomEmoji","isZwjSupported","filterEmojisByVersion","emojiSupportLevel","summarizeEmojis","$1e5dc5e467331cb9$var$summarizeEmojisForUI","toSimpleSkinsMap","skin","getEmojisByGroup","getEmojisBySearchQuery","emojiSummary","find","skinTonedUnicode","classList","contains","substring","relatedTarget","$1e5dc5e467331cb9$var$render","container","html","$1e5dc5e467331cb9$var$createFramework","domInstances","domInstanceCacheKey","keyFunction","originalCacheKey","expressions","domInstancesForTokens","updateDomInstance","$1e5dc5e467331cb9$var$parseHtml","template","elementsToBindings","$1e5dc5e467331cb9$var$parse","htmlString","withinTag","withinAttribute","elementIndexCounter","elementIndexes","attributeName","attributeValuePre","attributeValuePost","j","nextChar","pop","bindings","exec","binding","expressionIndex","$1e5dc5e467331cb9$var$parseTemplate","innerHTML","dom","cloneNode","content","instanceBindings","$1e5dc5e467331cb9$var$traverseAndSetupBindings","treeWalker","createTreeWalker","NodeFilter","SHOW_ELEMENT","element","elementIndex","targetNode","instanceBinding","targetParentNode","currentExpression","nextNode","$1e5dc5e467331cb9$var$patch","expression","setAttribute","newNode","$1e5dc5e467331cb9$var$patchChildren","newChildren","needsRerender","$1e5dc5e467331cb9$var$doChildrenNeedRerender","parentNode","oldChild","oldChildrenCount","newChild","nextSibling","$1e5dc5e467331cb9$var$replaceChildren","replaceChildren","append","replaceWith","nodeValue","emojiList","prefix","rootDom","emojiWithCategory","forElementWithAttribute","querySelectorAll","getAttribute","eventName","listenerName","ref","action","removeChild","level","handleDatabaseLoading","showingLoadingMessage","timeoutHandle","clearTimeout","updatePreferredSkinTone","fill","$1e5dc5e467331cb9$var$applySkinTone","zwjIndex","indexOf","fromCodePoint","$1e5dc5e467331cb9$var$LIGHT_SKIN_TONE","endsWith","$1e5dc5e467331cb9$var$LIGHT_SKIN_TONE_MODIFIER","updateDefaultFavoriteEmojis","favs","updateFavorites","dbFavorites","favorites","updateEmojis","currentGroupId","zwjEmojisToCheck","$1e5dc5e467331cb9$var$checkZwjSupport","baselineEmoji","emojiWidth","supported","tabpanelElement","scrollTop","calculateCurrentEmojisWithCategories","categoriesToEmoji","trim","skinToneDropdown","once","$set","newState","$destroy","abort","disconnectedCallback","isConnected","catch","observedAttributes","attributeChangedCallback","attrName","oldValue","_set","up","toUpperCase","parseFloat","_dbCreate","$1e5dc5e467331cb9$var$definitions","$dec5faeb65064cfd$var$canManipulateViaTextNodes","input","nodeName","textarea","defineProperties","customElements","define","$dec5faeb65064cfd$export$2e2bcd8739ae039","selection","ieRange","collapse","select","execCommand","start","selectionStart","end","selectionEnd","setRangeText","textNode","createTextNode","offset","startNode","endNode","nodeLength","setStart","setEnd","deleteContents","commonAncestorContainer","insertNode","setSelectionRange","createEvent","initEvent","$94933cc6427541bd$export$c37129e465f64ef0","navigator","canShare","defineProperty","$4f74a8126e204146$export$30b344bef3e55b67","enumerable","configurable","$4f74a8126e204146$var$t","$4f74a8126e204146$var$e","t","s","delegatesFocus","querySelector","toggleAttribute","disabled","toString","part","toggle","r","n","removeEventListener","hasAttribute","shareUrl","shareTitle","shareText","shareFiles","share","title","files","shareData","assignedElements","flatten","defineCustomElement","$636b0cf1ed0b9f88$export$cc30a98fe3890794","$636b0cf1ed0b9f88$var$t","Number","isNaN","min","max","$636b0cf1ed0b9f88$var$e","$636b0cf1ed0b9f88$var$i","$636b0cf1ed0b9f88$var$o","o","l","getSupportedConstraints","getTrackCapabilities","getTrackSettings","u","facingMode","stopVideoStream","startVideoStream","cameraResolution","pan","h","tilt","zoom","d","c","m","p","g","f","v","isSupported","autoPlay","noImage","loading","calculateFileSize","capture","play","video","finally","removeAttribute","from","childNodes","forEach","remove","getVideoTracks","applyConstraints","advanced","ideal","audio","mediaDevices","getUserMedia","srcObject","hidden","stop","videoWidth","videoHeight","drawImage","toDataURL","Image","src","dataURI","blob","getCapabilities","getSettings","$4da30046ce6d9325$export$32589115725b904b","$4da30046ce6d9325$var$e","$4da30046ce6d9325$var$t","showModal","body","preserveOverflow","overflow","noHeader","noAnimations","noCloseButton","staticBackdrop","fullscreen","placement","closeLabel","defaultPrevented","currentTarget","hide","assignedNodes","cancelable","reason","show","$7aad62ebc3d6fae8$export$6ccd1735166caad9","$7aad62ebc3d6fae8$var$e","$7aad62ebc3d6fae8$var$t","$7aad62ebc3d6fae8$var$o","lastIndexOf","type","writable","$7aad62ebc3d6fae8$var$i","path","webkitRelativePath","$7aad62ebc3d6fae8$var$r","readEntries","$7aad62ebc3d6fae8$var$a","$7aad62ebc3d6fae8$var$n","file","fullPath","$7aad62ebc3d6fae8$var$s","kind","getAsEntry","webkitGetAsEntry","isFile","isDirectory","createReader","$7aad62ebc3d6fae8$var$d","$7aad62ebc3d6fae8$var$l","dataTransfer","items","$7aad62ebc3d6fae8$var$p","$7aad62ebc3d6fae8$var$c","$7aad62ebc3d6fae8$var$h","$7aad62ebc3d6fae8$var$u","accept","multiple","autoFocus","maxFiles","abs","maxSize","minSize","noStyle","Event","dropEffect","click","errors","test","acceptedFiles","rejectedFiles","defaultValue","openFileDialog","$33dea9d9a6da4c9a$export$63e7bed68b07a85c","$21c3f3a8dccfa4fd$export$e2a22331486dcca0","suffix","randomString","random","$c3d7e05a1ce34ed5$export$6539e087749cf9d3","options","mimeType","File","filename","$f0a2ccd611c71db8$var$DEFAULT_STORAGE_PROVIDER","localStorage","$f0a2ccd611c71db8$export$ddcffe0146c8f882","keyPrefix","provider","sessionStorage","setItem","getItem","parse","$fbb55a96d78c7ba0$export$de75f46579dcf24","selectedImage","$eccf21b2da8f185e$exports","getBundleURL","$4e9367b4637ab0b3$exports","$98768b53aac35bcc$exports","$81873ad161a9f996$exports","$f1c993919e45d5c2$exports","$8f40b96e34825d38$exports","$51e3f333db254f7d$exports","$0d878777045f8608$exports","$da7f4261981c6446$exports","$553eebead4d87493$exports","$e4f4da01dd92f98a$exports","$055531bbd0af154c$export$6874249d87f2602a","label","weight","$055531bbd0af154c$export$59eceaef0c7797b2","FontFace","load","fonts","$166cfb2484b08c80$var$errorsContainer","$166cfb2484b08c80$var$hideError","evt","$166cfb2484b08c80$export$af04143326425dbd","types","div","className","$f0ee20a32c2bc385$var$defaultTextboxData","fillColor","strokeColor","fontSize","fontWeight","textAlign","shadowBlur","strokeWidth","offsetY","offsetX","rotate","allCaps","$f0ee20a32c2bc385$var$textboxes","$f0ee20a32c2bc385$export$8e3dca5fa4d5f04b","Date","now","textbox","getData","create","getById","fragment","createDocumentFragment","checked","textboxEl","$68e654e91d7a7392$export$8d01c972ee8b14a9","canvasEl","getDimensions","setDimensions","draw","image","textboxes","clearRect","fillRect","multiplier","save","strokeStyle","lineHeight","measureText","xPos","textLines","shadowOffsetX","shadowOffsetY","shadowColor","translate","PI","lineWidth","strokeText","restore","createInstance","$44ae6d9db4eaca0f$var$canvas","$44ae6d9db4eaca0f$var$videoModal","$44ae6d9db4eaca0f$var$downloadModal","$44ae6d9db4eaca0f$var$dropzoneEl","$44ae6d9db4eaca0f$var$instructionsEl","$44ae6d9db4eaca0f$var$imageUploadMethodSelect","$44ae6d9db4eaca0f$var$fileSelectBtn","$44ae6d9db4eaca0f$var$imageUrlForm","$44ae6d9db4eaca0f$var$addTextboxBtn","$44ae6d9db4eaca0f$var$textboxesContainer","$44ae6d9db4eaca0f$var$generateMemeBtn","$44ae6d9db4eaca0f$var$openVideoModalBtn","$44ae6d9db4eaca0f$var$downloadMemeBtn","$44ae6d9db4eaca0f$var$downloadMemePreview","$44ae6d9db4eaca0f$var$webShareComponent","$44ae6d9db4eaca0f$var$galleryEl","$44ae6d9db4eaca0f$var$gallerySearchEl","$44ae6d9db4eaca0f$var$galleryNoResultsEl","$44ae6d9db4eaca0f$var$solidColorForm","$44ae6d9db4eaca0f$var$uploadMethodEls","$44ae6d9db4eaca0f$var$removeConfirmationModal","$44ae6d9db4eaca0f$var$removeTextForm","$44ae6d9db4eaca0f$var$maxImageDimensionsForm","$44ae6d9db4eaca0f$var$maxImageDimensionsSelect","$44ae6d9db4eaca0f$var$clearCanvasBtn","$44ae6d9db4eaca0f$var$maxImageDimensionsFromStorage","$44ae6d9db4eaca0f$var$shouldFocusOnTextboxCreate","$44ae6d9db4eaca0f$var$selectedImage","$44ae6d9db4eaca0f$var$reqAnimFrame","$44ae6d9db4eaca0f$var$generateMeme","dataUrl","downloadLink","download","href","$44ae6d9db4eaca0f$var$setImageMaxDimensions","maxWidthValue","maxHeightValue","maxImageDimensionsSelect","MAX_WIDTH","MAX_HEIGHT","$44ae6d9db4eaca0f$var$afterImageSelect","$44ae6d9db4eaca0f$var$handleImageLoad","$44ae6d9db4eaca0f$var$handleFileSelect","reader","FileReader","readAsDataURL","$44ae6d9db4eaca0f$var$handleTextPropChange","textboxId","textboxData","$44ae6d9db4eaca0f$var$handleImageUploadFromURL","form","submitButton","imageUrl","$44ae6d9db4eaca0f$var$moveTextUsingArrowbuttons","direction","offsetYInput","offsetXInput","$44ae6d9db4eaca0f$var$handleGalleryClick","button","img","alt","matches","textboxSettingsEl","currentTextboxEl","currentTextboxData","textboxToDelete","textboxIdInput","cancelAnimationFrame","galleryItems","errorMessage","capturePhotoComponent","reset","idx","browserSupportsTextareaTextNodes","canManipulateViaTextNodes","isSuccess","$442be162a818aed4$export$c37129e465f64ef0","isWebShareSupported","$e179325634270afd$export$30b344bef3e55b67","$e179325634270afd$var$styles","$e179325634270afd$var$template","buttonSlot","buttonEl","getButton","upgradeProperty","handleSlotChange","handleClick","instance","elementName","WebShare","$c290816263f90981$export$cc30a98fe3890794","$02ad8beec419df62$export$7d15b64cf5a3a4c4","lower","upper","$c290816263f90981$var$COMPONENT_NAME","$c290816263f90981$var$styles","$c290816263f90981$var$template","supportedConstraints","stream","canvasElement","outputElement","videoElement","captureButtonSlot","captureButton","facingModeButtonSlot","facingModeButton","trackCapabilities","trackSettings","emptyOutputElement","isValidFacingMode","x","widthInAllowedRange","heightInAllowedRange","panInAllowedRange","applyPTZ","tiltInAllowedRange","zoomInAllowedRange","getCaptureButton","getFacingModeButton","onVideoLoadedMetaData","onCaptureButtonSlotChange","onCapturePhotoButtonClick","onFacingModeButtonSlotChange","onFacingModeButtonClick","constraintName","constraintValue","track","constraints","eventDetail","CapturePhoto","$180b6dcf923bafc7$export$32589115725b904b","$180b6dcf923bafc7$var$template","$180b6dcf923bafc7$var$styles","dialogEl","footerSlotEl","closeSlotEl","pulseAnimationTimeout","headerEl","closeBtnEl","updateCloseLabel","handleDialogClick","handleDialogClose","handleDialogCancel","handleCloseButtonClick","handleFooterSlotChange","handleCloseSlotChange","closeButtonEl","hasTextContent","applyPulseEffectOnDialog","requestCloseEvent","createRequestCloseEvent","footerEl","footerSlotNodes","hasFooterSlotNodes","ModalElement","$862aa3736b0514bc$export$6ccd1735166caad9","$f31161edf38949e9$var$COMMON_MIME_TYPES","$f31161edf38949e9$var$FILES_TO_IGNORE","$f31161edf38949e9$var$toFileWithMimeType","hasExtension","extension","$f31161edf38949e9$var$toFileWithPath","fileWithMimeType","$f31161edf38949e9$var$readEntriesPromise","directoryReader","$f31161edf38949e9$var$readAllDirectoryEntries","$f31161edf38949e9$var$getFileFromFileEntry","fileEntry","$f31161edf38949e9$var$getFilesFromDataTransferItemList","dataTransferItemList","entry","$f31161edf38949e9$var$getFilesFromFileList","fileList","$f31161edf38949e9$export$6d52664cd15c442","$862aa3736b0514bc$var$COMPONENT_NAME","$862aa3736b0514bc$var$TOO_MANY_FILES","$862aa3736b0514bc$var$template","$862aa3736b0514bc$var$styles","fileInput","dropzoneEl","handleFileInputChange","handleDragEnter","handleDragOver","handleDragLeave","handleDrop","handleKeyUp","num","Infinity","handleFilesSelect","filesLength","fileHasValidType","acceptedTypeSpecifiers","acceptedMimeTypesList","fileMimeType","baseMimeType","validType","fileExceedsMaxSize","fileIsSmallerThanMinSize","FilesDropzone"],"version":3,"file":"index.598aa9dd.js.map"}